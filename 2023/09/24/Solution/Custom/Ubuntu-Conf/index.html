<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="ctf, solution, note, blog">
    
    <meta name="author" content="Forestsetyou">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    
    <!--- Seo Part-->
    
    <link rel="canonical" href="http://forestsetyou.github.io/2023/09/24/solution/custom/ubuntu-conf/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
        <meta name="description" content="false">
<meta property="og:type" content="article">
<meta property="og:title" content="Ubuntu-Conf">
<meta property="og:url" content="http://forestsetyou.github.io/2023/09/24/Solution/Custom/Ubuntu-Conf/index.html">
<meta property="og:site_name" content="Festu&#39;s Blog">
<meta property="og:description" content="false">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-09-24T09:04:00.000Z">
<meta property="article:modified_time" content="2023-09-29T06:09:00.000Z">
<meta property="article:author" content="Forestsetyou">
<meta property="article:tag" content="ctf, solution, note, blog">
<meta name="twitter:card" content="summary">
    
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="/hide_imgs/smiling_face.png" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="/hide_imgs/smiling_face.png">
    <meta name="theme-color" content="#A31F34">
    <link rel="shortcut icon" href="/hide_imgs/smiling_face.png">
    <!--- Page Info-->
    
    <title>
        
            Ubuntu-Conf -
        
        Festu&#39;s Blog
    </title><meta name="robots" content="noindex">

    
<link rel="stylesheet" href="/fonts/Chillax/chillax.css">


    <!--- Inject Part-->
    

    
        <style>
    :root {
        --preloader-background-color: #fff;
        --preloader-text-color: #000;
    }

    @media (prefers-color-scheme: dark) {
        :root {
            --preloader-background-color: #202124;
            --preloader-text-color: #fff;
        }
    }

    @media (prefers-color-scheme: light) {
        :root {
            --preloader-background-color: #fff;
            --preloader-text-color: #000;
        }
    }

    @media (max-width: 600px) {
        .ml13 {
            font-size: 2.6rem !important; /* Adjust this value as needed */
        }
    }

    .preloader {
        display: flex;
        flex-direction: column;
        gap: 1rem; /* Tailwind 'gap-4' is 1rem */
        align-items: center;
        justify-content: center;
        position: fixed;
        padding: 12px;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        width: 100vw;
        height: 100vh; /* 'h-screen' is 100% of the viewport height */
        background-color: var(--preloader-background-color);
        z-index: 1100; /* 'z-[1100]' sets the z-index */
        transition: opacity 0.2s ease-in-out;
    }

    .ml13 {
        font-size: 3.2rem;
        /* text-transform: uppercase; */
        color: var(--preloader-text-color);
        letter-spacing: -1px;
        font-weight: 500;
        font-family: 'Chillax-Variable', sans-serif;
        text-align: center;
    }

    .ml13 .word {
        display: inline-flex;
        flex-wrap: wrap;
        white-space: nowrap;
    }

    .ml13 .letter {
        display: inline-block;
        line-height: 1em;
    }
</style>

<div class="preloader">
    
<script src="/js/libs/anime.min.js"></script>

    <h1 class="ml13">
        Festu&#39;s Blog
    </h1>
    <script>
        var textWrapper = document.querySelector('.ml13');
        // Split text into words
        var words = textWrapper.textContent.trim().split(' ');

        // Clear the existing content
        textWrapper.innerHTML = '';

        // Wrap each word and its letters in spans
        words.forEach(function(word) {
            var wordSpan = document.createElement('span');
            wordSpan.classList.add('word');
            wordSpan.innerHTML = word.replace(/\S/g, "<span class='letter'>$&</span>");
            textWrapper.appendChild(wordSpan);
            textWrapper.appendChild(document.createTextNode(' ')); // Add space between words
        });


        anime.timeline({loop: true})
            .add({
                targets: '.ml13 .letter',
                translateY: [100,0],
                translateZ: 0,
                opacity: [0,1],
                easing: "easeOutExpo",
                duration: 1400,
                delay: (el, i) => 300 + 30 * i
            }).add({
            targets: '.ml13 .letter',
            translateY: [0,-100],
            opacity: [1,0],
            easing: "easeInExpo",
            duration: 1200,
            delay: (el, i) => 100 + 30 * i
        });

        let themeStatus = JSON.parse(localStorage.getItem('REDEFINE-THEME-STATUS'))?.isDark;

        // If the theme status is not found in local storage, check the preferred color scheme
        if (themeStatus === undefined || themeStatus === null) {
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                themeStatus = 'dark';
            } else {
                themeStatus = 'light';
            }
        }

        // Now you can use the themeStatus variable in your code
        if (themeStatus) {
            document.documentElement.style.setProperty('--preloader-background-color', '#202124');
            document.documentElement.style.setProperty('--preloader-text-color', '#fff');
        } else {
            document.documentElement.style.setProperty('--preloader-background-color', '#fff');
            document.documentElement.style.setProperty('--preloader-text-color', '#000');
        }

        window.addEventListener('load', function () {
            hidePreloaderAfterTimeout(1000); // Hide after 1000 milliseconds once the window has loaded
        });

        // Backup failsafe: Hide preloader after a maximum of 5000 milliseconds, regardless of the window load event
        hidePreloaderAfterTimeout(5000);

        function hidePreloaderAfterTimeout(delay) {
            setTimeout(function () {
                var preloader = document.querySelector('.preloader');
                preloader.style.opacity = '0';
                setTimeout(function () {
                    preloader.style.display = 'none';
                }, 200);
            }, delay);
        }
    </script>
</div>
    

    
<link rel="stylesheet" href="/css/style.css">


    
        
<link rel="stylesheet" href="/assets/build/styles.css">

    

    
<link rel="stylesheet" href="/fonts/fonts.css">

    
<link rel="stylesheet" href="/fonts/Satoshi/satoshi.css">

    <!--- Font Part-->
    
    
    
    


    <script id="hexo-configurations">
    window.config = {"hostname":"forestsetyou.github.io","root":"/","language":"en","path":"search.xml"};
    window.theme = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center","image_caption":false,"link_icon":true,"title_alignment":"left","headings_top_spacing":{"h1":"5rem","h2":"4rem","h3":"2.8rem","h4":"2.5rem","h5":"2.2rem","h6":"2rem"}},"word_count":{"enable":false,"count":true,"min2read":true},"author_label":{"enable":false,"auto":false,"list":[]},"code_block":{"copy":true,"style":"simple","font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":3,"number":false,"expand":true,"init_open":true},"copyright":{"enable":true,"default":"cc_by_nc_sa"},"lazyload":true,"recommendation":{"enable":false,"title":"推荐阅读","limit":3,"mobile_limit":2,"placeholder":"/images/wallhaven-wqery6-light.webp","skip_dirs":[]}},"colors":{"primary":"#A31F34","secondary":null,"default_mode":"light"},"global":{"fonts":{"chinese":{"enable":false,"family":null,"url":null},"english":{"enable":false,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":false},"scroll_progress":{"bar":false,"percentage":true},"website_counter":{"url":"https://cn.vercount.one/js","enable":false,"site_pv":true,"site_uv":true,"post_pv":true},"single_page":true,"preloader":true,"open_graph":true,"google_analytics":{"enable":false,"id":null}},"home_banner":{"enable":true,"style":"fixed","image":{"light":"/hide_imgs/light_banner-5.png","dark":"/hide_imgs/dark_banner.png"},"title":"Festu's Blog","subtitle":{"text":["Life Goes On."],"hitokoto":{"enable":false,"api":"https://v1.hitokoto.cn"},"typing_speed":100,"backing_speed":80,"starting_delay":500,"backing_delay":1500,"loop":false,"smart_backspace":false},"text_color":{"light":"#fff","dark":"#d1d1b6"},"text_style":{"title_size":"2.8rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":false,"family":null,"url":null},"social_links":{"enable":true,"style":"default","links":{"github":"https://github.com/Forestsetyou","instagram":null,"zhihu":null,"twitter":null,"email":null},"qrs":{"weixin":null}}},"plugins":{"feed":{"enable":false},"aplayer":{"enable":false,"type":"fixed","audios":[{"name":null,"artist":null,"url":null,"cover":null,"lrc":null}]},"mermaid":{"enable":false,"version":"9.3.0"}},"version":"2.6.1","navbar":{"auto_hide":false,"color":{"left":"#f78736","right":"#367df7","transparency":35},"width":{"home":"1200px","pages":"1000px"},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"categories":{"path":"/categories","icon":"fa-regular fa-folder"},"tags":{"path":"/tags","icon":"fa-regular fa-tags"}},"search":{"enable":true,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"blur"},"home":{"sidebar":{"enable":true,"position":"left","first_item":"menu","announcement":null,"show_on_mobile":true,"links":null},"article_date_format":"auto","categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":3}},"footerStart":"2024/03/11 03:27:59"};
    window.lang_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
    window.data = {"masonry":false};
  </script>
    
    <!--- Fontawesome Part-->
    
<link rel="stylesheet" href="/fontawesome/fontawesome.min.css">

    
<link rel="stylesheet" href="/fontawesome/brands.min.css">

    
<link rel="stylesheet" href="/fontawesome/solid.min.css">

    
<link rel="stylesheet" href="/fontawesome/regular.min.css">

    
    
    
    
<meta name="generator" content="Hexo 7.1.1"></head>


<body>
<div class="progress-bar-container">
    

    
        <span class="pjax-progress-bar"></span>
<!--        <span class="swup-progress-icon">-->
<!--            <i class="fa-solid fa-circle-notch fa-spin"></i>-->
<!--        </span>-->
    
</div>


<main class="page-container" id="swup">

    

    <div class="main-content-container">


        <div class="main-content-header">
            <header class="navbar-container px-6 md:px-12">

    <div class="navbar-content ">
        <div class="left">
            
                <a class="logo-image" href="/">
                    <img src="/hide_imgs/smiling_face.png">
                </a>
            
            <a class="logo-title" href="/">
                
                Festu&#39;s Blog
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/"
                                        >
                                    <i class="fa-regular fa-house fa-fw"></i>
                                    HOME
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/archives"
                                        >
                                    <i class="fa-regular fa-archive fa-fw"></i>
                                    ARCHIVES
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/categories"
                                        >
                                    <i class="fa-regular fa-folder fa-fw"></i>
                                    CATEGORIES
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/tags"
                                        >
                                    <i class="fa-regular fa-tags fa-fw"></i>
                                    TAGS
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                    
                        <li class="navbar-item search search-popup-trigger">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </li>
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i>
                    </div>
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile sheet -->
    <div class="navbar-drawer h-screen w-full absolute top-0 left-0 bg-background-color flex flex-col justify-between">
        <ul class="drawer-navbar-list flex flex-col px-4 justify-center items-start">
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/"
                        >
                            <span>
                                HOME
                            </span>
                            
                                <i class="fa-regular fa-house fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/archives"
                        >
                            <span>
                                ARCHIVES
                            </span>
                            
                                <i class="fa-regular fa-archive fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/categories"
                        >
                            <span>
                                CATEGORIES
                            </span>
                            
                                <i class="fa-regular fa-folder fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/tags"
                        >
                            <span>
                                TAGS
                            </span>
                            
                                <i class="fa-regular fa-tags fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            

            
            
        </ul>

        <div class="statistics flex justify-around my-2.5">
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/tags">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">1</div>
        <div class="label text-third-text-color text-sm">Tags</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/categories">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">10</div>
        <div class="label text-third-text-color text-sm">Categories</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/archives">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">15</div>
        <div class="label text-third-text-color text-sm">Posts</div>
    </a>
</div>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="main-content-body">

            

            <div class="main-content">

                
                    <div class="post-page-container flex relative justify-between box-border w-full h-full">
    <div class="article-content-container">

        <div class="article-title relative w-full">
            
                
                
                <img src="/hide_imgs/post_thumbnail.png" alt="Ubuntu-Conf" class="w-full h-60 sm:h-72 md:h-80 object-cover sm:rounded-t-large dark:brightness-75"/>
                
                <div class="w-full flex items-center absolute bottom-0 justify-start">
                    <h1 class="article-title-cover text-center mx-6 my-6 text-second-text-color bg-background-color-transparent px-4 py-3 text-3xl sm:text-4xl md:text-5xl font-bold backdrop-blur-lg rounded-xl border border-border-color ">Ubuntu-Conf</h1>
                </div>
            
            </div>

        
            <div class="article-header flex flex-row gap-2 items-center px-2 sm:px-6 md:px-8">
                <div class="avatar w-[46px] h-[46px] flex-shrink-0 rounded-medium border border-border-color p-[1px]">
                    <img src="/hide_imgs/avatar.png">
                </div>
                <div class="info flex flex-col justify-between">
                    <div class="author flex items-center">
                        <span class="name text-default-text-color text-lg font-semibold">Forestsetyou</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2023-09-24 17:04</span>
        <span class="mobile">2023-09-24 17:04</span>
        <span class="hover-info">Created</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2023-09-29 14:09</span>
            <span class="mobile">2023-09-29 14:09</span>
            <span class="hover-info">Updated</span>
        </span>
    

    
        <span class="article-categories article-meta-item">
            <i class="fa-regular fa-folders"></i>&nbsp;
            <ul>
                
                
                    
                        
                        <li>
                            <a href="/categories/Solution/">Solution</a>&nbsp;
                        </li>
                    
                    
                
                    
                        
                            <li>></li>
                        
                        <li>
                            <a href="/categories/Solution/Custom/">Custom</a>&nbsp;
                        </li>
                    
                    
                
            </ul>
        </span>
    
    

    
    
    
    
</div>

                    </div>
                </div>
            </div>
        

        


        <div class="article-content markdown-body px-2 sm:px-6 md:px-8 pb-8">
            <h1 id="Ubuntu-Conf"><a href="#Ubuntu-Conf" class="headerlink" title="Ubuntu Conf"></a>Ubuntu Conf</h1><h2 id="软件源信息"><a href="#软件源信息" class="headerlink" title="软件源信息"></a>软件源信息</h2><h3 id="v2204"><a href="#v2204" class="headerlink" title="v2204"></a>v2204</h3><p>滚动版默认最新，2023&#x2F;09&#x2F;24 也用这个。</p>
<p>清华源需要证书。</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"># 清华源</span><br><span class="line"># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-security main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-security main restricted universe multiverse</span><br><span class="line"></span><br><span class="line"># 预发布软件源，不建议启用</span><br><span class="line"># deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse</span><br><span class="line"></span><br><span class="line"># 阿里源</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ jammy main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ jammy main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ jammy-security main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ jammy-security main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ jammy-updates main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ jammy-updates main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ jammy-proposed main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ jammy-proposed main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ jammy-backports main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ jammy-backports main restricted universe multiverse</span><br><span class="line"></span><br><span class="line"># 中科大源</span><br><span class="line">deb https://mirrors.ustc.edu.cn/ubuntu/ jammy main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy main restricted universe multiverse</span><br><span class="line">deb https://mirrors.ustc.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse</span><br><span class="line">deb https://mirrors.ustc.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse</span><br><span class="line">deb https://mirrors.ustc.edu.cn/ubuntu/ jammy-security main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy-security main restricted universe multiverse</span><br><span class="line">deb https://mirrors.ustc.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse</span><br><span class="line"></span><br><span class="line"># 网易源</span><br><span class="line">deb http://mirrors.163.com/ubuntu/ jammy main restricted universe multiverse</span><br><span class="line">deb http://mirrors.163.com/ubuntu/ jammy-security main restricted universe multiverse</span><br><span class="line">deb http://mirrors.163.com/ubuntu/ jammy-updates main restricted universe multiverse</span><br><span class="line">deb http://mirrors.163.com/ubuntu/ jammy-proposed main restricted universe multiverse</span><br><span class="line">deb http://mirrors.163.com/ubuntu/ jammy-backports main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.163.com/ubuntu/ jammy main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.163.com/ubuntu/ jammy-security main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.163.com/ubuntu/ jammy-updates main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.163.com/ubuntu/ jammy-proposed main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.163.com/ubuntu/ jammy-backports main restricted universe multiverse</span><br></pre></td></tr></table></figure></div>

<h2 id="WSL-Ubuntu"><a href="#WSL-Ubuntu" class="headerlink" title="WSL-Ubuntu"></a>WSL-Ubuntu</h2><p><strong>简介：</strong></p>
<p>为了快速配置自己的 Ubuntu 环境，编写了脚本来实现。</p>
<p>由于其中大部分的配置文件是通过 <code>echo</code> 来配置的，这些配置信息很多，如果用字符串常量会导致脚本特别长且混乱，因此准备一个模块文件”preSource.sh”用于预加载一些内容，而主模块脚本”myUbuntu.sh”可以关注更重要的内容。</p>
<p>目前该脚本适配 WSL-Ubuntu（rolling&#x2F;22.04），对于 WSL 中其他版本的 Ubuntu 只需要注意源版本即可（未测试，应该没什么问题）。</p>
<p>对于 Docker 中的 Ubuntu 镜像，配置逻辑与语句是完全可用的，但由于镜像中可能有额外的内容需要配置，因此直接运行脚本并不能达到预期的效果。</p>
<hr>
<p><strong>使用：</strong>将两个脚本复制到用户的家目录下，赋予其可执行权限，随后以 root 权限执行即可。</p>
<p>文件可以放在 root 用户或普通用户的家目录下运行，但要求 <code>/home/</code> 下至少要有一个用户家目录，且该脚本只会配置其中<strong>最靠前</strong>（指用 <code>ls /home/ | ...</code> 获取的用户名）的一个。</p>
<hr>
<h3 id="myUbuntu-sh"><a href="#myUbuntu-sh" class="headerlink" title="myUbuntu.sh"></a>myUbuntu.sh</h3><div class="highlight-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建报错日志,重定向所有标准错误</span></span><br><span class="line"><span class="comment"># 报错日志的拥有者须是默认用户才能保证所有错误信息都正常写入</span></span><br><span class="line"><span class="comment"># su - $pre_user -c &quot;echo &#x27;&#x27; &gt; /home/$&#123;pre_user&#125;/errLog&quot;</span></span><br><span class="line"><span class="built_in">exec</span> 2&gt;&gt;/dev/null</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加载配置信息</span></span><br><span class="line"><span class="built_in">source</span> preSource.sh &gt; /dev/null</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;默认用户: <span class="variable">$pre_user</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查 root 权限并修改密码</span></span><br><span class="line">root_check</span><br><span class="line">root_passwd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开始配置公共环境</span></span><br><span class="line">my_print <span class="string">&quot;开始初始化&quot;</span></span><br><span class="line">my_print <span class="string">&quot;更换至『阿里软件源』&quot;</span></span><br><span class="line"><span class="built_in">mv</span> /etc/apt/sources.list /etc/apt/sources.list.bak &gt; /dev/null</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$pre_source</span>&quot;</span> &gt; /etc/apt/sources.list</span><br><span class="line">my_print <span class="string">&quot;更新包管理器&quot;</span></span><br><span class="line">apt update &gt; /dev/null</span><br><span class="line">my_print <span class="string">&quot;更新已安装的软件包&quot;</span></span><br><span class="line">apt -y upgrade &gt; /dev/null</span><br><span class="line"></span><br><span class="line"><span class="comment"># if [[ -z $1 || $1!=&quot;-y&quot; ]];then    # 询问是否更新</span></span><br><span class="line"><span class="comment">#     read -p &quot;Need upgrade?(Y|N) &quot; opt</span></span><br><span class="line"><span class="comment">#     case $(echo &quot;$opt&quot; | tr [A-Z] [a-z]) in</span></span><br><span class="line"><span class="comment">#         y|yes)</span></span><br><span class="line"><span class="comment">#             apt -y upgrade &gt; /dev/null 2&gt;&gt;./errLog</span></span><br><span class="line"><span class="comment">#             ;;</span></span><br><span class="line"><span class="comment">#         n|no)</span></span><br><span class="line"><span class="comment">#             echo &quot;No Upgrade&quot;</span></span><br><span class="line"><span class="comment">#             ;;</span></span><br><span class="line"><span class="comment">#     esac</span></span><br><span class="line"><span class="comment"># fi</span></span><br><span class="line"></span><br><span class="line">my_print <span class="string">&quot;预装软件&quot;</span></span><br><span class="line">apt install -y findutils apt-utils &gt; /dev/null   <span class="comment"># 包括了 xargs 与 apt 的维护扩展</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$pre_software</span>&quot;</span> | xargs apt -y install &gt; /dev/null</span><br><span class="line"></span><br><span class="line">my_print <span class="string">&quot;安装额外工具&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$pre_tools</span>&quot;</span> | xargs apt -y install &gt; /dev/null</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开始配置个人用户文件</span></span><br><span class="line">my_print <span class="string">&quot;为默认用户配置 dircolors 色彩&quot;</span></span><br><span class="line">su - <span class="variable">$pre_user</span> -c <span class="string">&quot;<span class="variable">$pre_double_dircolors</span>&quot;</span></span><br><span class="line"></span><br><span class="line">my_print <span class="string">&quot;为默认用户配置 zsh&quot;</span></span><br><span class="line">su - <span class="variable">$pre_user</span> -c <span class="string">&quot;</span></span><br><span class="line"><span class="string">    chsh -s /usr/bin/zsh &lt;&lt;- EOF &gt; /dev/null</span></span><br><span class="line"><span class="string"><span class="variable">$pre_passwd</span></span></span><br><span class="line"><span class="string"><span class="variable">$pre_passwd</span></span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"><span class="string">    mkdir -p ~/Documents/powerlevel10k &gt; /dev/null</span></span><br><span class="line"><span class="string">    git clone https://gitee.com/insanemac/powerlevel10k.git ~/Documents/powerlevel10k/ &lt;&lt;- EOF &gt; /dev/null</span></span><br><span class="line"><span class="string">&quot;</span></span><br><span class="line">su - <span class="variable">$pre_user</span> -c <span class="string">&quot;<span class="variable">$pre_double_zshrc</span>&quot;</span></span><br><span class="line"></span><br><span class="line">my_print <span class="string">&quot;为默认用户配置 p10k 主题&quot;</span></span><br><span class="line">su - <span class="variable">$pre_user</span> -c <span class="string">&quot;<span class="variable">$pre_double_p10k</span>&quot;</span></span><br><span class="line"></span><br><span class="line">my_print <span class="string">&quot;为默认用户配置 Vim 与 Vim-Plug&quot;</span></span><br><span class="line">su - <span class="variable">$pre_user</span> -c <span class="string">&quot;<span class="variable">$pre_double_vimrc</span>&quot;</span></span><br><span class="line">su - <span class="variable">$pre_user</span> -c <span class="string">&quot;<span class="variable">$pre_double_vimplug</span>&quot;</span></span><br><span class="line">su - <span class="variable">$pre_user</span> -c <span class="string">&quot;source ~/.vimrc &gt; /dev/null&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 延迟时间用于配置的加载与插件的下载安装</span></span><br><span class="line">su - <span class="variable">$pre_user</span> -c <span class="string">&quot;</span></span><br><span class="line"><span class="string">vim &lt;&lt;- EOF &gt; /dev/null</span></span><br><span class="line"><span class="string">:!sleep 1</span></span><br><span class="line"><span class="string">:PlugInstall</span></span><br><span class="line"><span class="string">:!sleep 5</span></span><br><span class="line"><span class="string">:q</span></span><br><span class="line"><span class="string">:q</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"><span class="string">&quot;</span></span><br><span class="line"></span><br><span class="line">my_print <span class="string">&quot;为默认用户配置 Pyenv&quot;</span></span><br><span class="line">su - <span class="variable">$pre_user</span> -c <span class="string">&quot;</span></span><br><span class="line"><span class="string">    curl https://pyenv.run | bash &gt; /dev/null</span></span><br><span class="line"><span class="string">    echo &#x27;export PYENV_ROOT=\&quot;\$HOME/.pyenv\&quot;&#x27; &gt;&gt; ~/.zshrc</span></span><br><span class="line"><span class="string">    echo &#x27;command -v pyenv &gt;/dev/null || export PATH=\&quot;\$PYENV_ROOT/bin:\$PATH\&quot;&#x27; &gt;&gt; ~/.zshrc</span></span><br><span class="line"><span class="string">    echo &#x27;eval \&quot;\$(pyenv init -)\&quot;&#x27; &gt;&gt; ~/.zshrc</span></span><br><span class="line"><span class="string">&quot;</span></span><br><span class="line">apt install -y build-essential libssl-dev zlib1g-dev libbz2-dev libreadline-dev libsqlite3-dev curl libncursesw5-dev xz-utils tk-dev libxml2-dev libxmlsec1-dev libffi-dev liblzma-dev &gt; /dev/null</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置 root 环境</span></span><br><span class="line"></span><br><span class="line">my_print <span class="string">&quot;为 root 用户配置 Vim 与 Vim-Plug&quot;</span></span><br><span class="line">su - -c <span class="string">&quot;<span class="variable">$pre_double_vimrc</span>&quot;</span></span><br><span class="line">su - -c <span class="string">&quot;<span class="variable">$pre_double_vimplug</span>&quot;</span></span><br><span class="line">su - -c <span class="string">&quot;source ~/.vimrc &gt; /dev/null&quot;</span></span><br><span class="line">su - -c <span class="string">&quot;</span></span><br><span class="line"><span class="string">vim &lt;&lt;- EOF &gt; /dev/null</span></span><br><span class="line"><span class="string">:!sleep 1</span></span><br><span class="line"><span class="string">:PlugInstall</span></span><br><span class="line"><span class="string">:!sleep 5</span></span><br><span class="line"><span class="string">:q</span></span><br><span class="line"><span class="string">:q</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"><span class="string">&quot;</span></span><br><span class="line"></span><br><span class="line">my_print <span class="string">&quot;初始化成功,请重启&quot;</span></span><br></pre></td></tr></table></figure></div>

<h3 id="preSource-sh"><a href="#preSource-sh" class="headerlink" title="preSource.sh"></a>preSource.sh</h3><div class="highlight-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br><span class="line">1338</span><br><span class="line">1339</span><br><span class="line">1340</span><br><span class="line">1341</span><br><span class="line">1342</span><br><span class="line">1343</span><br><span class="line">1344</span><br><span class="line">1345</span><br><span class="line">1346</span><br><span class="line">1347</span><br><span class="line">1348</span><br><span class="line">1349</span><br><span class="line">1350</span><br><span class="line">1351</span><br><span class="line">1352</span><br><span class="line">1353</span><br><span class="line">1354</span><br><span class="line">1355</span><br><span class="line">1356</span><br><span class="line">1357</span><br><span class="line">1358</span><br><span class="line">1359</span><br><span class="line">1360</span><br><span class="line">1361</span><br><span class="line">1362</span><br><span class="line">1363</span><br><span class="line">1364</span><br><span class="line">1365</span><br><span class="line">1366</span><br><span class="line">1367</span><br><span class="line">1368</span><br><span class="line">1369</span><br><span class="line">1370</span><br><span class="line">1371</span><br><span class="line">1372</span><br><span class="line">1373</span><br><span class="line">1374</span><br><span class="line">1375</span><br><span class="line">1376</span><br><span class="line">1377</span><br><span class="line">1378</span><br><span class="line">1379</span><br><span class="line">1380</span><br><span class="line">1381</span><br><span class="line">1382</span><br><span class="line">1383</span><br><span class="line">1384</span><br><span class="line">1385</span><br><span class="line">1386</span><br><span class="line">1387</span><br><span class="line">1388</span><br><span class="line">1389</span><br><span class="line">1390</span><br><span class="line">1391</span><br><span class="line">1392</span><br><span class="line">1393</span><br><span class="line">1394</span><br><span class="line">1395</span><br><span class="line">1396</span><br><span class="line">1397</span><br><span class="line">1398</span><br><span class="line">1399</span><br><span class="line">1400</span><br><span class="line">1401</span><br><span class="line">1402</span><br><span class="line">1403</span><br><span class="line">1404</span><br><span class="line">1405</span><br><span class="line">1406</span><br><span class="line">1407</span><br><span class="line">1408</span><br><span class="line">1409</span><br><span class="line">1410</span><br><span class="line">1411</span><br><span class="line">1412</span><br><span class="line">1413</span><br><span class="line">1414</span><br><span class="line">1415</span><br><span class="line">1416</span><br><span class="line">1417</span><br><span class="line">1418</span><br><span class="line">1419</span><br><span class="line">1420</span><br><span class="line">1421</span><br><span class="line">1422</span><br><span class="line">1423</span><br><span class="line">1424</span><br><span class="line">1425</span><br><span class="line">1426</span><br><span class="line">1427</span><br><span class="line">1428</span><br><span class="line">1429</span><br><span class="line">1430</span><br><span class="line">1431</span><br><span class="line">1432</span><br><span class="line">1433</span><br><span class="line">1434</span><br><span class="line">1435</span><br><span class="line">1436</span><br><span class="line">1437</span><br><span class="line">1438</span><br><span class="line">1439</span><br><span class="line">1440</span><br><span class="line">1441</span><br><span class="line">1442</span><br><span class="line">1443</span><br><span class="line">1444</span><br><span class="line">1445</span><br><span class="line">1446</span><br><span class="line">1447</span><br><span class="line">1448</span><br><span class="line">1449</span><br><span class="line">1450</span><br><span class="line">1451</span><br><span class="line">1452</span><br><span class="line">1453</span><br><span class="line">1454</span><br><span class="line">1455</span><br><span class="line">1456</span><br><span class="line">1457</span><br><span class="line">1458</span><br><span class="line">1459</span><br><span class="line">1460</span><br><span class="line">1461</span><br><span class="line">1462</span><br><span class="line">1463</span><br><span class="line">1464</span><br><span class="line">1465</span><br><span class="line">1466</span><br><span class="line">1467</span><br><span class="line">1468</span><br><span class="line">1469</span><br><span class="line">1470</span><br><span class="line">1471</span><br><span class="line">1472</span><br><span class="line">1473</span><br><span class="line">1474</span><br><span class="line">1475</span><br><span class="line">1476</span><br><span class="line">1477</span><br><span class="line">1478</span><br><span class="line">1479</span><br><span class="line">1480</span><br><span class="line">1481</span><br><span class="line">1482</span><br><span class="line">1483</span><br><span class="line">1484</span><br><span class="line">1485</span><br><span class="line">1486</span><br><span class="line">1487</span><br><span class="line">1488</span><br><span class="line">1489</span><br><span class="line">1490</span><br><span class="line">1491</span><br><span class="line">1492</span><br><span class="line">1493</span><br><span class="line">1494</span><br><span class="line">1495</span><br><span class="line">1496</span><br><span class="line">1497</span><br><span class="line">1498</span><br><span class="line">1499</span><br><span class="line">1500</span><br><span class="line">1501</span><br><span class="line">1502</span><br><span class="line">1503</span><br><span class="line">1504</span><br><span class="line">1505</span><br><span class="line">1506</span><br><span class="line">1507</span><br><span class="line">1508</span><br><span class="line">1509</span><br><span class="line">1510</span><br><span class="line">1511</span><br><span class="line">1512</span><br><span class="line">1513</span><br><span class="line">1514</span><br><span class="line">1515</span><br><span class="line">1516</span><br><span class="line">1517</span><br><span class="line">1518</span><br><span class="line">1519</span><br><span class="line">1520</span><br><span class="line">1521</span><br><span class="line">1522</span><br><span class="line">1523</span><br><span class="line">1524</span><br><span class="line">1525</span><br><span class="line">1526</span><br><span class="line">1527</span><br><span class="line">1528</span><br><span class="line">1529</span><br><span class="line">1530</span><br><span class="line">1531</span><br><span class="line">1532</span><br><span class="line">1533</span><br><span class="line">1534</span><br><span class="line">1535</span><br><span class="line">1536</span><br><span class="line">1537</span><br><span class="line">1538</span><br><span class="line">1539</span><br><span class="line">1540</span><br><span class="line">1541</span><br><span class="line">1542</span><br><span class="line">1543</span><br><span class="line">1544</span><br><span class="line">1545</span><br><span class="line">1546</span><br><span class="line">1547</span><br><span class="line">1548</span><br><span class="line">1549</span><br><span class="line">1550</span><br><span class="line">1551</span><br><span class="line">1552</span><br><span class="line">1553</span><br><span class="line">1554</span><br><span class="line">1555</span><br><span class="line">1556</span><br><span class="line">1557</span><br><span class="line">1558</span><br><span class="line">1559</span><br><span class="line">1560</span><br><span class="line">1561</span><br><span class="line">1562</span><br><span class="line">1563</span><br><span class="line">1564</span><br><span class="line">1565</span><br><span class="line">1566</span><br><span class="line">1567</span><br><span class="line">1568</span><br><span class="line">1569</span><br><span class="line">1570</span><br><span class="line">1571</span><br><span class="line">1572</span><br><span class="line">1573</span><br><span class="line">1574</span><br><span class="line">1575</span><br><span class="line">1576</span><br><span class="line">1577</span><br><span class="line">1578</span><br><span class="line">1579</span><br><span class="line">1580</span><br><span class="line">1581</span><br><span class="line">1582</span><br><span class="line">1583</span><br><span class="line">1584</span><br><span class="line">1585</span><br><span class="line">1586</span><br><span class="line">1587</span><br><span class="line">1588</span><br><span class="line">1589</span><br><span class="line">1590</span><br><span class="line">1591</span><br><span class="line">1592</span><br><span class="line">1593</span><br><span class="line">1594</span><br><span class="line">1595</span><br><span class="line">1596</span><br><span class="line">1597</span><br><span class="line">1598</span><br><span class="line">1599</span><br><span class="line">1600</span><br><span class="line">1601</span><br><span class="line">1602</span><br><span class="line">1603</span><br><span class="line">1604</span><br><span class="line">1605</span><br><span class="line">1606</span><br><span class="line">1607</span><br><span class="line">1608</span><br><span class="line">1609</span><br><span class="line">1610</span><br><span class="line">1611</span><br><span class="line">1612</span><br><span class="line">1613</span><br><span class="line">1614</span><br><span class="line">1615</span><br><span class="line">1616</span><br><span class="line">1617</span><br><span class="line">1618</span><br><span class="line">1619</span><br><span class="line">1620</span><br><span class="line">1621</span><br><span class="line">1622</span><br><span class="line">1623</span><br><span class="line">1624</span><br><span class="line">1625</span><br><span class="line">1626</span><br><span class="line">1627</span><br><span class="line">1628</span><br><span class="line">1629</span><br><span class="line">1630</span><br><span class="line">1631</span><br><span class="line">1632</span><br><span class="line">1633</span><br><span class="line">1634</span><br><span class="line">1635</span><br><span class="line">1636</span><br><span class="line">1637</span><br><span class="line">1638</span><br><span class="line">1639</span><br><span class="line">1640</span><br><span class="line">1641</span><br><span class="line">1642</span><br><span class="line">1643</span><br><span class="line">1644</span><br><span class="line">1645</span><br><span class="line">1646</span><br><span class="line">1647</span><br><span class="line">1648</span><br><span class="line">1649</span><br><span class="line">1650</span><br><span class="line">1651</span><br><span class="line">1652</span><br><span class="line">1653</span><br><span class="line">1654</span><br><span class="line">1655</span><br><span class="line">1656</span><br><span class="line">1657</span><br><span class="line">1658</span><br><span class="line">1659</span><br><span class="line">1660</span><br><span class="line">1661</span><br><span class="line">1662</span><br><span class="line">1663</span><br><span class="line">1664</span><br><span class="line">1665</span><br><span class="line">1666</span><br><span class="line">1667</span><br><span class="line">1668</span><br><span class="line">1669</span><br><span class="line">1670</span><br><span class="line">1671</span><br><span class="line">1672</span><br><span class="line">1673</span><br><span class="line">1674</span><br><span class="line">1675</span><br><span class="line">1676</span><br><span class="line">1677</span><br><span class="line">1678</span><br><span class="line">1679</span><br><span class="line">1680</span><br><span class="line">1681</span><br><span class="line">1682</span><br><span class="line">1683</span><br><span class="line">1684</span><br><span class="line">1685</span><br><span class="line">1686</span><br><span class="line">1687</span><br><span class="line">1688</span><br><span class="line">1689</span><br><span class="line">1690</span><br><span class="line">1691</span><br><span class="line">1692</span><br><span class="line">1693</span><br><span class="line">1694</span><br><span class="line">1695</span><br><span class="line">1696</span><br><span class="line">1697</span><br><span class="line">1698</span><br><span class="line">1699</span><br><span class="line">1700</span><br><span class="line">1701</span><br><span class="line">1702</span><br><span class="line">1703</span><br><span class="line">1704</span><br><span class="line">1705</span><br><span class="line">1706</span><br><span class="line">1707</span><br><span class="line">1708</span><br><span class="line">1709</span><br><span class="line">1710</span><br><span class="line">1711</span><br><span class="line">1712</span><br><span class="line">1713</span><br><span class="line">1714</span><br><span class="line">1715</span><br><span class="line">1716</span><br><span class="line">1717</span><br><span class="line">1718</span><br><span class="line">1719</span><br><span class="line">1720</span><br><span class="line">1721</span><br><span class="line">1722</span><br><span class="line">1723</span><br><span class="line">1724</span><br><span class="line">1725</span><br><span class="line">1726</span><br><span class="line">1727</span><br><span class="line">1728</span><br><span class="line">1729</span><br><span class="line">1730</span><br><span class="line">1731</span><br><span class="line">1732</span><br><span class="line">1733</span><br><span class="line">1734</span><br><span class="line">1735</span><br><span class="line">1736</span><br><span class="line">1737</span><br><span class="line">1738</span><br><span class="line">1739</span><br><span class="line">1740</span><br><span class="line">1741</span><br><span class="line">1742</span><br><span class="line">1743</span><br><span class="line">1744</span><br><span class="line">1745</span><br><span class="line">1746</span><br><span class="line">1747</span><br><span class="line">1748</span><br><span class="line">1749</span><br><span class="line">1750</span><br><span class="line">1751</span><br><span class="line">1752</span><br><span class="line">1753</span><br><span class="line">1754</span><br><span class="line">1755</span><br><span class="line">1756</span><br><span class="line">1757</span><br><span class="line">1758</span><br><span class="line">1759</span><br><span class="line">1760</span><br><span class="line">1761</span><br><span class="line">1762</span><br><span class="line">1763</span><br><span class="line">1764</span><br><span class="line">1765</span><br><span class="line">1766</span><br><span class="line">1767</span><br><span class="line">1768</span><br><span class="line">1769</span><br><span class="line">1770</span><br><span class="line">1771</span><br><span class="line">1772</span><br><span class="line">1773</span><br><span class="line">1774</span><br><span class="line">1775</span><br><span class="line">1776</span><br><span class="line">1777</span><br><span class="line">1778</span><br><span class="line">1779</span><br><span class="line">1780</span><br><span class="line">1781</span><br><span class="line">1782</span><br><span class="line">1783</span><br><span class="line">1784</span><br><span class="line">1785</span><br><span class="line">1786</span><br><span class="line">1787</span><br><span class="line">1788</span><br><span class="line">1789</span><br><span class="line">1790</span><br><span class="line">1791</span><br><span class="line">1792</span><br><span class="line">1793</span><br><span class="line">1794</span><br><span class="line">1795</span><br><span class="line">1796</span><br><span class="line">1797</span><br><span class="line">1798</span><br><span class="line">1799</span><br><span class="line">1800</span><br><span class="line">1801</span><br><span class="line">1802</span><br><span class="line">1803</span><br><span class="line">1804</span><br><span class="line">1805</span><br><span class="line">1806</span><br><span class="line">1807</span><br><span class="line">1808</span><br><span class="line">1809</span><br><span class="line">1810</span><br><span class="line">1811</span><br><span class="line">1812</span><br><span class="line">1813</span><br><span class="line">1814</span><br><span class="line">1815</span><br><span class="line">1816</span><br><span class="line">1817</span><br><span class="line">1818</span><br><span class="line">1819</span><br><span class="line">1820</span><br><span class="line">1821</span><br><span class="line">1822</span><br><span class="line">1823</span><br><span class="line">1824</span><br><span class="line">1825</span><br><span class="line">1826</span><br><span class="line">1827</span><br><span class="line">1828</span><br><span class="line">1829</span><br><span class="line">1830</span><br><span class="line">1831</span><br><span class="line">1832</span><br><span class="line">1833</span><br><span class="line">1834</span><br><span class="line">1835</span><br><span class="line">1836</span><br><span class="line">1837</span><br><span class="line">1838</span><br><span class="line">1839</span><br><span class="line">1840</span><br><span class="line">1841</span><br><span class="line">1842</span><br><span class="line">1843</span><br><span class="line">1844</span><br><span class="line">1845</span><br><span class="line">1846</span><br><span class="line">1847</span><br><span class="line">1848</span><br><span class="line">1849</span><br><span class="line">1850</span><br><span class="line">1851</span><br><span class="line">1852</span><br><span class="line">1853</span><br><span class="line">1854</span><br><span class="line">1855</span><br><span class="line">1856</span><br><span class="line">1857</span><br><span class="line">1858</span><br><span class="line">1859</span><br><span class="line">1860</span><br><span class="line">1861</span><br><span class="line">1862</span><br><span class="line">1863</span><br><span class="line">1864</span><br><span class="line">1865</span><br><span class="line">1866</span><br><span class="line">1867</span><br><span class="line">1868</span><br><span class="line">1869</span><br><span class="line">1870</span><br><span class="line">1871</span><br><span class="line">1872</span><br><span class="line">1873</span><br><span class="line">1874</span><br><span class="line">1875</span><br><span class="line">1876</span><br><span class="line">1877</span><br><span class="line">1878</span><br><span class="line">1879</span><br><span class="line">1880</span><br><span class="line">1881</span><br><span class="line">1882</span><br><span class="line">1883</span><br><span class="line">1884</span><br><span class="line">1885</span><br><span class="line">1886</span><br><span class="line">1887</span><br><span class="line">1888</span><br><span class="line">1889</span><br><span class="line">1890</span><br><span class="line">1891</span><br><span class="line">1892</span><br><span class="line">1893</span><br><span class="line">1894</span><br><span class="line">1895</span><br><span class="line">1896</span><br><span class="line">1897</span><br><span class="line">1898</span><br><span class="line">1899</span><br><span class="line">1900</span><br><span class="line">1901</span><br><span class="line">1902</span><br><span class="line">1903</span><br><span class="line">1904</span><br><span class="line">1905</span><br><span class="line">1906</span><br><span class="line">1907</span><br><span class="line">1908</span><br><span class="line">1909</span><br><span class="line">1910</span><br><span class="line">1911</span><br><span class="line">1912</span><br><span class="line">1913</span><br><span class="line">1914</span><br><span class="line">1915</span><br><span class="line">1916</span><br><span class="line">1917</span><br><span class="line">1918</span><br><span class="line">1919</span><br><span class="line">1920</span><br><span class="line">1921</span><br><span class="line">1922</span><br><span class="line">1923</span><br><span class="line">1924</span><br><span class="line">1925</span><br><span class="line">1926</span><br><span class="line">1927</span><br><span class="line">1928</span><br><span class="line">1929</span><br><span class="line">1930</span><br><span class="line">1931</span><br><span class="line">1932</span><br><span class="line">1933</span><br><span class="line">1934</span><br><span class="line">1935</span><br><span class="line">1936</span><br><span class="line">1937</span><br><span class="line">1938</span><br><span class="line">1939</span><br><span class="line">1940</span><br><span class="line">1941</span><br><span class="line">1942</span><br><span class="line">1943</span><br><span class="line">1944</span><br><span class="line">1945</span><br><span class="line">1946</span><br><span class="line">1947</span><br><span class="line">1948</span><br><span class="line">1949</span><br><span class="line">1950</span><br><span class="line">1951</span><br><span class="line">1952</span><br><span class="line">1953</span><br><span class="line">1954</span><br><span class="line">1955</span><br><span class="line">1956</span><br><span class="line">1957</span><br><span class="line">1958</span><br><span class="line">1959</span><br><span class="line">1960</span><br><span class="line">1961</span><br><span class="line">1962</span><br><span class="line">1963</span><br><span class="line">1964</span><br><span class="line">1965</span><br><span class="line">1966</span><br><span class="line">1967</span><br><span class="line">1968</span><br><span class="line">1969</span><br><span class="line">1970</span><br><span class="line">1971</span><br><span class="line">1972</span><br><span class="line">1973</span><br><span class="line">1974</span><br><span class="line">1975</span><br><span class="line">1976</span><br><span class="line">1977</span><br><span class="line">1978</span><br><span class="line">1979</span><br><span class="line">1980</span><br><span class="line">1981</span><br><span class="line">1982</span><br><span class="line">1983</span><br><span class="line">1984</span><br><span class="line">1985</span><br><span class="line">1986</span><br><span class="line">1987</span><br><span class="line">1988</span><br><span class="line">1989</span><br><span class="line">1990</span><br><span class="line">1991</span><br><span class="line">1992</span><br><span class="line">1993</span><br><span class="line">1994</span><br><span class="line">1995</span><br><span class="line">1996</span><br><span class="line">1997</span><br><span class="line">1998</span><br><span class="line">1999</span><br><span class="line">2000</span><br><span class="line">2001</span><br><span class="line">2002</span><br><span class="line">2003</span><br><span class="line">2004</span><br><span class="line">2005</span><br><span class="line">2006</span><br><span class="line">2007</span><br><span class="line">2008</span><br><span class="line">2009</span><br><span class="line">2010</span><br><span class="line">2011</span><br><span class="line">2012</span><br><span class="line">2013</span><br><span class="line">2014</span><br><span class="line">2015</span><br><span class="line">2016</span><br><span class="line">2017</span><br><span class="line">2018</span><br><span class="line">2019</span><br><span class="line">2020</span><br><span class="line">2021</span><br><span class="line">2022</span><br><span class="line">2023</span><br><span class="line">2024</span><br><span class="line">2025</span><br><span class="line">2026</span><br><span class="line">2027</span><br><span class="line">2028</span><br><span class="line">2029</span><br><span class="line">2030</span><br><span class="line">2031</span><br><span class="line">2032</span><br><span class="line">2033</span><br><span class="line">2034</span><br><span class="line">2035</span><br><span class="line">2036</span><br><span class="line">2037</span><br><span class="line">2038</span><br><span class="line">2039</span><br><span class="line">2040</span><br><span class="line">2041</span><br><span class="line">2042</span><br><span class="line">2043</span><br><span class="line">2044</span><br><span class="line">2045</span><br><span class="line">2046</span><br><span class="line">2047</span><br><span class="line">2048</span><br><span class="line">2049</span><br><span class="line">2050</span><br><span class="line">2051</span><br><span class="line">2052</span><br><span class="line">2053</span><br><span class="line">2054</span><br><span class="line">2055</span><br><span class="line">2056</span><br><span class="line">2057</span><br><span class="line">2058</span><br><span class="line">2059</span><br><span class="line">2060</span><br><span class="line">2061</span><br><span class="line">2062</span><br><span class="line">2063</span><br><span class="line">2064</span><br><span class="line">2065</span><br><span class="line">2066</span><br><span class="line">2067</span><br><span class="line">2068</span><br><span class="line">2069</span><br><span class="line">2070</span><br><span class="line">2071</span><br><span class="line">2072</span><br><span class="line">2073</span><br><span class="line">2074</span><br><span class="line">2075</span><br><span class="line">2076</span><br><span class="line">2077</span><br><span class="line">2078</span><br><span class="line">2079</span><br><span class="line">2080</span><br><span class="line">2081</span><br><span class="line">2082</span><br><span class="line">2083</span><br><span class="line">2084</span><br><span class="line">2085</span><br><span class="line">2086</span><br><span class="line">2087</span><br><span class="line">2088</span><br><span class="line">2089</span><br><span class="line">2090</span><br><span class="line">2091</span><br><span class="line">2092</span><br><span class="line">2093</span><br><span class="line">2094</span><br><span class="line">2095</span><br><span class="line">2096</span><br><span class="line">2097</span><br><span class="line">2098</span><br><span class="line">2099</span><br><span class="line">2100</span><br><span class="line">2101</span><br><span class="line">2102</span><br><span class="line">2103</span><br><span class="line">2104</span><br><span class="line">2105</span><br><span class="line">2106</span><br><span class="line">2107</span><br><span class="line">2108</span><br><span class="line">2109</span><br><span class="line">2110</span><br><span class="line">2111</span><br><span class="line">2112</span><br><span class="line">2113</span><br><span class="line">2114</span><br><span class="line">2115</span><br><span class="line">2116</span><br><span class="line">2117</span><br><span class="line">2118</span><br><span class="line">2119</span><br><span class="line">2120</span><br><span class="line">2121</span><br><span class="line">2122</span><br><span class="line">2123</span><br><span class="line">2124</span><br><span class="line">2125</span><br><span class="line">2126</span><br><span class="line">2127</span><br><span class="line">2128</span><br><span class="line">2129</span><br><span class="line">2130</span><br><span class="line">2131</span><br><span class="line">2132</span><br><span class="line">2133</span><br><span class="line">2134</span><br><span class="line">2135</span><br><span class="line">2136</span><br><span class="line">2137</span><br><span class="line">2138</span><br><span class="line">2139</span><br><span class="line">2140</span><br><span class="line">2141</span><br><span class="line">2142</span><br><span class="line">2143</span><br><span class="line">2144</span><br><span class="line">2145</span><br><span class="line">2146</span><br><span class="line">2147</span><br><span class="line">2148</span><br><span class="line">2149</span><br><span class="line">2150</span><br><span class="line">2151</span><br><span class="line">2152</span><br><span class="line">2153</span><br><span class="line">2154</span><br><span class="line">2155</span><br><span class="line">2156</span><br><span class="line">2157</span><br><span class="line">2158</span><br><span class="line">2159</span><br><span class="line">2160</span><br><span class="line">2161</span><br><span class="line">2162</span><br><span class="line">2163</span><br><span class="line">2164</span><br><span class="line">2165</span><br><span class="line">2166</span><br><span class="line">2167</span><br><span class="line">2168</span><br><span class="line">2169</span><br><span class="line">2170</span><br><span class="line">2171</span><br><span class="line">2172</span><br><span class="line">2173</span><br><span class="line">2174</span><br><span class="line">2175</span><br><span class="line">2176</span><br><span class="line">2177</span><br><span class="line">2178</span><br><span class="line">2179</span><br><span class="line">2180</span><br><span class="line">2181</span><br><span class="line">2182</span><br><span class="line">2183</span><br><span class="line">2184</span><br><span class="line">2185</span><br><span class="line">2186</span><br><span class="line">2187</span><br><span class="line">2188</span><br><span class="line">2189</span><br><span class="line">2190</span><br><span class="line">2191</span><br><span class="line">2192</span><br><span class="line">2193</span><br><span class="line">2194</span><br><span class="line">2195</span><br><span class="line">2196</span><br><span class="line">2197</span><br><span class="line">2198</span><br><span class="line">2199</span><br><span class="line">2200</span><br><span class="line">2201</span><br><span class="line">2202</span><br><span class="line">2203</span><br><span class="line">2204</span><br><span class="line">2205</span><br><span class="line">2206</span><br><span class="line">2207</span><br><span class="line">2208</span><br><span class="line">2209</span><br><span class="line">2210</span><br><span class="line">2211</span><br><span class="line">2212</span><br><span class="line">2213</span><br><span class="line">2214</span><br><span class="line">2215</span><br><span class="line">2216</span><br><span class="line">2217</span><br><span class="line">2218</span><br><span class="line">2219</span><br><span class="line">2220</span><br><span class="line">2221</span><br><span class="line">2222</span><br><span class="line">2223</span><br><span class="line">2224</span><br><span class="line">2225</span><br><span class="line">2226</span><br><span class="line">2227</span><br><span class="line">2228</span><br><span class="line">2229</span><br><span class="line">2230</span><br><span class="line">2231</span><br><span class="line">2232</span><br><span class="line">2233</span><br><span class="line">2234</span><br><span class="line">2235</span><br><span class="line">2236</span><br><span class="line">2237</span><br><span class="line">2238</span><br><span class="line">2239</span><br><span class="line">2240</span><br><span class="line">2241</span><br><span class="line">2242</span><br><span class="line">2243</span><br><span class="line">2244</span><br><span class="line">2245</span><br><span class="line">2246</span><br><span class="line">2247</span><br><span class="line">2248</span><br><span class="line">2249</span><br><span class="line">2250</span><br><span class="line">2251</span><br><span class="line">2252</span><br><span class="line">2253</span><br><span class="line">2254</span><br><span class="line">2255</span><br><span class="line">2256</span><br><span class="line">2257</span><br><span class="line">2258</span><br><span class="line">2259</span><br><span class="line">2260</span><br><span class="line">2261</span><br><span class="line">2262</span><br><span class="line">2263</span><br><span class="line">2264</span><br><span class="line">2265</span><br><span class="line">2266</span><br><span class="line">2267</span><br><span class="line">2268</span><br><span class="line">2269</span><br><span class="line">2270</span><br><span class="line">2271</span><br><span class="line">2272</span><br><span class="line">2273</span><br><span class="line">2274</span><br><span class="line">2275</span><br><span class="line">2276</span><br><span class="line">2277</span><br><span class="line">2278</span><br><span class="line">2279</span><br><span class="line">2280</span><br><span class="line">2281</span><br><span class="line">2282</span><br><span class="line">2283</span><br><span class="line">2284</span><br><span class="line">2285</span><br><span class="line">2286</span><br><span class="line">2287</span><br><span class="line">2288</span><br><span class="line">2289</span><br><span class="line">2290</span><br><span class="line">2291</span><br><span class="line">2292</span><br><span class="line">2293</span><br><span class="line">2294</span><br><span class="line">2295</span><br><span class="line">2296</span><br><span class="line">2297</span><br><span class="line">2298</span><br><span class="line">2299</span><br><span class="line">2300</span><br><span class="line">2301</span><br><span class="line">2302</span><br><span class="line">2303</span><br><span class="line">2304</span><br><span class="line">2305</span><br><span class="line">2306</span><br><span class="line">2307</span><br><span class="line">2308</span><br><span class="line">2309</span><br><span class="line">2310</span><br><span class="line">2311</span><br><span class="line">2312</span><br><span class="line">2313</span><br><span class="line">2314</span><br><span class="line">2315</span><br><span class="line">2316</span><br><span class="line">2317</span><br><span class="line">2318</span><br><span class="line">2319</span><br><span class="line">2320</span><br><span class="line">2321</span><br><span class="line">2322</span><br><span class="line">2323</span><br><span class="line">2324</span><br><span class="line">2325</span><br><span class="line">2326</span><br><span class="line">2327</span><br><span class="line">2328</span><br><span class="line">2329</span><br><span class="line">2330</span><br><span class="line">2331</span><br><span class="line">2332</span><br><span class="line">2333</span><br><span class="line">2334</span><br><span class="line">2335</span><br><span class="line">2336</span><br><span class="line">2337</span><br><span class="line">2338</span><br><span class="line">2339</span><br><span class="line">2340</span><br><span class="line">2341</span><br><span class="line">2342</span><br><span class="line">2343</span><br><span class="line">2344</span><br><span class="line">2345</span><br><span class="line">2346</span><br><span class="line">2347</span><br><span class="line">2348</span><br><span class="line">2349</span><br><span class="line">2350</span><br><span class="line">2351</span><br><span class="line">2352</span><br><span class="line">2353</span><br><span class="line">2354</span><br><span class="line">2355</span><br><span class="line">2356</span><br><span class="line">2357</span><br><span class="line">2358</span><br><span class="line">2359</span><br><span class="line">2360</span><br><span class="line">2361</span><br><span class="line">2362</span><br><span class="line">2363</span><br><span class="line">2364</span><br><span class="line">2365</span><br><span class="line">2366</span><br><span class="line">2367</span><br><span class="line">2368</span><br><span class="line">2369</span><br><span class="line">2370</span><br><span class="line">2371</span><br><span class="line">2372</span><br><span class="line">2373</span><br><span class="line">2374</span><br><span class="line">2375</span><br><span class="line">2376</span><br><span class="line">2377</span><br><span class="line">2378</span><br><span class="line">2379</span><br><span class="line">2380</span><br><span class="line">2381</span><br><span class="line">2382</span><br><span class="line">2383</span><br><span class="line">2384</span><br><span class="line">2385</span><br><span class="line">2386</span><br><span class="line">2387</span><br><span class="line">2388</span><br><span class="line">2389</span><br><span class="line">2390</span><br><span class="line">2391</span><br><span class="line">2392</span><br><span class="line">2393</span><br><span class="line">2394</span><br><span class="line">2395</span><br><span class="line">2396</span><br><span class="line">2397</span><br><span class="line">2398</span><br><span class="line">2399</span><br><span class="line">2400</span><br><span class="line">2401</span><br><span class="line">2402</span><br><span class="line">2403</span><br><span class="line">2404</span><br><span class="line">2405</span><br><span class="line">2406</span><br><span class="line">2407</span><br><span class="line">2408</span><br><span class="line">2409</span><br><span class="line">2410</span><br><span class="line">2411</span><br><span class="line">2412</span><br><span class="line">2413</span><br><span class="line">2414</span><br><span class="line">2415</span><br><span class="line">2416</span><br><span class="line">2417</span><br><span class="line">2418</span><br><span class="line">2419</span><br><span class="line">2420</span><br><span class="line">2421</span><br><span class="line">2422</span><br><span class="line">2423</span><br><span class="line">2424</span><br><span class="line">2425</span><br><span class="line">2426</span><br><span class="line">2427</span><br><span class="line">2428</span><br><span class="line">2429</span><br><span class="line">2430</span><br><span class="line">2431</span><br><span class="line">2432</span><br><span class="line">2433</span><br><span class="line">2434</span><br><span class="line">2435</span><br><span class="line">2436</span><br><span class="line">2437</span><br><span class="line">2438</span><br><span class="line">2439</span><br><span class="line">2440</span><br><span class="line">2441</span><br><span class="line">2442</span><br><span class="line">2443</span><br><span class="line">2444</span><br><span class="line">2445</span><br><span class="line">2446</span><br><span class="line">2447</span><br><span class="line">2448</span><br><span class="line">2449</span><br><span class="line">2450</span><br><span class="line">2451</span><br><span class="line">2452</span><br><span class="line">2453</span><br><span class="line">2454</span><br><span class="line">2455</span><br><span class="line">2456</span><br><span class="line">2457</span><br><span class="line">2458</span><br><span class="line">2459</span><br><span class="line">2460</span><br><span class="line">2461</span><br><span class="line">2462</span><br><span class="line">2463</span><br><span class="line">2464</span><br><span class="line">2465</span><br><span class="line">2466</span><br><span class="line">2467</span><br><span class="line">2468</span><br><span class="line">2469</span><br><span class="line">2470</span><br><span class="line">2471</span><br><span class="line">2472</span><br><span class="line">2473</span><br><span class="line">2474</span><br><span class="line">2475</span><br><span class="line">2476</span><br><span class="line">2477</span><br><span class="line">2478</span><br><span class="line">2479</span><br><span class="line">2480</span><br><span class="line">2481</span><br><span class="line">2482</span><br><span class="line">2483</span><br><span class="line">2484</span><br><span class="line">2485</span><br><span class="line">2486</span><br><span class="line">2487</span><br><span class="line">2488</span><br><span class="line">2489</span><br><span class="line">2490</span><br><span class="line">2491</span><br><span class="line">2492</span><br><span class="line">2493</span><br><span class="line">2494</span><br><span class="line">2495</span><br><span class="line">2496</span><br><span class="line">2497</span><br><span class="line">2498</span><br><span class="line">2499</span><br><span class="line">2500</span><br><span class="line">2501</span><br><span class="line">2502</span><br><span class="line">2503</span><br><span class="line">2504</span><br><span class="line">2505</span><br><span class="line">2506</span><br><span class="line">2507</span><br><span class="line">2508</span><br><span class="line">2509</span><br><span class="line">2510</span><br><span class="line">2511</span><br><span class="line">2512</span><br><span class="line">2513</span><br><span class="line">2514</span><br><span class="line">2515</span><br><span class="line">2516</span><br><span class="line">2517</span><br><span class="line">2518</span><br><span class="line">2519</span><br><span class="line">2520</span><br><span class="line">2521</span><br><span class="line">2522</span><br><span class="line">2523</span><br><span class="line">2524</span><br><span class="line">2525</span><br><span class="line">2526</span><br><span class="line">2527</span><br><span class="line">2528</span><br><span class="line">2529</span><br><span class="line">2530</span><br><span class="line">2531</span><br><span class="line">2532</span><br><span class="line">2533</span><br><span class="line">2534</span><br><span class="line">2535</span><br><span class="line">2536</span><br><span class="line">2537</span><br><span class="line">2538</span><br><span class="line">2539</span><br><span class="line">2540</span><br><span class="line">2541</span><br><span class="line">2542</span><br><span class="line">2543</span><br><span class="line">2544</span><br><span class="line">2545</span><br><span class="line">2546</span><br><span class="line">2547</span><br><span class="line">2548</span><br><span class="line">2549</span><br><span class="line">2550</span><br><span class="line">2551</span><br><span class="line">2552</span><br><span class="line">2553</span><br><span class="line">2554</span><br><span class="line">2555</span><br><span class="line">2556</span><br><span class="line">2557</span><br><span class="line">2558</span><br><span class="line">2559</span><br><span class="line">2560</span><br><span class="line">2561</span><br><span class="line">2562</span><br><span class="line">2563</span><br><span class="line">2564</span><br><span class="line">2565</span><br><span class="line">2566</span><br><span class="line">2567</span><br><span class="line">2568</span><br><span class="line">2569</span><br><span class="line">2570</span><br><span class="line">2571</span><br><span class="line">2572</span><br><span class="line">2573</span><br><span class="line">2574</span><br><span class="line">2575</span><br><span class="line">2576</span><br><span class="line">2577</span><br><span class="line">2578</span><br><span class="line">2579</span><br><span class="line">2580</span><br><span class="line">2581</span><br><span class="line">2582</span><br><span class="line">2583</span><br><span class="line">2584</span><br><span class="line">2585</span><br><span class="line">2586</span><br><span class="line">2587</span><br><span class="line">2588</span><br><span class="line">2589</span><br><span class="line">2590</span><br><span class="line">2591</span><br><span class="line">2592</span><br><span class="line">2593</span><br><span class="line">2594</span><br><span class="line">2595</span><br><span class="line">2596</span><br><span class="line">2597</span><br><span class="line">2598</span><br><span class="line">2599</span><br><span class="line">2600</span><br><span class="line">2601</span><br><span class="line">2602</span><br><span class="line">2603</span><br><span class="line">2604</span><br><span class="line">2605</span><br><span class="line">2606</span><br><span class="line">2607</span><br><span class="line">2608</span><br><span class="line">2609</span><br><span class="line">2610</span><br><span class="line">2611</span><br><span class="line">2612</span><br><span class="line">2613</span><br><span class="line">2614</span><br><span class="line">2615</span><br><span class="line">2616</span><br><span class="line">2617</span><br><span class="line">2618</span><br><span class="line">2619</span><br><span class="line">2620</span><br><span class="line">2621</span><br><span class="line">2622</span><br><span class="line">2623</span><br><span class="line">2624</span><br><span class="line">2625</span><br><span class="line">2626</span><br><span class="line">2627</span><br><span class="line">2628</span><br><span class="line">2629</span><br><span class="line">2630</span><br><span class="line">2631</span><br><span class="line">2632</span><br><span class="line">2633</span><br><span class="line">2634</span><br><span class="line">2635</span><br><span class="line">2636</span><br><span class="line">2637</span><br><span class="line">2638</span><br><span class="line">2639</span><br><span class="line">2640</span><br><span class="line">2641</span><br><span class="line">2642</span><br><span class="line">2643</span><br><span class="line">2644</span><br><span class="line">2645</span><br><span class="line">2646</span><br><span class="line">2647</span><br><span class="line">2648</span><br><span class="line">2649</span><br><span class="line">2650</span><br><span class="line">2651</span><br><span class="line">2652</span><br><span class="line">2653</span><br><span class="line">2654</span><br><span class="line">2655</span><br><span class="line">2656</span><br><span class="line">2657</span><br><span class="line">2658</span><br><span class="line">2659</span><br><span class="line">2660</span><br><span class="line">2661</span><br><span class="line">2662</span><br><span class="line">2663</span><br><span class="line">2664</span><br><span class="line">2665</span><br><span class="line">2666</span><br><span class="line">2667</span><br><span class="line">2668</span><br><span class="line">2669</span><br><span class="line">2670</span><br><span class="line">2671</span><br><span class="line">2672</span><br><span class="line">2673</span><br><span class="line">2674</span><br><span class="line">2675</span><br><span class="line">2676</span><br><span class="line">2677</span><br><span class="line">2678</span><br><span class="line">2679</span><br><span class="line">2680</span><br><span class="line">2681</span><br><span class="line">2682</span><br><span class="line">2683</span><br><span class="line">2684</span><br><span class="line">2685</span><br><span class="line">2686</span><br><span class="line">2687</span><br><span class="line">2688</span><br><span class="line">2689</span><br><span class="line">2690</span><br><span class="line">2691</span><br><span class="line">2692</span><br><span class="line">2693</span><br><span class="line">2694</span><br><span class="line">2695</span><br><span class="line">2696</span><br><span class="line">2697</span><br><span class="line">2698</span><br><span class="line">2699</span><br><span class="line">2700</span><br><span class="line">2701</span><br><span class="line">2702</span><br><span class="line">2703</span><br><span class="line">2704</span><br><span class="line">2705</span><br><span class="line">2706</span><br><span class="line">2707</span><br><span class="line">2708</span><br><span class="line">2709</span><br><span class="line">2710</span><br><span class="line">2711</span><br><span class="line">2712</span><br><span class="line">2713</span><br><span class="line">2714</span><br><span class="line">2715</span><br><span class="line">2716</span><br><span class="line">2717</span><br><span class="line">2718</span><br><span class="line">2719</span><br><span class="line">2720</span><br><span class="line">2721</span><br><span class="line">2722</span><br><span class="line">2723</span><br><span class="line">2724</span><br><span class="line">2725</span><br><span class="line">2726</span><br><span class="line">2727</span><br><span class="line">2728</span><br><span class="line">2729</span><br><span class="line">2730</span><br><span class="line">2731</span><br><span class="line">2732</span><br><span class="line">2733</span><br><span class="line">2734</span><br><span class="line">2735</span><br><span class="line">2736</span><br><span class="line">2737</span><br><span class="line">2738</span><br><span class="line">2739</span><br><span class="line">2740</span><br><span class="line">2741</span><br><span class="line">2742</span><br><span class="line">2743</span><br><span class="line">2744</span><br><span class="line">2745</span><br><span class="line">2746</span><br><span class="line">2747</span><br><span class="line">2748</span><br><span class="line">2749</span><br><span class="line">2750</span><br><span class="line">2751</span><br><span class="line">2752</span><br><span class="line">2753</span><br><span class="line">2754</span><br><span class="line">2755</span><br><span class="line">2756</span><br><span class="line">2757</span><br><span class="line">2758</span><br><span class="line">2759</span><br><span class="line">2760</span><br><span class="line">2761</span><br><span class="line">2762</span><br><span class="line">2763</span><br><span class="line">2764</span><br><span class="line">2765</span><br><span class="line">2766</span><br><span class="line">2767</span><br><span class="line">2768</span><br><span class="line">2769</span><br><span class="line">2770</span><br><span class="line">2771</span><br><span class="line">2772</span><br><span class="line">2773</span><br><span class="line">2774</span><br><span class="line">2775</span><br><span class="line">2776</span><br><span class="line">2777</span><br><span class="line">2778</span><br><span class="line">2779</span><br><span class="line">2780</span><br><span class="line">2781</span><br><span class="line">2782</span><br><span class="line">2783</span><br><span class="line">2784</span><br><span class="line">2785</span><br><span class="line">2786</span><br><span class="line">2787</span><br><span class="line">2788</span><br><span class="line">2789</span><br><span class="line">2790</span><br><span class="line">2791</span><br><span class="line">2792</span><br><span class="line">2793</span><br><span class="line">2794</span><br><span class="line">2795</span><br><span class="line">2796</span><br><span class="line">2797</span><br><span class="line">2798</span><br><span class="line">2799</span><br><span class="line">2800</span><br><span class="line">2801</span><br><span class="line">2802</span><br><span class="line">2803</span><br><span class="line">2804</span><br><span class="line">2805</span><br><span class="line">2806</span><br><span class="line">2807</span><br><span class="line">2808</span><br><span class="line">2809</span><br><span class="line">2810</span><br><span class="line">2811</span><br><span class="line">2812</span><br><span class="line">2813</span><br><span class="line">2814</span><br><span class="line">2815</span><br><span class="line">2816</span><br><span class="line">2817</span><br><span class="line">2818</span><br><span class="line">2819</span><br><span class="line">2820</span><br><span class="line">2821</span><br><span class="line">2822</span><br><span class="line">2823</span><br><span class="line">2824</span><br><span class="line">2825</span><br><span class="line">2826</span><br><span class="line">2827</span><br><span class="line">2828</span><br><span class="line">2829</span><br><span class="line">2830</span><br><span class="line">2831</span><br><span class="line">2832</span><br><span class="line">2833</span><br><span class="line">2834</span><br><span class="line">2835</span><br><span class="line">2836</span><br><span class="line">2837</span><br><span class="line">2838</span><br><span class="line">2839</span><br><span class="line">2840</span><br><span class="line">2841</span><br><span class="line">2842</span><br><span class="line">2843</span><br><span class="line">2844</span><br><span class="line">2845</span><br><span class="line">2846</span><br><span class="line">2847</span><br><span class="line">2848</span><br><span class="line">2849</span><br><span class="line">2850</span><br><span class="line">2851</span><br><span class="line">2852</span><br><span class="line">2853</span><br><span class="line">2854</span><br><span class="line">2855</span><br><span class="line">2856</span><br><span class="line">2857</span><br><span class="line">2858</span><br><span class="line">2859</span><br><span class="line">2860</span><br><span class="line">2861</span><br><span class="line">2862</span><br><span class="line">2863</span><br><span class="line">2864</span><br><span class="line">2865</span><br><span class="line">2866</span><br><span class="line">2867</span><br><span class="line">2868</span><br><span class="line">2869</span><br><span class="line">2870</span><br><span class="line">2871</span><br><span class="line">2872</span><br><span class="line">2873</span><br><span class="line">2874</span><br><span class="line">2875</span><br><span class="line">2876</span><br><span class="line">2877</span><br><span class="line">2878</span><br><span class="line">2879</span><br><span class="line">2880</span><br><span class="line">2881</span><br><span class="line">2882</span><br><span class="line">2883</span><br><span class="line">2884</span><br><span class="line">2885</span><br><span class="line">2886</span><br><span class="line">2887</span><br><span class="line">2888</span><br><span class="line">2889</span><br><span class="line">2890</span><br><span class="line">2891</span><br><span class="line">2892</span><br><span class="line">2893</span><br><span class="line">2894</span><br><span class="line">2895</span><br><span class="line">2896</span><br><span class="line">2897</span><br><span class="line">2898</span><br><span class="line">2899</span><br><span class="line">2900</span><br><span class="line">2901</span><br><span class="line">2902</span><br><span class="line">2903</span><br><span class="line">2904</span><br><span class="line">2905</span><br><span class="line">2906</span><br><span class="line">2907</span><br><span class="line">2908</span><br><span class="line">2909</span><br><span class="line">2910</span><br><span class="line">2911</span><br><span class="line">2912</span><br><span class="line">2913</span><br><span class="line">2914</span><br><span class="line">2915</span><br><span class="line">2916</span><br><span class="line">2917</span><br><span class="line">2918</span><br><span class="line">2919</span><br><span class="line">2920</span><br><span class="line">2921</span><br><span class="line">2922</span><br><span class="line">2923</span><br><span class="line">2924</span><br><span class="line">2925</span><br><span class="line">2926</span><br><span class="line">2927</span><br><span class="line">2928</span><br><span class="line">2929</span><br><span class="line">2930</span><br><span class="line">2931</span><br><span class="line">2932</span><br><span class="line">2933</span><br><span class="line">2934</span><br><span class="line">2935</span><br><span class="line">2936</span><br><span class="line">2937</span><br><span class="line">2938</span><br><span class="line">2939</span><br><span class="line">2940</span><br><span class="line">2941</span><br><span class="line">2942</span><br><span class="line">2943</span><br><span class="line">2944</span><br><span class="line">2945</span><br><span class="line">2946</span><br><span class="line">2947</span><br><span class="line">2948</span><br><span class="line">2949</span><br><span class="line">2950</span><br><span class="line">2951</span><br><span class="line">2952</span><br><span class="line">2953</span><br><span class="line">2954</span><br><span class="line">2955</span><br><span class="line">2956</span><br><span class="line">2957</span><br><span class="line">2958</span><br><span class="line">2959</span><br><span class="line">2960</span><br><span class="line">2961</span><br><span class="line">2962</span><br><span class="line">2963</span><br><span class="line">2964</span><br><span class="line">2965</span><br><span class="line">2966</span><br><span class="line">2967</span><br><span class="line">2968</span><br><span class="line">2969</span><br><span class="line">2970</span><br><span class="line">2971</span><br><span class="line">2972</span><br><span class="line">2973</span><br><span class="line">2974</span><br><span class="line">2975</span><br><span class="line">2976</span><br><span class="line">2977</span><br><span class="line">2978</span><br><span class="line">2979</span><br><span class="line">2980</span><br><span class="line">2981</span><br><span class="line">2982</span><br><span class="line">2983</span><br><span class="line">2984</span><br><span class="line">2985</span><br><span class="line">2986</span><br><span class="line">2987</span><br><span class="line">2988</span><br><span class="line">2989</span><br><span class="line">2990</span><br><span class="line">2991</span><br><span class="line">2992</span><br><span class="line">2993</span><br><span class="line">2994</span><br><span class="line">2995</span><br><span class="line">2996</span><br><span class="line">2997</span><br><span class="line">2998</span><br><span class="line">2999</span><br><span class="line">3000</span><br><span class="line">3001</span><br><span class="line">3002</span><br><span class="line">3003</span><br><span class="line">3004</span><br><span class="line">3005</span><br><span class="line">3006</span><br><span class="line">3007</span><br><span class="line">3008</span><br><span class="line">3009</span><br><span class="line">3010</span><br><span class="line">3011</span><br><span class="line">3012</span><br><span class="line">3013</span><br><span class="line">3014</span><br><span class="line">3015</span><br><span class="line">3016</span><br><span class="line">3017</span><br><span class="line">3018</span><br><span class="line">3019</span><br><span class="line">3020</span><br><span class="line">3021</span><br><span class="line">3022</span><br><span class="line">3023</span><br><span class="line">3024</span><br><span class="line">3025</span><br><span class="line">3026</span><br><span class="line">3027</span><br><span class="line">3028</span><br><span class="line">3029</span><br><span class="line">3030</span><br><span class="line">3031</span><br><span class="line">3032</span><br><span class="line">3033</span><br><span class="line">3034</span><br><span class="line">3035</span><br><span class="line">3036</span><br><span class="line">3037</span><br><span class="line">3038</span><br><span class="line">3039</span><br><span class="line">3040</span><br><span class="line">3041</span><br><span class="line">3042</span><br><span class="line">3043</span><br><span class="line">3044</span><br><span class="line">3045</span><br><span class="line">3046</span><br><span class="line">3047</span><br><span class="line">3048</span><br><span class="line">3049</span><br><span class="line">3050</span><br><span class="line">3051</span><br><span class="line">3052</span><br><span class="line">3053</span><br><span class="line">3054</span><br><span class="line">3055</span><br><span class="line">3056</span><br><span class="line">3057</span><br><span class="line">3058</span><br><span class="line">3059</span><br><span class="line">3060</span><br><span class="line">3061</span><br><span class="line">3062</span><br><span class="line">3063</span><br><span class="line">3064</span><br><span class="line">3065</span><br><span class="line">3066</span><br><span class="line">3067</span><br><span class="line">3068</span><br><span class="line">3069</span><br><span class="line">3070</span><br><span class="line">3071</span><br><span class="line">3072</span><br><span class="line">3073</span><br><span class="line">3074</span><br><span class="line">3075</span><br><span class="line">3076</span><br><span class="line">3077</span><br><span class="line">3078</span><br><span class="line">3079</span><br><span class="line">3080</span><br><span class="line">3081</span><br><span class="line">3082</span><br><span class="line">3083</span><br><span class="line">3084</span><br><span class="line">3085</span><br><span class="line">3086</span><br><span class="line">3087</span><br><span class="line">3088</span><br><span class="line">3089</span><br><span class="line">3090</span><br><span class="line">3091</span><br><span class="line">3092</span><br><span class="line">3093</span><br><span class="line">3094</span><br><span class="line">3095</span><br><span class="line">3096</span><br><span class="line">3097</span><br><span class="line">3098</span><br><span class="line">3099</span><br><span class="line">3100</span><br><span class="line">3101</span><br><span class="line">3102</span><br><span class="line">3103</span><br><span class="line">3104</span><br><span class="line">3105</span><br><span class="line">3106</span><br><span class="line">3107</span><br><span class="line">3108</span><br><span class="line">3109</span><br><span class="line">3110</span><br><span class="line">3111</span><br><span class="line">3112</span><br><span class="line">3113</span><br><span class="line">3114</span><br><span class="line">3115</span><br><span class="line">3116</span><br><span class="line">3117</span><br><span class="line">3118</span><br><span class="line">3119</span><br><span class="line">3120</span><br><span class="line">3121</span><br><span class="line">3122</span><br><span class="line">3123</span><br><span class="line">3124</span><br><span class="line">3125</span><br><span class="line">3126</span><br><span class="line">3127</span><br><span class="line">3128</span><br><span class="line">3129</span><br><span class="line">3130</span><br><span class="line">3131</span><br><span class="line">3132</span><br><span class="line">3133</span><br><span class="line">3134</span><br><span class="line">3135</span><br><span class="line">3136</span><br><span class="line">3137</span><br><span class="line">3138</span><br><span class="line">3139</span><br><span class="line">3140</span><br><span class="line">3141</span><br><span class="line">3142</span><br><span class="line">3143</span><br><span class="line">3144</span><br><span class="line">3145</span><br><span class="line">3146</span><br><span class="line">3147</span><br><span class="line">3148</span><br><span class="line">3149</span><br><span class="line">3150</span><br><span class="line">3151</span><br><span class="line">3152</span><br><span class="line">3153</span><br><span class="line">3154</span><br><span class="line">3155</span><br><span class="line">3156</span><br><span class="line">3157</span><br><span class="line">3158</span><br><span class="line">3159</span><br><span class="line">3160</span><br><span class="line">3161</span><br><span class="line">3162</span><br><span class="line">3163</span><br><span class="line">3164</span><br><span class="line">3165</span><br><span class="line">3166</span><br><span class="line">3167</span><br><span class="line">3168</span><br><span class="line">3169</span><br><span class="line">3170</span><br><span class="line">3171</span><br><span class="line">3172</span><br><span class="line">3173</span><br><span class="line">3174</span><br><span class="line">3175</span><br><span class="line">3176</span><br><span class="line">3177</span><br><span class="line">3178</span><br><span class="line">3179</span><br><span class="line">3180</span><br><span class="line">3181</span><br><span class="line">3182</span><br><span class="line">3183</span><br><span class="line">3184</span><br><span class="line">3185</span><br><span class="line">3186</span><br><span class="line">3187</span><br><span class="line">3188</span><br><span class="line">3189</span><br><span class="line">3190</span><br><span class="line">3191</span><br><span class="line">3192</span><br><span class="line">3193</span><br><span class="line">3194</span><br><span class="line">3195</span><br><span class="line">3196</span><br><span class="line">3197</span><br><span class="line">3198</span><br><span class="line">3199</span><br><span class="line">3200</span><br><span class="line">3201</span><br><span class="line">3202</span><br><span class="line">3203</span><br><span class="line">3204</span><br><span class="line">3205</span><br><span class="line">3206</span><br><span class="line">3207</span><br><span class="line">3208</span><br><span class="line">3209</span><br><span class="line">3210</span><br><span class="line">3211</span><br><span class="line">3212</span><br><span class="line">3213</span><br><span class="line">3214</span><br><span class="line">3215</span><br><span class="line">3216</span><br><span class="line">3217</span><br><span class="line">3218</span><br><span class="line">3219</span><br><span class="line">3220</span><br><span class="line">3221</span><br><span class="line">3222</span><br><span class="line">3223</span><br><span class="line">3224</span><br><span class="line">3225</span><br><span class="line">3226</span><br><span class="line">3227</span><br><span class="line">3228</span><br><span class="line">3229</span><br><span class="line">3230</span><br><span class="line">3231</span><br><span class="line">3232</span><br><span class="line">3233</span><br><span class="line">3234</span><br><span class="line">3235</span><br><span class="line">3236</span><br><span class="line">3237</span><br><span class="line">3238</span><br><span class="line">3239</span><br><span class="line">3240</span><br><span class="line">3241</span><br><span class="line">3242</span><br><span class="line">3243</span><br><span class="line">3244</span><br><span class="line">3245</span><br><span class="line">3246</span><br><span class="line">3247</span><br><span class="line">3248</span><br><span class="line">3249</span><br><span class="line">3250</span><br><span class="line">3251</span><br><span class="line">3252</span><br><span class="line">3253</span><br><span class="line">3254</span><br><span class="line">3255</span><br><span class="line">3256</span><br><span class="line">3257</span><br><span class="line">3258</span><br><span class="line">3259</span><br><span class="line">3260</span><br><span class="line">3261</span><br><span class="line">3262</span><br><span class="line">3263</span><br><span class="line">3264</span><br><span class="line">3265</span><br><span class="line">3266</span><br><span class="line">3267</span><br><span class="line">3268</span><br><span class="line">3269</span><br><span class="line">3270</span><br><span class="line">3271</span><br><span class="line">3272</span><br><span class="line">3273</span><br><span class="line">3274</span><br><span class="line">3275</span><br><span class="line">3276</span><br><span class="line">3277</span><br><span class="line">3278</span><br><span class="line">3279</span><br><span class="line">3280</span><br><span class="line">3281</span><br><span class="line">3282</span><br><span class="line">3283</span><br><span class="line">3284</span><br><span class="line">3285</span><br><span class="line">3286</span><br><span class="line">3287</span><br><span class="line">3288</span><br><span class="line">3289</span><br><span class="line">3290</span><br><span class="line">3291</span><br><span class="line">3292</span><br><span class="line">3293</span><br><span class="line">3294</span><br><span class="line">3295</span><br><span class="line">3296</span><br><span class="line">3297</span><br><span class="line">3298</span><br><span class="line">3299</span><br><span class="line">3300</span><br><span class="line">3301</span><br><span class="line">3302</span><br><span class="line">3303</span><br><span class="line">3304</span><br><span class="line">3305</span><br><span class="line">3306</span><br><span class="line">3307</span><br><span class="line">3308</span><br><span class="line">3309</span><br><span class="line">3310</span><br><span class="line">3311</span><br><span class="line">3312</span><br><span class="line">3313</span><br><span class="line">3314</span><br><span class="line">3315</span><br><span class="line">3316</span><br><span class="line">3317</span><br><span class="line">3318</span><br><span class="line">3319</span><br><span class="line">3320</span><br><span class="line">3321</span><br><span class="line">3322</span><br><span class="line">3323</span><br><span class="line">3324</span><br><span class="line">3325</span><br><span class="line">3326</span><br><span class="line">3327</span><br><span class="line">3328</span><br><span class="line">3329</span><br><span class="line">3330</span><br><span class="line">3331</span><br><span class="line">3332</span><br><span class="line">3333</span><br><span class="line">3334</span><br><span class="line">3335</span><br><span class="line">3336</span><br><span class="line">3337</span><br><span class="line">3338</span><br><span class="line">3339</span><br><span class="line">3340</span><br><span class="line">3341</span><br><span class="line">3342</span><br><span class="line">3343</span><br><span class="line">3344</span><br><span class="line">3345</span><br><span class="line">3346</span><br><span class="line">3347</span><br><span class="line">3348</span><br><span class="line">3349</span><br><span class="line">3350</span><br><span class="line">3351</span><br><span class="line">3352</span><br><span class="line">3353</span><br><span class="line">3354</span><br><span class="line">3355</span><br><span class="line">3356</span><br><span class="line">3357</span><br><span class="line">3358</span><br><span class="line">3359</span><br><span class="line">3360</span><br><span class="line">3361</span><br><span class="line">3362</span><br><span class="line">3363</span><br><span class="line">3364</span><br><span class="line">3365</span><br><span class="line">3366</span><br><span class="line">3367</span><br><span class="line">3368</span><br><span class="line">3369</span><br><span class="line">3370</span><br><span class="line">3371</span><br><span class="line">3372</span><br><span class="line">3373</span><br><span class="line">3374</span><br><span class="line">3375</span><br><span class="line">3376</span><br><span class="line">3377</span><br><span class="line">3378</span><br><span class="line">3379</span><br><span class="line">3380</span><br><span class="line">3381</span><br><span class="line">3382</span><br><span class="line">3383</span><br><span class="line">3384</span><br><span class="line">3385</span><br><span class="line">3386</span><br><span class="line">3387</span><br><span class="line">3388</span><br><span class="line">3389</span><br><span class="line">3390</span><br><span class="line">3391</span><br><span class="line">3392</span><br><span class="line">3393</span><br><span class="line">3394</span><br><span class="line">3395</span><br><span class="line">3396</span><br><span class="line">3397</span><br><span class="line">3398</span><br><span class="line">3399</span><br><span class="line">3400</span><br><span class="line">3401</span><br><span class="line">3402</span><br><span class="line">3403</span><br><span class="line">3404</span><br><span class="line">3405</span><br><span class="line">3406</span><br><span class="line">3407</span><br><span class="line">3408</span><br><span class="line">3409</span><br><span class="line">3410</span><br><span class="line">3411</span><br><span class="line">3412</span><br><span class="line">3413</span><br><span class="line">3414</span><br><span class="line">3415</span><br><span class="line">3416</span><br><span class="line">3417</span><br><span class="line">3418</span><br><span class="line">3419</span><br><span class="line">3420</span><br><span class="line">3421</span><br><span class="line">3422</span><br><span class="line">3423</span><br><span class="line">3424</span><br><span class="line">3425</span><br><span class="line">3426</span><br><span class="line">3427</span><br><span class="line">3428</span><br><span class="line">3429</span><br><span class="line">3430</span><br><span class="line">3431</span><br><span class="line">3432</span><br><span class="line">3433</span><br><span class="line">3434</span><br><span class="line">3435</span><br><span class="line">3436</span><br><span class="line">3437</span><br><span class="line">3438</span><br><span class="line">3439</span><br><span class="line">3440</span><br><span class="line">3441</span><br><span class="line">3442</span><br><span class="line">3443</span><br><span class="line">3444</span><br><span class="line">3445</span><br><span class="line">3446</span><br><span class="line">3447</span><br><span class="line">3448</span><br><span class="line">3449</span><br><span class="line">3450</span><br><span class="line">3451</span><br><span class="line">3452</span><br><span class="line">3453</span><br><span class="line">3454</span><br><span class="line">3455</span><br><span class="line">3456</span><br><span class="line">3457</span><br><span class="line">3458</span><br><span class="line">3459</span><br><span class="line">3460</span><br><span class="line">3461</span><br><span class="line">3462</span><br><span class="line">3463</span><br><span class="line">3464</span><br><span class="line">3465</span><br><span class="line">3466</span><br><span class="line">3467</span><br><span class="line">3468</span><br><span class="line">3469</span><br><span class="line">3470</span><br><span class="line">3471</span><br><span class="line">3472</span><br><span class="line">3473</span><br><span class="line">3474</span><br><span class="line">3475</span><br><span class="line">3476</span><br><span class="line">3477</span><br><span class="line">3478</span><br><span class="line">3479</span><br><span class="line">3480</span><br><span class="line">3481</span><br><span class="line">3482</span><br><span class="line">3483</span><br><span class="line">3484</span><br><span class="line">3485</span><br><span class="line">3486</span><br><span class="line">3487</span><br><span class="line">3488</span><br><span class="line">3489</span><br><span class="line">3490</span><br><span class="line">3491</span><br><span class="line">3492</span><br><span class="line">3493</span><br><span class="line">3494</span><br><span class="line">3495</span><br><span class="line">3496</span><br><span class="line">3497</span><br><span class="line">3498</span><br><span class="line">3499</span><br><span class="line">3500</span><br><span class="line">3501</span><br><span class="line">3502</span><br><span class="line">3503</span><br><span class="line">3504</span><br><span class="line">3505</span><br><span class="line">3506</span><br><span class="line">3507</span><br><span class="line">3508</span><br><span class="line">3509</span><br><span class="line">3510</span><br><span class="line">3511</span><br><span class="line">3512</span><br><span class="line">3513</span><br><span class="line">3514</span><br><span class="line">3515</span><br><span class="line">3516</span><br><span class="line">3517</span><br><span class="line">3518</span><br><span class="line">3519</span><br><span class="line">3520</span><br><span class="line">3521</span><br><span class="line">3522</span><br><span class="line">3523</span><br><span class="line">3524</span><br><span class="line">3525</span><br><span class="line">3526</span><br><span class="line">3527</span><br><span class="line">3528</span><br><span class="line">3529</span><br><span class="line">3530</span><br><span class="line">3531</span><br><span class="line">3532</span><br><span class="line">3533</span><br><span class="line">3534</span><br><span class="line">3535</span><br><span class="line">3536</span><br><span class="line">3537</span><br><span class="line">3538</span><br><span class="line">3539</span><br><span class="line">3540</span><br><span class="line">3541</span><br><span class="line">3542</span><br><span class="line">3543</span><br><span class="line">3544</span><br><span class="line">3545</span><br><span class="line">3546</span><br><span class="line">3547</span><br><span class="line">3548</span><br><span class="line">3549</span><br><span class="line">3550</span><br><span class="line">3551</span><br><span class="line">3552</span><br><span class="line">3553</span><br><span class="line">3554</span><br><span class="line">3555</span><br><span class="line">3556</span><br><span class="line">3557</span><br><span class="line">3558</span><br><span class="line">3559</span><br><span class="line">3560</span><br><span class="line">3561</span><br><span class="line">3562</span><br><span class="line">3563</span><br><span class="line">3564</span><br><span class="line">3565</span><br><span class="line">3566</span><br><span class="line">3567</span><br><span class="line">3568</span><br><span class="line">3569</span><br><span class="line">3570</span><br><span class="line">3571</span><br><span class="line">3572</span><br><span class="line">3573</span><br><span class="line">3574</span><br><span class="line">3575</span><br><span class="line">3576</span><br><span class="line">3577</span><br><span class="line">3578</span><br><span class="line">3579</span><br><span class="line">3580</span><br><span class="line">3581</span><br><span class="line">3582</span><br><span class="line">3583</span><br><span class="line">3584</span><br><span class="line">3585</span><br><span class="line">3586</span><br><span class="line">3587</span><br><span class="line">3588</span><br><span class="line">3589</span><br><span class="line">3590</span><br><span class="line">3591</span><br><span class="line">3592</span><br><span class="line">3593</span><br><span class="line">3594</span><br><span class="line">3595</span><br><span class="line">3596</span><br><span class="line">3597</span><br><span class="line">3598</span><br><span class="line">3599</span><br><span class="line">3600</span><br><span class="line">3601</span><br><span class="line">3602</span><br><span class="line">3603</span><br><span class="line">3604</span><br><span class="line">3605</span><br><span class="line">3606</span><br><span class="line">3607</span><br><span class="line">3608</span><br><span class="line">3609</span><br><span class="line">3610</span><br><span class="line">3611</span><br><span class="line">3612</span><br><span class="line">3613</span><br><span class="line">3614</span><br><span class="line">3615</span><br><span class="line">3616</span><br><span class="line">3617</span><br><span class="line">3618</span><br><span class="line">3619</span><br><span class="line">3620</span><br><span class="line">3621</span><br><span class="line">3622</span><br><span class="line">3623</span><br><span class="line">3624</span><br><span class="line">3625</span><br><span class="line">3626</span><br><span class="line">3627</span><br><span class="line">3628</span><br><span class="line">3629</span><br><span class="line">3630</span><br><span class="line">3631</span><br><span class="line">3632</span><br><span class="line">3633</span><br><span class="line">3634</span><br><span class="line">3635</span><br><span class="line">3636</span><br><span class="line">3637</span><br><span class="line">3638</span><br><span class="line">3639</span><br><span class="line">3640</span><br><span class="line">3641</span><br><span class="line">3642</span><br><span class="line">3643</span><br><span class="line">3644</span><br><span class="line">3645</span><br><span class="line">3646</span><br><span class="line">3647</span><br><span class="line">3648</span><br><span class="line">3649</span><br><span class="line">3650</span><br><span class="line">3651</span><br><span class="line">3652</span><br><span class="line">3653</span><br><span class="line">3654</span><br><span class="line">3655</span><br><span class="line">3656</span><br><span class="line">3657</span><br><span class="line">3658</span><br><span class="line">3659</span><br><span class="line">3660</span><br><span class="line">3661</span><br><span class="line">3662</span><br><span class="line">3663</span><br><span class="line">3664</span><br><span class="line">3665</span><br><span class="line">3666</span><br><span class="line">3667</span><br><span class="line">3668</span><br><span class="line">3669</span><br><span class="line">3670</span><br><span class="line">3671</span><br><span class="line">3672</span><br><span class="line">3673</span><br><span class="line">3674</span><br><span class="line">3675</span><br><span class="line">3676</span><br><span class="line">3677</span><br><span class="line">3678</span><br><span class="line">3679</span><br><span class="line">3680</span><br><span class="line">3681</span><br><span class="line">3682</span><br><span class="line">3683</span><br><span class="line">3684</span><br><span class="line">3685</span><br><span class="line">3686</span><br><span class="line">3687</span><br><span class="line">3688</span><br><span class="line">3689</span><br><span class="line">3690</span><br><span class="line">3691</span><br><span class="line">3692</span><br><span class="line">3693</span><br><span class="line">3694</span><br><span class="line">3695</span><br><span class="line">3696</span><br><span class="line">3697</span><br><span class="line">3698</span><br><span class="line">3699</span><br><span class="line">3700</span><br><span class="line">3701</span><br><span class="line">3702</span><br><span class="line">3703</span><br><span class="line">3704</span><br><span class="line">3705</span><br><span class="line">3706</span><br><span class="line">3707</span><br><span class="line">3708</span><br><span class="line">3709</span><br><span class="line">3710</span><br><span class="line">3711</span><br><span class="line">3712</span><br><span class="line">3713</span><br><span class="line">3714</span><br><span class="line">3715</span><br><span class="line">3716</span><br><span class="line">3717</span><br><span class="line">3718</span><br><span class="line">3719</span><br><span class="line">3720</span><br><span class="line">3721</span><br><span class="line">3722</span><br><span class="line">3723</span><br><span class="line">3724</span><br><span class="line">3725</span><br><span class="line">3726</span><br><span class="line">3727</span><br><span class="line">3728</span><br><span class="line">3729</span><br><span class="line">3730</span><br><span class="line">3731</span><br><span class="line">3732</span><br><span class="line">3733</span><br><span class="line">3734</span><br><span class="line">3735</span><br><span class="line">3736</span><br><span class="line">3737</span><br><span class="line">3738</span><br><span class="line">3739</span><br><span class="line">3740</span><br><span class="line">3741</span><br><span class="line">3742</span><br><span class="line">3743</span><br><span class="line">3744</span><br><span class="line">3745</span><br><span class="line">3746</span><br><span class="line">3747</span><br><span class="line">3748</span><br><span class="line">3749</span><br><span class="line">3750</span><br><span class="line">3751</span><br><span class="line">3752</span><br><span class="line">3753</span><br><span class="line">3754</span><br><span class="line">3755</span><br><span class="line">3756</span><br><span class="line">3757</span><br><span class="line">3758</span><br><span class="line">3759</span><br><span class="line">3760</span><br><span class="line">3761</span><br><span class="line">3762</span><br><span class="line">3763</span><br><span class="line">3764</span><br><span class="line">3765</span><br><span class="line">3766</span><br><span class="line">3767</span><br><span class="line">3768</span><br><span class="line">3769</span><br><span class="line">3770</span><br><span class="line">3771</span><br><span class="line">3772</span><br><span class="line">3773</span><br><span class="line">3774</span><br><span class="line">3775</span><br><span class="line">3776</span><br><span class="line">3777</span><br><span class="line">3778</span><br><span class="line">3779</span><br><span class="line">3780</span><br><span class="line">3781</span><br><span class="line">3782</span><br><span class="line">3783</span><br><span class="line">3784</span><br><span class="line">3785</span><br><span class="line">3786</span><br><span class="line">3787</span><br><span class="line">3788</span><br><span class="line">3789</span><br><span class="line">3790</span><br><span class="line">3791</span><br><span class="line">3792</span><br><span class="line">3793</span><br><span class="line">3794</span><br><span class="line">3795</span><br><span class="line">3796</span><br><span class="line">3797</span><br><span class="line">3798</span><br><span class="line">3799</span><br><span class="line">3800</span><br><span class="line">3801</span><br><span class="line">3802</span><br><span class="line">3803</span><br><span class="line">3804</span><br><span class="line">3805</span><br><span class="line">3806</span><br><span class="line">3807</span><br><span class="line">3808</span><br><span class="line">3809</span><br><span class="line">3810</span><br><span class="line">3811</span><br><span class="line">3812</span><br><span class="line">3813</span><br><span class="line">3814</span><br><span class="line">3815</span><br><span class="line">3816</span><br><span class="line">3817</span><br><span class="line">3818</span><br><span class="line">3819</span><br><span class="line">3820</span><br><span class="line">3821</span><br><span class="line">3822</span><br><span class="line">3823</span><br><span class="line">3824</span><br><span class="line">3825</span><br><span class="line">3826</span><br><span class="line">3827</span><br><span class="line">3828</span><br><span class="line">3829</span><br><span class="line">3830</span><br><span class="line">3831</span><br><span class="line">3832</span><br><span class="line">3833</span><br><span class="line">3834</span><br><span class="line">3835</span><br><span class="line">3836</span><br><span class="line">3837</span><br><span class="line">3838</span><br><span class="line">3839</span><br><span class="line">3840</span><br><span class="line">3841</span><br><span class="line">3842</span><br><span class="line">3843</span><br><span class="line">3844</span><br><span class="line">3845</span><br><span class="line">3846</span><br><span class="line">3847</span><br><span class="line">3848</span><br><span class="line">3849</span><br><span class="line">3850</span><br><span class="line">3851</span><br><span class="line">3852</span><br><span class="line">3853</span><br><span class="line">3854</span><br><span class="line">3855</span><br><span class="line">3856</span><br><span class="line">3857</span><br><span class="line">3858</span><br><span class="line">3859</span><br><span class="line">3860</span><br><span class="line">3861</span><br><span class="line">3862</span><br><span class="line">3863</span><br><span class="line">3864</span><br><span class="line">3865</span><br><span class="line">3866</span><br><span class="line">3867</span><br><span class="line">3868</span><br><span class="line">3869</span><br><span class="line">3870</span><br><span class="line">3871</span><br><span class="line">3872</span><br><span class="line">3873</span><br><span class="line">3874</span><br><span class="line">3875</span><br><span class="line">3876</span><br><span class="line">3877</span><br><span class="line">3878</span><br><span class="line">3879</span><br><span class="line">3880</span><br><span class="line">3881</span><br><span class="line">3882</span><br><span class="line">3883</span><br><span class="line">3884</span><br><span class="line">3885</span><br><span class="line">3886</span><br><span class="line">3887</span><br><span class="line">3888</span><br><span class="line">3889</span><br><span class="line">3890</span><br><span class="line">3891</span><br><span class="line">3892</span><br><span class="line">3893</span><br><span class="line">3894</span><br><span class="line">3895</span><br><span class="line">3896</span><br><span class="line">3897</span><br><span class="line">3898</span><br><span class="line">3899</span><br><span class="line">3900</span><br><span class="line">3901</span><br><span class="line">3902</span><br><span class="line">3903</span><br><span class="line">3904</span><br><span class="line">3905</span><br><span class="line">3906</span><br><span class="line">3907</span><br><span class="line">3908</span><br><span class="line">3909</span><br><span class="line">3910</span><br><span class="line">3911</span><br><span class="line">3912</span><br><span class="line">3913</span><br><span class="line">3914</span><br><span class="line">3915</span><br><span class="line">3916</span><br><span class="line">3917</span><br><span class="line">3918</span><br><span class="line">3919</span><br><span class="line">3920</span><br><span class="line">3921</span><br><span class="line">3922</span><br><span class="line">3923</span><br><span class="line">3924</span><br><span class="line">3925</span><br><span class="line">3926</span><br><span class="line">3927</span><br><span class="line">3928</span><br><span class="line">3929</span><br><span class="line">3930</span><br><span class="line">3931</span><br><span class="line">3932</span><br><span class="line">3933</span><br><span class="line">3934</span><br><span class="line">3935</span><br><span class="line">3936</span><br><span class="line">3937</span><br><span class="line">3938</span><br><span class="line">3939</span><br><span class="line">3940</span><br><span class="line">3941</span><br><span class="line">3942</span><br><span class="line">3943</span><br><span class="line">3944</span><br><span class="line">3945</span><br><span class="line">3946</span><br><span class="line">3947</span><br><span class="line">3948</span><br><span class="line">3949</span><br><span class="line">3950</span><br><span class="line">3951</span><br><span class="line">3952</span><br><span class="line">3953</span><br><span class="line">3954</span><br><span class="line">3955</span><br><span class="line">3956</span><br><span class="line">3957</span><br><span class="line">3958</span><br><span class="line">3959</span><br><span class="line">3960</span><br><span class="line">3961</span><br><span class="line">3962</span><br><span class="line">3963</span><br><span class="line">3964</span><br><span class="line">3965</span><br><span class="line">3966</span><br><span class="line">3967</span><br><span class="line">3968</span><br><span class="line">3969</span><br><span class="line">3970</span><br><span class="line">3971</span><br><span class="line">3972</span><br><span class="line">3973</span><br><span class="line">3974</span><br><span class="line">3975</span><br><span class="line">3976</span><br><span class="line">3977</span><br><span class="line">3978</span><br><span class="line">3979</span><br><span class="line">3980</span><br><span class="line">3981</span><br><span class="line">3982</span><br><span class="line">3983</span><br><span class="line">3984</span><br><span class="line">3985</span><br><span class="line">3986</span><br><span class="line">3987</span><br><span class="line">3988</span><br><span class="line">3989</span><br><span class="line">3990</span><br><span class="line">3991</span><br><span class="line">3992</span><br><span class="line">3993</span><br><span class="line">3994</span><br><span class="line">3995</span><br><span class="line">3996</span><br><span class="line">3997</span><br><span class="line">3998</span><br><span class="line">3999</span><br><span class="line">4000</span><br><span class="line">4001</span><br><span class="line">4002</span><br><span class="line">4003</span><br><span class="line">4004</span><br><span class="line">4005</span><br><span class="line">4006</span><br><span class="line">4007</span><br><span class="line">4008</span><br><span class="line">4009</span><br><span class="line">4010</span><br><span class="line">4011</span><br><span class="line">4012</span><br><span class="line">4013</span><br><span class="line">4014</span><br><span class="line">4015</span><br><span class="line">4016</span><br><span class="line">4017</span><br><span class="line">4018</span><br><span class="line">4019</span><br><span class="line">4020</span><br><span class="line">4021</span><br><span class="line">4022</span><br><span class="line">4023</span><br><span class="line">4024</span><br><span class="line">4025</span><br><span class="line">4026</span><br><span class="line">4027</span><br><span class="line">4028</span><br><span class="line">4029</span><br><span class="line">4030</span><br><span class="line">4031</span><br><span class="line">4032</span><br><span class="line">4033</span><br><span class="line">4034</span><br><span class="line">4035</span><br><span class="line">4036</span><br><span class="line">4037</span><br><span class="line">4038</span><br><span class="line">4039</span><br><span class="line">4040</span><br><span class="line">4041</span><br><span class="line">4042</span><br><span class="line">4043</span><br><span class="line">4044</span><br><span class="line">4045</span><br><span class="line">4046</span><br><span class="line">4047</span><br><span class="line">4048</span><br><span class="line">4049</span><br><span class="line">4050</span><br><span class="line">4051</span><br><span class="line">4052</span><br><span class="line">4053</span><br><span class="line">4054</span><br><span class="line">4055</span><br><span class="line">4056</span><br><span class="line">4057</span><br><span class="line">4058</span><br><span class="line">4059</span><br><span class="line">4060</span><br><span class="line">4061</span><br><span class="line">4062</span><br><span class="line">4063</span><br><span class="line">4064</span><br><span class="line">4065</span><br><span class="line">4066</span><br><span class="line">4067</span><br><span class="line">4068</span><br><span class="line">4069</span><br><span class="line">4070</span><br><span class="line">4071</span><br><span class="line">4072</span><br><span class="line">4073</span><br><span class="line">4074</span><br><span class="line">4075</span><br><span class="line">4076</span><br><span class="line">4077</span><br><span class="line">4078</span><br><span class="line">4079</span><br><span class="line">4080</span><br><span class="line">4081</span><br><span class="line">4082</span><br><span class="line">4083</span><br><span class="line">4084</span><br><span class="line">4085</span><br><span class="line">4086</span><br><span class="line">4087</span><br><span class="line">4088</span><br><span class="line">4089</span><br><span class="line">4090</span><br><span class="line">4091</span><br><span class="line">4092</span><br><span class="line">4093</span><br><span class="line">4094</span><br><span class="line">4095</span><br><span class="line">4096</span><br><span class="line">4097</span><br><span class="line">4098</span><br><span class="line">4099</span><br><span class="line">4100</span><br><span class="line">4101</span><br><span class="line">4102</span><br><span class="line">4103</span><br><span class="line">4104</span><br><span class="line">4105</span><br><span class="line">4106</span><br><span class="line">4107</span><br><span class="line">4108</span><br><span class="line">4109</span><br><span class="line">4110</span><br><span class="line">4111</span><br><span class="line">4112</span><br><span class="line">4113</span><br><span class="line">4114</span><br><span class="line">4115</span><br><span class="line">4116</span><br><span class="line">4117</span><br><span class="line">4118</span><br><span class="line">4119</span><br><span class="line">4120</span><br><span class="line">4121</span><br><span class="line">4122</span><br><span class="line">4123</span><br><span class="line">4124</span><br><span class="line">4125</span><br><span class="line">4126</span><br><span class="line">4127</span><br><span class="line">4128</span><br><span class="line">4129</span><br><span class="line">4130</span><br><span class="line">4131</span><br><span class="line">4132</span><br><span class="line">4133</span><br><span class="line">4134</span><br><span class="line">4135</span><br><span class="line">4136</span><br><span class="line">4137</span><br><span class="line">4138</span><br><span class="line">4139</span><br><span class="line">4140</span><br><span class="line">4141</span><br><span class="line">4142</span><br><span class="line">4143</span><br><span class="line">4144</span><br><span class="line">4145</span><br><span class="line">4146</span><br><span class="line">4147</span><br><span class="line">4148</span><br><span class="line">4149</span><br><span class="line">4150</span><br><span class="line">4151</span><br><span class="line">4152</span><br><span class="line">4153</span><br><span class="line">4154</span><br><span class="line">4155</span><br><span class="line">4156</span><br><span class="line">4157</span><br><span class="line">4158</span><br><span class="line">4159</span><br><span class="line">4160</span><br><span class="line">4161</span><br><span class="line">4162</span><br><span class="line">4163</span><br><span class="line">4164</span><br><span class="line">4165</span><br><span class="line">4166</span><br><span class="line">4167</span><br><span class="line">4168</span><br><span class="line">4169</span><br><span class="line">4170</span><br><span class="line">4171</span><br><span class="line">4172</span><br><span class="line">4173</span><br><span class="line">4174</span><br><span class="line">4175</span><br><span class="line">4176</span><br><span class="line">4177</span><br><span class="line">4178</span><br><span class="line">4179</span><br><span class="line">4180</span><br><span class="line">4181</span><br><span class="line">4182</span><br><span class="line">4183</span><br><span class="line">4184</span><br><span class="line">4185</span><br><span class="line">4186</span><br><span class="line">4187</span><br><span class="line">4188</span><br><span class="line">4189</span><br><span class="line">4190</span><br><span class="line">4191</span><br><span class="line">4192</span><br><span class="line">4193</span><br><span class="line">4194</span><br><span class="line">4195</span><br><span class="line">4196</span><br><span class="line">4197</span><br><span class="line">4198</span><br><span class="line">4199</span><br><span class="line">4200</span><br><span class="line">4201</span><br><span class="line">4202</span><br><span class="line">4203</span><br><span class="line">4204</span><br><span class="line">4205</span><br><span class="line">4206</span><br><span class="line">4207</span><br><span class="line">4208</span><br><span class="line">4209</span><br><span class="line">4210</span><br><span class="line">4211</span><br><span class="line">4212</span><br><span class="line">4213</span><br><span class="line">4214</span><br><span class="line">4215</span><br><span class="line">4216</span><br><span class="line">4217</span><br><span class="line">4218</span><br><span class="line">4219</span><br><span class="line">4220</span><br><span class="line">4221</span><br><span class="line">4222</span><br><span class="line">4223</span><br><span class="line">4224</span><br><span class="line">4225</span><br><span class="line">4226</span><br><span class="line">4227</span><br><span class="line">4228</span><br><span class="line">4229</span><br><span class="line">4230</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 预处理数据,主要为配置文件信息,预定义函数,让主要脚本文件更简短</span></span><br><span class="line"><span class="comment"># 预定义函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">root_check</span></span>()&#123;  <span class="comment"># 检测是否有 root 权限</span></span><br><span class="line">    <span class="keyword">if</span>  ([ `<span class="built_in">id</span> -u` -ne 0 ]);<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;Are u root?&quot;</span></span><br><span class="line">        <span class="built_in">exit</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置 root 密码</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">root_passwd</span></span>()&#123; <span class="comment"># 设置 root 用户密码为&quot;hjkl;&#x27;&quot;</span></span><br><span class="line">    passwd -d root &gt; /dev/null</span><br><span class="line">    <span class="comment"># &quot;&lt;&lt;-&quot; 能让传入的数据忽略制表符,但是! VSC 下的缩进是多个空格!</span></span><br><span class="line">    <span class="comment"># 因此无法被忽略,那干脆就不缩进了</span></span><br><span class="line">    passwd root &lt;&lt;- <span class="string">EOF &gt; /dev/null</span></span><br><span class="line"><span class="string">$pre_passwd</span></span><br><span class="line"><span class="string">$pre_passwd</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">    <span class="comment"># EOF 好像必须挤在开头, 且后面不能跟别的东西, 包括注释</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出提示信息</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">my_print</span></span>()&#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;pre_user&#125;</span>=\&gt;&quot;</span><span class="variable">$1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># double 前缀表示二次转义,一般用于默认用户的配置文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认用户名</span></span><br><span class="line">pre_user=$(<span class="built_in">ls</span> /home | <span class="built_in">cut</span> -d <span class="string">&quot; &quot;</span> -f 1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认用户密码</span></span><br><span class="line">pre_passwd=<span class="string">&quot;hjkl;&#x27;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 预装软件列表</span></span><br><span class="line">pre_software=<span class="string">&quot;zsh-autosuggestions vim zsh man git&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 额外工具列表</span></span><br><span class="line">pre_tools=<span class="string">&quot;whatweb nmap dirsearch hydra binwalk&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># source.list 文件</span></span><br><span class="line">pre_source=<span class="string">&quot;</span></span><br><span class="line"><span class="string"># 阿里源</span></span><br><span class="line"><span class="string">deb http://mirrors.aliyun.com/ubuntu/ jammy main restricted universe multiverse</span></span><br><span class="line"><span class="string">deb-src http://mirrors.aliyun.com/ubuntu/ jammy main restricted universe multiverse</span></span><br><span class="line"><span class="string">deb http://mirrors.aliyun.com/ubuntu/ jammy-security main restricted universe multiverse</span></span><br><span class="line"><span class="string">deb-src http://mirrors.aliyun.com/ubuntu/ jammy-security main restricted universe multiverse</span></span><br><span class="line"><span class="string">deb http://mirrors.aliyun.com/ubuntu/ jammy-updates main restricted universe multiverse</span></span><br><span class="line"><span class="string">deb-src http://mirrors.aliyun.com/ubuntu/ jammy-updates main restricted universe multiverse</span></span><br><span class="line"><span class="string">deb http://mirrors.aliyun.com/ubuntu/ jammy-proposed main restricted universe multiverse</span></span><br><span class="line"><span class="string">deb-src http://mirrors.aliyun.com/ubuntu/ jammy-proposed main restricted universe multiverse</span></span><br><span class="line"><span class="string">deb http://mirrors.aliyun.com/ubuntu/ jammy-backports main restricted universe multiverse</span></span><br><span class="line"><span class="string">deb-src http://mirrors.aliyun.com/ubuntu/ jammy-backports main restricted universe multiverse</span></span><br><span class="line"><span class="string">&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># double-.vimrc 文件</span></span><br><span class="line">pre_double_vimrc=<span class="string">&quot;</span></span><br><span class="line"><span class="string">    echo \&quot;</span></span><br><span class="line"><span class="string">\\\&quot; Vim-Plug Section</span></span><br><span class="line"><span class="string">call plug#begin()</span></span><br><span class="line"><span class="string">	Plug &#x27;junegunn/seoul256.vim&#x27;</span></span><br><span class="line"><span class="string">call plug#end()</span></span><br><span class="line"><span class="string">\\\&quot; 报错转换为屏幕闪烁</span></span><br><span class="line"><span class="string">set vb t_vb=</span></span><br><span class="line"><span class="string">\\\&quot; 更改列高亮状态下的文字颜色</span></span><br><span class="line"><span class="string">hi cursorcolumn ctermfg=black ctermbg=grey</span></span><br><span class="line"><span class="string">\\\&quot; 更改Visual状态下的文字颜色</span></span><br><span class="line"><span class="string">hi visual ctermfg=black ctermbg=grey</span></span><br><span class="line"><span class="string">\\\&quot; 设置文件编码方式为utf-8</span></span><br><span class="line"><span class="string">set enc=utf-8</span></span><br><span class="line"><span class="string">\\\&quot; 启用seoul256主题，需要安装VimPlug与对应主题以后才能使用</span></span><br><span class="line"><span class="string">colo seoul256</span></span><br><span class="line"><span class="string">    \&quot; &gt; ~/.vimrc</span></span><br><span class="line"><span class="string">&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># double-dircolors 文件</span></span><br><span class="line">pre_double_dircolors=<span class="string">&quot;</span></span><br><span class="line"><span class="string">    echo \&quot;</span></span><br><span class="line"><span class="string"># Configuration file for dircolors, a utility to help you set the</span></span><br><span class="line"><span class="string"># LS_COLORS environment variable used by GNU ls with the --color option.</span></span><br><span class="line"><span class="string"># Copyright (C) 1996-2022 Free Software Foundation, Inc.</span></span><br><span class="line"><span class="string"># Copying and distribution of this file, with or without modification,</span></span><br><span class="line"><span class="string"># are permitted provided the copyright notice and this notice are preserved.</span></span><br><span class="line"><span class="string"># The keywords COLOR, OPTIONS, and EIGHTBIT (honored by the</span></span><br><span class="line"><span class="string"># slackware version of dircolors) are recognized but ignored.</span></span><br><span class="line"><span class="string"># Global config options can be specified before TERM or COLORTERM entries</span></span><br><span class="line"><span class="string"># Below are TERM or COLORTERM entries, which can be glob patterns, which</span></span><br><span class="line"><span class="string"># restrict following config to systems with matching environment variables.</span></span><br><span class="line"><span class="string">COLORTERM ?*</span></span><br><span class="line"><span class="string">TERM Eterm</span></span><br><span class="line"><span class="string">TERM ansi</span></span><br><span class="line"><span class="string">TERM *color*</span></span><br><span class="line"><span class="string">TERM con[0-9]*x[0-9]*</span></span><br><span class="line"><span class="string">TERM cons25</span></span><br><span class="line"><span class="string">TERM console</span></span><br><span class="line"><span class="string">TERM cygwin</span></span><br><span class="line"><span class="string">TERM *direct*</span></span><br><span class="line"><span class="string">TERM dtterm</span></span><br><span class="line"><span class="string">TERM gnome</span></span><br><span class="line"><span class="string">TERM hurd</span></span><br><span class="line"><span class="string">TERM jfbterm</span></span><br><span class="line"><span class="string">TERM konsole</span></span><br><span class="line"><span class="string">TERM kterm</span></span><br><span class="line"><span class="string">TERM linux</span></span><br><span class="line"><span class="string">TERM linux-c</span></span><br><span class="line"><span class="string">TERM mlterm</span></span><br><span class="line"><span class="string">TERM putty</span></span><br><span class="line"><span class="string">TERM rxvt*</span></span><br><span class="line"><span class="string">TERM screen*</span></span><br><span class="line"><span class="string">TERM st</span></span><br><span class="line"><span class="string">TERM terminator</span></span><br><span class="line"><span class="string">TERM tmux*</span></span><br><span class="line"><span class="string">TERM vt100</span></span><br><span class="line"><span class="string">TERM xterm*</span></span><br><span class="line"><span class="string"># Below are the color init strings for the basic file types.</span></span><br><span class="line"><span class="string"># One can use codes for 256 or more colors supported by modern terminals.</span></span><br><span class="line"><span class="string"># The default color codes use the capabilities of an 8 color terminal</span></span><br><span class="line"><span class="string"># with some additional attributes as per the following codes:</span></span><br><span class="line"><span class="string"># Attribute codes:</span></span><br><span class="line"><span class="string"># 00=none 01=bold 04=underscore 05=blink 07=reverse 08=concealed</span></span><br><span class="line"><span class="string"># Text color codes:</span></span><br><span class="line"><span class="string"># 30=black 31=red 32=green 33=yellow 34=blue 35=magenta 36=cyan 37=white</span></span><br><span class="line"><span class="string"># Background color codes:</span></span><br><span class="line"><span class="string"># 40=black 41=red 42=green 43=yellow 44=blue 45=magenta 46=cyan 47=white</span></span><br><span class="line"><span class="string">#NORMAL 00 # no color code at all</span></span><br><span class="line"><span class="string">#FILE 00 # regular file: use no color at all</span></span><br><span class="line"><span class="string">RESET 0 # reset to \\\&quot;normal\\\&quot; color</span></span><br><span class="line"><span class="string">DIR 01;33 # directory</span></span><br><span class="line"><span class="string">LINK 01;36 # symbolic link. (If you set this to &#x27;target&#x27; instead of a</span></span><br><span class="line"><span class="string"> # numerical value, the color is as for the file pointed to.)</span></span><br><span class="line"><span class="string">MULTIHARDLINK 00 # regular file with more than one link</span></span><br><span class="line"><span class="string">FIFO 33;03 # pipe</span></span><br><span class="line"><span class="string">SOCK 33;03 # socket</span></span><br><span class="line"><span class="string">DOOR 33;03 # door</span></span><br><span class="line"><span class="string">BLK 40;33;01 # block device driver</span></span><br><span class="line"><span class="string">CHR 40;33;01 # character device driver</span></span><br><span class="line"><span class="string">ORPHAN 33;03;40 # symlink to nonexistent file, or non-stat&#x27;able file ...</span></span><br><span class="line"><span class="string">MISSING 00 # ... and the files they point to</span></span><br><span class="line"><span class="string">SETUID 36;03;04 # file that is setuid (u+s)</span></span><br><span class="line"><span class="string">SETGID 36;03;04 # file that is setgid (g+s)</span></span><br><span class="line"><span class="string">CAPABILITY 00 # file with capability (very expensive to lookup)</span></span><br><span class="line"><span class="string">STICKY_OTHER_WRITABLE 37;01;03;46 # dir that is sticky and other-writable (+t,o+w)</span></span><br><span class="line"><span class="string">OTHER_WRITABLE 36;01;03;04 # dir that is other-writable (o+w) and not sticky</span></span><br><span class="line"><span class="string">STICKY 36;03;04 # dir with the sticky bit set (+t) and not other-writable</span></span><br><span class="line"><span class="string"># This is for files with execute permission:</span></span><br><span class="line"><span class="string">EXEC 01;32;03;04</span></span><br><span class="line"><span class="string"># List any file extensions like &#x27;.gz&#x27; or &#x27;.tar&#x27; that you would like ls</span></span><br><span class="line"><span class="string"># to color below. Put the extension, a space, and the color init string.</span></span><br><span class="line"><span class="string"># (and any comments you want to add after a &#x27;#&#x27;)</span></span><br><span class="line"><span class="string"># If you use DOS-style suffixes, you may want to uncomment the following:</span></span><br><span class="line"><span class="string">#.cmd 01;32 # executables (bright green)</span></span><br><span class="line"><span class="string">#.exe 01;32</span></span><br><span class="line"><span class="string">#.com 01;32</span></span><br><span class="line"><span class="string">#.btm 01;32</span></span><br><span class="line"><span class="string">#.bat 01;32</span></span><br><span class="line"><span class="string"># Or if you want to color scripts even if they do not have the</span></span><br><span class="line"><span class="string"># executable bit actually set.</span></span><br><span class="line"><span class="string">#.sh 01;32</span></span><br><span class="line"><span class="string">#.csh 01;32</span></span><br><span class="line"><span class="string"> # archives or compressed (bright red)</span></span><br><span class="line"><span class="string">.tar 01;32</span></span><br><span class="line"><span class="string">.tgz 01;32</span></span><br><span class="line"><span class="string">.arc 01;32</span></span><br><span class="line"><span class="string">.arj 01;32</span></span><br><span class="line"><span class="string">.taz 01;32</span></span><br><span class="line"><span class="string">.lha 01;32</span></span><br><span class="line"><span class="string">.lz4 01;32</span></span><br><span class="line"><span class="string">.lzh 01;32</span></span><br><span class="line"><span class="string">.lzma 01;32</span></span><br><span class="line"><span class="string">.tlz 01;32</span></span><br><span class="line"><span class="string">.txz 01;32</span></span><br><span class="line"><span class="string">.tzo 01;32</span></span><br><span class="line"><span class="string">.t7z 01;32</span></span><br><span class="line"><span class="string">.zip 01;32</span></span><br><span class="line"><span class="string">.z 01;32</span></span><br><span class="line"><span class="string">.dz 01;32</span></span><br><span class="line"><span class="string">.gz 01;32</span></span><br><span class="line"><span class="string">.lrz 01;32</span></span><br><span class="line"><span class="string">.lz 01;32</span></span><br><span class="line"><span class="string">.lzo 01;32</span></span><br><span class="line"><span class="string">.xz 01;32</span></span><br><span class="line"><span class="string">.zst 01;32</span></span><br><span class="line"><span class="string">.tzst 01;32</span></span><br><span class="line"><span class="string">.bz2 01;32</span></span><br><span class="line"><span class="string">.bz 01;32</span></span><br><span class="line"><span class="string">.tbz 01;32</span></span><br><span class="line"><span class="string">.tbz2 01;32</span></span><br><span class="line"><span class="string">.tz 01;32</span></span><br><span class="line"><span class="string">.deb 01;32</span></span><br><span class="line"><span class="string">.rpm 01;32</span></span><br><span class="line"><span class="string">.jar 01;32</span></span><br><span class="line"><span class="string">.war 01;32</span></span><br><span class="line"><span class="string">.ear 01;32</span></span><br><span class="line"><span class="string">.sar 01;32</span></span><br><span class="line"><span class="string">.rar 01;32</span></span><br><span class="line"><span class="string">.alz 01;32</span></span><br><span class="line"><span class="string">.ace 01;32</span></span><br><span class="line"><span class="string">.zoo 01;32</span></span><br><span class="line"><span class="string">.cpio 01;32</span></span><br><span class="line"><span class="string">.7z 01;32</span></span><br><span class="line"><span class="string">.rz 01;32</span></span><br><span class="line"><span class="string">.cab 01;32</span></span><br><span class="line"><span class="string">.wim 01;32</span></span><br><span class="line"><span class="string">.swm 01;32</span></span><br><span class="line"><span class="string">.dwm 01;32</span></span><br><span class="line"><span class="string">.esd 01;32</span></span><br><span class="line"><span class="string"># image formats</span></span><br><span class="line"><span class="string">.avif 01;37;03;04</span></span><br><span class="line"><span class="string">.jpg 01;37;03;04</span></span><br><span class="line"><span class="string">.jpeg 01;37;03;04</span></span><br><span class="line"><span class="string">.mjpg 01;37;03;04</span></span><br><span class="line"><span class="string">.mjpeg 01;37;03;04</span></span><br><span class="line"><span class="string">.gif 01;37;03;04</span></span><br><span class="line"><span class="string">.bmp 01;37;03;04</span></span><br><span class="line"><span class="string">.pbm 01;37;03;04</span></span><br><span class="line"><span class="string">.pgm 01;37;03;04</span></span><br><span class="line"><span class="string">.ppm 01;37;03;04</span></span><br><span class="line"><span class="string">.tga 01;37;03;04</span></span><br><span class="line"><span class="string">.xbm 01;37;03;04</span></span><br><span class="line"><span class="string">.xpm 01;37;03;04</span></span><br><span class="line"><span class="string">.tif 01;37;03;04</span></span><br><span class="line"><span class="string">.tiff 01;37;03;04</span></span><br><span class="line"><span class="string">.png 01;37;03;04</span></span><br><span class="line"><span class="string">.svg 01;37;03;04</span></span><br><span class="line"><span class="string">.svgz 01;37;03;04</span></span><br><span class="line"><span class="string">.mng 01;37;03;04</span></span><br><span class="line"><span class="string">.pcx 01;37;03;04</span></span><br><span class="line"><span class="string">.mov 01;37;03;04</span></span><br><span class="line"><span class="string">.mpg 01;37;03;04</span></span><br><span class="line"><span class="string">.mpeg 01;37;03;04</span></span><br><span class="line"><span class="string">.m2v 01;37;03;04</span></span><br><span class="line"><span class="string">.mkv 01;37;03;04</span></span><br><span class="line"><span class="string">.webm 01;37;03;04</span></span><br><span class="line"><span class="string">.webp 01;37;03;04</span></span><br><span class="line"><span class="string">.ogm 01;37;03;04</span></span><br><span class="line"><span class="string">.mp4 01;37;03;04</span></span><br><span class="line"><span class="string">.m4v 01;37;03;04</span></span><br><span class="line"><span class="string">.mp4v 01;37;03;04</span></span><br><span class="line"><span class="string">.vob 01;37;03;04</span></span><br><span class="line"><span class="string">.qt 01;37;03;04</span></span><br><span class="line"><span class="string">.nuv 01;37;03;04</span></span><br><span class="line"><span class="string">.wmv 01;37;03;04</span></span><br><span class="line"><span class="string">.asf 01;37;03;04</span></span><br><span class="line"><span class="string">.rm 01;37;03;04</span></span><br><span class="line"><span class="string">.rmvb 01;37;03;04</span></span><br><span class="line"><span class="string">.flc 01;37;03;04</span></span><br><span class="line"><span class="string">.avi 01;37;03;04</span></span><br><span class="line"><span class="string">.fli 01;37;03;04</span></span><br><span class="line"><span class="string">.flv 01;37;03;04</span></span><br><span class="line"><span class="string">.gl 01;37;03;04</span></span><br><span class="line"><span class="string">.dl 01;37;03;04</span></span><br><span class="line"><span class="string">.xcf 01;37;03;04</span></span><br><span class="line"><span class="string">.xwd 01;37;03;04</span></span><br><span class="line"><span class="string">.yuv 01;37;03;04</span></span><br><span class="line"><span class="string">.cgm 01;37;03;04</span></span><br><span class="line"><span class="string">.emf 01;37;03;04</span></span><br><span class="line"><span class="string"># https://wiki.xiph.org/MIME_Types_and_File_Extensions</span></span><br><span class="line"><span class="string">.ogv 01;37;03;04</span></span><br><span class="line"><span class="string">.ogx 01;37;03;04</span></span><br><span class="line"><span class="string"># audio formats</span></span><br><span class="line"><span class="string">.aac 00;36</span></span><br><span class="line"><span class="string">.au 00;36</span></span><br><span class="line"><span class="string">.flac 00;36</span></span><br><span class="line"><span class="string">.m4a 00;36</span></span><br><span class="line"><span class="string">.mid 00;36</span></span><br><span class="line"><span class="string">.midi 00;36</span></span><br><span class="line"><span class="string">.mka 00;36</span></span><br><span class="line"><span class="string">.mp3 00;36</span></span><br><span class="line"><span class="string">.mpc 00;36</span></span><br><span class="line"><span class="string">.ogg 00;36</span></span><br><span class="line"><span class="string">.ra 00;36</span></span><br><span class="line"><span class="string">.wav 00;36</span></span><br><span class="line"><span class="string"># https://wiki.xiph.org/MIME_Types_and_File_Extensions</span></span><br><span class="line"><span class="string">.oga 00;36</span></span><br><span class="line"><span class="string">.opus 00;36</span></span><br><span class="line"><span class="string">.spx 00;36</span></span><br><span class="line"><span class="string">.xspf 00;36</span></span><br><span class="line"><span class="string"># backup files</span></span><br><span class="line"><span class="string">*~ 00;90</span></span><br><span class="line"><span class="string">*# 00;90</span></span><br><span class="line"><span class="string">.bak 00;90</span></span><br><span class="line"><span class="string">.old 00;90</span></span><br><span class="line"><span class="string">.orig 00;90</span></span><br><span class="line"><span class="string">.part 00;90</span></span><br><span class="line"><span class="string">.rej 00;90</span></span><br><span class="line"><span class="string">.swp 00;90</span></span><br><span class="line"><span class="string">.tmp 00;90</span></span><br><span class="line"><span class="string">.dpkg-dist 00;90</span></span><br><span class="line"><span class="string">.dpkg-old 00;90</span></span><br><span class="line"><span class="string">.ucf-dist 00;90</span></span><br><span class="line"><span class="string">.ucf-new 00;90</span></span><br><span class="line"><span class="string">.ucf-old 00;90</span></span><br><span class="line"><span class="string">.rpmnew 00;90</span></span><br><span class="line"><span class="string">.rpmorig 00;90</span></span><br><span class="line"><span class="string">.rpmsave 00;90</span></span><br><span class="line"><span class="string"># Subsequent TERM or COLORTERM entries, can be used to add / override</span></span><br><span class="line"><span class="string"># config specific to those matching environment variables.</span></span><br><span class="line"><span class="string">    \&quot; &gt; ~/.dircolors</span></span><br><span class="line"><span class="string">&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># double-.zshrc 文件</span></span><br><span class="line">pre_double_zshrc=<span class="string">&quot;</span></span><br><span class="line"><span class="string">    echo \&quot;</span></span><br><span class="line"><span class="string"># Enable Powerlevel10k instant prompt. Should stay close to the top of ~/.zshrc.</span></span><br><span class="line"><span class="string"># Initialization code that may require console input (password prompts, [y/n]</span></span><br><span class="line"><span class="string"># confirmations, etc.) must go above this block; everything else may go below.</span></span><br><span class="line"><span class="string">if [[ -r \\\&quot;\\\$&#123;XDG_CACHE_HOME:-\\\$HOME/.cache&#125;/p10k-instant-prompt-\\\$&#123;(%):-%n&#125;.zsh\\\&quot; ]]; then</span></span><br><span class="line"><span class="string">  source \\\&quot;\\\$&#123;XDG_CACHE_HOME:-\\\$HOME/.cache&#125;/p10k-instant-prompt-\\\$&#123;(%):-%n&#125;.zsh\\\&quot;</span></span><br><span class="line"><span class="string">fi</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># ~/.zshrc file for zsh interactive shells.</span></span><br><span class="line"><span class="string"># see /usr/share/doc/zsh/examples/zshrc for examples</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">setopt autocd              # change directory just by typing its name</span></span><br><span class="line"><span class="string">#setopt correct            # auto correct mistakes</span></span><br><span class="line"><span class="string">setopt interactivecomments # allow comments in interactive mode</span></span><br><span class="line"><span class="string">setopt magicequalsubst     # enable filename expansion for arguments of the form ‘anything=expression’</span></span><br><span class="line"><span class="string">setopt nonomatch           # hide error message if there is no match for the pattern</span></span><br><span class="line"><span class="string">setopt notify              # report the status of background jobs immediately</span></span><br><span class="line"><span class="string">setopt numericglobsort     # sort filenames numerically when it makes sense</span></span><br><span class="line"><span class="string">setopt promptsubst         # enable command substitution in prompt</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">WORDCHARS=\\\$&#123;WORDCHARS//\\/&#125; # Don&#x27;t consider certain characters part of the word</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># hide EOL sign (&#x27;%&#x27;)</span></span><br><span class="line"><span class="string">PROMPT_EOL_MARK=\\\&quot;\\\&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># configure key keybindings</span></span><br><span class="line"><span class="string">bindkey -e                                        # emacs key bindings</span></span><br><span class="line"><span class="string">bindkey &#x27; &#x27; magic-space                           # do history expansion on space</span></span><br><span class="line"><span class="string">bindkey &#x27;^U&#x27; backward-kill-line                   # ctrl + U</span></span><br><span class="line"><span class="string">bindkey &#x27;^[[3;5~&#x27; kill-word                       # ctrl + Supr</span></span><br><span class="line"><span class="string">bindkey &#x27;^[[3~&#x27; delete-char                       # delete</span></span><br><span class="line"><span class="string">bindkey &#x27;^[[1;5C&#x27; forward-word                    # ctrl + -&gt;</span></span><br><span class="line"><span class="string">bindkey &#x27;^[[1;5D&#x27; backward-word                   # ctrl + &lt;-</span></span><br><span class="line"><span class="string">bindkey &#x27;^[[5~&#x27; beginning-of-buffer-or-history    # page up</span></span><br><span class="line"><span class="string">bindkey &#x27;^[[6~&#x27; end-of-buffer-or-history          # page down</span></span><br><span class="line"><span class="string">bindkey &#x27;^[[H&#x27; beginning-of-line                  # home</span></span><br><span class="line"><span class="string">bindkey &#x27;^[[F&#x27; end-of-line                        # end</span></span><br><span class="line"><span class="string">bindkey &#x27;^[[Z&#x27; undo                               # shift + tab undo last action</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># enable completion features</span></span><br><span class="line"><span class="string">autoload -Uz compinit</span></span><br><span class="line"><span class="string">compinit -d ~/.cache/zcompdump</span></span><br><span class="line"><span class="string">zstyle &#x27;:completion:*:*:*:*:*&#x27; menu select</span></span><br><span class="line"><span class="string">zstyle &#x27;:completion:*&#x27; auto-description &#x27;specify: %d&#x27;</span></span><br><span class="line"><span class="string">zstyle &#x27;:completion:*&#x27; completer _expand _complete</span></span><br><span class="line"><span class="string">zstyle &#x27;:completion:*&#x27; format &#x27;Completing %d&#x27;</span></span><br><span class="line"><span class="string">zstyle &#x27;:completion:*&#x27; group-name &#x27;&#x27;</span></span><br><span class="line"><span class="string">zstyle &#x27;:completion:*&#x27; list-colors &#x27;&#x27;</span></span><br><span class="line"><span class="string">zstyle &#x27;:completion:*&#x27; list-prompt %SAt %p: Hit TAB for more, or the character to insert%s</span></span><br><span class="line"><span class="string">zstyle &#x27;:completion:*&#x27; matcher-list &#x27;m:&#123;a-zA-Z&#125;=&#123;A-Za-z&#125;&#x27;</span></span><br><span class="line"><span class="string">zstyle &#x27;:completion:*&#x27; rehash true</span></span><br><span class="line"><span class="string">zstyle &#x27;:completion:*&#x27; select-prompt %SScrolling active: current selection at %p%s</span></span><br><span class="line"><span class="string">zstyle &#x27;:completion:*&#x27; use-compctl false</span></span><br><span class="line"><span class="string">zstyle &#x27;:completion:*&#x27; verbose true</span></span><br><span class="line"><span class="string">zstyle &#x27;:completion:*:kill:*&#x27; command &#x27;ps -u \\\$USER -o pid,%cpu,tty,cputime,cmd&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># History configurations</span></span><br><span class="line"><span class="string">HISTFILE=~/.zsh_history</span></span><br><span class="line"><span class="string">HISTSIZE=1000</span></span><br><span class="line"><span class="string">SAVEHIST=2000</span></span><br><span class="line"><span class="string">setopt hist_expire_dups_first # delete duplicates first when HISTFILE size exceeds HISTSIZE</span></span><br><span class="line"><span class="string">setopt hist_ignore_dups       # ignore duplicated commands history list</span></span><br><span class="line"><span class="string">setopt hist_ignore_space      # ignore commands that start with space</span></span><br><span class="line"><span class="string">setopt hist_verify            # show command with history expansion to user before running it</span></span><br><span class="line"><span class="string">#setopt share_history         # share command history data</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># force zsh to show the complete history</span></span><br><span class="line"><span class="string">alias history=\\\&quot;history 0\\\&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># configure \\\`time\\\` format</span></span><br><span class="line"><span class="string">TIMEFMT=\\\$&#x27;\\nreal\\t%E\\nuser\\t%U\\nsys\\t%S\\ncpu\\t%P&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># make less more friendly for non-text input files, see lesspipe(1)</span></span><br><span class="line"><span class="string">#[ -x /usr/bin/lesspipe ] &amp;&amp; eval \\\&quot;\\\$(SHELL=/bin/sh lesspipe)\\\&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># set variable identifying the chroot you work in (used in the prompt below)</span></span><br><span class="line"><span class="string">if [ -z \\\&quot;\\\$&#123;debian_chroot:-&#125;\\\&quot; ] &amp;&amp; [ -r /etc/debian_chroot ]; then</span></span><br><span class="line"><span class="string">    debian_chroot=\\\$(cat /etc/debian_chroot)</span></span><br><span class="line"><span class="string">fi</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># set a fancy prompt (non-color, unless we know we \\\&quot;want\\\&quot; color)</span></span><br><span class="line"><span class="string">case \\\&quot;\\\$TERM\\\&quot; in</span></span><br><span class="line"><span class="string">    xterm-color|*-256color) color_prompt=yes;;</span></span><br><span class="line"><span class="string">esac</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># uncomment for a colored prompt, if the terminal has the capability; turned</span></span><br><span class="line"><span class="string"># off by default to not distract the user: the focus in a terminal window</span></span><br><span class="line"><span class="string"># should be on the output of commands, not on the prompt</span></span><br><span class="line"><span class="string">force_color_prompt=yes</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">if [ -n \\\&quot;\\\$force_color_prompt\\\&quot; ]; then</span></span><br><span class="line"><span class="string">    if [ -x /usr/bin/tput ] &amp;&amp; tput setaf 1 &gt;&amp;/dev/null; then</span></span><br><span class="line"><span class="string">        # We have color support; assume it&#x27;s compliant with Ecma-48</span></span><br><span class="line"><span class="string">        # (ISO/IEC-6429). (Lack of such support is extremely rare, and such</span></span><br><span class="line"><span class="string">        # a case would tend to support setf rather than setaf.)</span></span><br><span class="line"><span class="string">        color_prompt=yes</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">        color_prompt=</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">fi</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">configure_prompt() &#123;</span></span><br><span class="line"><span class="string">    prompt_symbol=㉿</span></span><br><span class="line"><span class="string">    # Skull emoji for root terminal</span></span><br><span class="line"><span class="string">    #[ \\\&quot;\\\$EUID\\\&quot; -eq 0 ] &amp;&amp; prompt_symbol=💀</span></span><br><span class="line"><span class="string">    case \\\&quot;\\\$PROMPT_ALTERNATIVE\\\&quot; in</span></span><br><span class="line"><span class="string">        twoline)</span></span><br><span class="line"><span class="string">            PROMPT=\\\$&#x27;%F&#123;%(#.blue.green)&#125;┌──\\\$&#123;debian_chroot:+(\\\$debian_chroot)─&#125;\\\$&#123;VIRTUAL_ENV:+(\\\$(basename \\\$VIRTUAL_ENV))─&#125;(%B%F&#123;%(#.red.blue)&#125;%n&#x27;\\\$prompt_symbol\\\$&#x27;%m%b%F&#123;%(#.blue.green)&#125;)-[%B%F&#123;reset&#125;%(6~.%-1~/…/%4~.%5~)%b%F&#123;%(#.blue.green)&#125;]\\n└─%B%(#.%F&#123;red&#125;#.%F&#123;blue&#125;\\\$)%b%F&#123;reset&#125; &#x27;</span></span><br><span class="line"><span class="string">            # Right-side prompt with exit codes and background processes</span></span><br><span class="line"><span class="string">            #RPROMPT=\\\$&#x27;%(?.. %? %F&#123;red&#125;%B⨯%b%F&#123;reset&#125;)%(1j. %j %F&#123;yellow&#125;%B⚙%b%F&#123;reset&#125;.)&#x27;</span></span><br><span class="line"><span class="string">            ;;</span></span><br><span class="line"><span class="string">        oneline)</span></span><br><span class="line"><span class="string">            PROMPT=\\\$&#x27;\\\$&#123;debian_chroot:+(\\\$debian_chroot)&#125;\\\$&#123;VIRTUAL_ENV:+(\\\$(basename \\\$VIRTUAL_ENV))&#125;%B%F&#123;%(#.red.blue)&#125;%n@%m%b%F&#123;reset&#125;:%B%F&#123;%(#.blue.green)&#125;%~%b%F&#123;reset&#125;%(#.#.\\\$) &#x27;</span></span><br><span class="line"><span class="string">            RPROMPT=</span></span><br><span class="line"><span class="string">            ;;</span></span><br><span class="line"><span class="string">        backtrack)</span></span><br><span class="line"><span class="string">            PROMPT=\\\$&#x27;\\\$&#123;debian_chroot:+(\\\$debian_chroot)&#125;\\\$&#123;VIRTUAL_ENV:+(\\\$(basename \\\$VIRTUAL_ENV))&#125;%B%F&#123;red&#125;%n@%m%b%F&#123;reset&#125;:%B%F&#123;blue&#125;%~%b%F&#123;reset&#125;%(#.#.\\\$) &#x27;</span></span><br><span class="line"><span class="string">            RPROMPT=</span></span><br><span class="line"><span class="string">            ;;</span></span><br><span class="line"><span class="string">    esac</span></span><br><span class="line"><span class="string">    unset prompt_symbol</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># The following block is surrounded by two delimiters.</span></span><br><span class="line"><span class="string"># These delimiters must not be modified. Thanks.</span></span><br><span class="line"><span class="string"># START KALI CONFIG VARIABLES</span></span><br><span class="line"><span class="string">PROMPT_ALTERNATIVE=twoline</span></span><br><span class="line"><span class="string">NEWLINE_BEFORE_PROMPT=yes</span></span><br><span class="line"><span class="string"># STOP KALI CONFIG VARIABLES</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">if [ \\\&quot;\\\$color_prompt\\\&quot; = yes ]; then</span></span><br><span class="line"><span class="string">    # override default virtualenv indicator in prompt</span></span><br><span class="line"><span class="string">    VIRTUAL_ENV_DISABLE_PROMPT=1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    configure_prompt</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    # enable syntax-highlighting</span></span><br><span class="line"><span class="string">    if [ -f /usr/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh ]; then</span></span><br><span class="line"><span class="string">        . /usr/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_HIGHLIGHTERS=(main brackets pattern)</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[default]=none</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[unknown-token]=underline</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[reserved-word]=fg=cyan,bold</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[suffix-alias]=fg=green,underline</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[global-alias]=fg=green,bold</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[precommand]=fg=green,underline</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[commandseparator]=fg=blue,bold</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[autodirectory]=fg=green,underline</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[path]=bold</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[path_pathseparator]=</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[path_prefix_pathseparator]=</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[globbing]=fg=blue,bold</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[history-expansion]=fg=blue,bold</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[command-substitution]=none</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[command-substitution-delimiter]=fg=magenta,bold</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[process-substitution]=none</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[process-substitution-delimiter]=fg=magenta,bold</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[single-hyphen-option]=fg=green</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[double-hyphen-option]=fg=green</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[back-quoted-argument]=none</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[back-quoted-argument-delimiter]=fg=blue,bold</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[single-quoted-argument]=fg=yellow</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[double-quoted-argument]=fg=yellow</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[dollar-quoted-argument]=fg=yellow</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[rc-quote]=fg=magenta</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[dollar-double-quoted-argument]=fg=magenta,bold</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[back-double-quoted-argument]=fg=magenta,bold</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[back-dollar-quoted-argument]=fg=magenta,bold</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[assign]=none</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[redirection]=fg=blue,bold</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[comment]=fg=black,bold</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[named-fd]=none</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[numeric-fd]=none</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[arg0]=fg=cyan</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[bracket-error]=fg=red,bold</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[bracket-level-1]=fg=blue,bold</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[bracket-level-2]=fg=green,bold</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[bracket-level-3]=fg=magenta,bold</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[bracket-level-4]=fg=yellow,bold</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[bracket-level-5]=fg=cyan,bold</span></span><br><span class="line"><span class="string">        ZSH_HIGHLIGHT_STYLES[cursor-matchingbracket]=standout</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">else</span></span><br><span class="line"><span class="string">    PROMPT=&#x27;\\\$&#123;debian_chroot:+(\\\$debian_chroot)&#125;%n@%m:%~%(#.#.\\\$) &#x27;</span></span><br><span class="line"><span class="string">fi</span></span><br><span class="line"><span class="string">unset color_prompt force_color_prompt</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">toggle_oneline_prompt()&#123;</span></span><br><span class="line"><span class="string">    if [ \\\&quot;\\\$PROMPT_ALTERNATIVE\\\&quot; = oneline ]; then</span></span><br><span class="line"><span class="string">        PROMPT_ALTERNATIVE=twoline</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">        PROMPT_ALTERNATIVE=oneline</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">    configure_prompt</span></span><br><span class="line"><span class="string">    zle reset-prompt</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">zle -N toggle_oneline_prompt</span></span><br><span class="line"><span class="string">bindkey ^P toggle_oneline_prompt</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># If this is an xterm set the title to user@host:dir</span></span><br><span class="line"><span class="string">case \\\&quot;\\\$TERM\\\&quot; in</span></span><br><span class="line"><span class="string">xterm*|rxvt*|Eterm|aterm|kterm|gnome*|alacritty)</span></span><br><span class="line"><span class="string">    TERM_TITLE=\\\$&#x27;\\e]0;\\\$&#123;debian_chroot:+(\\\$debian_chroot)&#125;\\\$&#123;VIRTUAL_ENV:+(\\\$(basename \\\$VIRTUAL_ENV))&#125;%n@%m: %~\\a&#x27;</span></span><br><span class="line"><span class="string">    ;;</span></span><br><span class="line"><span class="string">*)</span></span><br><span class="line"><span class="string">    ;;</span></span><br><span class="line"><span class="string">esac</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">precmd() &#123;</span></span><br><span class="line"><span class="string">    # Print the previously configured title</span></span><br><span class="line"><span class="string">    print -Pnr -- \\\&quot;\\\$TERM_TITLE\\\&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    # Print a new line before the prompt, but only if it is not the first line</span></span><br><span class="line"><span class="string">    if [ \\\&quot;\\\$NEWLINE_BEFORE_PROMPT\\\&quot; = yes ]; then</span></span><br><span class="line"><span class="string">        if [ -z \\\&quot;\\\$_NEW_LINE_BEFORE_PROMPT\\\&quot; ]; then</span></span><br><span class="line"><span class="string">            _NEW_LINE_BEFORE_PROMPT=1</span></span><br><span class="line"><span class="string">        else</span></span><br><span class="line"><span class="string">            print \\\&quot;\\\&quot;</span></span><br><span class="line"><span class="string">        fi</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># enable color support of ls, less and man, and also add handy aliases</span></span><br><span class="line"><span class="string">if [ -x /usr/bin/dircolors ]; then</span></span><br><span class="line"><span class="string">    test -r ~/.dircolors &amp;&amp; eval \\\&quot;\\\$(dircolors -b ~/.dircolors)\\\&quot; || eval \\\&quot;\\\$(dircolors -b)\\\&quot;</span></span><br><span class="line"><span class="string">    export LS_COLORS=\\\&quot;\\\$LS_COLORS:ow=30;44:\\\&quot; # fix ls color for folders with 777 permissions</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    alias ls=&#x27;ls --color=auto&#x27;</span></span><br><span class="line"><span class="string">    #alias dir=&#x27;dir --color=auto&#x27;</span></span><br><span class="line"><span class="string">    #alias vdir=&#x27;vdir --color=auto&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    alias grep=&#x27;grep --color=auto&#x27;</span></span><br><span class="line"><span class="string">    alias fgrep=&#x27;fgrep --color=auto&#x27;</span></span><br><span class="line"><span class="string">    alias egrep=&#x27;egrep --color=auto&#x27;</span></span><br><span class="line"><span class="string">    alias diff=&#x27;diff --color=auto&#x27;</span></span><br><span class="line"><span class="string">    alias ip=&#x27;ip --color=auto&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    export LESS_TERMCAP_mb=\\\$&#x27;\\E[1;31m&#x27;     # begin blink</span></span><br><span class="line"><span class="string">    export LESS_TERMCAP_md=\\\$&#x27;\\E[1;36m&#x27;     # begin bold</span></span><br><span class="line"><span class="string">    export LESS_TERMCAP_me=\\\$&#x27;\\E[0m&#x27;        # reset bold/blink</span></span><br><span class="line"><span class="string">    export LESS_TERMCAP_so=\\\$&#x27;\\E[01;33m&#x27;    # begin reverse video</span></span><br><span class="line"><span class="string">    export LESS_TERMCAP_se=\\\$&#x27;\\E[0m&#x27;        # reset reverse video</span></span><br><span class="line"><span class="string">    export LESS_TERMCAP_us=\\\$&#x27;\\E[1;32m&#x27;     # begin underline</span></span><br><span class="line"><span class="string">    export LESS_TERMCAP_ue=\\\$&#x27;\\E[0m&#x27;        # reset underline</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    # Take advantage of \\\$LS_COLORS for completion as well</span></span><br><span class="line"><span class="string">    zstyle &#x27;:completion:*&#x27; list-colors \\\&quot;\\\$&#123;(s.:.)LS_COLORS&#125;\\\&quot;</span></span><br><span class="line"><span class="string">    zstyle &#x27;:completion:*:*:kill:*:processes&#x27; list-colors &#x27;=(#b) #([0-9]#)*=0=01;31&#x27;</span></span><br><span class="line"><span class="string">fi</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># some more ls aliases</span></span><br><span class="line"><span class="string">alias ll=&#x27;ls -l&#x27;</span></span><br><span class="line"><span class="string">alias la=&#x27;ls -A&#x27;</span></span><br><span class="line"><span class="string">alias l=&#x27;ls -CF&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># enable auto-suggestions based on the history</span></span><br><span class="line"><span class="string">if [ -f /usr/share/zsh-autosuggestions/zsh-autosuggestions.zsh ]; then</span></span><br><span class="line"><span class="string">    . /usr/share/zsh-autosuggestions/zsh-autosuggestions.zsh</span></span><br><span class="line"><span class="string">    # change suggestion color</span></span><br><span class="line"><span class="string">    ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE=&#x27;fg=#999&#x27;</span></span><br><span class="line"><span class="string">fi</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># enable command-not-found if installed</span></span><br><span class="line"><span class="string">if [ -f /etc/zsh_command_not_found ]; then</span></span><br><span class="line"><span class="string">    . /etc/zsh_command_not_found</span></span><br><span class="line"><span class="string">fi</span></span><br><span class="line"><span class="string"># set Theme powerlevel10k</span></span><br><span class="line"><span class="string">source ~/Documents/powerlevel10k/powerlevel10k.zsh-theme</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># To customize prompt, run \\\`p10k configure\\\` or edit ~/.p10k.zsh.</span></span><br><span class="line"><span class="string">[[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh</span></span><br><span class="line"><span class="string">    \&quot; &gt; ~/.zshrc</span></span><br><span class="line"><span class="string">&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># double-.p10k.zsh 文件</span></span><br><span class="line">pre_double_p10k=<span class="string">&quot;</span></span><br><span class="line"><span class="string">    echo -E \&quot;</span></span><br><span class="line"><span class="string"># Generated by Powerlevel10k configuration wizard on 2023-09-24 at 16:10 HKT.</span></span><br><span class="line"><span class="string"># Based on romkatv/powerlevel10k/config/p10k-classic.zsh, checksum 11985.</span></span><br><span class="line"><span class="string"># Wizard options: nerdfont-complete + powerline, small icons, classic, light, time,</span></span><br><span class="line"><span class="string"># angled separators, sharp heads, round tails, 2 lines, disconnected, full frame,</span></span><br><span class="line"><span class="string"># sparse, few icons, concise.</span></span><br><span class="line"><span class="string"># Type \\\`p10k configure\\\` to generate another config.</span></span><br><span class="line"><span class="string">#</span></span><br><span class="line"><span class="string"># Config for Powerlevel10k with classic powerline prompt style. Type \\\`p10k configure\\\` to generate</span></span><br><span class="line"><span class="string"># your own config based on it.</span></span><br><span class="line"><span class="string">#</span></span><br><span class="line"><span class="string"># Tip: Looking for a nice color? Here&#x27;s a one-liner to print colormap.</span></span><br><span class="line"><span class="string">#</span></span><br><span class="line"><span class="string">#   for i in &#123;0..255&#125;; do print -Pn \\\&quot;%\\\$&#123;i&#125;F\\\$&#123;(l:3::0:)i&#125;%f \\\&quot; \\\$&#123;\\\$&#123;(M)\\\$((i%8)):#7&#125;:+\\\$&#x27;\\\\n&#x27;&#125;; done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Temporarily change options.</span></span><br><span class="line"><span class="string">&#x27;builtin&#x27; &#x27;local&#x27; &#x27;-a&#x27; &#x27;p10k_config_opts&#x27;</span></span><br><span class="line"><span class="string">[[ ! -o &#x27;aliases&#x27;         ]] || p10k_config_opts+=(&#x27;aliases&#x27;)</span></span><br><span class="line"><span class="string">[[ ! -o &#x27;sh_glob&#x27;         ]] || p10k_config_opts+=(&#x27;sh_glob&#x27;)</span></span><br><span class="line"><span class="string">[[ ! -o &#x27;no_brace_expand&#x27; ]] || p10k_config_opts+=(&#x27;no_brace_expand&#x27;)</span></span><br><span class="line"><span class="string">&#x27;builtin&#x27; &#x27;setopt&#x27; &#x27;no_aliases&#x27; &#x27;no_sh_glob&#x27; &#x27;brace_expand&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">() &#123;</span></span><br><span class="line"><span class="string">  emulate -L zsh</span></span><br><span class="line"><span class="string">  setopt no_unset extended_glob</span></span><br><span class="line"><span class="string">  zmodload zsh/langinfo</span></span><br><span class="line"><span class="string">  if [[ \\\$&#123;langinfo[CODESET]:-&#125; != (utf|UTF)(-|)8 ]]; then</span></span><br><span class="line"><span class="string">    local LC_ALL=\\\$&#123;\\\$&#123;(@M)\\\$(locale -a):#*.(utf|UTF)(-|)8&#125;[1]:-en_US.UTF-8&#125;</span></span><br><span class="line"><span class="string">  fi</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # Unset all configuration options. This allows you to apply configiguration changes without</span></span><br><span class="line"><span class="string">  # restarting zsh. Edit ~/.p10k.zsh and type \\\`source ~/.p10k.zsh\\\`.</span></span><br><span class="line"><span class="string">  unset -m &#x27;POWERLEVEL9K_*&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # The list of segments shown on the left. Fill it with the most important segments.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(</span></span><br><span class="line"><span class="string">      # =========================[ Line #1 ]=========================</span></span><br><span class="line"><span class="string">      # os_icon               # os identifier</span></span><br><span class="line"><span class="string">      dir                     # current directory</span></span><br><span class="line"><span class="string">      vcs                     # git status</span></span><br><span class="line"><span class="string">      # =========================[ Line #2 ]=========================</span></span><br><span class="line"><span class="string">      newline</span></span><br><span class="line"><span class="string">      # prompt_char           # prompt symbol</span></span><br><span class="line"><span class="string">  )</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # The list of segments shown on the right. Fill it with less important segments.</span></span><br><span class="line"><span class="string">  # Right prompt on the last prompt line (where you are typing your commands) gets</span></span><br><span class="line"><span class="string">  # automatically hidden when the input line reaches it. Right prompt above the</span></span><br><span class="line"><span class="string">  # last prompt line gets hidden if it would overlap with left prompt.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS=(</span></span><br><span class="line"><span class="string">      # =========================[ Line #1 ]=========================</span></span><br><span class="line"><span class="string">      status                  # exit code of the last command</span></span><br><span class="line"><span class="string">      command_execution_time  # duration of the last command</span></span><br><span class="line"><span class="string">      background_jobs         # presence of background jobs</span></span><br><span class="line"><span class="string">      virtualenv              # python virtual environment (https://docs.python.org/3/library/venv.html)</span></span><br><span class="line"><span class="string">      anaconda                # conda environment (https://conda.io/)</span></span><br><span class="line"><span class="string">      pyenv                   # python environment (https://github.com/pyenv/pyenv)</span></span><br><span class="line"><span class="string">      nodenv                  # node.js version from nodenv (https://github.com/nodenv/nodenv)</span></span><br><span class="line"><span class="string">      nvm                     # node.js version from nvm (https://github.com/nvm-sh/nvm)</span></span><br><span class="line"><span class="string">      nodeenv                 # node.js environment (https://github.com/ekalinin/nodeenv)</span></span><br><span class="line"><span class="string">      # node_version          # node.js version</span></span><br><span class="line"><span class="string">      # go_version            # go version (https://golang.org)</span></span><br><span class="line"><span class="string">      # rust_version          # rustc version (https://www.rust-lang.org)</span></span><br><span class="line"><span class="string">      # dotnet_version        # .NET version (https://dotnet.microsoft.com)</span></span><br><span class="line"><span class="string">      rbenv                   # ruby version from rbenv (https://github.com/rbenv/rbenv)</span></span><br><span class="line"><span class="string">      rvm                     # ruby version from rvm (https://rvm.io)</span></span><br><span class="line"><span class="string">      kubecontext             # current kubernetes context (https://kubernetes.io/)</span></span><br><span class="line"><span class="string">      terraform               # terraform workspace (https://www.terraform.io)</span></span><br><span class="line"><span class="string">      aws                     # aws profile (https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-profiles.html)</span></span><br><span class="line"><span class="string">      # aws_eb_env            # aws elastic beanstalk environment (https://aws.amazon.com/elasticbeanstalk/)</span></span><br><span class="line"><span class="string">      # azure                 # azure account name (https://docs.microsoft.com/en-us/cli/azure)</span></span><br><span class="line"><span class="string">      context                 # user@hostname</span></span><br><span class="line"><span class="string">      nordvpn                 # nordvpn connection status, linux only (https://nordvpn.com/)</span></span><br><span class="line"><span class="string">      ranger                  # ranger shell (https://github.com/ranger/ranger)</span></span><br><span class="line"><span class="string">      # vpn_ip                # virtual private network indicator</span></span><br><span class="line"><span class="string">      # ram                   # free RAM</span></span><br><span class="line"><span class="string">      # load                  # CPU load</span></span><br><span class="line"><span class="string">      time                    # current time</span></span><br><span class="line"><span class="string">      # =========================[ Line #2 ]=========================</span></span><br><span class="line"><span class="string">      newline</span></span><br><span class="line"><span class="string">      # public_ip             # public IP address</span></span><br><span class="line"><span class="string">      # proxy                 # system-wide http/https/ftp proxy</span></span><br><span class="line"><span class="string">      # battery               # internal battery</span></span><br><span class="line"><span class="string">      # example               # example user-defined segment (see prompt_example function below)</span></span><br><span class="line"><span class="string">  )</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # To disable default icons for all segments, set POWERLEVEL9K_VISUAL_IDENTIFIER_EXPANSION=&#x27;&#x27;.</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # To enable default icons for all segments, don&#x27;t define POWERLEVEL9K_VISUAL_IDENTIFIER_EXPANSION</span></span><br><span class="line"><span class="string">  # or set it to &#x27;\\\$&#123;P9K_VISUAL_IDENTIFIER&#125;&#x27;.</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # To remove trailing space from all default icons, set POWERLEVEL9K_VISUAL_IDENTIFIER_EXPANSION</span></span><br><span class="line"><span class="string">  # to &#x27;\\\$&#123;P9K_VISUAL_IDENTIFIER% &#125;&#x27;.</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # To enable default icons for one segment (e.g., dir), set</span></span><br><span class="line"><span class="string">  # POWERLEVEL9K_DIR_VISUAL_IDENTIFIER_EXPANSION=&#x27;\\\$&#123;P9K_VISUAL_IDENTIFIER&#125;&#x27;.</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # To assign a specific icon to one segment (e.g., dir), set</span></span><br><span class="line"><span class="string">  # POWERLEVEL9K_DIR_VISUAL_IDENTIFIER_EXPANSION=&#x27;⭐&#x27;.</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # To assign a specific icon to a segment in a given state (e.g., dir in state NOT_WRITABLE),</span></span><br><span class="line"><span class="string">  # set POWERLEVEL9K_DIR_NOT_WRITABLE_VISUAL_IDENTIFIER_EXPANSION=&#x27;⭐&#x27;.</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # Note: You can use \\\$&#x27;\\\\u2B50&#x27; instead of &#x27;⭐&#x27;. It&#x27;s especially convenient when specifying</span></span><br><span class="line"><span class="string">  # icons that your text editor cannot render. Don&#x27;t forget to put \\\$ and use single quotes when</span></span><br><span class="line"><span class="string">  # defining icons via Unicode codepoints.</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # Note: Many default icons cannot be displayed with system fonts. You&#x27;ll need to install a</span></span><br><span class="line"><span class="string">  # capable font to use them. See POWERLEVEL9K_MODE below.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_VISUAL_IDENTIFIER_EXPANSION=&#x27;\\\$&#123;P9K_VISUAL_IDENTIFIER// &#125;&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # This option makes a difference only when default icons are enabled for all or some prompt</span></span><br><span class="line"><span class="string">  # segments (see POWERLEVEL9K_VISUAL_IDENTIFIER_EXPANSION above). LOCK_ICON can be printed as</span></span><br><span class="line"><span class="string">  # \\\$&#x27;\\\\uE0A2&#x27;, \\\$&#x27;\\\\uE138&#x27; or \\\$&#x27;\\\\uF023&#x27; depending on POWERLEVEL9K_MODE. The correct value of this</span></span><br><span class="line"><span class="string">  # parameter depends on the provider of the font your terminal is using.</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  #   Font Provider                    | POWERLEVEL9K_MODE</span></span><br><span class="line"><span class="string">  #   ---------------------------------+-------------------</span></span><br><span class="line"><span class="string">  #   Powerline                        | powerline</span></span><br><span class="line"><span class="string">  #   Font Awesome                     | awesome-fontconfig</span></span><br><span class="line"><span class="string">  #   Adobe Source Code Pro            | awesome-fontconfig</span></span><br><span class="line"><span class="string">  #   Source Code Pro                  | awesome-fontconfig</span></span><br><span class="line"><span class="string">  #   Awesome-Terminal Fonts (regular) | awesome-fontconfig</span></span><br><span class="line"><span class="string">  #   Awesome-Terminal Fonts (patched) | awesome-patched</span></span><br><span class="line"><span class="string">  #   Nerd Fonts                       | nerdfont-complete</span></span><br><span class="line"><span class="string">  #   Other                            | compatible</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # If this looks overwhelming, either stick with a preinstalled system font and set</span></span><br><span class="line"><span class="string">  # POWERLEVEL9K_MODE=compatible, or install the recommended Powerlevel10k font from</span></span><br><span class="line"><span class="string">  # https://github.com/romkatv/powerlevel10k/#recommended-meslo-nerd-font-patched-for-powerlevel10k</span></span><br><span class="line"><span class="string">  # and set POWERLEVEL9K_MODE=nerdfont-complete.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_MODE=nerdfont-complete</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # When set to true, icons appear before content on both sides of the prompt. When set</span></span><br><span class="line"><span class="string">  # to false, icons go after content. If empty or not set, icons go before content in the left</span></span><br><span class="line"><span class="string">  # prompt and after content in the right prompt.</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # You can also override it for a specific segment:</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  #   POWERLEVEL9K_STATUS_ICON_BEFORE_CONTENT=false</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # Or for a specific segment in specific state:</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  #   POWERLEVEL9K_DIR_NOT_WRITABLE_ICON_BEFORE_CONTENT=false</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_ICON_BEFORE_CONTENT=</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # Add an empty line before each prompt.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_PROMPT_ADD_NEWLINE=true</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # Connect left prompt lines with these symbols. You&#x27;ll probably want to use the same color</span></span><br><span class="line"><span class="string">  # as POWERLEVEL9K_MULTILINE_FIRST_PROMPT_GAP_FOREGROUND below.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_MULTILINE_FIRST_PROMPT_PREFIX=&#x27;%242F╭─&#x27;</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_MULTILINE_NEWLINE_PROMPT_PREFIX=&#x27;%242F├─&#x27;</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_MULTILINE_LAST_PROMPT_PREFIX=&#x27;%242F╰─&#x27;</span></span><br><span class="line"><span class="string">  # Connect right prompt lines with these symbols.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_MULTILINE_FIRST_PROMPT_SUFFIX=&#x27;%242F─╮&#x27;</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_MULTILINE_NEWLINE_PROMPT_SUFFIX=&#x27;%242F─┤&#x27;</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_MULTILINE_LAST_PROMPT_SUFFIX=&#x27;%242F─╯&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # Filler between left and right prompt on the first prompt line. You can set it to &#x27; &#x27;, &#x27;·&#x27; or</span></span><br><span class="line"><span class="string">  # &#x27;─&#x27;. The last two make it easier to see the alignment between left and right prompt and to</span></span><br><span class="line"><span class="string">  # separate prompt from command output. You might want to set POWERLEVEL9K_PROMPT_ADD_NEWLINE=false</span></span><br><span class="line"><span class="string">  # for more compact prompt if using using this option.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_MULTILINE_FIRST_PROMPT_GAP_CHAR=&#x27; &#x27;</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_MULTILINE_FIRST_PROMPT_GAP_BACKGROUND=</span></span><br><span class="line"><span class="string">  if [[ \\\$POWERLEVEL9K_MULTILINE_FIRST_PROMPT_GAP_CHAR != &#x27; &#x27; ]]; then</span></span><br><span class="line"><span class="string">    # The color of the filler. You&#x27;ll probably want to match the color of POWERLEVEL9K_MULTILINE</span></span><br><span class="line"><span class="string">    # ornaments defined above.</span></span><br><span class="line"><span class="string">    typeset -g POWERLEVEL9K_MULTILINE_FIRST_PROMPT_GAP_FOREGROUND=242</span></span><br><span class="line"><span class="string">    # Start filler from the edge of the screen if there are no left segments on the first line.</span></span><br><span class="line"><span class="string">    typeset -g POWERLEVEL9K_EMPTY_LINE_LEFT_PROMPT_FIRST_SEGMENT_END_SYMBOL=&#x27;%&#123;%&#125;&#x27;</span></span><br><span class="line"><span class="string">    # End filler on the edge of the screen if there are no right segments on the first line.</span></span><br><span class="line"><span class="string">    typeset -g POWERLEVEL9K_EMPTY_LINE_RIGHT_PROMPT_FIRST_SEGMENT_START_SYMBOL=&#x27;%&#123;%&#125;&#x27;</span></span><br><span class="line"><span class="string">  fi</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # Default background color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_BACKGROUND=238</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # Separator between same-color segments on the left.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_LEFT_SUBSEGMENT_SEPARATOR=&#x27;%246F\\\\uE0B1&#x27;</span></span><br><span class="line"><span class="string">  # Separator between same-color segments on the right.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_RIGHT_SUBSEGMENT_SEPARATOR=&#x27;%246F\\\\uE0B3&#x27;</span></span><br><span class="line"><span class="string">  # Separator between different-color segments on the left.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_LEFT_SEGMENT_SEPARATOR=&#x27;\\\\uE0B0&#x27;</span></span><br><span class="line"><span class="string">  # Separator between different-color segments on the right.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_RIGHT_SEGMENT_SEPARATOR=&#x27;\\\\uE0B2&#x27;</span></span><br><span class="line"><span class="string">  # The right end of left prompt.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_LEFT_PROMPT_LAST_SEGMENT_END_SYMBOL=&#x27;\\\\uE0B0&#x27;</span></span><br><span class="line"><span class="string">  # The left end of right prompt.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_RIGHT_PROMPT_FIRST_SEGMENT_START_SYMBOL=&#x27;\\\\uE0B2&#x27;</span></span><br><span class="line"><span class="string">  # The left end of left prompt.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_LEFT_PROMPT_FIRST_SEGMENT_START_SYMBOL=&#x27;\\\\uE0B6&#x27;</span></span><br><span class="line"><span class="string">  # The right end of right prompt.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_RIGHT_PROMPT_LAST_SEGMENT_END_SYMBOL=&#x27;\\\\uE0B4&#x27;</span></span><br><span class="line"><span class="string">  # Left prompt terminator for lines without any segments.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_EMPTY_LINE_LEFT_PROMPT_LAST_SEGMENT_END_SYMBOL=</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  #################################[ os_icon: os identifier ]##################################</span></span><br><span class="line"><span class="string">  # OS identifier color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_OS_ICON_FOREGROUND=255</span></span><br><span class="line"><span class="string">  # Make the icon bold.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_OS_ICON_CONTENT_EXPANSION=&#x27;%B\\\$&#123;P9K_CONTENT// &#125;&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ################################[ prompt_char: prompt symbol ]################################</span></span><br><span class="line"><span class="string">  # Transparent background.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_PROMPT_CHAR_BACKGROUND=</span></span><br><span class="line"><span class="string">  # Green prompt symbol if the last command succeeded.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_PROMPT_CHAR_OK_&#123;VIINS,VICMD,VIVIS&#125;_FOREGROUND=76</span></span><br><span class="line"><span class="string">  # Red prompt symbol if the last command failed.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_PROMPT_CHAR_ERROR_&#123;VIINS,VICMD,VIVIS&#125;_FOREGROUND=196</span></span><br><span class="line"><span class="string">  # Default prompt symbol.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_PROMPT_CHAR_&#123;OK,ERROR&#125;_VIINS_CONTENT_EXPANSION=&#x27;❯&#x27;</span></span><br><span class="line"><span class="string">  # Prompt symbol in command vi mode.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_PROMPT_CHAR_&#123;OK,ERROR&#125;_VICMD_CONTENT_EXPANSION=&#x27;❮&#x27;</span></span><br><span class="line"><span class="string">  # Prompt symbol in visual vi mode.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_PROMPT_CHAR_&#123;OK,ERROR&#125;_VIVIS_CONTENT_EXPANSION=&#x27;Ⅴ&#x27;</span></span><br><span class="line"><span class="string">  # Prompt symbol in overwrite vi mode.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_PROMPT_CHAR_&#123;OK,ERROR&#125;_VIOWR_CONTENT_EXPANSION=&#x27;▶&#x27;</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_PROMPT_CHAR_OVERWRITE_STATE=true</span></span><br><span class="line"><span class="string">  # No line terminator if prompt_char is the last segment.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_PROMPT_CHAR_LEFT_PROMPT_LAST_SEGMENT_END_SYMBOL=</span></span><br><span class="line"><span class="string">  # No line introducer if prompt_char is the first segment.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_PROMPT_CHAR_LEFT_PROMPT_FIRST_SEGMENT_START_SYMBOL=</span></span><br><span class="line"><span class="string">  # No surrounding whitespace.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_PROMPT_CHAR_LEFT_&#123;LEFT,RIGHT&#125;_WHITESPACE=</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ##################################[ dir: current directory ]##################################</span></span><br><span class="line"><span class="string">  # Default current directory color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_DIR_FOREGROUND=31</span></span><br><span class="line"><span class="string">  # If directory is too long, shorten some of its segments to the shortest possible unique</span></span><br><span class="line"><span class="string">  # prefix. The shortened directory can be tab-completed to the original.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_SHORTEN_STRATEGY=truncate_to_unique</span></span><br><span class="line"><span class="string">  # Replace removed segment suffixes with this symbol.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_SHORTEN_DELIMITER=</span></span><br><span class="line"><span class="string">  # Color of the shortened directory segments.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_DIR_SHORTENED_FOREGROUND=103</span></span><br><span class="line"><span class="string">  # Color of the anchor directory segments. Anchor segments are never shortened. The first</span></span><br><span class="line"><span class="string">  # segment is always an anchor.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_DIR_ANCHOR_FOREGROUND=39</span></span><br><span class="line"><span class="string">  # Display anchor directory segments in bold.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_DIR_ANCHOR_BOLD=true</span></span><br><span class="line"><span class="string">  # Don&#x27;t shorten directories that contain any of these files. They are anchors.</span></span><br><span class="line"><span class="string">  local anchor_files=(</span></span><br><span class="line"><span class="string">    .bzr</span></span><br><span class="line"><span class="string">    .citc</span></span><br><span class="line"><span class="string">    .git</span></span><br><span class="line"><span class="string">    .hg</span></span><br><span class="line"><span class="string">    .node-version</span></span><br><span class="line"><span class="string">    .python-version</span></span><br><span class="line"><span class="string">    .ruby-version</span></span><br><span class="line"><span class="string">    .shorten_folder_marker</span></span><br><span class="line"><span class="string">    .svn</span></span><br><span class="line"><span class="string">    .terraform</span></span><br><span class="line"><span class="string">    CVS</span></span><br><span class="line"><span class="string">    Cargo.toml</span></span><br><span class="line"><span class="string">    composer.json</span></span><br><span class="line"><span class="string">    go.mod</span></span><br><span class="line"><span class="string">    package.json</span></span><br><span class="line"><span class="string">  )</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_SHORTEN_FOLDER_MARKER=\\\&quot;(\\\$&#123;(j:|:)anchor_files&#125;)\\\&quot;</span></span><br><span class="line"><span class="string">  # Don&#x27;t shorten this many last directory segments. They are anchors.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_SHORTEN_DIR_LENGTH=1</span></span><br><span class="line"><span class="string">  # Shorten directory if it&#x27;s longer than this even if there is space for it. The value can</span></span><br><span class="line"><span class="string">  # be either absolute (e.g., &#x27;80&#x27;) or a percentage of terminal width (e.g, &#x27;50%&#x27;). If empty,</span></span><br><span class="line"><span class="string">  # directory will be shortened only when prompt doesn&#x27;t fit or when other parameters demand it</span></span><br><span class="line"><span class="string">  # (see POWERLEVEL9K_DIR_MIN_COMMAND_COLUMNS and POWERLEVEL9K_DIR_MIN_COMMAND_COLUMNS_PCT below).</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_DIR_MAX_LENGTH=80</span></span><br><span class="line"><span class="string">  # When \\\`dir\\\` segment is on the last prompt line, try to shorten it enough to leave at least this</span></span><br><span class="line"><span class="string">  # many columns for typing commands.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_DIR_MIN_COMMAND_COLUMNS=40</span></span><br><span class="line"><span class="string">  # When \\\`dir\\\` segment is on the last prompt line, try to shorten it enough to leave at least</span></span><br><span class="line"><span class="string">  # COLUMNS * POWERLEVEL9K_DIR_MIN_COMMAND_COLUMNS_PCT * 0.01 columns for typing commands.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_DIR_MIN_COMMAND_COLUMNS_PCT=50</span></span><br><span class="line"><span class="string">  # If set to true, embed a hyperlink into the directory. Useful for quickly</span></span><br><span class="line"><span class="string">  # opening a directory in the file manager simply by clicking the link.</span></span><br><span class="line"><span class="string">  # Can also be handy when the directory is shortened, as it allows you to see</span></span><br><span class="line"><span class="string">  # the full directory that was used in previous commands.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_DIR_HYPERLINK=false</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # Enable special styling for non-writable directories.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_DIR_SHOW_WRITABLE=true</span></span><br><span class="line"><span class="string">  # Show this icon when the current directory is not writable. POWERLEVEL9K_DIR_SHOW_WRITABLE</span></span><br><span class="line"><span class="string">  # above must be set to true for this parameter to have effect.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_DIR_NOT_WRITABLE_VISUAL_IDENTIFIER_EXPANSION=&#x27;⭐&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # Custom prefix.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_DIR_PREFIX=&#x27;%248Fin &#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # POWERLEVEL9K_DIR_CLASSES allows you to specify custom icons for different directories.</span></span><br><span class="line"><span class="string">  # It must be an array with 3 * N elements. Each triplet consists of:</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  #   1. A pattern against which the current directory is matched. Matching is done with</span></span><br><span class="line"><span class="string">  #      extended_glob option enabled.</span></span><br><span class="line"><span class="string">  #   2. Directory class for the purpose of styling.</span></span><br><span class="line"><span class="string">  #   3. Icon.</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # Triplets are tried in order. The first triplet whose pattern matches \\\$PWD wins. If there</span></span><br><span class="line"><span class="string">  # are no matches, the directory will have no icon.</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # Example:</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  #   typeset -g POWERLEVEL9K_DIR_CLASSES=(</span></span><br><span class="line"><span class="string">  #       &#x27;~/work(/*)#&#x27;  WORK     &#x27;(╯°□°）╯︵ ┻━┻&#x27;</span></span><br><span class="line"><span class="string">  #       &#x27;~(/*)#&#x27;       HOME     &#x27;⌂&#x27;</span></span><br><span class="line"><span class="string">  #       &#x27;*&#x27;            DEFAULT  &#x27;&#x27;)</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # With these settings, the current directory in the prompt may look like this:</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  #   (╯°□°）╯︵ ┻━┻ ~/work/projects/important/urgent</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # Or like this:</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  #   ⌂ ~/best/powerlevel10k</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # You can also set different colors for directories of different classes. Remember to override</span></span><br><span class="line"><span class="string">  # FOREGROUND, SHORTENED_FOREGROUND and ANCHOR_FOREGROUND for every directory class that you wish</span></span><br><span class="line"><span class="string">  # to have its own color.</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  #   typeset -g POWERLEVEL9K_DIR_WORK_FOREGROUND=31</span></span><br><span class="line"><span class="string">  #   typeset -g POWERLEVEL9K_DIR_WORK_SHORTENED_FOREGROUND=103</span></span><br><span class="line"><span class="string">  #   typeset -g POWERLEVEL9K_DIR_WORK_ANCHOR_FOREGROUND=39</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_DIR_CLASSES=()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  #####################################[ vcs: git status ]######################################</span></span><br><span class="line"><span class="string">  # Branch icon. Set this parameter to &#x27;\\\\uF126 &#x27; for the popular Powerline branch icon.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_VCS_BRANCH_ICON=</span></span><br><span class="line"><span class="string">  POWERLEVEL9K_VCS_BRANCH_ICON=\\\$&#123;(g::)POWERLEVEL9K_VCS_BRANCH_ICON&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # Untracked files icon. It&#x27;s really a question mark, your font isn&#x27;t broken.</span></span><br><span class="line"><span class="string">  # Change the value of this parameter to show a different icon.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_VCS_UNTRACKED_ICON=&#x27;?&#x27;</span></span><br><span class="line"><span class="string">  POWERLEVEL9K_VCS_UNTRACKED_ICON=\\\$&#123;(g::)POWERLEVEL9K_VCS_UNTRACKED_ICON&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # Formatter for Git status.</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # Example output: master ⇣42⇡42 *42 merge ~42 +42 !42 ?42.</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # You can edit the function to customize how Git status looks.</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # VCS_STATUS_* parameters are set by gitstatus plugin. See reference:</span></span><br><span class="line"><span class="string">  # https://github.com/romkatv/gitstatus/blob/master/gitstatus.plugin.zsh.</span></span><br><span class="line"><span class="string">  function my_git_formatter() &#123;</span></span><br><span class="line"><span class="string">    emulate -L zsh</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    if [[ -n \\\$P9K_CONTENT ]]; then</span></span><br><span class="line"><span class="string">      # If P9K_CONTENT is not empty, use it. It&#x27;s either \\\&quot;loading\\\&quot; or from vcs_info (not from</span></span><br><span class="line"><span class="string">      # gitstatus plugin). VCS_STATUS_* parameters are not available in this case.</span></span><br><span class="line"><span class="string">      typeset -g my_git_format=\\\$P9K_CONTENT</span></span><br><span class="line"><span class="string">      return</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    if (( \\\$1 )); then</span></span><br><span class="line"><span class="string">      # Styling for up-to-date Git status.</span></span><br><span class="line"><span class="string">      local       meta=&#x27;%248F&#x27;  # grey foreground</span></span><br><span class="line"><span class="string">      local      clean=&#x27;%76F&#x27;   # green foreground</span></span><br><span class="line"><span class="string">      local   modified=&#x27;%178F&#x27;  # yellow foreground</span></span><br><span class="line"><span class="string">      local  untracked=&#x27;%39F&#x27;   # blue foreground</span></span><br><span class="line"><span class="string">      local conflicted=&#x27;%196F&#x27;  # red foreground</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">      # Styling for incomplete and stale Git status.</span></span><br><span class="line"><span class="string">      local       meta=&#x27;%244F&#x27;  # grey foreground</span></span><br><span class="line"><span class="string">      local      clean=&#x27;%244F&#x27;  # grey foreground</span></span><br><span class="line"><span class="string">      local   modified=&#x27;%244F&#x27;  # grey foreground</span></span><br><span class="line"><span class="string">      local  untracked=&#x27;%244F&#x27;  # grey foreground</span></span><br><span class="line"><span class="string">      local conflicted=&#x27;%244F&#x27;  # grey foreground</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    local res</span></span><br><span class="line"><span class="string">    local where  # branch name, tag or commit</span></span><br><span class="line"><span class="string">    if [[ -n \\\$VCS_STATUS_LOCAL_BRANCH ]]; then</span></span><br><span class="line"><span class="string">      res+=\\\&quot;\\\$&#123;clean&#125;\\\$&#123;POWERLEVEL9K_VCS_BRANCH_ICON&#125;\\\&quot;</span></span><br><span class="line"><span class="string">      where=\\\$&#123;(V)VCS_STATUS_LOCAL_BRANCH&#125;</span></span><br><span class="line"><span class="string">    elif [[ -n \\\$VCS_STATUS_TAG ]]; then</span></span><br><span class="line"><span class="string">      res+=\\\&quot;\\\$&#123;meta&#125;#\\\&quot;</span></span><br><span class="line"><span class="string">      where=\\\$&#123;(V)VCS_STATUS_TAG&#125;</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">      res+=\\\&quot;\\\$&#123;meta&#125;@\\\&quot;</span></span><br><span class="line"><span class="string">      where=\\\$&#123;VCS_STATUS_COMMIT[1,8]&#125;</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    # If local branch name or tag is at most 32 characters long, show it in full.</span></span><br><span class="line"><span class="string">    # Otherwise show the first 12 … the last 12.</span></span><br><span class="line"><span class="string">    (( \\\$#where &gt; 32 )) &amp;&amp; where[13,-13]=\\\&quot;…\\\&quot;</span></span><br><span class="line"><span class="string">    res+=\\\&quot;\\\$&#123;clean&#125;\\\$&#123;where//\\\\%/%%&#125;\\\&quot;  # escape %</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    # Show tracking branch name if it differs from local branch.</span></span><br><span class="line"><span class="string">    if [[ -n \\\$&#123;VCS_STATUS_REMOTE_BRANCH:#\\\$VCS_STATUS_LOCAL_BRANCH&#125; ]]; then</span></span><br><span class="line"><span class="string">      res+=\\\&quot;\\\$&#123;meta&#125;:\\\$&#123;clean&#125;\\\$&#123;(V)VCS_STATUS_REMOTE_BRANCH//\\\\%/%%&#125;\\\&quot;  # escape %</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    # ⇣42 if behind the remote.</span></span><br><span class="line"><span class="string">    (( VCS_STATUS_COMMITS_BEHIND )) &amp;&amp; res+=\\\&quot; \\\$&#123;clean&#125;⇣\\\$&#123;VCS_STATUS_COMMITS_BEHIND&#125;\\\&quot;</span></span><br><span class="line"><span class="string">    # ⇡42 if ahead of the remote; no leading space if also behind the remote: ⇣42⇡42.</span></span><br><span class="line"><span class="string">    (( VCS_STATUS_COMMITS_AHEAD &amp;&amp; !VCS_STATUS_COMMITS_BEHIND )) &amp;&amp; res+=\\\&quot; \\\&quot;</span></span><br><span class="line"><span class="string">    (( VCS_STATUS_COMMITS_AHEAD  )) &amp;&amp; res+=\\\&quot;\\\$&#123;clean&#125;⇡\\\$&#123;VCS_STATUS_COMMITS_AHEAD&#125;\\\&quot;</span></span><br><span class="line"><span class="string">    # *42 if have stashes.</span></span><br><span class="line"><span class="string">    (( VCS_STATUS_STASHES        )) &amp;&amp; res+=\\\&quot; \\\$&#123;clean&#125;*\\\$&#123;VCS_STATUS_STASHES&#125;\\\&quot;</span></span><br><span class="line"><span class="string">    # &#x27;merge&#x27; if the repo is in an unusual state.</span></span><br><span class="line"><span class="string">    [[ -n \\\$VCS_STATUS_ACTION     ]] &amp;&amp; res+=\\\&quot; \\\$&#123;conflicted&#125;\\\$&#123;VCS_STATUS_ACTION&#125;\\\&quot;</span></span><br><span class="line"><span class="string">    # ~42 if have merge conflicts.</span></span><br><span class="line"><span class="string">    (( VCS_STATUS_NUM_CONFLICTED )) &amp;&amp; res+=\\\&quot; \\\$&#123;conflicted&#125;~\\\$&#123;VCS_STATUS_NUM_CONFLICTED&#125;\\\&quot;</span></span><br><span class="line"><span class="string">    # +42 if have staged changes.</span></span><br><span class="line"><span class="string">    (( VCS_STATUS_NUM_STAGED     )) &amp;&amp; res+=\\\&quot; \\\$&#123;modified&#125;+\\\$&#123;VCS_STATUS_NUM_STAGED&#125;\\\&quot;</span></span><br><span class="line"><span class="string">    # !42 if have unstaged changes.</span></span><br><span class="line"><span class="string">    (( VCS_STATUS_NUM_UNSTAGED   )) &amp;&amp; res+=\\\&quot; \\\$&#123;modified&#125;!\\\$&#123;VCS_STATUS_NUM_UNSTAGED&#125;\\\&quot;</span></span><br><span class="line"><span class="string">    # ?42 if have untracked files. It&#x27;s really a question mark, your font isn&#x27;t broken.</span></span><br><span class="line"><span class="string">    # See POWERLEVEL9K_VCS_UNTRACKED_ICON above if you want to use a different icon.</span></span><br><span class="line"><span class="string">    # Remove the next line if you don&#x27;t want to see untracked files at all.</span></span><br><span class="line"><span class="string">    (( VCS_STATUS_NUM_UNTRACKED  )) &amp;&amp; res+=\\\&quot; \\\$&#123;untracked&#125;\\\$&#123;POWERLEVEL9K_VCS_UNTRACKED_ICON&#125;\\\$&#123;VCS_STATUS_NUM_UNTRACKED&#125;\\\&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    typeset -g my_git_format=\\\$res</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  functions -M my_git_formatter 2&gt;/dev/null</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # Disable the default Git status formatting.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_VCS_DISABLE_GITSTATUS_FORMATTING=true</span></span><br><span class="line"><span class="string">  # Install our own Git status formatter.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_VCS_CONTENT_EXPANSION=&#x27;\\\$&#123;\\\$((my_git_formatter(1)))+\\\$&#123;my_git_format&#125;&#125;&#x27;</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_VCS_LOADING_CONTENT_EXPANSION=&#x27;\\\$&#123;\\\$((my_git_formatter(0)))+\\\$&#123;my_git_format&#125;&#125;&#x27;</span></span><br><span class="line"><span class="string">  # Enable counters for staged, unstaged, etc.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_VCS_&#123;STAGED,UNSTAGED,UNTRACKED,CONFLICTED,COMMITS_AHEAD,COMMITS_BEHIND&#125;_MAX_NUM=-1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # Icon color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_VCS_VISUAL_IDENTIFIER_COLOR=76</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_VCS_LOADING_VISUAL_IDENTIFIER_COLOR=244</span></span><br><span class="line"><span class="string">  # Custom icon.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_VCS_VISUAL_IDENTIFIER_EXPANSION=</span></span><br><span class="line"><span class="string">  # Custom prefix.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_VCS_PREFIX=&#x27;%248Fon &#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # Show status of repositories of these types. You can add svn and/or hg if you are</span></span><br><span class="line"><span class="string">  # using them. If you do, your prompt may become slow even when your current directory</span></span><br><span class="line"><span class="string">  # isn&#x27;t in an svn or hg reposotiry.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_VCS_BACKENDS=(git)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # These settings are used for respositories other than Git or when gitstatusd fails and</span></span><br><span class="line"><span class="string">  # Powerlevel10k has to fall back to using vcs_info.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_VCS_CLEAN_FOREGROUND=76</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_VCS_UNTRACKED_FOREGROUND=76</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_VCS_MODIFIED_FOREGROUND=178</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ##########################[ status: exit code of the last command ]###########################</span></span><br><span class="line"><span class="string">  # Enable OK_PIPE, ERROR_PIPE and ERROR_SIGNAL status states to allow us to enable, disable and</span></span><br><span class="line"><span class="string">  # style them independently from the regular OK and ERROR state.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_STATUS_EXTENDED_STATES=true</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # Status on success. No content, just an icon. No need to show it if prompt_char is enabled as</span></span><br><span class="line"><span class="string">  # it will signify success by turning green.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_STATUS_OK=true</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_STATUS_OK_FOREGROUND=70</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_STATUS_OK_VISUAL_IDENTIFIER_EXPANSION=&#x27;✔&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # Status when some part of a pipe command fails but the overall exit status is zero. It may look</span></span><br><span class="line"><span class="string">  # like this: 1|0.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_STATUS_OK_PIPE=true</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_STATUS_OK_PIPE_FOREGROUND=70</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_STATUS_OK_PIPE_VISUAL_IDENTIFIER_EXPANSION=&#x27;✔&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # Status when it&#x27;s just an error code (e.g., &#x27;1&#x27;). No need to show it if prompt_char is enabled as</span></span><br><span class="line"><span class="string">  # it will signify error by turning red.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_STATUS_ERROR=true</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_STATUS_ERROR_FOREGROUND=160</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_STATUS_ERROR_VISUAL_IDENTIFIER_EXPANSION=&#x27;↵&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # Status when the last command was terminated by a signal.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_STATUS_ERROR_SIGNAL=true</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_STATUS_ERROR_SIGNAL_FOREGROUND=160</span></span><br><span class="line"><span class="string">  # Use terse signal names: \\\&quot;INT\\\&quot; instead of \\\&quot;SIGINT(2)\\\&quot;.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_STATUS_VERBOSE_SIGNAME=false</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_STATUS_ERROR_SIGNAL_VISUAL_IDENTIFIER_EXPANSION=&#x27;↵&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # Status when some part of a pipe command fails and the overall exit status is also non-zero.</span></span><br><span class="line"><span class="string">  # It may look like this: 1|0.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_STATUS_ERROR_PIPE=true</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_STATUS_ERROR_PIPE_FOREGROUND=160</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_STATUS_ERROR_PIPE_VISUAL_IDENTIFIER_EXPANSION=&#x27;↵&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ###################[ command_execution_time: duration of the last command ]###################</span></span><br><span class="line"><span class="string">  # Show duration of the last command if takes longer than this many seconds.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_COMMAND_EXECUTION_TIME_THRESHOLD=3</span></span><br><span class="line"><span class="string">  # Show this many fractional digits. Zero means round to seconds.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_COMMAND_EXECUTION_TIME_PRECISION=0</span></span><br><span class="line"><span class="string">  # Execution time color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_COMMAND_EXECUTION_TIME_FOREGROUND=248</span></span><br><span class="line"><span class="string">  # Duration format: 1d 2h 3m 4s.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_COMMAND_EXECUTION_TIME_FORMAT=&#x27;d h m s&#x27;</span></span><br><span class="line"><span class="string">  # Custom icon.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_COMMAND_EXECUTION_TIME_VISUAL_IDENTIFIER_EXPANSION=</span></span><br><span class="line"><span class="string">  # Custom prefix.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_COMMAND_EXECUTION_TIME_PREFIX=&#x27;%248Ftook &#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  #######################[ background_jobs: presence of background jobs ]#######################</span></span><br><span class="line"><span class="string">  # Don&#x27;t show the number of background jobs.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_BACKGROUND_JOBS_VERBOSE=false</span></span><br><span class="line"><span class="string">  # Background jobs color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_BACKGROUND_JOBS_FOREGROUND=37</span></span><br><span class="line"><span class="string">  # Icon to show when there are background jobs.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_BACKGROUND_JOBS_VISUAL_IDENTIFIER_EXPANSION=&#x27;\\\$&#123;P9K_VISUAL_IDENTIFIER// &#125;&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ##########[ nordvpn: nordvpn connection status, linux only (https://nordvpn.com/) ]###########</span></span><br><span class="line"><span class="string">  # NordVPN connection indicator color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_NORDVPN_FOREGROUND=39</span></span><br><span class="line"><span class="string">  # Hide NordVPN connection indicator when not connected.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_NORDVPN_&#123;DISCONNECTED,CONNECTING,DISCONNECTING&#125;_CONTENT_EXPANSION=</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_NORDVPN_&#123;DISCONNECTED,CONNECTING,DISCONNECTING&#125;_VISUAL_IDENTIFIER_EXPANSION=</span></span><br><span class="line"><span class="string">  # Custom icon.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_NORDVPN_VISUAL_IDENTIFIER_EXPANSION=&#x27;⭐&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  #################[ ranger: ranger shell (https://github.com/ranger/ranger) ]##################</span></span><br><span class="line"><span class="string">  # Ranger shell color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_RANGER_FOREGROUND=178</span></span><br><span class="line"><span class="string">  # Custom icon.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_RANGER_VISUAL_IDENTIFIER_EXPANSION=&#x27;⭐&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ######################################[ ram: free RAM ]#######################################</span></span><br><span class="line"><span class="string">  # RAM color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_RAM_FOREGROUND=66</span></span><br><span class="line"><span class="string">  # Custom icon.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_RAM_VISUAL_IDENTIFIER_EXPANSION=&#x27;⭐&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ######################################[ load: CPU load ]######################################</span></span><br><span class="line"><span class="string">  # Show average CPU load over this many last minutes. Valid values are 1, 5 and 15.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_LOAD_WHICH=5</span></span><br><span class="line"><span class="string">  # Load color when load is under 50%.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_LOAD_NORMAL_FOREGROUND=66</span></span><br><span class="line"><span class="string">  # Load color when load is between 50% and 70%.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_LOAD_WARNING_FOREGROUND=178</span></span><br><span class="line"><span class="string">  # Load color when load is over 70%.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_LOAD_CRITICAL_FOREGROUND=166</span></span><br><span class="line"><span class="string">  # Custom icon.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_LOAD_VISUAL_IDENTIFIER_EXPANSION=&#x27;⭐&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ##################################[ context: user@hostname ]##################################</span></span><br><span class="line"><span class="string">  # Default context color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_CONTEXT_FOREGROUND=180</span></span><br><span class="line"><span class="string">  # Default context format: %n is username, %m is hostname.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_CONTEXT_TEMPLATE=&#x27;%n@%m&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # Context color when running with privileges.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_CONTEXT_ROOT_FOREGROUND=178</span></span><br><span class="line"><span class="string">  # Context format when running with privileges: %n is username, %m is hostname, %B for bold.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_CONTEXT_ROOT_TEMPLATE=&#x27;%B%n@%m&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # Don&#x27;t show context unless running with privileges or in SSH.</span></span><br><span class="line"><span class="string">  # Tip: Remove the next line to always show context.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_CONTEXT_&#123;DEFAULT,SUDO&#125;_&#123;CONTENT,VISUAL_IDENTIFIER&#125;_EXPANSION=</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # Custom icon.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_CONTEXT_VISUAL_IDENTIFIER_EXPANSION=&#x27;⭐&#x27;</span></span><br><span class="line"><span class="string">  # Custom prefix.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_CONTEXT_PREFIX=&#x27;%248Fwith &#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ###[ virtualenv: python virtual environment (https://docs.python.org/3/library/venv.html) ]###</span></span><br><span class="line"><span class="string">  # Python virtual environment color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_VIRTUALENV_FOREGROUND=37</span></span><br><span class="line"><span class="string">  # Don&#x27;t show Python version next to the virtual environment name.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_VIRTUALENV_SHOW_PYTHON_VERSION=false</span></span><br><span class="line"><span class="string">  # Separate environment name from Python version only with a space.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_VIRTUALENV_&#123;LEFT,RIGHT&#125;_DELIMITER=</span></span><br><span class="line"><span class="string">  # Custom icon.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_VIRTUALENV_VISUAL_IDENTIFIER_EXPANSION=&#x27;⭐&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  #####################[ anaconda: conda environment (https://conda.io/) ]######################</span></span><br><span class="line"><span class="string">  # Anaconda environment color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_ANACONDA_FOREGROUND=37</span></span><br><span class="line"><span class="string">  # Don&#x27;t show Python version next to the anaconda environment name.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_ANACONDA_SHOW_PYTHON_VERSION=false</span></span><br><span class="line"><span class="string">  # Separate environment name from Python version only with a space.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_ANACONDA_&#123;LEFT,RIGHT&#125;_DELIMITER=</span></span><br><span class="line"><span class="string">  # Custom icon.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_ANACONDA_VISUAL_IDENTIFIER_EXPANSION=&#x27;⭐&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ################[ pyenv: python environment (https://github.com/pyenv/pyenv) ]################</span></span><br><span class="line"><span class="string">  # Pyenv color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_PYENV_FOREGROUND=37</span></span><br><span class="line"><span class="string">  # Don&#x27;t show the current Python version if it&#x27;s the same as global.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_PYENV_PROMPT_ALWAYS_SHOW=false</span></span><br><span class="line"><span class="string">  # Custom icon.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_PYENV_VISUAL_IDENTIFIER_EXPANSION=&#x27;⭐&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ##########[ nodenv: node.js version from nodenv (https://github.com/nodenv/nodenv) ]##########</span></span><br><span class="line"><span class="string">  # Nodenv color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_NODENV_FOREGROUND=70</span></span><br><span class="line"><span class="string">  # Don&#x27;t show node version if it&#x27;s the same as global: \\\$(nodenv version-name) == \\\$(nodenv global).</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_NODENV_PROMPT_ALWAYS_SHOW=false</span></span><br><span class="line"><span class="string">  # Custom icon.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_NODENV_VISUAL_IDENTIFIER_EXPANSION=&#x27;⭐&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ##############[ nvm: node.js version from nvm (https://github.com/nvm-sh/nvm) ]###############</span></span><br><span class="line"><span class="string">  # Nvm color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_NVM_FOREGROUND=70</span></span><br><span class="line"><span class="string">  # Custom icon.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_NVM_VISUAL_IDENTIFIER_EXPANSION=&#x27;⭐&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ############[ nodeenv: node.js environment (https://github.com/ekalinin/nodeenv) ]############</span></span><br><span class="line"><span class="string">  # Nodeenv color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_NODEENV_FOREGROUND=70</span></span><br><span class="line"><span class="string">  # Don&#x27;t show Node version next to the environment name.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_NODEENV_SHOW_NODE_VERSION=false</span></span><br><span class="line"><span class="string">  # Separate environment name from Node version only with a space.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_NODEENV_&#123;LEFT,RIGHT&#125;_DELIMITER=</span></span><br><span class="line"><span class="string">  # Custom icon.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_NODEENV_VISUAL_IDENTIFIER_EXPANSION=&#x27;⭐&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ##############################[ node_version: node.js version ]###############################</span></span><br><span class="line"><span class="string">  # Node version color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_NODE_VERSION_FOREGROUND=70</span></span><br><span class="line"><span class="string">  # Show node version only when in a directory tree containing package.json.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_NODE_VERSION_PROJECT_ONLY=true</span></span><br><span class="line"><span class="string">  # Custom icon.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_NODE_VERSION_VISUAL_IDENTIFIER_EXPANSION=&#x27;⭐&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  #######################[ go_version: go version (https://golang.org) ]########################</span></span><br><span class="line"><span class="string">  # Go version color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_GO_VERSION_FOREGROUND=37</span></span><br><span class="line"><span class="string">  # Show go version only when in a go project subdirectory.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_GO_VERSION_PROJECT_ONLY=true</span></span><br><span class="line"><span class="string">  # Custom icon.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_GO_VERSION_VISUAL_IDENTIFIER_EXPANSION=&#x27;⭐&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  #################[ rust_version: rustc version (https://www.rust-lang.org) ]##################</span></span><br><span class="line"><span class="string">  # Rust version color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_RUST_VERSION_FOREGROUND=37</span></span><br><span class="line"><span class="string">  # Show rust version only when in a rust project subdirectory.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_RUST_VERSION_PROJECT_ONLY=true</span></span><br><span class="line"><span class="string">  # Custom icon.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_RUST_VERSION_VISUAL_IDENTIFIER_EXPANSION=&#x27;⭐&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ###############[ dotnet_version: .NET version (https://dotnet.microsoft.com) ]################</span></span><br><span class="line"><span class="string">  # .NET version color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_DOTNET_VERSION_FOREGROUND=134</span></span><br><span class="line"><span class="string">  # Show .NET version only when in a .NET project subdirectory.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_DOTNET_VERSION_PROJECT_ONLY=true</span></span><br><span class="line"><span class="string">  # Custom icon.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_DOTNET_VERSION_VISUAL_IDENTIFIER_EXPANSION=&#x27;⭐&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  #############[ rbenv: ruby version from rbenv (https://github.com/rbenv/rbenv) ]##############</span></span><br><span class="line"><span class="string">  # Rbenv color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_RBENV_FOREGROUND=168</span></span><br><span class="line"><span class="string">  # Don&#x27;t show ruby version if it&#x27;s the same as global: \\\$(rbenv version-name) == \\\$(rbenv global).</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_RBENV_PROMPT_ALWAYS_SHOW=false</span></span><br><span class="line"><span class="string">  # Custom icon.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_RBENV_VISUAL_IDENTIFIER_EXPANSION=&#x27;⭐&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  #######################[ rvm: ruby version from rvm (https://rvm.io) ]########################</span></span><br><span class="line"><span class="string">  # Rvm color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_RVM_FOREGROUND=168</span></span><br><span class="line"><span class="string">  # Don&#x27;t show @gemset at the end.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_RVM_SHOW_GEMSET=false</span></span><br><span class="line"><span class="string">  # Don&#x27;t show ruby- at the front.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_RVM_SHOW_PREFIX=false</span></span><br><span class="line"><span class="string">  # Custom icon.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_RVM_VISUAL_IDENTIFIER_EXPANSION=&#x27;⭐&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ################[ terraform: terraform workspace (https://www.terraform.io) ]#################</span></span><br><span class="line"><span class="string">  # Terraform color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_TERRAFORM_FOREGROUND=38</span></span><br><span class="line"><span class="string">  # Custom icon.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_TERRAFORM_VISUAL_IDENTIFIER_EXPANSION=&#x27;⭐&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  #[ aws: aws profile (https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-profiles.html) ]#</span></span><br><span class="line"><span class="string">  # AWS profile color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_AWS_FOREGROUND=208</span></span><br><span class="line"><span class="string">  # Custom icon.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_AWS_VISUAL_IDENTIFIER_EXPANSION=&#x27;⭐&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  #[ aws_eb_env: aws elastic beanstalk environment (https://aws.amazon.com/elasticbeanstalk/) ]#</span></span><br><span class="line"><span class="string">  # AWS Elastic Beanstalk environment color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_AWS_EB_ENV_FOREGROUND=70</span></span><br><span class="line"><span class="string">  # Custom icon.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_AWS_EB_ENV_VISUAL_IDENTIFIER_EXPANSION=&#x27;⭐&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ##########[ azure: azure account name (https://docs.microsoft.com/en-us/cli/azure) ]##########</span></span><br><span class="line"><span class="string">  # Azure account name color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_AZURE_FOREGROUND=32</span></span><br><span class="line"><span class="string">  # Custom icon.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_AZURE_VISUAL_IDENTIFIER_EXPANSION=&#x27;⭐&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  #############[ kubecontext: current kubernetes context (https://kubernetes.io/) ]#############</span></span><br><span class="line"><span class="string">  # Kubernetes context classes for the purpose of using different colors, icons and expansions with</span></span><br><span class="line"><span class="string">  # different contexts.</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # POWERLEVEL9K_KUBECONTEXT_CLASSES is an array with even number of elements. The first element</span></span><br><span class="line"><span class="string">  # in each pair defines a pattern against which the current kubernetes context gets matched.</span></span><br><span class="line"><span class="string">  # More specifically, it&#x27;s P9K_CONTENT prior to the application of context expansion (see below)</span></span><br><span class="line"><span class="string">  # that gets matched. If you unset all POWERLEVEL9K_KUBECONTEXT_*CONTENT_EXPANSION parameters,</span></span><br><span class="line"><span class="string">  # you&#x27;ll see this value in your prompt. The second element of each pair in</span></span><br><span class="line"><span class="string">  # POWERLEVEL9K_KUBECONTEXT_CLASSES defines the context class. Patterns are tried in order. The</span></span><br><span class="line"><span class="string">  # first match wins.</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # For example, given these settings:</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  #   typeset -g POWERLEVEL9K_KUBECONTEXT_CLASSES=(</span></span><br><span class="line"><span class="string">  #     &#x27;*prod*&#x27;  PROD</span></span><br><span class="line"><span class="string">  #     &#x27;*test*&#x27;  TEST</span></span><br><span class="line"><span class="string">  #     &#x27;*&#x27;       DEFAULT)</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # If your current kubernetes context is \\\&quot;deathray-testing/default\\\&quot;, its class is TEST</span></span><br><span class="line"><span class="string">  # because \\\&quot;deathray-testing/default\\\&quot; doesn&#x27;t match the pattern &#x27;*prod*&#x27; but does match &#x27;*test*&#x27;.</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # You can define different colors, icons and content expansions for different classes:</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  #   typeset -g POWERLEVEL9K_KUBECONTEXT_TEST_FOREGROUND=28</span></span><br><span class="line"><span class="string">  #   typeset -g POWERLEVEL9K_KUBECONTEXT_TEST_VISUAL_IDENTIFIER_EXPANSION=&#x27;⭐&#x27;</span></span><br><span class="line"><span class="string">  #   typeset -g POWERLEVEL9K_KUBECONTEXT_TEST_CONTENT_EXPANSION=&#x27;&gt; \\\$&#123;P9K_CONTENT&#125; &lt;&#x27;</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_KUBECONTEXT_CLASSES=(</span></span><br><span class="line"><span class="string">      # &#x27;*prod*&#x27;  PROD    # These values are examples that are unlikely</span></span><br><span class="line"><span class="string">      # &#x27;*test*&#x27;  TEST    # to match your needs. Customize them as needed.</span></span><br><span class="line"><span class="string">      &#x27;*&#x27;       DEFAULT)</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_KUBECONTEXT_DEFAULT_FOREGROUND=134</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_KUBECONTEXT_DEFAULT_VISUAL_IDENTIFIER_EXPANSION=&#x27;⭐&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # Use POWERLEVEL9K_KUBECONTEXT_CONTENT_EXPANSION to specify the content displayed by kubecontext</span></span><br><span class="line"><span class="string">  # segment. Parameter expansions are very flexible and fast, too. See reference:</span></span><br><span class="line"><span class="string">  # http://zsh.sourceforge.net/Doc/Release/Expansion.html#Parameter-Expansion.</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # Within the expansion the following parameters are always available:</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # - P9K_CONTENT                The content that would&#x27;ve been displayed if there was no content</span></span><br><span class="line"><span class="string">  #                              expansion defined.</span></span><br><span class="line"><span class="string">  # - P9K_KUBECONTEXT_NAME       The current context&#x27;s name. Corresponds to column NAME in the</span></span><br><span class="line"><span class="string">  #                              output of \\\`kubectl config get-contexts\\\`.</span></span><br><span class="line"><span class="string">  # - P9K_KUBECONTEXT_CLUSTER    The current context&#x27;s cluster. Corresponds to column CLUSTER in the</span></span><br><span class="line"><span class="string">  #                              output of \\\`kubectl config get-contexts\\\`.</span></span><br><span class="line"><span class="string">  # - P9K_KUBECONTEXT_NAMESPACE  The current context&#x27;s namespace. Corresponds to column NAMESPACE</span></span><br><span class="line"><span class="string">  #                              in the output of \\\`kubectl config get-contexts\\\`. If there is no</span></span><br><span class="line"><span class="string">  #                              namespace, the parameter is set to \\\&quot;default\\\&quot;.</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # If the context points to Google Kubernetes Engine (GKE) or Elastic Kubernetes Service (EKS),</span></span><br><span class="line"><span class="string">  # the following extra parameters are available:</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # - P9K_KUBECONTEXT_CLOUD_NAME     Either \\\&quot;gke\\\&quot; or \\\&quot;eks\\\&quot;.</span></span><br><span class="line"><span class="string">  # - P9K_KUBECONTEXT_CLOUD_ACCOUNT  Account/project ID.</span></span><br><span class="line"><span class="string">  # - P9K_KUBECONTEXT_CLOUD_ZONE     Availability zone.</span></span><br><span class="line"><span class="string">  # - P9K_KUBECONTEXT_CLOUD_CLUSTER  Cluster.</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # P9K_KUBECONTEXT_CLOUD_* parameters are derived from P9K_KUBECONTEXT_CLUSTER. For example,</span></span><br><span class="line"><span class="string">  # if P9K_KUBECONTEXT_CLUSTER is \\\&quot;gke_my-account_us-east1-a_my-cluster-01\\\&quot;:</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  #   - P9K_KUBECONTEXT_CLOUD_NAME=gke</span></span><br><span class="line"><span class="string">  #   - P9K_KUBECONTEXT_CLOUD_ACCOUNT=my-account</span></span><br><span class="line"><span class="string">  #   - P9K_KUBECONTEXT_CLOUD_ZONE=us-east1-a</span></span><br><span class="line"><span class="string">  #   - P9K_KUBECONTEXT_CLOUD_CLUSTER=my-cluster-01</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # If P9K_KUBECONTEXT_CLUSTER is \\\&quot;arn:aws:eks:us-east-1:123456789012:cluster/my-cluster-01\\\&quot;:</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  #   - P9K_KUBECONTEXT_CLOUD_NAME=eks</span></span><br><span class="line"><span class="string">  #   - P9K_KUBECONTEXT_CLOUD_ACCOUNT=123456789012</span></span><br><span class="line"><span class="string">  #   - P9K_KUBECONTEXT_CLOUD_ZONE=us-east-1</span></span><br><span class="line"><span class="string">  #   - P9K_KUBECONTEXT_CLOUD_CLUSTER=my-cluster-01</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_KUBECONTEXT_DEFAULT_CONTENT_EXPANSION=</span></span><br><span class="line"><span class="string">  # Show P9K_KUBECONTEXT_CLOUD_CLUSTER if it&#x27;s not empty and fall back to P9K_KUBECONTEXT_NAME.</span></span><br><span class="line"><span class="string">  POWERLEVEL9K_KUBECONTEXT_DEFAULT_CONTENT_EXPANSION+=&#x27;\\\$&#123;P9K_KUBECONTEXT_CLOUD_CLUSTER:-\\\$&#123;P9K_KUBECONTEXT_NAME&#125;&#125;&#x27;</span></span><br><span class="line"><span class="string">  # Append the current context&#x27;s namespace if it&#x27;s not \\\&quot;default\\\&quot;.</span></span><br><span class="line"><span class="string">  POWERLEVEL9K_KUBECONTEXT_DEFAULT_CONTENT_EXPANSION+=&#x27;\\\$&#123;\\\$&#123;:-/\\\$P9K_KUBECONTEXT_NAMESPACE&#125;:#/default&#125;&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # Custom prefix.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_KUBECONTEXT_PREFIX=&#x27;%248Fat &#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ###############################[ public_ip: public IP address ]###############################</span></span><br><span class="line"><span class="string">  # Public IP color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_PUBLIC_IP_FOREGROUND=94</span></span><br><span class="line"><span class="string">  # Custom icon.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_PUBLIC_IP_VISUAL_IDENTIFIER_EXPANSION=&#x27;⭐&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ########################[ vpn_ip: virtual private network indicator ]#########################</span></span><br><span class="line"><span class="string">  # VPN IP color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_VPN_IP_FOREGROUND=81</span></span><br><span class="line"><span class="string">  # When on VPN, show just an icon without the IP address.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_VPN_IP_CONTENT_EXPANSION=</span></span><br><span class="line"><span class="string">  # Regular expression for the VPN network interface. Run ifconfig while on VPN to see the</span></span><br><span class="line"><span class="string">  # name of the interface.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_VPN_IP_INTERFACE=&#x27;(wg|(.*tun))[0-9]*&#x27;</span></span><br><span class="line"><span class="string">  # Icon to show when on VPN.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_VPN_IP_VISUAL_IDENTIFIER_EXPANSION=&#x27;\\\$&#123;P9K_VISUAL_IDENTIFIER// &#125;&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  #########################[ proxy: system-wide http/https/ftp proxy ]##########################</span></span><br><span class="line"><span class="string">  # Proxy color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_PROXY_FOREGROUND=68</span></span><br><span class="line"><span class="string">  # Custom icon.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_PROXY_VISUAL_IDENTIFIER_EXPANSION=&#x27;⭐&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ################################[ battery: internal battery ]#################################</span></span><br><span class="line"><span class="string">  # Show battery in red when it&#x27;s below this level and not connected to power supply.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_BATTERY_LOW_THRESHOLD=20</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_BATTERY_LOW_FOREGROUND=160</span></span><br><span class="line"><span class="string">  # Show battery in green when it&#x27;s charging or fully charged.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_BATTERY_&#123;CHARGING,CHARGED&#125;_FOREGROUND=70</span></span><br><span class="line"><span class="string">  # Show battery in yellow when it&#x27;s discharging.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_BATTERY_DISCONNECTED_FOREGROUND=178</span></span><br><span class="line"><span class="string">  # Battery pictograms going from low to high level of charge.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_BATTERY_STAGES=\\\$&#x27;\\\\uf58d\\\\uf579\\\\uf57a\\\\uf57b\\\\uf57c\\\\uf57d\\\\uf57e\\\\uf57f\\\\uf580\\\\uf581\\\\uf578&#x27;</span></span><br><span class="line"><span class="string">  # Don&#x27;t show the remaining time to charge/discharge.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_BATTERY_VERBOSE=false</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ####################################[ time: current time ]####################################</span></span><br><span class="line"><span class="string">  # Current time color.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_TIME_FOREGROUND=66</span></span><br><span class="line"><span class="string">  # Format for the current time: 09:51:02. See \\\`man 3 strftime\\\`.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_TIME_FORMAT=&#x27;%D&#123;%H:%M:%S&#125;&#x27;</span></span><br><span class="line"><span class="string">  # If set to true, time will update when you hit enter. This way prompts for the past</span></span><br><span class="line"><span class="string">  # commands will contain the start times of their commands as opposed to the default</span></span><br><span class="line"><span class="string">  # behavior where they contain the end times of their preceding commands.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_TIME_UPDATE_ON_COMMAND=false</span></span><br><span class="line"><span class="string">  # Custom icon.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_TIME_VISUAL_IDENTIFIER_EXPANSION=</span></span><br><span class="line"><span class="string">  # Custom prefix.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_TIME_PREFIX=&#x27;%248Fat &#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # Example of a user-defined prompt segment. Function prompt_example will be called on every</span></span><br><span class="line"><span class="string">  # prompt if \\\`example\\\` prompt segment is added to POWERLEVEL9K_LEFT_PROMPT_ELEMENTS or</span></span><br><span class="line"><span class="string">  # POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS. It displays an icon and orange text greeting the user.</span></span><br><span class="line"><span class="string">  #</span></span><br><span class="line"><span class="string">  # Type \\\`p10k help segment\\\` for documentation and a more sophisticated example.</span></span><br><span class="line"><span class="string">  function prompt_example() &#123;</span></span><br><span class="line"><span class="string">    p10k segment -f 208 -i &#x27;⭐&#x27; -t &#x27;hello, %n&#x27;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # User-defined prompt segments can be customized the same way as built-in segments.</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_EXAMPLE_FOREGROUND=208</span></span><br><span class="line"><span class="string">  typeset -g POWERLEVEL9K_EXAMPLE_VISUAL_IDENTIFIER_EXPANSION=&#x27;\\\$&#123;P9K_VISUAL_IDENTIFIER&#125;&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # When instant prompt is disabled, prompt won&#x27;t appear until zsh is fully initialized.</span></span><br><span class="line"><span class="string">  # typeset -g POWERLEVEL9K_DISABLE_INSTANT_PROMPT=true</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">(( \\\$&#123;#p10k_config_opts&#125; )) &amp;&amp; setopt \\\$&#123;p10k_config_opts[@]&#125;</span></span><br><span class="line"><span class="string">&#x27;builtin&#x27; &#x27;unset&#x27; &#x27;p10k_config_opts&#x27;</span></span><br><span class="line"><span class="string">    \&quot; &gt; ~/.p10k.zsh</span></span><br><span class="line"><span class="string">&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># double-plug.vim 文件</span></span><br><span class="line">pre_double_vimplug=<span class="string">&quot;</span></span><br><span class="line"><span class="string">    mkdir -p ~/.vim/autoload/</span></span><br><span class="line"><span class="string">    echo -E \&quot;</span></span><br><span class="line"><span class="string">\\\&quot; vim-plug: Vim plugin manager</span></span><br><span class="line"><span class="string">\\\&quot; ============================</span></span><br><span class="line"><span class="string">\\\&quot;</span></span><br><span class="line"><span class="string">\\\&quot; Download plug.vim and put it in ~/.vim/autoload</span></span><br><span class="line"><span class="string">\\\&quot;</span></span><br><span class="line"><span class="string">\\\&quot;   curl -fLo ~/.vim/autoload/plug.vim --create-dirs \\\\</span></span><br><span class="line"><span class="string">\\\&quot;     https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim</span></span><br><span class="line"><span class="string">\\\&quot;</span></span><br><span class="line"><span class="string">\\\&quot; Edit your .vimrc</span></span><br><span class="line"><span class="string">\\\&quot;</span></span><br><span class="line"><span class="string">\\\&quot;   call plug#begin(&#x27;~/.vim/plugged&#x27;)</span></span><br><span class="line"><span class="string">\\\&quot;</span></span><br><span class="line"><span class="string">\\\&quot;   \\\&quot; Make sure you use single quotes</span></span><br><span class="line"><span class="string">\\\&quot;</span></span><br><span class="line"><span class="string">\\\&quot;   \\\&quot; Shorthand notation; fetches https://github.com/junegunn/vim-easy-align</span></span><br><span class="line"><span class="string">\\\&quot;   Plug &#x27;junegunn/vim-easy-align&#x27;</span></span><br><span class="line"><span class="string">\\\&quot;</span></span><br><span class="line"><span class="string">\\\&quot;   \\\&quot; Any valid git URL is allowed</span></span><br><span class="line"><span class="string">\\\&quot;   Plug &#x27;https://github.com/junegunn/vim-github-dashboard.git&#x27;</span></span><br><span class="line"><span class="string">\\\&quot;</span></span><br><span class="line"><span class="string">\\\&quot;   \\\&quot; Multiple Plug commands can be written in a single line using | separators</span></span><br><span class="line"><span class="string">\\\&quot;   Plug &#x27;SirVer/ultisnips&#x27; | Plug &#x27;honza/vim-snippets&#x27;</span></span><br><span class="line"><span class="string">\\\&quot;</span></span><br><span class="line"><span class="string">\\\&quot;   \\\&quot; On-demand loading</span></span><br><span class="line"><span class="string">\\\&quot;   Plug &#x27;preservim/nerdtree&#x27;, &#123; &#x27;on&#x27;: &#x27;NERDTreeToggle&#x27; &#125;</span></span><br><span class="line"><span class="string">\\\&quot;   Plug &#x27;tpope/vim-fireplace&#x27;, &#123; &#x27;for&#x27;: &#x27;clojure&#x27; &#125;</span></span><br><span class="line"><span class="string">\\\&quot;</span></span><br><span class="line"><span class="string">\\\&quot;   \\\&quot; Using a non-default branch</span></span><br><span class="line"><span class="string">\\\&quot;   Plug &#x27;rdnetto/YCM-Generator&#x27;, &#123; &#x27;branch&#x27;: &#x27;stable&#x27; &#125;</span></span><br><span class="line"><span class="string">\\\&quot;</span></span><br><span class="line"><span class="string">\\\&quot;   \\\&quot; Using a tagged release; wildcard allowed (requires git 1.9.2 or above)</span></span><br><span class="line"><span class="string">\\\&quot;   Plug &#x27;fatih/vim-go&#x27;, &#123; &#x27;tag&#x27;: &#x27;*&#x27; &#125;</span></span><br><span class="line"><span class="string">\\\&quot;</span></span><br><span class="line"><span class="string">\\\&quot;   \\\&quot; Plugin options</span></span><br><span class="line"><span class="string">\\\&quot;   Plug &#x27;nsf/gocode&#x27;, &#123; &#x27;tag&#x27;: &#x27;v.20150303&#x27;, &#x27;rtp&#x27;: &#x27;vim&#x27; &#125;</span></span><br><span class="line"><span class="string">\\\&quot;</span></span><br><span class="line"><span class="string">\\\&quot;   \\\&quot; Plugin outside ~/.vim/plugged with post-update hook</span></span><br><span class="line"><span class="string">\\\&quot;   Plug &#x27;junegunn/fzf&#x27;, &#123; &#x27;dir&#x27;: &#x27;~/.fzf&#x27;, &#x27;do&#x27;: &#x27;./install --all&#x27; &#125;</span></span><br><span class="line"><span class="string">\\\&quot;</span></span><br><span class="line"><span class="string">\\\&quot;   \\\&quot; Unmanaged plugin (manually installed and updated)</span></span><br><span class="line"><span class="string">\\\&quot;   Plug &#x27;~/my-prototype-plugin&#x27;</span></span><br><span class="line"><span class="string">\\\&quot;</span></span><br><span class="line"><span class="string">\\\&quot;   \\\&quot; Initialize plugin system</span></span><br><span class="line"><span class="string">\\\&quot;   call plug#end()</span></span><br><span class="line"><span class="string">\\\&quot;</span></span><br><span class="line"><span class="string">\\\&quot; Then reload .vimrc and :PlugInstall to install plugins.</span></span><br><span class="line"><span class="string">\\\&quot;</span></span><br><span class="line"><span class="string">\\\&quot; Plug options:</span></span><br><span class="line"><span class="string">\\\&quot;</span></span><br><span class="line"><span class="string">\\\&quot;| Option                  | Description                                      |</span></span><br><span class="line"><span class="string">\\\&quot;| ----------------------- | ------------------------------------------------ |</span></span><br><span class="line"><span class="string">\\\&quot;| \\\`branch\\\`/\\\`tag\\\`/\\\`commit\\\` | Branch/tag/commit of the repository to use       |</span></span><br><span class="line"><span class="string">\\\&quot;| \\\`rtp\\\`                   | Subdirectory that contains Vim plugin            |</span></span><br><span class="line"><span class="string">\\\&quot;| \\\`dir\\\`                   | Custom directory for the plugin                  |</span></span><br><span class="line"><span class="string">\\\&quot;| \\\`as\\\`                    | Use different name for the plugin                |</span></span><br><span class="line"><span class="string">\\\&quot;| \\\`do\\\`                    | Post-update hook (string or funcref)             |</span></span><br><span class="line"><span class="string">\\\&quot;| \\\`on\\\`                    | On-demand loading: Commands or \\\`&lt;Plug&gt;\\\`-mappings |</span></span><br><span class="line"><span class="string">\\\&quot;| \\\`for\\\`                   | On-demand loading: File types                    |</span></span><br><span class="line"><span class="string">\\\&quot;| \\\`frozen\\\`                | Do not update unless explicitly specified        |</span></span><br><span class="line"><span class="string">\\\&quot;</span></span><br><span class="line"><span class="string">\\\&quot; More information: https://github.com/junegunn/vim-plug</span></span><br><span class="line"><span class="string">\\\&quot;</span></span><br><span class="line"><span class="string">\\\&quot;</span></span><br><span class="line"><span class="string">\\\&quot; Copyright (c) 2017 Junegunn Choi</span></span><br><span class="line"><span class="string">\\\&quot;</span></span><br><span class="line"><span class="string">\\\&quot; MIT License</span></span><br><span class="line"><span class="string">\\\&quot;</span></span><br><span class="line"><span class="string">\\\&quot; Permission is hereby granted, free of charge, to any person obtaining</span></span><br><span class="line"><span class="string">\\\&quot; a copy of this software and associated documentation files (the</span></span><br><span class="line"><span class="string">\\\&quot; \\\&quot;Software\\\&quot;), to deal in the Software without restriction, including</span></span><br><span class="line"><span class="string">\\\&quot; without limitation the rights to use, copy, modify, merge, publish,</span></span><br><span class="line"><span class="string">\\\&quot; distribute, sublicense, and/or sell copies of the Software, and to</span></span><br><span class="line"><span class="string">\\\&quot; permit persons to whom the Software is furnished to do so, subject to</span></span><br><span class="line"><span class="string">\\\&quot; the following conditions:</span></span><br><span class="line"><span class="string">\\\&quot;</span></span><br><span class="line"><span class="string">\\\&quot; The above copyright notice and this permission notice shall be</span></span><br><span class="line"><span class="string">\\\&quot; included in all copies or substantial portions of the Software.</span></span><br><span class="line"><span class="string">\\\&quot;</span></span><br><span class="line"><span class="string">\\\&quot; THE SOFTWARE IS PROVIDED \\\&quot;AS IS\\\&quot;, WITHOUT WARRANTY OF ANY KIND,</span></span><br><span class="line"><span class="string">\\\&quot; EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF</span></span><br><span class="line"><span class="string">\\\&quot; MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND</span></span><br><span class="line"><span class="string">\\\&quot; NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE</span></span><br><span class="line"><span class="string">\\\&quot; LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION</span></span><br><span class="line"><span class="string">\\\&quot; OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION</span></span><br><span class="line"><span class="string">\\\&quot; WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">if exists(&#x27;g:loaded_plug&#x27;)</span></span><br><span class="line"><span class="string">  finish</span></span><br><span class="line"><span class="string">endif</span></span><br><span class="line"><span class="string">let g:loaded_plug = 1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">let s:cpo_save = &amp;cpo</span></span><br><span class="line"><span class="string">set cpo&amp;vim</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">let s:plug_src = &#x27;https://github.com/junegunn/vim-plug.git&#x27;</span></span><br><span class="line"><span class="string">let s:plug_tab = get(s:, &#x27;plug_tab&#x27;, -1)</span></span><br><span class="line"><span class="string">let s:plug_buf = get(s:, &#x27;plug_buf&#x27;, -1)</span></span><br><span class="line"><span class="string">let s:mac_gui = has(&#x27;gui_macvim&#x27;) &amp;&amp; has(&#x27;gui_running&#x27;)</span></span><br><span class="line"><span class="string">let s:is_win = has(&#x27;win32&#x27;)</span></span><br><span class="line"><span class="string">let s:nvim = has(&#x27;nvim-0.2&#x27;) || (has(&#x27;nvim&#x27;) &amp;&amp; exists(&#x27;*jobwait&#x27;) &amp;&amp; !s:is_win)</span></span><br><span class="line"><span class="string">let s:vim8 = has(&#x27;patch-8.0.0039&#x27;) &amp;&amp; exists(&#x27;*job_start&#x27;)</span></span><br><span class="line"><span class="string">if s:is_win &amp;&amp; &amp;shellslash</span></span><br><span class="line"><span class="string">  set noshellslash</span></span><br><span class="line"><span class="string">  let s:me = resolve(expand(&#x27;&lt;sfile&gt;:p&#x27;))</span></span><br><span class="line"><span class="string">  set shellslash</span></span><br><span class="line"><span class="string">else</span></span><br><span class="line"><span class="string">  let s:me = resolve(expand(&#x27;&lt;sfile&gt;:p&#x27;))</span></span><br><span class="line"><span class="string">endif</span></span><br><span class="line"><span class="string">let s:base_spec = &#123; &#x27;branch&#x27;: &#x27;&#x27;, &#x27;frozen&#x27;: 0 &#125;</span></span><br><span class="line"><span class="string">let s:TYPE = &#123;</span></span><br><span class="line"><span class="string">\\\\   &#x27;string&#x27;:  type(&#x27;&#x27;),</span></span><br><span class="line"><span class="string">\\\\   &#x27;list&#x27;:    type([]),</span></span><br><span class="line"><span class="string">\\\\   &#x27;dict&#x27;:    type(&#123;&#125;),</span></span><br><span class="line"><span class="string">\\\\   &#x27;funcref&#x27;: type(function(&#x27;call&#x27;))</span></span><br><span class="line"><span class="string">\\\\ &#125;</span></span><br><span class="line"><span class="string">let s:loaded = get(s:, &#x27;loaded&#x27;, &#123;&#125;)</span></span><br><span class="line"><span class="string">let s:triggers = get(s:, &#x27;triggers&#x27;, &#123;&#125;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:is_powershell(shell)</span></span><br><span class="line"><span class="string">  return a:shell =~# &#x27;powershell\\\\(\\\\.exe\\\\)\\\\?\\\$&#x27; || a:shell =~# &#x27;pwsh\\\\(\\\\.exe\\\\)\\\\?\\\$&#x27;</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:isabsolute(dir) abort</span></span><br><span class="line"><span class="string">  return a:dir =~# &#x27;^/&#x27; || (has(&#x27;win32&#x27;) &amp;&amp; a:dir =~? &#x27;^\\\\%(\\\\\\\\\\\\|[A-Z]:\\\\)&#x27;)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:git_dir(dir) abort</span></span><br><span class="line"><span class="string">  let gitdir = s:trim(a:dir) . &#x27;/.git&#x27;</span></span><br><span class="line"><span class="string">  if isdirectory(gitdir)</span></span><br><span class="line"><span class="string">    return gitdir</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  if !filereadable(gitdir)</span></span><br><span class="line"><span class="string">    return &#x27;&#x27;</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  let gitdir = matchstr(get(readfile(gitdir), 0, &#x27;&#x27;), &#x27;^gitdir: \\\\zs.*&#x27;)</span></span><br><span class="line"><span class="string">  if len(gitdir) &amp;&amp; !s:isabsolute(gitdir)</span></span><br><span class="line"><span class="string">    let gitdir = a:dir . &#x27;/&#x27; . gitdir</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  return isdirectory(gitdir) ? gitdir : &#x27;&#x27;</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:git_origin_url(dir) abort</span></span><br><span class="line"><span class="string">  let gitdir = s:git_dir(a:dir)</span></span><br><span class="line"><span class="string">  let config = gitdir . &#x27;/config&#x27;</span></span><br><span class="line"><span class="string">  if empty(gitdir) || !filereadable(config)</span></span><br><span class="line"><span class="string">    return &#x27;&#x27;</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  return matchstr(join(readfile(config)), &#x27;\\\\[remote \\\&quot;origin\\\&quot;\\\\].\\\\&#123;-&#125;url\\\\s*=\\\\s*\\\\zs\\\\S*\\\\ze&#x27;)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:git_revision(dir) abort</span></span><br><span class="line"><span class="string">  let gitdir = s:git_dir(a:dir)</span></span><br><span class="line"><span class="string">  let head = gitdir . &#x27;/HEAD&#x27;</span></span><br><span class="line"><span class="string">  if empty(gitdir) || !filereadable(head)</span></span><br><span class="line"><span class="string">    return &#x27;&#x27;</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  let line = get(readfile(head), 0, &#x27;&#x27;)</span></span><br><span class="line"><span class="string">  let ref = matchstr(line, &#x27;^ref: \\\\zs.*&#x27;)</span></span><br><span class="line"><span class="string">  if empty(ref)</span></span><br><span class="line"><span class="string">    return line</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  if filereadable(gitdir . &#x27;/&#x27; . ref)</span></span><br><span class="line"><span class="string">    return get(readfile(gitdir . &#x27;/&#x27; . ref), 0, &#x27;&#x27;)</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  if filereadable(gitdir . &#x27;/packed-refs&#x27;)</span></span><br><span class="line"><span class="string">    for line in readfile(gitdir . &#x27;/packed-refs&#x27;)</span></span><br><span class="line"><span class="string">      if line =~# &#x27; &#x27; . ref</span></span><br><span class="line"><span class="string">        return matchstr(line, &#x27;^[0-9a-f]*&#x27;)</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">    endfor</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  return &#x27;&#x27;</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:git_local_branch(dir) abort</span></span><br><span class="line"><span class="string">  let gitdir = s:git_dir(a:dir)</span></span><br><span class="line"><span class="string">  let head = gitdir . &#x27;/HEAD&#x27;</span></span><br><span class="line"><span class="string">  if empty(gitdir) || !filereadable(head)</span></span><br><span class="line"><span class="string">    return &#x27;&#x27;</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  let branch = matchstr(get(readfile(head), 0, &#x27;&#x27;), &#x27;^ref: refs/heads/\\\\zs.*&#x27;)</span></span><br><span class="line"><span class="string">  return len(branch) ? branch : &#x27;HEAD&#x27;</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:git_origin_branch(spec)</span></span><br><span class="line"><span class="string">  if len(a:spec.branch)</span></span><br><span class="line"><span class="string">    return a:spec.branch</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  \\\&quot; The file may not be present if this is a local repository</span></span><br><span class="line"><span class="string">  let gitdir = s:git_dir(a:spec.dir)</span></span><br><span class="line"><span class="string">  let origin_head = gitdir.&#x27;/refs/remotes/origin/HEAD&#x27;</span></span><br><span class="line"><span class="string">  if len(gitdir) &amp;&amp; filereadable(origin_head)</span></span><br><span class="line"><span class="string">    return matchstr(get(readfile(origin_head), 0, &#x27;&#x27;),</span></span><br><span class="line"><span class="string">                  \\\\ &#x27;^ref: refs/remotes/origin/\\\\zs.*&#x27;)</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  \\\&quot; The command may not return the name of a branch in detached HEAD state</span></span><br><span class="line"><span class="string">  let result = s:lines(s:system(&#x27;git symbolic-ref --short HEAD&#x27;, a:spec.dir))</span></span><br><span class="line"><span class="string">  return v:shell_error ? &#x27;&#x27; : result[-1]</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">if s:is_win</span></span><br><span class="line"><span class="string">  function! s:plug_call(fn, ...)</span></span><br><span class="line"><span class="string">    let shellslash = &amp;shellslash</span></span><br><span class="line"><span class="string">    try</span></span><br><span class="line"><span class="string">      set noshellslash</span></span><br><span class="line"><span class="string">      return call(a:fn, a:000)</span></span><br><span class="line"><span class="string">    finally</span></span><br><span class="line"><span class="string">      let &amp;shellslash = shellslash</span></span><br><span class="line"><span class="string">    endtry</span></span><br><span class="line"><span class="string">  endfunction</span></span><br><span class="line"><span class="string">else</span></span><br><span class="line"><span class="string">  function! s:plug_call(fn, ...)</span></span><br><span class="line"><span class="string">    return call(a:fn, a:000)</span></span><br><span class="line"><span class="string">  endfunction</span></span><br><span class="line"><span class="string">endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:plug_getcwd()</span></span><br><span class="line"><span class="string">  return s:plug_call(&#x27;getcwd&#x27;)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:plug_fnamemodify(fname, mods)</span></span><br><span class="line"><span class="string">  return s:plug_call(&#x27;fnamemodify&#x27;, a:fname, a:mods)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:plug_expand(fmt)</span></span><br><span class="line"><span class="string">  return s:plug_call(&#x27;expand&#x27;, a:fmt, 1)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:plug_tempname()</span></span><br><span class="line"><span class="string">  return s:plug_call(&#x27;tempname&#x27;)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! plug#begin(...)</span></span><br><span class="line"><span class="string">  if a:0 &gt; 0</span></span><br><span class="line"><span class="string">    let s:plug_home_org = a:1</span></span><br><span class="line"><span class="string">    let home = s:path(s:plug_fnamemodify(s:plug_expand(a:1), &#x27;:p&#x27;))</span></span><br><span class="line"><span class="string">  elseif exists(&#x27;g:plug_home&#x27;)</span></span><br><span class="line"><span class="string">    let home = s:path(g:plug_home)</span></span><br><span class="line"><span class="string">  elseif has(&#x27;nvim&#x27;)</span></span><br><span class="line"><span class="string">    let home = stdpath(&#x27;data&#x27;) . &#x27;/plugged&#x27;</span></span><br><span class="line"><span class="string">  elseif !empty(&amp;rtp)</span></span><br><span class="line"><span class="string">    let home = s:path(split(&amp;rtp, &#x27;,&#x27;)[0]) . &#x27;/plugged&#x27;</span></span><br><span class="line"><span class="string">  else</span></span><br><span class="line"><span class="string">    return s:err(&#x27;Unable to determine plug home. Try calling plug#begin() with a path argument.&#x27;)</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  if s:plug_fnamemodify(home, &#x27;:t&#x27;) ==# &#x27;plugin&#x27; &amp;&amp; s:plug_fnamemodify(home, &#x27;:h&#x27;) ==# s:first_rtp</span></span><br><span class="line"><span class="string">    return s:err(&#x27;Invalid plug home. &#x27;.home.&#x27; is a standard Vim runtime path and is not allowed.&#x27;)</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  let g:plug_home = home</span></span><br><span class="line"><span class="string">  let g:plugs = &#123;&#125;</span></span><br><span class="line"><span class="string">  let g:plugs_order = []</span></span><br><span class="line"><span class="string">  let s:triggers = &#123;&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  call s:define_commands()</span></span><br><span class="line"><span class="string">  return 1</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:define_commands()</span></span><br><span class="line"><span class="string">  command! -nargs=+ -bar Plug call plug#(&lt;args&gt;)</span></span><br><span class="line"><span class="string">  if !executable(&#x27;git&#x27;)</span></span><br><span class="line"><span class="string">    return s:err(&#x27;\\\`git\\\` executable not found. Most commands will not be available. To suppress this message, prepend \\\`silent!\\\` to \\\`call plug#begin(...)\\\`.&#x27;)</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  if has(&#x27;win32&#x27;)</span></span><br><span class="line"><span class="string">  \\\\ &amp;&amp; &amp;shellslash</span></span><br><span class="line"><span class="string">  \\\\ &amp;&amp; (&amp;shell =~# &#x27;cmd\\\\(\\\\.exe\\\\)\\\\?\\\$&#x27; || s:is_powershell(&amp;shell))</span></span><br><span class="line"><span class="string">    return s:err(&#x27;vim-plug does not support shell, &#x27; . &amp;shell . &#x27;, when shellslash is set.&#x27;)</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  if !has(&#x27;nvim&#x27;)</span></span><br><span class="line"><span class="string">    \\\\ &amp;&amp; (has(&#x27;win32&#x27;) || has(&#x27;win32unix&#x27;))</span></span><br><span class="line"><span class="string">    \\\\ &amp;&amp; !has(&#x27;multi_byte&#x27;)</span></span><br><span class="line"><span class="string">    return s:err(&#x27;Vim needs +multi_byte feature on Windows to run shell commands. Enable +iconv for best results.&#x27;)</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  command! -nargs=* -bar -bang -complete=customlist,s:names PlugInstall call s:install(&lt;bang&gt;0, [&lt;f-args&gt;])</span></span><br><span class="line"><span class="string">  command! -nargs=* -bar -bang -complete=customlist,s:names PlugUpdate  call s:update(&lt;bang&gt;0, [&lt;f-args&gt;])</span></span><br><span class="line"><span class="string">  command! -nargs=0 -bar -bang PlugClean call s:clean(&lt;bang&gt;0)</span></span><br><span class="line"><span class="string">  command! -nargs=0 -bar PlugUpgrade if s:upgrade() | execute &#x27;source&#x27; s:esc(s:me) | endif</span></span><br><span class="line"><span class="string">  command! -nargs=0 -bar PlugStatus  call s:status()</span></span><br><span class="line"><span class="string">  command! -nargs=0 -bar PlugDiff    call s:diff()</span></span><br><span class="line"><span class="string">  command! -nargs=? -bar -bang -complete=file PlugSnapshot call s:snapshot(&lt;bang&gt;0, &lt;f-args&gt;)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:to_a(v)</span></span><br><span class="line"><span class="string">  return type(a:v) == s:TYPE.list ? a:v : [a:v]</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:to_s(v)</span></span><br><span class="line"><span class="string">  return type(a:v) == s:TYPE.string ? a:v : join(a:v, \\\&quot;\\\\n\\\&quot;) . \\\&quot;\\\\n\\\&quot;</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:glob(from, pattern)</span></span><br><span class="line"><span class="string">  return s:lines(globpath(a:from, a:pattern))</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:source(from, ...)</span></span><br><span class="line"><span class="string">  let found = 0</span></span><br><span class="line"><span class="string">  for pattern in a:000</span></span><br><span class="line"><span class="string">    for vim in s:glob(a:from, pattern)</span></span><br><span class="line"><span class="string">      execute &#x27;source&#x27; s:esc(vim)</span></span><br><span class="line"><span class="string">      let found = 1</span></span><br><span class="line"><span class="string">    endfor</span></span><br><span class="line"><span class="string">  endfor</span></span><br><span class="line"><span class="string">  return found</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:assoc(dict, key, val)</span></span><br><span class="line"><span class="string">  let a:dict[a:key] = add(get(a:dict, a:key, []), a:val)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:ask(message, ...)</span></span><br><span class="line"><span class="string">  call inputsave()</span></span><br><span class="line"><span class="string">  echohl WarningMsg</span></span><br><span class="line"><span class="string">  let answer = input(a:message.(a:0 ? &#x27; (y/N/a) &#x27; : &#x27; (y/N) &#x27;))</span></span><br><span class="line"><span class="string">  echohl None</span></span><br><span class="line"><span class="string">  call inputrestore()</span></span><br><span class="line"><span class="string">  echo \\\&quot;\\\\r\\\&quot;</span></span><br><span class="line"><span class="string">  return (a:0 &amp;&amp; answer =~? &#x27;^a&#x27;) ? 2 : (answer =~? &#x27;^y&#x27;) ? 1 : 0</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:ask_no_interrupt(...)</span></span><br><span class="line"><span class="string">  try</span></span><br><span class="line"><span class="string">    return call(&#x27;s:ask&#x27;, a:000)</span></span><br><span class="line"><span class="string">  catch</span></span><br><span class="line"><span class="string">    return 0</span></span><br><span class="line"><span class="string">  endtry</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:lazy(plug, opt)</span></span><br><span class="line"><span class="string">  return has_key(a:plug, a:opt) &amp;&amp;</span></span><br><span class="line"><span class="string">        \\\\ (empty(s:to_a(a:plug[a:opt]))         ||</span></span><br><span class="line"><span class="string">        \\\\  !isdirectory(a:plug.dir)             ||</span></span><br><span class="line"><span class="string">        \\\\  len(s:glob(s:rtp(a:plug), &#x27;plugin&#x27;)) ||</span></span><br><span class="line"><span class="string">        \\\\  len(s:glob(s:rtp(a:plug), &#x27;after/plugin&#x27;)))</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! plug#end()</span></span><br><span class="line"><span class="string">  if !exists(&#x27;g:plugs&#x27;)</span></span><br><span class="line"><span class="string">    return s:err(&#x27;plug#end() called without calling plug#begin() first&#x27;)</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  if exists(&#x27;#PlugLOD&#x27;)</span></span><br><span class="line"><span class="string">    augroup PlugLOD</span></span><br><span class="line"><span class="string">      autocmd!</span></span><br><span class="line"><span class="string">    augroup END</span></span><br><span class="line"><span class="string">    augroup! PlugLOD</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  let lod = &#123; &#x27;ft&#x27;: &#123;&#125;, &#x27;map&#x27;: &#123;&#125;, &#x27;cmd&#x27;: &#123;&#125; &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  if get(g:, &#x27;did_load_filetypes&#x27;, 0)</span></span><br><span class="line"><span class="string">    filetype off</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  for name in g:plugs_order</span></span><br><span class="line"><span class="string">    if !has_key(g:plugs, name)</span></span><br><span class="line"><span class="string">      continue</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    let plug = g:plugs[name]</span></span><br><span class="line"><span class="string">    if get(s:loaded, name, 0) || !s:lazy(plug, &#x27;on&#x27;) &amp;&amp; !s:lazy(plug, &#x27;for&#x27;)</span></span><br><span class="line"><span class="string">      let s:loaded[name] = 1</span></span><br><span class="line"><span class="string">      continue</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    if has_key(plug, &#x27;on&#x27;)</span></span><br><span class="line"><span class="string">      let s:triggers[name] = &#123; &#x27;map&#x27;: [], &#x27;cmd&#x27;: [] &#125;</span></span><br><span class="line"><span class="string">      for cmd in s:to_a(plug.on)</span></span><br><span class="line"><span class="string">        if cmd =~? &#x27;^&lt;Plug&gt;.\\\\+&#x27;</span></span><br><span class="line"><span class="string">          if empty(mapcheck(cmd)) &amp;&amp; empty(mapcheck(cmd, &#x27;i&#x27;))</span></span><br><span class="line"><span class="string">            call s:assoc(lod.map, cmd, name)</span></span><br><span class="line"><span class="string">          endif</span></span><br><span class="line"><span class="string">          call add(s:triggers[name].map, cmd)</span></span><br><span class="line"><span class="string">        elseif cmd =~# &#x27;^[A-Z]&#x27;</span></span><br><span class="line"><span class="string">          let cmd = substitute(cmd, &#x27;!*\\\$&#x27;, &#x27;&#x27;, &#x27;&#x27;)</span></span><br><span class="line"><span class="string">          if exists(&#x27;:&#x27;.cmd) != 2</span></span><br><span class="line"><span class="string">            call s:assoc(lod.cmd, cmd, name)</span></span><br><span class="line"><span class="string">          endif</span></span><br><span class="line"><span class="string">          call add(s:triggers[name].cmd, cmd)</span></span><br><span class="line"><span class="string">        else</span></span><br><span class="line"><span class="string">          call s:err(&#x27;Invalid \\\`on\\\` option: &#x27;.cmd.</span></span><br><span class="line"><span class="string">          \\\\ &#x27;. Should start with an uppercase letter or \\\`&lt;Plug&gt;\\\`.&#x27;)</span></span><br><span class="line"><span class="string">        endif</span></span><br><span class="line"><span class="string">      endfor</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    if has_key(plug, &#x27;for&#x27;)</span></span><br><span class="line"><span class="string">      let types = s:to_a(plug.for)</span></span><br><span class="line"><span class="string">      if !empty(types)</span></span><br><span class="line"><span class="string">        augroup filetypedetect</span></span><br><span class="line"><span class="string">        call s:source(s:rtp(plug), &#x27;ftdetect/**/*.vim&#x27;, &#x27;after/ftdetect/**/*.vim&#x27;)</span></span><br><span class="line"><span class="string">        augroup END</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">      for type in types</span></span><br><span class="line"><span class="string">        call s:assoc(lod.ft, type, name)</span></span><br><span class="line"><span class="string">      endfor</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">  endfor</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  for [cmd, names] in items(lod.cmd)</span></span><br><span class="line"><span class="string">    execute printf(</span></span><br><span class="line"><span class="string">    \\\\ &#x27;command! -nargs=* -range -bang -complete=file %s call s:lod_cmd(%s, \\\&quot;&lt;bang&gt;\\\&quot;, &lt;line1&gt;, &lt;line2&gt;, &lt;q-args&gt;, %s)&#x27;,</span></span><br><span class="line"><span class="string">    \\\\ cmd, string(cmd), string(names))</span></span><br><span class="line"><span class="string">  endfor</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  for [map, names] in items(lod.map)</span></span><br><span class="line"><span class="string">    for [mode, map_prefix, key_prefix] in</span></span><br><span class="line"><span class="string">          \\\\ [[&#x27;i&#x27;, &#x27;&lt;C-\\\\&gt;&lt;C-O&gt;&#x27;, &#x27;&#x27;], [&#x27;n&#x27;, &#x27;&#x27;, &#x27;&#x27;], [&#x27;v&#x27;, &#x27;&#x27;, &#x27;gv&#x27;], [&#x27;o&#x27;, &#x27;&#x27;, &#x27;&#x27;]]</span></span><br><span class="line"><span class="string">      execute printf(</span></span><br><span class="line"><span class="string">      \\\\ &#x27;%snoremap &lt;silent&gt; %s %s:&lt;C-U&gt;call &lt;SID&gt;lod_map(%s, %s, %s, \\\&quot;%s\\\&quot;)&lt;CR&gt;&#x27;,</span></span><br><span class="line"><span class="string">      \\\\ mode, map, map_prefix, string(map), string(names), mode != &#x27;i&#x27;, key_prefix)</span></span><br><span class="line"><span class="string">    endfor</span></span><br><span class="line"><span class="string">  endfor</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  for [ft, names] in items(lod.ft)</span></span><br><span class="line"><span class="string">    augroup PlugLOD</span></span><br><span class="line"><span class="string">      execute printf(&#x27;autocmd FileType %s call &lt;SID&gt;lod_ft(%s, %s)&#x27;,</span></span><br><span class="line"><span class="string">            \\\\ ft, string(ft), string(names))</span></span><br><span class="line"><span class="string">    augroup END</span></span><br><span class="line"><span class="string">  endfor</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  call s:reorg_rtp()</span></span><br><span class="line"><span class="string">  filetype plugin indent on</span></span><br><span class="line"><span class="string">  if has(&#x27;vim_starting&#x27;)</span></span><br><span class="line"><span class="string">    if has(&#x27;syntax&#x27;) &amp;&amp; !exists(&#x27;g:syntax_on&#x27;)</span></span><br><span class="line"><span class="string">      syntax enable</span></span><br><span class="line"><span class="string">    end</span></span><br><span class="line"><span class="string">  else</span></span><br><span class="line"><span class="string">    call s:reload_plugins()</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:loaded_names()</span></span><br><span class="line"><span class="string">  return filter(copy(g:plugs_order), &#x27;get(s:loaded, v:val, 0)&#x27;)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:load_plugin(spec)</span></span><br><span class="line"><span class="string">  call s:source(s:rtp(a:spec), &#x27;plugin/**/*.vim&#x27;, &#x27;after/plugin/**/*.vim&#x27;)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:reload_plugins()</span></span><br><span class="line"><span class="string">  for name in s:loaded_names()</span></span><br><span class="line"><span class="string">    call s:load_plugin(g:plugs[name])</span></span><br><span class="line"><span class="string">  endfor</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:trim(str)</span></span><br><span class="line"><span class="string">  return substitute(a:str, &#x27;[\\\\/]\\\\+\\\$&#x27;, &#x27;&#x27;, &#x27;&#x27;)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:version_requirement(val, min)</span></span><br><span class="line"><span class="string">  for idx in range(0, len(a:min) - 1)</span></span><br><span class="line"><span class="string">    let v = get(a:val, idx, 0)</span></span><br><span class="line"><span class="string">    if     v &lt; a:min[idx] | return 0</span></span><br><span class="line"><span class="string">    elseif v &gt; a:min[idx] | return 1</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">  endfor</span></span><br><span class="line"><span class="string">  return 1</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:git_version_requirement(...)</span></span><br><span class="line"><span class="string">  if !exists(&#x27;s:git_version&#x27;)</span></span><br><span class="line"><span class="string">    let s:git_version = map(split(split(s:system([&#x27;git&#x27;, &#x27;--version&#x27;]))[2], &#x27;\\\\.&#x27;), &#x27;str2nr(v:val)&#x27;)</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  return s:version_requirement(s:git_version, a:000)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:progress_opt(base)</span></span><br><span class="line"><span class="string">  return a:base &amp;&amp; !s:is_win &amp;&amp;</span></span><br><span class="line"><span class="string">        \\\\ s:git_version_requirement(1, 7, 1) ? &#x27;--progress&#x27; : &#x27;&#x27;</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:rtp(spec)</span></span><br><span class="line"><span class="string">  return s:path(a:spec.dir . get(a:spec, &#x27;rtp&#x27;, &#x27;&#x27;))</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">if s:is_win</span></span><br><span class="line"><span class="string">  function! s:path(path)</span></span><br><span class="line"><span class="string">    return s:trim(substitute(a:path, &#x27;/&#x27;, &#x27;\\\\&#x27;, &#x27;g&#x27;))</span></span><br><span class="line"><span class="string">  endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  function! s:dirpath(path)</span></span><br><span class="line"><span class="string">    return s:path(a:path) . &#x27;\\\\&#x27;</span></span><br><span class="line"><span class="string">  endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  function! s:is_local_plug(repo)</span></span><br><span class="line"><span class="string">    return a:repo =~? &#x27;^[a-z]:\\\\|^[%~]&#x27;</span></span><br><span class="line"><span class="string">  endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  \\\&quot; Copied from fzf</span></span><br><span class="line"><span class="string">  function! s:wrap_cmds(cmds)</span></span><br><span class="line"><span class="string">    let cmds = [</span></span><br><span class="line"><span class="string">      \\\\ &#x27;@echo off&#x27;,</span></span><br><span class="line"><span class="string">      \\\\ &#x27;setlocal enabledelayedexpansion&#x27;]</span></span><br><span class="line"><span class="string">    \\\\ + (type(a:cmds) == type([]) ? a:cmds : [a:cmds])</span></span><br><span class="line"><span class="string">    \\\\ + [&#x27;endlocal&#x27;]</span></span><br><span class="line"><span class="string">    if has(&#x27;iconv&#x27;)</span></span><br><span class="line"><span class="string">      if !exists(&#x27;s:codepage&#x27;)</span></span><br><span class="line"><span class="string">        let s:codepage = libcallnr(&#x27;kernel32.dll&#x27;, &#x27;GetACP&#x27;, 0)</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">      return map(cmds, printf(&#x27;iconv(v:val.\\\&quot;\\\\r\\\&quot;, \\\&quot;%s\\\&quot;, \\\&quot;cp%d\\\&quot;)&#x27;, &amp;encoding, s:codepage))</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    return map(cmds, &#x27;v:val.\\\&quot;\\\\r\\\&quot;&#x27;)</span></span><br><span class="line"><span class="string">  endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  function! s:batchfile(cmd)</span></span><br><span class="line"><span class="string">    let batchfile = s:plug_tempname().&#x27;.bat&#x27;</span></span><br><span class="line"><span class="string">    call writefile(s:wrap_cmds(a:cmd), batchfile)</span></span><br><span class="line"><span class="string">    let cmd = plug#shellescape(batchfile, &#123;&#x27;shell&#x27;: &amp;shell, &#x27;script&#x27;: 0&#125;)</span></span><br><span class="line"><span class="string">    if s:is_powershell(&amp;shell)</span></span><br><span class="line"><span class="string">      let cmd = &#x27;&amp; &#x27; . cmd</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    return [batchfile, cmd]</span></span><br><span class="line"><span class="string">  endfunction</span></span><br><span class="line"><span class="string">else</span></span><br><span class="line"><span class="string">  function! s:path(path)</span></span><br><span class="line"><span class="string">    return s:trim(a:path)</span></span><br><span class="line"><span class="string">  endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  function! s:dirpath(path)</span></span><br><span class="line"><span class="string">    return substitute(a:path, &#x27;[/\\\\\\\\]*\\\$&#x27;, &#x27;/&#x27;, &#x27;&#x27;)</span></span><br><span class="line"><span class="string">  endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  function! s:is_local_plug(repo)</span></span><br><span class="line"><span class="string">    return a:repo[0] =~ &#x27;[/\\\$~]&#x27;</span></span><br><span class="line"><span class="string">  endfunction</span></span><br><span class="line"><span class="string">endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:err(msg)</span></span><br><span class="line"><span class="string">  echohl ErrorMsg</span></span><br><span class="line"><span class="string">  echom &#x27;[vim-plug] &#x27;.a:msg</span></span><br><span class="line"><span class="string">  echohl None</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:warn(cmd, msg)</span></span><br><span class="line"><span class="string">  echohl WarningMsg</span></span><br><span class="line"><span class="string">  execute a:cmd &#x27;a:msg&#x27;</span></span><br><span class="line"><span class="string">  echohl None</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:esc(path)</span></span><br><span class="line"><span class="string">  return escape(a:path, &#x27; &#x27;)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:escrtp(path)</span></span><br><span class="line"><span class="string">  return escape(a:path, &#x27; ,&#x27;)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:remove_rtp()</span></span><br><span class="line"><span class="string">  for name in s:loaded_names()</span></span><br><span class="line"><span class="string">    let rtp = s:rtp(g:plugs[name])</span></span><br><span class="line"><span class="string">    execute &#x27;set rtp-=&#x27;.s:escrtp(rtp)</span></span><br><span class="line"><span class="string">    let after = globpath(rtp, &#x27;after&#x27;)</span></span><br><span class="line"><span class="string">    if isdirectory(after)</span></span><br><span class="line"><span class="string">      execute &#x27;set rtp-=&#x27;.s:escrtp(after)</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">  endfor</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:reorg_rtp()</span></span><br><span class="line"><span class="string">  if !empty(s:first_rtp)</span></span><br><span class="line"><span class="string">    execute &#x27;set rtp-=&#x27;.s:first_rtp</span></span><br><span class="line"><span class="string">    execute &#x27;set rtp-=&#x27;.s:last_rtp</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  \\\&quot; &amp;rtp is modified from outside</span></span><br><span class="line"><span class="string">  if exists(&#x27;s:prtp&#x27;) &amp;&amp; s:prtp !=# &amp;rtp</span></span><br><span class="line"><span class="string">    call s:remove_rtp()</span></span><br><span class="line"><span class="string">    unlet! s:middle</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  let s:middle = get(s:, &#x27;middle&#x27;, &amp;rtp)</span></span><br><span class="line"><span class="string">  let rtps     = map(s:loaded_names(), &#x27;s:rtp(g:plugs[v:val])&#x27;)</span></span><br><span class="line"><span class="string">  let afters   = filter(map(copy(rtps), &#x27;globpath(v:val, \\\&quot;after\\\&quot;)&#x27;), &#x27;!empty(v:val)&#x27;)</span></span><br><span class="line"><span class="string">  let rtp      = join(map(rtps, &#x27;escape(v:val, \\\&quot;,\\\&quot;)&#x27;), &#x27;,&#x27;)</span></span><br><span class="line"><span class="string">                 \\\\ . &#x27;,&#x27;.s:middle.&#x27;,&#x27;</span></span><br><span class="line"><span class="string">                 \\\\ . join(map(afters, &#x27;escape(v:val, \\\&quot;,\\\&quot;)&#x27;), &#x27;,&#x27;)</span></span><br><span class="line"><span class="string">  let &amp;rtp     = substitute(substitute(rtp, &#x27;,,*&#x27;, &#x27;,&#x27;, &#x27;g&#x27;), &#x27;^,\\\\|,\\\$&#x27;, &#x27;&#x27;, &#x27;g&#x27;)</span></span><br><span class="line"><span class="string">  let s:prtp   = &amp;rtp</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  if !empty(s:first_rtp)</span></span><br><span class="line"><span class="string">    execute &#x27;set rtp^=&#x27;.s:first_rtp</span></span><br><span class="line"><span class="string">    execute &#x27;set rtp+=&#x27;.s:last_rtp</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:doautocmd(...)</span></span><br><span class="line"><span class="string">  if exists(&#x27;#&#x27;.join(a:000, &#x27;#&#x27;))</span></span><br><span class="line"><span class="string">    execute &#x27;doautocmd&#x27; ((v:version &gt; 703 || has(&#x27;patch442&#x27;)) ? &#x27;&lt;nomodeline&gt;&#x27; : &#x27;&#x27;) join(a:000)</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:dobufread(names)</span></span><br><span class="line"><span class="string">  for name in a:names</span></span><br><span class="line"><span class="string">    let path = s:rtp(g:plugs[name])</span></span><br><span class="line"><span class="string">    for dir in [&#x27;ftdetect&#x27;, &#x27;ftplugin&#x27;, &#x27;after/ftdetect&#x27;, &#x27;after/ftplugin&#x27;]</span></span><br><span class="line"><span class="string">      if len(finddir(dir, path))</span></span><br><span class="line"><span class="string">        if exists(&#x27;#BufRead&#x27;)</span></span><br><span class="line"><span class="string">          doautocmd BufRead</span></span><br><span class="line"><span class="string">        endif</span></span><br><span class="line"><span class="string">        return</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">    endfor</span></span><br><span class="line"><span class="string">  endfor</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! plug#load(...)</span></span><br><span class="line"><span class="string">  if a:0 == 0</span></span><br><span class="line"><span class="string">    return s:err(&#x27;Argument missing: plugin name(s) required&#x27;)</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  if !exists(&#x27;g:plugs&#x27;)</span></span><br><span class="line"><span class="string">    return s:err(&#x27;plug#begin was not called&#x27;)</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  let names = a:0 == 1 &amp;&amp; type(a:1) == s:TYPE.list ? a:1 : a:000</span></span><br><span class="line"><span class="string">  let unknowns = filter(copy(names), &#x27;!has_key(g:plugs, v:val)&#x27;)</span></span><br><span class="line"><span class="string">  if !empty(unknowns)</span></span><br><span class="line"><span class="string">    let s = len(unknowns) &gt; 1 ? &#x27;s&#x27; : &#x27;&#x27;</span></span><br><span class="line"><span class="string">    return s:err(printf(&#x27;Unknown plugin%s: %s&#x27;, s, join(unknowns, &#x27;, &#x27;)))</span></span><br><span class="line"><span class="string">  end</span></span><br><span class="line"><span class="string">  let unloaded = filter(copy(names), &#x27;!get(s:loaded, v:val, 0)&#x27;)</span></span><br><span class="line"><span class="string">  if !empty(unloaded)</span></span><br><span class="line"><span class="string">    for name in unloaded</span></span><br><span class="line"><span class="string">      call s:lod([name], [&#x27;ftdetect&#x27;, &#x27;after/ftdetect&#x27;, &#x27;plugin&#x27;, &#x27;after/plugin&#x27;])</span></span><br><span class="line"><span class="string">    endfor</span></span><br><span class="line"><span class="string">    call s:dobufread(unloaded)</span></span><br><span class="line"><span class="string">    return 1</span></span><br><span class="line"><span class="string">  end</span></span><br><span class="line"><span class="string">  return 0</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:remove_triggers(name)</span></span><br><span class="line"><span class="string">  if !has_key(s:triggers, a:name)</span></span><br><span class="line"><span class="string">    return</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  for cmd in s:triggers[a:name].cmd</span></span><br><span class="line"><span class="string">    execute &#x27;silent! delc&#x27; cmd</span></span><br><span class="line"><span class="string">  endfor</span></span><br><span class="line"><span class="string">  for map in s:triggers[a:name].map</span></span><br><span class="line"><span class="string">    execute &#x27;silent! unmap&#x27; map</span></span><br><span class="line"><span class="string">    execute &#x27;silent! iunmap&#x27; map</span></span><br><span class="line"><span class="string">  endfor</span></span><br><span class="line"><span class="string">  call remove(s:triggers, a:name)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:lod(names, types, ...)</span></span><br><span class="line"><span class="string">  for name in a:names</span></span><br><span class="line"><span class="string">    call s:remove_triggers(name)</span></span><br><span class="line"><span class="string">    let s:loaded[name] = 1</span></span><br><span class="line"><span class="string">  endfor</span></span><br><span class="line"><span class="string">  call s:reorg_rtp()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  for name in a:names</span></span><br><span class="line"><span class="string">    let rtp = s:rtp(g:plugs[name])</span></span><br><span class="line"><span class="string">    for dir in a:types</span></span><br><span class="line"><span class="string">      call s:source(rtp, dir.&#x27;/**/*.vim&#x27;)</span></span><br><span class="line"><span class="string">    endfor</span></span><br><span class="line"><span class="string">    if a:0</span></span><br><span class="line"><span class="string">      if !s:source(rtp, a:1) &amp;&amp; !empty(s:glob(rtp, a:2))</span></span><br><span class="line"><span class="string">        execute &#x27;runtime&#x27; a:1</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">      call s:source(rtp, a:2)</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    call s:doautocmd(&#x27;User&#x27;, name)</span></span><br><span class="line"><span class="string">  endfor</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:lod_ft(pat, names)</span></span><br><span class="line"><span class="string">  let syn = &#x27;syntax/&#x27;.a:pat.&#x27;.vim&#x27;</span></span><br><span class="line"><span class="string">  call s:lod(a:names, [&#x27;plugin&#x27;, &#x27;after/plugin&#x27;], syn, &#x27;after/&#x27;.syn)</span></span><br><span class="line"><span class="string">  execute &#x27;autocmd! PlugLOD FileType&#x27; a:pat</span></span><br><span class="line"><span class="string">  call s:doautocmd(&#x27;filetypeplugin&#x27;, &#x27;FileType&#x27;)</span></span><br><span class="line"><span class="string">  call s:doautocmd(&#x27;filetypeindent&#x27;, &#x27;FileType&#x27;)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:lod_cmd(cmd, bang, l1, l2, args, names)</span></span><br><span class="line"><span class="string">  call s:lod(a:names, [&#x27;ftdetect&#x27;, &#x27;after/ftdetect&#x27;, &#x27;plugin&#x27;, &#x27;after/plugin&#x27;])</span></span><br><span class="line"><span class="string">  call s:dobufread(a:names)</span></span><br><span class="line"><span class="string">  execute printf(&#x27;%s%s%s %s&#x27;, (a:l1 == a:l2 ? &#x27;&#x27; : (a:l1.&#x27;,&#x27;.a:l2)), a:cmd, a:bang, a:args)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:lod_map(map, names, with_prefix, prefix)</span></span><br><span class="line"><span class="string">  call s:lod(a:names, [&#x27;ftdetect&#x27;, &#x27;after/ftdetect&#x27;, &#x27;plugin&#x27;, &#x27;after/plugin&#x27;])</span></span><br><span class="line"><span class="string">  call s:dobufread(a:names)</span></span><br><span class="line"><span class="string">  let extra = &#x27;&#x27;</span></span><br><span class="line"><span class="string">  while 1</span></span><br><span class="line"><span class="string">    let c = getchar(0)</span></span><br><span class="line"><span class="string">    if c == 0</span></span><br><span class="line"><span class="string">      break</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    let extra .= nr2char(c)</span></span><br><span class="line"><span class="string">  endwhile</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  if a:with_prefix</span></span><br><span class="line"><span class="string">    let prefix = v:count ? v:count : &#x27;&#x27;</span></span><br><span class="line"><span class="string">    let prefix .= &#x27;\\\&quot;&#x27;.v:register.a:prefix</span></span><br><span class="line"><span class="string">    if mode(1) == &#x27;no&#x27;</span></span><br><span class="line"><span class="string">      if v:operator == &#x27;c&#x27;</span></span><br><span class="line"><span class="string">        let prefix = \\\&quot;\\\\&lt;esc&gt;\\\&quot; . prefix</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">      let prefix .= v:operator</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    call feedkeys(prefix, &#x27;n&#x27;)</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  call feedkeys(substitute(a:map, &#x27;^&lt;Plug&gt;&#x27;, \\\&quot;\\\\&lt;Plug&gt;\\\&quot;, &#x27;&#x27;) . extra)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! plug#(repo, ...)</span></span><br><span class="line"><span class="string">  if a:0 &gt; 1</span></span><br><span class="line"><span class="string">    return s:err(&#x27;Invalid number of arguments (1..2)&#x27;)</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  try</span></span><br><span class="line"><span class="string">    let repo = s:trim(a:repo)</span></span><br><span class="line"><span class="string">    let opts = a:0 == 1 ? s:parse_options(a:1) : s:base_spec</span></span><br><span class="line"><span class="string">    let name = get(opts, &#x27;as&#x27;, s:plug_fnamemodify(repo, &#x27;:t:s?\\\\.git\\\$??&#x27;))</span></span><br><span class="line"><span class="string">    let spec = extend(s:infer_properties(name, repo), opts)</span></span><br><span class="line"><span class="string">    if !has_key(g:plugs, name)</span></span><br><span class="line"><span class="string">      call add(g:plugs_order, name)</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    let g:plugs[name] = spec</span></span><br><span class="line"><span class="string">    let s:loaded[name] = get(s:loaded, name, 0)</span></span><br><span class="line"><span class="string">  catch</span></span><br><span class="line"><span class="string">    return s:err(repo . &#x27; &#x27; . v:exception)</span></span><br><span class="line"><span class="string">  endtry</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:parse_options(arg)</span></span><br><span class="line"><span class="string">  let opts = copy(s:base_spec)</span></span><br><span class="line"><span class="string">  let type = type(a:arg)</span></span><br><span class="line"><span class="string">  let opt_errfmt = &#x27;Invalid argument for \\\&quot;%s\\\&quot; option of :Plug (expected: %s)&#x27;</span></span><br><span class="line"><span class="string">  if type == s:TYPE.string</span></span><br><span class="line"><span class="string">    if empty(a:arg)</span></span><br><span class="line"><span class="string">      throw printf(opt_errfmt, &#x27;tag&#x27;, &#x27;string&#x27;)</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    let opts.tag = a:arg</span></span><br><span class="line"><span class="string">  elseif type == s:TYPE.dict</span></span><br><span class="line"><span class="string">    for opt in [&#x27;branch&#x27;, &#x27;tag&#x27;, &#x27;commit&#x27;, &#x27;rtp&#x27;, &#x27;dir&#x27;, &#x27;as&#x27;]</span></span><br><span class="line"><span class="string">      if has_key(a:arg, opt)</span></span><br><span class="line"><span class="string">      \\\\ &amp;&amp; (type(a:arg[opt]) != s:TYPE.string || empty(a:arg[opt]))</span></span><br><span class="line"><span class="string">        throw printf(opt_errfmt, opt, &#x27;string&#x27;)</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">    endfor</span></span><br><span class="line"><span class="string">    for opt in [&#x27;on&#x27;, &#x27;for&#x27;]</span></span><br><span class="line"><span class="string">      if has_key(a:arg, opt)</span></span><br><span class="line"><span class="string">      \\\\ &amp;&amp; type(a:arg[opt]) != s:TYPE.list</span></span><br><span class="line"><span class="string">      \\\\ &amp;&amp; (type(a:arg[opt]) != s:TYPE.string || empty(a:arg[opt]))</span></span><br><span class="line"><span class="string">        throw printf(opt_errfmt, opt, &#x27;string or list&#x27;)</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">    endfor</span></span><br><span class="line"><span class="string">    if has_key(a:arg, &#x27;do&#x27;)</span></span><br><span class="line"><span class="string">      \\\\ &amp;&amp; type(a:arg.do) != s:TYPE.funcref</span></span><br><span class="line"><span class="string">      \\\\ &amp;&amp; (type(a:arg.do) != s:TYPE.string || empty(a:arg.do))</span></span><br><span class="line"><span class="string">        throw printf(opt_errfmt, &#x27;do&#x27;, &#x27;string or funcref&#x27;)</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    call extend(opts, a:arg)</span></span><br><span class="line"><span class="string">    if has_key(opts, &#x27;dir&#x27;)</span></span><br><span class="line"><span class="string">      let opts.dir = s:dirpath(s:plug_expand(opts.dir))</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">  else</span></span><br><span class="line"><span class="string">    throw &#x27;Invalid argument type (expected: string or dictionary)&#x27;</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  return opts</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:infer_properties(name, repo)</span></span><br><span class="line"><span class="string">  let repo = a:repo</span></span><br><span class="line"><span class="string">  if s:is_local_plug(repo)</span></span><br><span class="line"><span class="string">    return &#123; &#x27;dir&#x27;: s:dirpath(s:plug_expand(repo)) &#125;</span></span><br><span class="line"><span class="string">  else</span></span><br><span class="line"><span class="string">    if repo =~ &#x27;:&#x27;</span></span><br><span class="line"><span class="string">      let uri = repo</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">      if repo !~ &#x27;/&#x27;</span></span><br><span class="line"><span class="string">        throw printf(&#x27;Invalid argument: %s (implicit \\\`vim-scripts&#x27;&#x27; expansion is deprecated)&#x27;, repo)</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">      let fmt = get(g:, &#x27;plug_url_format&#x27;, &#x27;https://git::@github.com/%s.git&#x27;)</span></span><br><span class="line"><span class="string">      let uri = printf(fmt, repo)</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    return &#123; &#x27;dir&#x27;: s:dirpath(g:plug_home.&#x27;/&#x27;.a:name), &#x27;uri&#x27;: uri &#125;</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:install(force, names)</span></span><br><span class="line"><span class="string">  call s:update_impl(0, a:force, a:names)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:update(force, names)</span></span><br><span class="line"><span class="string">  call s:update_impl(1, a:force, a:names)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! plug#helptags()</span></span><br><span class="line"><span class="string">  if !exists(&#x27;g:plugs&#x27;)</span></span><br><span class="line"><span class="string">    return s:err(&#x27;plug#begin was not called&#x27;)</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  for spec in values(g:plugs)</span></span><br><span class="line"><span class="string">    let docd = join([s:rtp(spec), &#x27;doc&#x27;], &#x27;/&#x27;)</span></span><br><span class="line"><span class="string">    if isdirectory(docd)</span></span><br><span class="line"><span class="string">      silent! execute &#x27;helptags&#x27; s:esc(docd)</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">  endfor</span></span><br><span class="line"><span class="string">  return 1</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:syntax()</span></span><br><span class="line"><span class="string">  syntax clear</span></span><br><span class="line"><span class="string">  syntax region plug1 start=/\\\\%1l/ end=/\\\\%2l/ contains=plugNumber</span></span><br><span class="line"><span class="string">  syntax region plug2 start=/\\\\%2l/ end=/\\\\%3l/ contains=plugBracket,plugX</span></span><br><span class="line"><span class="string">  syn match plugNumber /[0-9]\\\\+[0-9.]*/ contained</span></span><br><span class="line"><span class="string">  syn match plugBracket /[[\\\\]]/ contained</span></span><br><span class="line"><span class="string">  syn match plugX /x/ contained</span></span><br><span class="line"><span class="string">  syn match plugDash /^-\\\\&#123;1&#125;\\\\ /</span></span><br><span class="line"><span class="string">  syn match plugPlus /^+/</span></span><br><span class="line"><span class="string">  syn match plugStar /^*/</span></span><br><span class="line"><span class="string">  syn match plugMessage /\\\\(^- \\\\)\\\\@&lt;=.*/</span></span><br><span class="line"><span class="string">  syn match plugName /\\\\(^- \\\\)\\\\@&lt;=[^ ]*:/</span></span><br><span class="line"><span class="string">  syn match plugSha /\\\\%(: \\\\)\\\\@&lt;=[0-9a-f]\\\\&#123;4,&#125;\\\$/</span></span><br><span class="line"><span class="string">  syn match plugTag /(tag: [^)]\\\\+)/</span></span><br><span class="line"><span class="string">  syn match plugInstall /\\\\(^+ \\\\)\\\\@&lt;=[^:]*/</span></span><br><span class="line"><span class="string">  syn match plugUpdate /\\\\(^* \\\\)\\\\@&lt;=[^:]*/</span></span><br><span class="line"><span class="string">  syn match plugCommit /^  \\\\X*[0-9a-f]\\\\&#123;7,9&#125; .*/ contains=plugRelDate,plugEdge,plugTag</span></span><br><span class="line"><span class="string">  syn match plugEdge /^  \\\\X\\\\+\\\$/</span></span><br><span class="line"><span class="string">  syn match plugEdge /^  \\\\X*/ contained nextgroup=plugSha</span></span><br><span class="line"><span class="string">  syn match plugSha /[0-9a-f]\\\\&#123;7,9&#125;/ contained</span></span><br><span class="line"><span class="string">  syn match plugRelDate /([^)]*)\\\$/ contained</span></span><br><span class="line"><span class="string">  syn match plugNotLoaded /(not loaded)\\\$/</span></span><br><span class="line"><span class="string">  syn match plugError /^x.*/</span></span><br><span class="line"><span class="string">  syn region plugDeleted start=/^\\\\~ .*/ end=/^\\\\ze\\\\S/</span></span><br><span class="line"><span class="string">  syn match plugH2 /^.*:\\\\n-\\\\+\\\$/</span></span><br><span class="line"><span class="string">  syn match plugH2 /^-\\\\&#123;2,&#125;/</span></span><br><span class="line"><span class="string">  syn keyword Function PlugInstall PlugStatus PlugUpdate PlugClean</span></span><br><span class="line"><span class="string">  hi def link plug1       Title</span></span><br><span class="line"><span class="string">  hi def link plug2       Repeat</span></span><br><span class="line"><span class="string">  hi def link plugH2      Type</span></span><br><span class="line"><span class="string">  hi def link plugX       Exception</span></span><br><span class="line"><span class="string">  hi def link plugBracket Structure</span></span><br><span class="line"><span class="string">  hi def link plugNumber  Number</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  hi def link plugDash    Special</span></span><br><span class="line"><span class="string">  hi def link plugPlus    Constant</span></span><br><span class="line"><span class="string">  hi def link plugStar    Boolean</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  hi def link plugMessage Function</span></span><br><span class="line"><span class="string">  hi def link plugName    Label</span></span><br><span class="line"><span class="string">  hi def link plugInstall Function</span></span><br><span class="line"><span class="string">  hi def link plugUpdate  Type</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  hi def link plugError   Error</span></span><br><span class="line"><span class="string">  hi def link plugDeleted Ignore</span></span><br><span class="line"><span class="string">  hi def link plugRelDate Comment</span></span><br><span class="line"><span class="string">  hi def link plugEdge    PreProc</span></span><br><span class="line"><span class="string">  hi def link plugSha     Identifier</span></span><br><span class="line"><span class="string">  hi def link plugTag     Constant</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  hi def link plugNotLoaded Comment</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:lpad(str, len)</span></span><br><span class="line"><span class="string">  return a:str . repeat(&#x27; &#x27;, a:len - len(a:str))</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:lines(msg)</span></span><br><span class="line"><span class="string">  return split(a:msg, \\\&quot;[\\\\r\\\\n]\\\&quot;)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:lastline(msg)</span></span><br><span class="line"><span class="string">  return get(s:lines(a:msg), -1, &#x27;&#x27;)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:new_window()</span></span><br><span class="line"><span class="string">  execute get(g:, &#x27;plug_window&#x27;, &#x27;vertical topleft new&#x27;)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:plug_window_exists()</span></span><br><span class="line"><span class="string">  let buflist = tabpagebuflist(s:plug_tab)</span></span><br><span class="line"><span class="string">  return !empty(buflist) &amp;&amp; index(buflist, s:plug_buf) &gt;= 0</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:switch_in()</span></span><br><span class="line"><span class="string">  if !s:plug_window_exists()</span></span><br><span class="line"><span class="string">    return 0</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  if winbufnr(0) != s:plug_buf</span></span><br><span class="line"><span class="string">    let s:pos = [tabpagenr(), winnr(), winsaveview()]</span></span><br><span class="line"><span class="string">    execute &#x27;normal!&#x27; s:plug_tab.&#x27;gt&#x27;</span></span><br><span class="line"><span class="string">    let winnr = bufwinnr(s:plug_buf)</span></span><br><span class="line"><span class="string">    execute winnr.&#x27;wincmd w&#x27;</span></span><br><span class="line"><span class="string">    call add(s:pos, winsaveview())</span></span><br><span class="line"><span class="string">  else</span></span><br><span class="line"><span class="string">    let s:pos = [winsaveview()]</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  setlocal modifiable</span></span><br><span class="line"><span class="string">  return 1</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:switch_out(...)</span></span><br><span class="line"><span class="string">  call winrestview(s:pos[-1])</span></span><br><span class="line"><span class="string">  setlocal nomodifiable</span></span><br><span class="line"><span class="string">  if a:0 &gt; 0</span></span><br><span class="line"><span class="string">    execute a:1</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  if len(s:pos) &gt; 1</span></span><br><span class="line"><span class="string">    execute &#x27;normal!&#x27; s:pos[0].&#x27;gt&#x27;</span></span><br><span class="line"><span class="string">    execute s:pos[1] &#x27;wincmd w&#x27;</span></span><br><span class="line"><span class="string">    call winrestview(s:pos[2])</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:finish_bindings()</span></span><br><span class="line"><span class="string">  nnoremap &lt;silent&gt; &lt;buffer&gt; R  :call &lt;SID&gt;retry()&lt;cr&gt;</span></span><br><span class="line"><span class="string">  nnoremap &lt;silent&gt; &lt;buffer&gt; D  :PlugDiff&lt;cr&gt;</span></span><br><span class="line"><span class="string">  nnoremap &lt;silent&gt; &lt;buffer&gt; S  :PlugStatus&lt;cr&gt;</span></span><br><span class="line"><span class="string">  nnoremap &lt;silent&gt; &lt;buffer&gt; U  :call &lt;SID&gt;status_update()&lt;cr&gt;</span></span><br><span class="line"><span class="string">  xnoremap &lt;silent&gt; &lt;buffer&gt; U  :call &lt;SID&gt;status_update()&lt;cr&gt;</span></span><br><span class="line"><span class="string">  nnoremap &lt;silent&gt; &lt;buffer&gt; ]] :silent! call &lt;SID&gt;section(&#x27;&#x27;)&lt;cr&gt;</span></span><br><span class="line"><span class="string">  nnoremap &lt;silent&gt; &lt;buffer&gt; [[ :silent! call &lt;SID&gt;section(&#x27;b&#x27;)&lt;cr&gt;</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:prepare(...)</span></span><br><span class="line"><span class="string">  if empty(s:plug_getcwd())</span></span><br><span class="line"><span class="string">    throw &#x27;Invalid current working directory. Cannot proceed.&#x27;</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  for evar in [&#x27;\\\$GIT_DIR&#x27;, &#x27;\\\$GIT_WORK_TREE&#x27;]</span></span><br><span class="line"><span class="string">    if exists(evar)</span></span><br><span class="line"><span class="string">      throw evar.&#x27; detected. Cannot proceed.&#x27;</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">  endfor</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  call s:job_abort()</span></span><br><span class="line"><span class="string">  if s:switch_in()</span></span><br><span class="line"><span class="string">    if b:plug_preview == 1</span></span><br><span class="line"><span class="string">      pc</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    enew</span></span><br><span class="line"><span class="string">  else</span></span><br><span class="line"><span class="string">    call s:new_window()</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  nnoremap &lt;silent&gt; &lt;buffer&gt; q :call &lt;SID&gt;close_pane()&lt;cr&gt;</span></span><br><span class="line"><span class="string">  if a:0 == 0</span></span><br><span class="line"><span class="string">    call s:finish_bindings()</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  let b:plug_preview = -1</span></span><br><span class="line"><span class="string">  let s:plug_tab = tabpagenr()</span></span><br><span class="line"><span class="string">  let s:plug_buf = winbufnr(0)</span></span><br><span class="line"><span class="string">  call s:assign_name()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  for k in [&#x27;&lt;cr&gt;&#x27;, &#x27;L&#x27;, &#x27;o&#x27;, &#x27;X&#x27;, &#x27;d&#x27;, &#x27;dd&#x27;]</span></span><br><span class="line"><span class="string">    execute &#x27;silent! unmap &lt;buffer&gt;&#x27; k</span></span><br><span class="line"><span class="string">  endfor</span></span><br><span class="line"><span class="string">  setlocal buftype=nofile bufhidden=wipe nobuflisted nolist noswapfile nowrap cursorline modifiable nospell</span></span><br><span class="line"><span class="string">  if exists(&#x27;+colorcolumn&#x27;)</span></span><br><span class="line"><span class="string">    setlocal colorcolumn=</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  setf vim-plug</span></span><br><span class="line"><span class="string">  if exists(&#x27;g:syntax_on&#x27;)</span></span><br><span class="line"><span class="string">    call s:syntax()</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:close_pane()</span></span><br><span class="line"><span class="string">  if b:plug_preview == 1</span></span><br><span class="line"><span class="string">    pc</span></span><br><span class="line"><span class="string">    let b:plug_preview = -1</span></span><br><span class="line"><span class="string">  else</span></span><br><span class="line"><span class="string">    bd</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:assign_name()</span></span><br><span class="line"><span class="string">  \\\&quot; Assign buffer name</span></span><br><span class="line"><span class="string">  let prefix = &#x27;[Plugins]&#x27;</span></span><br><span class="line"><span class="string">  let name   = prefix</span></span><br><span class="line"><span class="string">  let idx    = 2</span></span><br><span class="line"><span class="string">  while bufexists(name)</span></span><br><span class="line"><span class="string">    let name = printf(&#x27;%s (%s)&#x27;, prefix, idx)</span></span><br><span class="line"><span class="string">    let idx = idx + 1</span></span><br><span class="line"><span class="string">  endwhile</span></span><br><span class="line"><span class="string">  silent! execute &#x27;f&#x27; fnameescape(name)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:chsh(swap)</span></span><br><span class="line"><span class="string">  let prev = [&amp;shell, &amp;shellcmdflag, &amp;shellredir]</span></span><br><span class="line"><span class="string">  if !s:is_win</span></span><br><span class="line"><span class="string">    set shell=sh</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  if a:swap</span></span><br><span class="line"><span class="string">    if s:is_powershell(&amp;shell)</span></span><br><span class="line"><span class="string">      let &amp;shellredir = &#x27;2&gt;&amp;1 | Out-File -Encoding UTF8 %s&#x27;</span></span><br><span class="line"><span class="string">    elseif &amp;shell =~# &#x27;sh&#x27; || &amp;shell =~# &#x27;cmd\\\\(\\\\.exe\\\\)\\\\?\\\$&#x27;</span></span><br><span class="line"><span class="string">      set shellredir=&gt;%s\\\\ 2&gt;&amp;1</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  return prev</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:bang(cmd, ...)</span></span><br><span class="line"><span class="string">  let batchfile = &#x27;&#x27;</span></span><br><span class="line"><span class="string">  try</span></span><br><span class="line"><span class="string">    let [sh, shellcmdflag, shrd] = s:chsh(a:0)</span></span><br><span class="line"><span class="string">    \\\&quot; FIXME: Escaping is incomplete. We could use shellescape with eval,</span></span><br><span class="line"><span class="string">    \\\&quot;        but it won&#x27;t work on Windows.</span></span><br><span class="line"><span class="string">    let cmd = a:0 ? s:with_cd(a:cmd, a:1) : a:cmd</span></span><br><span class="line"><span class="string">    if s:is_win</span></span><br><span class="line"><span class="string">      let [batchfile, cmd] = s:batchfile(cmd)</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    let g:_plug_bang = (s:is_win &amp;&amp; has(&#x27;gui_running&#x27;) ? &#x27;silent &#x27; : &#x27;&#x27;).&#x27;!&#x27;.escape(cmd, &#x27;#!%&#x27;)</span></span><br><span class="line"><span class="string">    execute \\\&quot;normal! :execute g:_plug_bang\\\\&lt;cr&gt;\\\\&lt;cr&gt;\\\&quot;</span></span><br><span class="line"><span class="string">  finally</span></span><br><span class="line"><span class="string">    unlet g:_plug_bang</span></span><br><span class="line"><span class="string">    let [&amp;shell, &amp;shellcmdflag, &amp;shellredir] = [sh, shellcmdflag, shrd]</span></span><br><span class="line"><span class="string">    if s:is_win &amp;&amp; filereadable(batchfile)</span></span><br><span class="line"><span class="string">      call delete(batchfile)</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">  endtry</span></span><br><span class="line"><span class="string">  return v:shell_error ? &#x27;Exit status: &#x27; . v:shell_error : &#x27;&#x27;</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:regress_bar()</span></span><br><span class="line"><span class="string">  let bar = substitute(getline(2)[1:-2], &#x27;.*\\\\zs=&#x27;, &#x27;x&#x27;, &#x27;&#x27;)</span></span><br><span class="line"><span class="string">  call s:progress_bar(2, bar, len(bar))</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:is_updated(dir)</span></span><br><span class="line"><span class="string">  return !empty(s:system_chomp([&#x27;git&#x27;, &#x27;log&#x27;, &#x27;--pretty=format:%h&#x27;, &#x27;HEAD...HEAD@&#123;1&#125;&#x27;], a:dir))</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:do(pull, force, todo)</span></span><br><span class="line"><span class="string">  for [name, spec] in items(a:todo)</span></span><br><span class="line"><span class="string">    if !isdirectory(spec.dir)</span></span><br><span class="line"><span class="string">      continue</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    let installed = has_key(s:update.new, name)</span></span><br><span class="line"><span class="string">    let updated = installed ? 0 :</span></span><br><span class="line"><span class="string">      \\\\ (a:pull &amp;&amp; index(s:update.errors, name) &lt; 0 &amp;&amp; s:is_updated(spec.dir))</span></span><br><span class="line"><span class="string">    if a:force || installed || updated</span></span><br><span class="line"><span class="string">      execute &#x27;cd&#x27; s:esc(spec.dir)</span></span><br><span class="line"><span class="string">      call append(3, &#x27;- Post-update hook for &#x27;. name .&#x27; ... &#x27;)</span></span><br><span class="line"><span class="string">      let error = &#x27;&#x27;</span></span><br><span class="line"><span class="string">      let type = type(spec.do)</span></span><br><span class="line"><span class="string">      if type == s:TYPE.string</span></span><br><span class="line"><span class="string">        if spec.do[0] == &#x27;:&#x27;</span></span><br><span class="line"><span class="string">          if !get(s:loaded, name, 0)</span></span><br><span class="line"><span class="string">            let s:loaded[name] = 1</span></span><br><span class="line"><span class="string">            call s:reorg_rtp()</span></span><br><span class="line"><span class="string">          endif</span></span><br><span class="line"><span class="string">          call s:load_plugin(spec)</span></span><br><span class="line"><span class="string">          try</span></span><br><span class="line"><span class="string">            execute spec.do[1:]</span></span><br><span class="line"><span class="string">          catch</span></span><br><span class="line"><span class="string">            let error = v:exception</span></span><br><span class="line"><span class="string">          endtry</span></span><br><span class="line"><span class="string">          if !s:plug_window_exists()</span></span><br><span class="line"><span class="string">            cd -</span></span><br><span class="line"><span class="string">            throw &#x27;Warning: vim-plug was terminated by the post-update hook of &#x27;.name</span></span><br><span class="line"><span class="string">          endif</span></span><br><span class="line"><span class="string">        else</span></span><br><span class="line"><span class="string">          let error = s:bang(spec.do)</span></span><br><span class="line"><span class="string">        endif</span></span><br><span class="line"><span class="string">      elseif type == s:TYPE.funcref</span></span><br><span class="line"><span class="string">        try</span></span><br><span class="line"><span class="string">          call s:load_plugin(spec)</span></span><br><span class="line"><span class="string">          let status = installed ? &#x27;installed&#x27; : (updated ? &#x27;updated&#x27; : &#x27;unchanged&#x27;)</span></span><br><span class="line"><span class="string">          call spec.do(&#123; &#x27;name&#x27;: name, &#x27;status&#x27;: status, &#x27;force&#x27;: a:force &#125;)</span></span><br><span class="line"><span class="string">        catch</span></span><br><span class="line"><span class="string">          let error = v:exception</span></span><br><span class="line"><span class="string">        endtry</span></span><br><span class="line"><span class="string">      else</span></span><br><span class="line"><span class="string">        let error = &#x27;Invalid hook type&#x27;</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">      call s:switch_in()</span></span><br><span class="line"><span class="string">      call setline(4, empty(error) ? (getline(4) . &#x27;OK&#x27;)</span></span><br><span class="line"><span class="string">                                 \\\\ : (&#x27;x&#x27; . getline(4)[1:] . error))</span></span><br><span class="line"><span class="string">      if !empty(error)</span></span><br><span class="line"><span class="string">        call add(s:update.errors, name)</span></span><br><span class="line"><span class="string">        call s:regress_bar()</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">      cd -</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">  endfor</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:hash_match(a, b)</span></span><br><span class="line"><span class="string">  return stridx(a:a, a:b) == 0 || stridx(a:b, a:a) == 0</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:checkout(spec)</span></span><br><span class="line"><span class="string">  let sha = a:spec.commit</span></span><br><span class="line"><span class="string">  let output = s:git_revision(a:spec.dir)</span></span><br><span class="line"><span class="string">  if !empty(output) &amp;&amp; !s:hash_match(sha, s:lines(output)[0])</span></span><br><span class="line"><span class="string">    let credential_helper = s:git_version_requirement(2) ? &#x27;-c credential.helper= &#x27; : &#x27;&#x27;</span></span><br><span class="line"><span class="string">    let output = s:system(</span></span><br><span class="line"><span class="string">          \\\\ &#x27;git &#x27;.credential_helper.&#x27;fetch --depth 999999 &amp;&amp; git checkout &#x27;.plug#shellescape(sha).&#x27; --&#x27;, a:spec.dir)</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  return output</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:finish(pull)</span></span><br><span class="line"><span class="string">  let new_frozen = len(filter(keys(s:update.new), &#x27;g:plugs[v:val].frozen&#x27;))</span></span><br><span class="line"><span class="string">  if new_frozen</span></span><br><span class="line"><span class="string">    let s = new_frozen &gt; 1 ? &#x27;s&#x27; : &#x27;&#x27;</span></span><br><span class="line"><span class="string">    call append(3, printf(&#x27;- Installed %d frozen plugin%s&#x27;, new_frozen, s))</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  call append(3, &#x27;- Finishing ... &#x27;) | 4</span></span><br><span class="line"><span class="string">  redraw</span></span><br><span class="line"><span class="string">  call plug#helptags()</span></span><br><span class="line"><span class="string">  call plug#end()</span></span><br><span class="line"><span class="string">  call setline(4, getline(4) . &#x27;Done!&#x27;)</span></span><br><span class="line"><span class="string">  redraw</span></span><br><span class="line"><span class="string">  let msgs = []</span></span><br><span class="line"><span class="string">  if !empty(s:update.errors)</span></span><br><span class="line"><span class="string">    call add(msgs, \\\&quot;Press &#x27;R&#x27; to retry.\\\&quot;)</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  if a:pull &amp;&amp; len(s:update.new) &lt; len(filter(getline(5, &#x27;\\\$&#x27;),</span></span><br><span class="line"><span class="string">                \\\\ \\\&quot;v:val =~ &#x27;^- &#x27; &amp;&amp; v:val !~# &#x27;Already up.to.date&#x27;\\\&quot;))</span></span><br><span class="line"><span class="string">    call add(msgs, \\\&quot;Press &#x27;D&#x27; to see the updated changes.\\\&quot;)</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  echo join(msgs, &#x27; &#x27;)</span></span><br><span class="line"><span class="string">  call s:finish_bindings()</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:retry()</span></span><br><span class="line"><span class="string">  if empty(s:update.errors)</span></span><br><span class="line"><span class="string">    return</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  echo</span></span><br><span class="line"><span class="string">  call s:update_impl(s:update.pull, s:update.force,</span></span><br><span class="line"><span class="string">        \\\\ extend(copy(s:update.errors), [s:update.threads]))</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:is_managed(name)</span></span><br><span class="line"><span class="string">  return has_key(g:plugs[a:name], &#x27;uri&#x27;)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:names(...)</span></span><br><span class="line"><span class="string">  return sort(filter(keys(g:plugs), &#x27;stridx(v:val, a:1) == 0 &amp;&amp; s:is_managed(v:val)&#x27;))</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:check_ruby()</span></span><br><span class="line"><span class="string">  silent! ruby require &#x27;thread&#x27;; VIM::command(\\\&quot;let g:plug_ruby = &#x27;#&#123;RUBY_VERSION&#125;&#x27;\\\&quot;)</span></span><br><span class="line"><span class="string">  if !exists(&#x27;g:plug_ruby&#x27;)</span></span><br><span class="line"><span class="string">    redraw!</span></span><br><span class="line"><span class="string">    return s:warn(&#x27;echom&#x27;, &#x27;Warning: Ruby interface is broken&#x27;)</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  let ruby_version = split(g:plug_ruby, &#x27;\\\\.&#x27;)</span></span><br><span class="line"><span class="string">  unlet g:plug_ruby</span></span><br><span class="line"><span class="string">  return s:version_requirement(ruby_version, [1, 8, 7])</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:update_impl(pull, force, args) abort</span></span><br><span class="line"><span class="string">  let sync = index(a:args, &#x27;--sync&#x27;) &gt;= 0 || has(&#x27;vim_starting&#x27;)</span></span><br><span class="line"><span class="string">  let args = filter(copy(a:args), &#x27;v:val != \\\&quot;--sync\\\&quot;&#x27;)</span></span><br><span class="line"><span class="string">  let threads = (len(args) &gt; 0 &amp;&amp; args[-1] =~ &#x27;^[1-9][0-9]*\\\$&#x27;) ?</span></span><br><span class="line"><span class="string">                  \\\\ remove(args, -1) : get(g:, &#x27;plug_threads&#x27;, 16)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  let managed = filter(copy(g:plugs), &#x27;s:is_managed(v:key)&#x27;)</span></span><br><span class="line"><span class="string">  let todo = empty(args) ? filter(managed, &#x27;!v:val.frozen || !isdirectory(v:val.dir)&#x27;) :</span></span><br><span class="line"><span class="string">                         \\\\ filter(managed, &#x27;index(args, v:key) &gt;= 0&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  if empty(todo)</span></span><br><span class="line"><span class="string">    return s:warn(&#x27;echo&#x27;, &#x27;No plugin to &#x27;. (a:pull ? &#x27;update&#x27; : &#x27;install&#x27;))</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  if !s:is_win &amp;&amp; s:git_version_requirement(2, 3)</span></span><br><span class="line"><span class="string">    let s:git_terminal_prompt = exists(&#x27;\\\$GIT_TERMINAL_PROMPT&#x27;) ? \\\$GIT_TERMINAL_PROMPT : &#x27;&#x27;</span></span><br><span class="line"><span class="string">    let \\\$GIT_TERMINAL_PROMPT = 0</span></span><br><span class="line"><span class="string">    for plug in values(todo)</span></span><br><span class="line"><span class="string">      let plug.uri = substitute(plug.uri,</span></span><br><span class="line"><span class="string">            \\\\ &#x27;^https://git::@github\\\\.com&#x27;, &#x27;https://github.com&#x27;, &#x27;&#x27;)</span></span><br><span class="line"><span class="string">    endfor</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  if !isdirectory(g:plug_home)</span></span><br><span class="line"><span class="string">    try</span></span><br><span class="line"><span class="string">      call mkdir(g:plug_home, &#x27;p&#x27;)</span></span><br><span class="line"><span class="string">    catch</span></span><br><span class="line"><span class="string">      return s:err(printf(&#x27;Invalid plug directory: %s. &#x27;.</span></span><br><span class="line"><span class="string">              \\\\ &#x27;Try to call plug#begin with a valid directory&#x27;, g:plug_home))</span></span><br><span class="line"><span class="string">    endtry</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  if has(&#x27;nvim&#x27;) &amp;&amp; !exists(&#x27;*jobwait&#x27;) &amp;&amp; threads &gt; 1</span></span><br><span class="line"><span class="string">    call s:warn(&#x27;echom&#x27;, &#x27;[vim-plug] Update Neovim for parallel installer&#x27;)</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  let use_job = s:nvim || s:vim8</span></span><br><span class="line"><span class="string">  let python = (has(&#x27;python&#x27;) || has(&#x27;python3&#x27;)) &amp;&amp; !use_job</span></span><br><span class="line"><span class="string">  let ruby = has(&#x27;ruby&#x27;) &amp;&amp; !use_job &amp;&amp; (v:version &gt;= 703 || v:version == 702 &amp;&amp; has(&#x27;patch374&#x27;)) &amp;&amp; !(s:is_win &amp;&amp; has(&#x27;gui_running&#x27;)) &amp;&amp; threads &gt; 1 &amp;&amp; s:check_ruby()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  let s:update = &#123;</span></span><br><span class="line"><span class="string">    \\\\ &#x27;start&#x27;:   reltime(),</span></span><br><span class="line"><span class="string">    \\\\ &#x27;all&#x27;:     todo,</span></span><br><span class="line"><span class="string">    \\\\ &#x27;todo&#x27;:    copy(todo),</span></span><br><span class="line"><span class="string">    \\\\ &#x27;errors&#x27;:  [],</span></span><br><span class="line"><span class="string">    \\\\ &#x27;pull&#x27;:    a:pull,</span></span><br><span class="line"><span class="string">    \\\\ &#x27;force&#x27;:   a:force,</span></span><br><span class="line"><span class="string">    \\\\ &#x27;new&#x27;:     &#123;&#125;,</span></span><br><span class="line"><span class="string">    \\\\ &#x27;threads&#x27;: (python || ruby || use_job) ? min([len(todo), threads]) : 1,</span></span><br><span class="line"><span class="string">    \\\\ &#x27;bar&#x27;:     &#x27;&#x27;,</span></span><br><span class="line"><span class="string">    \\\\ &#x27;fin&#x27;:     0</span></span><br><span class="line"><span class="string">  \\\\ &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  call s:prepare(1)</span></span><br><span class="line"><span class="string">  call append(0, [&#x27;&#x27;, &#x27;&#x27;])</span></span><br><span class="line"><span class="string">  normal! 2G</span></span><br><span class="line"><span class="string">  silent! redraw</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  \\\&quot; Set remote name, overriding a possible user git config&#x27;s clone.defaultRemoteName</span></span><br><span class="line"><span class="string">  let s:clone_opt = [&#x27;--origin&#x27;, &#x27;origin&#x27;]</span></span><br><span class="line"><span class="string">  if get(g:, &#x27;plug_shallow&#x27;, 1)</span></span><br><span class="line"><span class="string">    call extend(s:clone_opt, [&#x27;--depth&#x27;, &#x27;1&#x27;])</span></span><br><span class="line"><span class="string">    if s:git_version_requirement(1, 7, 10)</span></span><br><span class="line"><span class="string">      call add(s:clone_opt, &#x27;--no-single-branch&#x27;)</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  if has(&#x27;win32unix&#x27;) || has(&#x27;wsl&#x27;)</span></span><br><span class="line"><span class="string">    call extend(s:clone_opt, [&#x27;-c&#x27;, &#x27;core.eol=lf&#x27;, &#x27;-c&#x27;, &#x27;core.autocrlf=input&#x27;])</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  let s:submodule_opt = s:git_version_requirement(2, 8) ? &#x27; --jobs=&#x27;.threads : &#x27;&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  \\\&quot; Python version requirement (&gt;= 2.7)</span></span><br><span class="line"><span class="string">  if python &amp;&amp; !has(&#x27;python3&#x27;) &amp;&amp; !ruby &amp;&amp; !use_job &amp;&amp; s:update.threads &gt; 1</span></span><br><span class="line"><span class="string">    redir =&gt; pyv</span></span><br><span class="line"><span class="string">    silent python import platform; print platform.python_version()</span></span><br><span class="line"><span class="string">    redir END</span></span><br><span class="line"><span class="string">    let python = s:version_requirement(</span></span><br><span class="line"><span class="string">          \\\\ map(split(split(pyv)[0], &#x27;\\\\.&#x27;), &#x27;str2nr(v:val)&#x27;), [2, 6])</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  if (python || ruby) &amp;&amp; s:update.threads &gt; 1</span></span><br><span class="line"><span class="string">    try</span></span><br><span class="line"><span class="string">      let imd = &amp;imd</span></span><br><span class="line"><span class="string">      if s:mac_gui</span></span><br><span class="line"><span class="string">        set noimd</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">      if ruby</span></span><br><span class="line"><span class="string">        call s:update_ruby()</span></span><br><span class="line"><span class="string">      else</span></span><br><span class="line"><span class="string">        call s:update_python()</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">    catch</span></span><br><span class="line"><span class="string">      let lines = getline(4, &#x27;\\\$&#x27;)</span></span><br><span class="line"><span class="string">      let printed = &#123;&#125;</span></span><br><span class="line"><span class="string">      silent! 4,\\\$d _</span></span><br><span class="line"><span class="string">      for line in lines</span></span><br><span class="line"><span class="string">        let name = s:extract_name(line, &#x27;.&#x27;, &#x27;&#x27;)</span></span><br><span class="line"><span class="string">        if empty(name) || !has_key(printed, name)</span></span><br><span class="line"><span class="string">          call append(&#x27;\\\$&#x27;, line)</span></span><br><span class="line"><span class="string">          if !empty(name)</span></span><br><span class="line"><span class="string">            let printed[name] = 1</span></span><br><span class="line"><span class="string">            if line[0] == &#x27;x&#x27; &amp;&amp; index(s:update.errors, name) &lt; 0</span></span><br><span class="line"><span class="string">              call add(s:update.errors, name)</span></span><br><span class="line"><span class="string">            end</span></span><br><span class="line"><span class="string">          endif</span></span><br><span class="line"><span class="string">        endif</span></span><br><span class="line"><span class="string">      endfor</span></span><br><span class="line"><span class="string">    finally</span></span><br><span class="line"><span class="string">      let &amp;imd = imd</span></span><br><span class="line"><span class="string">      call s:update_finish()</span></span><br><span class="line"><span class="string">    endtry</span></span><br><span class="line"><span class="string">  else</span></span><br><span class="line"><span class="string">    call s:update_vim()</span></span><br><span class="line"><span class="string">    while use_job &amp;&amp; sync</span></span><br><span class="line"><span class="string">      sleep 100m</span></span><br><span class="line"><span class="string">      if s:update.fin</span></span><br><span class="line"><span class="string">        break</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">    endwhile</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:log4(name, msg)</span></span><br><span class="line"><span class="string">  call setline(4, printf(&#x27;- %s (%s)&#x27;, a:msg, a:name))</span></span><br><span class="line"><span class="string">  redraw</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:update_finish()</span></span><br><span class="line"><span class="string">  if exists(&#x27;s:git_terminal_prompt&#x27;)</span></span><br><span class="line"><span class="string">    let \\\$GIT_TERMINAL_PROMPT = s:git_terminal_prompt</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  if s:switch_in()</span></span><br><span class="line"><span class="string">    call append(3, &#x27;- Updating ...&#x27;) | 4</span></span><br><span class="line"><span class="string">    for [name, spec] in items(filter(copy(s:update.all), &#x27;index(s:update.errors, v:key) &lt; 0 &amp;&amp; (s:update.force || s:update.pull || has_key(s:update.new, v:key))&#x27;))</span></span><br><span class="line"><span class="string">      let [pos, _] = s:logpos(name)</span></span><br><span class="line"><span class="string">      if !pos</span></span><br><span class="line"><span class="string">        continue</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">      if has_key(spec, &#x27;commit&#x27;)</span></span><br><span class="line"><span class="string">        call s:log4(name, &#x27;Checking out &#x27;.spec.commit)</span></span><br><span class="line"><span class="string">        let out = s:checkout(spec)</span></span><br><span class="line"><span class="string">      elseif has_key(spec, &#x27;tag&#x27;)</span></span><br><span class="line"><span class="string">        let tag = spec.tag</span></span><br><span class="line"><span class="string">        if tag =~ &#x27;\\\\*&#x27;</span></span><br><span class="line"><span class="string">          let tags = s:lines(s:system(&#x27;git tag --list &#x27;.plug#shellescape(tag).&#x27; --sort -version:refname 2&gt;&amp;1&#x27;, spec.dir))</span></span><br><span class="line"><span class="string">          if !v:shell_error &amp;&amp; !empty(tags)</span></span><br><span class="line"><span class="string">            let tag = tags[0]</span></span><br><span class="line"><span class="string">            call s:log4(name, printf(&#x27;Latest tag for %s -&gt; %s&#x27;, spec.tag, tag))</span></span><br><span class="line"><span class="string">            call append(3, &#x27;&#x27;)</span></span><br><span class="line"><span class="string">          endif</span></span><br><span class="line"><span class="string">        endif</span></span><br><span class="line"><span class="string">        call s:log4(name, &#x27;Checking out &#x27;.tag)</span></span><br><span class="line"><span class="string">        let out = s:system(&#x27;git checkout -q &#x27;.plug#shellescape(tag).&#x27; -- 2&gt;&amp;1&#x27;, spec.dir)</span></span><br><span class="line"><span class="string">      else</span></span><br><span class="line"><span class="string">        let branch = s:git_origin_branch(spec)</span></span><br><span class="line"><span class="string">        call s:log4(name, &#x27;Merging origin/&#x27;.s:esc(branch))</span></span><br><span class="line"><span class="string">        let out = s:system(&#x27;git checkout -q &#x27;.plug#shellescape(branch).&#x27; -- 2&gt;&amp;1&#x27;</span></span><br><span class="line"><span class="string">              \\\\. (has_key(s:update.new, name) ? &#x27;&#x27; : (&#x27;&amp;&amp; git merge --ff-only &#x27;.plug#shellescape(&#x27;origin/&#x27;.branch).&#x27; 2&gt;&amp;1&#x27;)), spec.dir)</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">      if !v:shell_error &amp;&amp; filereadable(spec.dir.&#x27;/.gitmodules&#x27;) &amp;&amp;</span></span><br><span class="line"><span class="string">            \\\\ (s:update.force || has_key(s:update.new, name) || s:is_updated(spec.dir))</span></span><br><span class="line"><span class="string">        call s:log4(name, &#x27;Updating submodules. This may take a while.&#x27;)</span></span><br><span class="line"><span class="string">        let out .= s:bang(&#x27;git submodule update --init --recursive&#x27;.s:submodule_opt.&#x27; 2&gt;&amp;1&#x27;, spec.dir)</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">      let msg = s:format_message(v:shell_error ? &#x27;x&#x27;: &#x27;-&#x27;, name, out)</span></span><br><span class="line"><span class="string">      if v:shell_error</span></span><br><span class="line"><span class="string">        call add(s:update.errors, name)</span></span><br><span class="line"><span class="string">        call s:regress_bar()</span></span><br><span class="line"><span class="string">        silent execute pos &#x27;d _&#x27;</span></span><br><span class="line"><span class="string">        call append(4, msg) | 4</span></span><br><span class="line"><span class="string">      elseif !empty(out)</span></span><br><span class="line"><span class="string">        call setline(pos, msg[0])</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">      redraw</span></span><br><span class="line"><span class="string">    endfor</span></span><br><span class="line"><span class="string">    silent 4 d _</span></span><br><span class="line"><span class="string">    try</span></span><br><span class="line"><span class="string">      call s:do(s:update.pull, s:update.force, filter(copy(s:update.all), &#x27;index(s:update.errors, v:key) &lt; 0 &amp;&amp; has_key(v:val, \\\&quot;do\\\&quot;)&#x27;))</span></span><br><span class="line"><span class="string">    catch</span></span><br><span class="line"><span class="string">      call s:warn(&#x27;echom&#x27;, v:exception)</span></span><br><span class="line"><span class="string">      call s:warn(&#x27;echo&#x27;, &#x27;&#x27;)</span></span><br><span class="line"><span class="string">      return</span></span><br><span class="line"><span class="string">    endtry</span></span><br><span class="line"><span class="string">    call s:finish(s:update.pull)</span></span><br><span class="line"><span class="string">    call setline(1, &#x27;Updated. Elapsed time: &#x27; . split(reltimestr(reltime(s:update.start)))[0] . &#x27; sec.&#x27;)</span></span><br><span class="line"><span class="string">    call s:switch_out(&#x27;normal! gg&#x27;)</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:job_abort()</span></span><br><span class="line"><span class="string">  if (!s:nvim &amp;&amp; !s:vim8) || !exists(&#x27;s:jobs&#x27;)</span></span><br><span class="line"><span class="string">    return</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  for [name, j] in items(s:jobs)</span></span><br><span class="line"><span class="string">    if s:nvim</span></span><br><span class="line"><span class="string">      silent! call jobstop(j.jobid)</span></span><br><span class="line"><span class="string">    elseif s:vim8</span></span><br><span class="line"><span class="string">      silent! call job_stop(j.jobid)</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    if j.new</span></span><br><span class="line"><span class="string">      call s:rm_rf(g:plugs[name].dir)</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">  endfor</span></span><br><span class="line"><span class="string">  let s:jobs = &#123;&#125;</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:last_non_empty_line(lines)</span></span><br><span class="line"><span class="string">  let len = len(a:lines)</span></span><br><span class="line"><span class="string">  for idx in range(len)</span></span><br><span class="line"><span class="string">    let line = a:lines[len-idx-1]</span></span><br><span class="line"><span class="string">    if !empty(line)</span></span><br><span class="line"><span class="string">      return line</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">  endfor</span></span><br><span class="line"><span class="string">  return &#x27;&#x27;</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:job_out_cb(self, data) abort</span></span><br><span class="line"><span class="string">  let self = a:self</span></span><br><span class="line"><span class="string">  let data = remove(self.lines, -1) . a:data</span></span><br><span class="line"><span class="string">  let lines = map(split(data, \\\&quot;\\\\n\\\&quot;, 1), &#x27;split(v:val, \\\&quot;\\\\r\\\&quot;, 1)[-1]&#x27;)</span></span><br><span class="line"><span class="string">  call extend(self.lines, lines)</span></span><br><span class="line"><span class="string">  \\\&quot; To reduce the number of buffer updates</span></span><br><span class="line"><span class="string">  let self.tick = get(self, &#x27;tick&#x27;, -1) + 1</span></span><br><span class="line"><span class="string">  if !self.running || self.tick % len(s:jobs) == 0</span></span><br><span class="line"><span class="string">    let bullet = self.running ? (self.new ? &#x27;+&#x27; : &#x27;*&#x27;) : (self.error ? &#x27;x&#x27; : &#x27;-&#x27;)</span></span><br><span class="line"><span class="string">    let result = self.error ? join(self.lines, \\\&quot;\\\\n\\\&quot;) : s:last_non_empty_line(self.lines)</span></span><br><span class="line"><span class="string">    call s:log(bullet, self.name, result)</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:job_exit_cb(self, data) abort</span></span><br><span class="line"><span class="string">  let a:self.running = 0</span></span><br><span class="line"><span class="string">  let a:self.error = a:data != 0</span></span><br><span class="line"><span class="string">  call s:reap(a:self.name)</span></span><br><span class="line"><span class="string">  call s:tick()</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:job_cb(fn, job, ch, data)</span></span><br><span class="line"><span class="string">  if !s:plug_window_exists() \\\&quot; plug window closed</span></span><br><span class="line"><span class="string">    return s:job_abort()</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  call call(a:fn, [a:job, a:data])</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:nvim_cb(job_id, data, event) dict abort</span></span><br><span class="line"><span class="string">  return (a:event == &#x27;stdout&#x27; || a:event == &#x27;stderr&#x27;) ?</span></span><br><span class="line"><span class="string">    \\\\ s:job_cb(&#x27;s:job_out_cb&#x27;,  self, 0, join(a:data, \\\&quot;\\\\n\\\&quot;)) :</span></span><br><span class="line"><span class="string">    \\\\ s:job_cb(&#x27;s:job_exit_cb&#x27;, self, 0, a:data)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:spawn(name, cmd, opts)</span></span><br><span class="line"><span class="string">  let job = &#123; &#x27;name&#x27;: a:name, &#x27;running&#x27;: 1, &#x27;error&#x27;: 0, &#x27;lines&#x27;: [&#x27;&#x27;],</span></span><br><span class="line"><span class="string">            \\\\ &#x27;new&#x27;: get(a:opts, &#x27;new&#x27;, 0) &#125;</span></span><br><span class="line"><span class="string">  let s:jobs[a:name] = job</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  if s:nvim</span></span><br><span class="line"><span class="string">    if has_key(a:opts, &#x27;dir&#x27;)</span></span><br><span class="line"><span class="string">      let job.cwd = a:opts.dir</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    let argv = a:cmd</span></span><br><span class="line"><span class="string">    call extend(job, &#123;</span></span><br><span class="line"><span class="string">    \\\\ &#x27;on_stdout&#x27;: function(&#x27;s:nvim_cb&#x27;),</span></span><br><span class="line"><span class="string">    \\\\ &#x27;on_stderr&#x27;: function(&#x27;s:nvim_cb&#x27;),</span></span><br><span class="line"><span class="string">    \\\\ &#x27;on_exit&#x27;:   function(&#x27;s:nvim_cb&#x27;),</span></span><br><span class="line"><span class="string">    \\\\ &#125;)</span></span><br><span class="line"><span class="string">    let jid = s:plug_call(&#x27;jobstart&#x27;, argv, job)</span></span><br><span class="line"><span class="string">    if jid &gt; 0</span></span><br><span class="line"><span class="string">      let job.jobid = jid</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">      let job.running = 0</span></span><br><span class="line"><span class="string">      let job.error   = 1</span></span><br><span class="line"><span class="string">      let job.lines   = [jid &lt; 0 ? argv[0].&#x27; is not executable&#x27; :</span></span><br><span class="line"><span class="string">            \\\\ &#x27;Invalid arguments (or job table is full)&#x27;]</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">  elseif s:vim8</span></span><br><span class="line"><span class="string">    let cmd = join(map(copy(a:cmd), &#x27;plug#shellescape(v:val, &#123;\\\&quot;script\\\&quot;: 0&#125;)&#x27;))</span></span><br><span class="line"><span class="string">    if has_key(a:opts, &#x27;dir&#x27;)</span></span><br><span class="line"><span class="string">      let cmd = s:with_cd(cmd, a:opts.dir, 0)</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    let argv = s:is_win ? [&#x27;cmd&#x27;, &#x27;/s&#x27;, &#x27;/c&#x27;, &#x27;\\\&quot;&#x27;.cmd.&#x27;\\\&quot;&#x27;] : [&#x27;sh&#x27;, &#x27;-c&#x27;, cmd]</span></span><br><span class="line"><span class="string">    let jid = job_start(s:is_win ? join(argv, &#x27; &#x27;) : argv, &#123;</span></span><br><span class="line"><span class="string">    \\\\ &#x27;out_cb&#x27;:   function(&#x27;s:job_cb&#x27;, [&#x27;s:job_out_cb&#x27;,  job]),</span></span><br><span class="line"><span class="string">    \\\\ &#x27;err_cb&#x27;:   function(&#x27;s:job_cb&#x27;, [&#x27;s:job_out_cb&#x27;,  job]),</span></span><br><span class="line"><span class="string">    \\\\ &#x27;exit_cb&#x27;:  function(&#x27;s:job_cb&#x27;, [&#x27;s:job_exit_cb&#x27;, job]),</span></span><br><span class="line"><span class="string">    \\\\ &#x27;err_mode&#x27;: &#x27;raw&#x27;,</span></span><br><span class="line"><span class="string">    \\\\ &#x27;out_mode&#x27;: &#x27;raw&#x27;</span></span><br><span class="line"><span class="string">    \\\\&#125;)</span></span><br><span class="line"><span class="string">    if job_status(jid) == &#x27;run&#x27;</span></span><br><span class="line"><span class="string">      let job.jobid = jid</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">      let job.running = 0</span></span><br><span class="line"><span class="string">      let job.error   = 1</span></span><br><span class="line"><span class="string">      let job.lines   = [&#x27;Failed to start job&#x27;]</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">  else</span></span><br><span class="line"><span class="string">    let job.lines = s:lines(call(&#x27;s:system&#x27;, has_key(a:opts, &#x27;dir&#x27;) ? [a:cmd, a:opts.dir] : [a:cmd]))</span></span><br><span class="line"><span class="string">    let job.error = v:shell_error != 0</span></span><br><span class="line"><span class="string">    let job.running = 0</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:reap(name)</span></span><br><span class="line"><span class="string">  let job = s:jobs[a:name]</span></span><br><span class="line"><span class="string">  if job.error</span></span><br><span class="line"><span class="string">    call add(s:update.errors, a:name)</span></span><br><span class="line"><span class="string">  elseif get(job, &#x27;new&#x27;, 0)</span></span><br><span class="line"><span class="string">    let s:update.new[a:name] = 1</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  let s:update.bar .= job.error ? &#x27;x&#x27; : &#x27;=&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  let bullet = job.error ? &#x27;x&#x27; : &#x27;-&#x27;</span></span><br><span class="line"><span class="string">  let result = job.error ? join(job.lines, \\\&quot;\\\\n\\\&quot;) : s:last_non_empty_line(job.lines)</span></span><br><span class="line"><span class="string">  call s:log(bullet, a:name, empty(result) ? &#x27;OK&#x27; : result)</span></span><br><span class="line"><span class="string">  call s:bar()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  call remove(s:jobs, a:name)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:bar()</span></span><br><span class="line"><span class="string">  if s:switch_in()</span></span><br><span class="line"><span class="string">    let total = len(s:update.all)</span></span><br><span class="line"><span class="string">    call setline(1, (s:update.pull ? &#x27;Updating&#x27; : &#x27;Installing&#x27;).</span></span><br><span class="line"><span class="string">          \\\\ &#x27; plugins (&#x27;.len(s:update.bar).&#x27;/&#x27;.total.&#x27;)&#x27;)</span></span><br><span class="line"><span class="string">    call s:progress_bar(2, s:update.bar, total)</span></span><br><span class="line"><span class="string">    call s:switch_out()</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:logpos(name)</span></span><br><span class="line"><span class="string">  let max = line(&#x27;\\\$&#x27;)</span></span><br><span class="line"><span class="string">  for i in range(4, max &gt; 4 ? max : 4)</span></span><br><span class="line"><span class="string">    if getline(i) =~# &#x27;^[-+x*] &#x27;.a:name.&#x27;:&#x27;</span></span><br><span class="line"><span class="string">      for j in range(i + 1, max &gt; 5 ? max : 5)</span></span><br><span class="line"><span class="string">        if getline(j) !~ &#x27;^ &#x27;</span></span><br><span class="line"><span class="string">          return [i, j - 1]</span></span><br><span class="line"><span class="string">        endif</span></span><br><span class="line"><span class="string">      endfor</span></span><br><span class="line"><span class="string">      return [i, i]</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">  endfor</span></span><br><span class="line"><span class="string">  return [0, 0]</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:log(bullet, name, lines)</span></span><br><span class="line"><span class="string">  if s:switch_in()</span></span><br><span class="line"><span class="string">    let [b, e] = s:logpos(a:name)</span></span><br><span class="line"><span class="string">    if b &gt; 0</span></span><br><span class="line"><span class="string">      silent execute printf(&#x27;%d,%d d _&#x27;, b, e)</span></span><br><span class="line"><span class="string">      if b &gt; winheight(&#x27;.&#x27;)</span></span><br><span class="line"><span class="string">        let b = 4</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">      let b = 4</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    \\\&quot; FIXME For some reason, nomodifiable is set after :d in vim8</span></span><br><span class="line"><span class="string">    setlocal modifiable</span></span><br><span class="line"><span class="string">    call append(b - 1, s:format_message(a:bullet, a:name, a:lines))</span></span><br><span class="line"><span class="string">    call s:switch_out()</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:update_vim()</span></span><br><span class="line"><span class="string">  let s:jobs = &#123;&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  call s:bar()</span></span><br><span class="line"><span class="string">  call s:tick()</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:tick()</span></span><br><span class="line"><span class="string">  let pull = s:update.pull</span></span><br><span class="line"><span class="string">  let prog = s:progress_opt(s:nvim || s:vim8)</span></span><br><span class="line"><span class="string">while 1 \\\&quot; Without TCO, Vim stack is bound to explode</span></span><br><span class="line"><span class="string">  if empty(s:update.todo)</span></span><br><span class="line"><span class="string">    if empty(s:jobs) &amp;&amp; !s:update.fin</span></span><br><span class="line"><span class="string">      call s:update_finish()</span></span><br><span class="line"><span class="string">      let s:update.fin = 1</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    return</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  let name = keys(s:update.todo)[0]</span></span><br><span class="line"><span class="string">  let spec = remove(s:update.todo, name)</span></span><br><span class="line"><span class="string">  let new  = empty(globpath(spec.dir, &#x27;.git&#x27;, 1))</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  call s:log(new ? &#x27;+&#x27; : &#x27;*&#x27;, name, pull ? &#x27;Updating ...&#x27; : &#x27;Installing ...&#x27;)</span></span><br><span class="line"><span class="string">  redraw</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  let has_tag = has_key(spec, &#x27;tag&#x27;)</span></span><br><span class="line"><span class="string">  if !new</span></span><br><span class="line"><span class="string">    let [error, _] = s:git_validate(spec, 0)</span></span><br><span class="line"><span class="string">    if empty(error)</span></span><br><span class="line"><span class="string">      if pull</span></span><br><span class="line"><span class="string">        let cmd = s:git_version_requirement(2) ? [&#x27;git&#x27;, &#x27;-c&#x27;, &#x27;credential.helper=&#x27;, &#x27;fetch&#x27;] : [&#x27;git&#x27;, &#x27;fetch&#x27;]</span></span><br><span class="line"><span class="string">        if has_tag &amp;&amp; !empty(globpath(spec.dir, &#x27;.git/shallow&#x27;))</span></span><br><span class="line"><span class="string">          call extend(cmd, [&#x27;--depth&#x27;, &#x27;99999999&#x27;])</span></span><br><span class="line"><span class="string">        endif</span></span><br><span class="line"><span class="string">        if !empty(prog)</span></span><br><span class="line"><span class="string">          call add(cmd, prog)</span></span><br><span class="line"><span class="string">        endif</span></span><br><span class="line"><span class="string">        call s:spawn(name, cmd, &#123; &#x27;dir&#x27;: spec.dir &#125;)</span></span><br><span class="line"><span class="string">      else</span></span><br><span class="line"><span class="string">        let s:jobs[name] = &#123; &#x27;running&#x27;: 0, &#x27;lines&#x27;: [&#x27;Already installed&#x27;], &#x27;error&#x27;: 0 &#125;</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">      let s:jobs[name] = &#123; &#x27;running&#x27;: 0, &#x27;lines&#x27;: s:lines(error), &#x27;error&#x27;: 1 &#125;</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">  else</span></span><br><span class="line"><span class="string">    let cmd = [&#x27;git&#x27;, &#x27;clone&#x27;]</span></span><br><span class="line"><span class="string">    if !has_tag</span></span><br><span class="line"><span class="string">      call extend(cmd, s:clone_opt)</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    if !empty(prog)</span></span><br><span class="line"><span class="string">      call add(cmd, prog)</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    call s:spawn(name, extend(cmd, [spec.uri, s:trim(spec.dir)]), &#123; &#x27;new&#x27;: 1 &#125;)</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  if !s:jobs[name].running</span></span><br><span class="line"><span class="string">    call s:reap(name)</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  if len(s:jobs) &gt;= s:update.threads</span></span><br><span class="line"><span class="string">    break</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">endwhile</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:update_python()</span></span><br><span class="line"><span class="string">let py_exe = has(&#x27;python&#x27;) ? &#x27;python&#x27; : &#x27;python3&#x27;</span></span><br><span class="line"><span class="string">execute py_exe \\\&quot;&lt;&lt; EOF\\\&quot;</span></span><br><span class="line"><span class="string">import datetime</span></span><br><span class="line"><span class="string">import functools</span></span><br><span class="line"><span class="string">import os</span></span><br><span class="line"><span class="string">try:</span></span><br><span class="line"><span class="string">  import queue</span></span><br><span class="line"><span class="string">except ImportError:</span></span><br><span class="line"><span class="string">  import Queue as queue</span></span><br><span class="line"><span class="string">import random</span></span><br><span class="line"><span class="string">import re</span></span><br><span class="line"><span class="string">import shutil</span></span><br><span class="line"><span class="string">import signal</span></span><br><span class="line"><span class="string">import subprocess</span></span><br><span class="line"><span class="string">import tempfile</span></span><br><span class="line"><span class="string">import threading as thr</span></span><br><span class="line"><span class="string">import time</span></span><br><span class="line"><span class="string">import traceback</span></span><br><span class="line"><span class="string">import vim</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">G_NVIM = vim.eval(\\\&quot;has(&#x27;nvim&#x27;)\\\&quot;) == &#x27;1&#x27;</span></span><br><span class="line"><span class="string">G_PULL = vim.eval(&#x27;s:update.pull&#x27;) == &#x27;1&#x27;</span></span><br><span class="line"><span class="string">G_RETRIES = int(vim.eval(&#x27;get(g:, \\\&quot;plug_retries\\\&quot;, 2)&#x27;)) + 1</span></span><br><span class="line"><span class="string">G_TIMEOUT = int(vim.eval(&#x27;get(g:, \\\&quot;plug_timeout\\\&quot;, 60)&#x27;))</span></span><br><span class="line"><span class="string">G_CLONE_OPT = &#x27; &#x27;.join(vim.eval(&#x27;s:clone_opt&#x27;))</span></span><br><span class="line"><span class="string">G_PROGRESS = vim.eval(&#x27;s:progress_opt(1)&#x27;)</span></span><br><span class="line"><span class="string">G_LOG_PROB = 1.0 / int(vim.eval(&#x27;s:update.threads&#x27;))</span></span><br><span class="line"><span class="string">G_STOP = thr.Event()</span></span><br><span class="line"><span class="string">G_IS_WIN = vim.eval(&#x27;s:is_win&#x27;) == &#x27;1&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">class PlugError(Exception):</span></span><br><span class="line"><span class="string">  def __init__(self, msg):</span></span><br><span class="line"><span class="string">    self.msg = msg</span></span><br><span class="line"><span class="string">class CmdTimedOut(PlugError):</span></span><br><span class="line"><span class="string">  pass</span></span><br><span class="line"><span class="string">class CmdFailed(PlugError):</span></span><br><span class="line"><span class="string">  pass</span></span><br><span class="line"><span class="string">class InvalidURI(PlugError):</span></span><br><span class="line"><span class="string">  pass</span></span><br><span class="line"><span class="string">class Action(object):</span></span><br><span class="line"><span class="string">  INSTALL, UPDATE, ERROR, DONE = [&#x27;+&#x27;, &#x27;*&#x27;, &#x27;x&#x27;, &#x27;-&#x27;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">class Buffer(object):</span></span><br><span class="line"><span class="string">  def __init__(self, lock, num_plugs, is_pull):</span></span><br><span class="line"><span class="string">    self.bar = &#x27;&#x27;</span></span><br><span class="line"><span class="string">    self.event = &#x27;Updating&#x27; if is_pull else &#x27;Installing&#x27;</span></span><br><span class="line"><span class="string">    self.lock = lock</span></span><br><span class="line"><span class="string">    self.maxy = int(vim.eval(&#x27;winheight(\\\&quot;.\\\&quot;)&#x27;))</span></span><br><span class="line"><span class="string">    self.num_plugs = num_plugs</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  def __where(self, name):</span></span><br><span class="line"><span class="string">    \\\&quot;\\\&quot;\\\&quot; Find first line with name in current buffer. Return line num. \\\&quot;\\\&quot;\\\&quot;</span></span><br><span class="line"><span class="string">    found, lnum = False, 0</span></span><br><span class="line"><span class="string">    matcher = re.compile(&#x27;^[-+x*] &#123;0&#125;:&#x27;.format(name))</span></span><br><span class="line"><span class="string">    for line in vim.current.buffer:</span></span><br><span class="line"><span class="string">      if matcher.search(line) is not None:</span></span><br><span class="line"><span class="string">        found = True</span></span><br><span class="line"><span class="string">        break</span></span><br><span class="line"><span class="string">      lnum += 1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    if not found:</span></span><br><span class="line"><span class="string">      lnum = -1</span></span><br><span class="line"><span class="string">    return lnum</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  def header(self):</span></span><br><span class="line"><span class="string">    curbuf = vim.current.buffer</span></span><br><span class="line"><span class="string">    curbuf[0] = self.event + &#x27; plugins (&#123;0&#125;/&#123;1&#125;)&#x27;.format(len(self.bar), self.num_plugs)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    num_spaces = self.num_plugs - len(self.bar)</span></span><br><span class="line"><span class="string">    curbuf[1] = &#x27;[&#123;0&#125;&#123;1&#125;]&#x27;.format(self.bar, num_spaces * &#x27; &#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    with self.lock:</span></span><br><span class="line"><span class="string">      vim.command(&#x27;normal! 2G&#x27;)</span></span><br><span class="line"><span class="string">      vim.command(&#x27;redraw&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  def write(self, action, name, lines):</span></span><br><span class="line"><span class="string">    first, rest = lines[0], lines[1:]</span></span><br><span class="line"><span class="string">    msg = [&#x27;&#123;0&#125; &#123;1&#125;&#123;2&#125;&#123;3&#125;&#x27;.format(action, name, &#x27;: &#x27; if first else &#x27;&#x27;, first)]</span></span><br><span class="line"><span class="string">    msg.extend([&#x27;    &#x27; + line for line in rest])</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    try:</span></span><br><span class="line"><span class="string">      if action == Action.ERROR:</span></span><br><span class="line"><span class="string">        self.bar += &#x27;x&#x27;</span></span><br><span class="line"><span class="string">        vim.command(\\\&quot;call add(s:update.errors, &#x27;&#123;0&#125;&#x27;)\\\&quot;.format(name))</span></span><br><span class="line"><span class="string">      elif action == Action.DONE:</span></span><br><span class="line"><span class="string">        self.bar += &#x27;=&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      curbuf = vim.current.buffer</span></span><br><span class="line"><span class="string">      lnum = self.__where(name)</span></span><br><span class="line"><span class="string">      if lnum != -1: # Found matching line num</span></span><br><span class="line"><span class="string">        del curbuf[lnum]</span></span><br><span class="line"><span class="string">        if lnum &gt; self.maxy and action in set([Action.INSTALL, Action.UPDATE]):</span></span><br><span class="line"><span class="string">          lnum = 3</span></span><br><span class="line"><span class="string">      else:</span></span><br><span class="line"><span class="string">        lnum = 3</span></span><br><span class="line"><span class="string">      curbuf.append(msg, lnum)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      self.header()</span></span><br><span class="line"><span class="string">    except vim.error:</span></span><br><span class="line"><span class="string">      pass</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">class Command(object):</span></span><br><span class="line"><span class="string">  CD = &#x27;cd /d&#x27; if G_IS_WIN else &#x27;cd&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  def __init__(self, cmd, cmd_dir=None, timeout=60, cb=None, clean=None):</span></span><br><span class="line"><span class="string">    self.cmd = cmd</span></span><br><span class="line"><span class="string">    if cmd_dir:</span></span><br><span class="line"><span class="string">      self.cmd = &#x27;&#123;0&#125; &#123;1&#125; &amp;&amp; &#123;2&#125;&#x27;.format(Command.CD, cmd_dir, self.cmd)</span></span><br><span class="line"><span class="string">    self.timeout = timeout</span></span><br><span class="line"><span class="string">    self.callback = cb if cb else (lambda msg: None)</span></span><br><span class="line"><span class="string">    self.clean = clean if clean else (lambda: None)</span></span><br><span class="line"><span class="string">    self.proc = None</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  @property</span></span><br><span class="line"><span class="string">  def alive(self):</span></span><br><span class="line"><span class="string">    \\\&quot;\\\&quot;\\\&quot; Returns true only if command still running. \\\&quot;\\\&quot;\\\&quot;</span></span><br><span class="line"><span class="string">    return self.proc and self.proc.poll() is None</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  def execute(self, ntries=3):</span></span><br><span class="line"><span class="string">    \\\&quot;\\\&quot;\\\&quot; Execute the command with ntries if CmdTimedOut.</span></span><br><span class="line"><span class="string">        Returns the output of the command if no Exception.</span></span><br><span class="line"><span class="string">    \\\&quot;\\\&quot;\\\&quot;</span></span><br><span class="line"><span class="string">    attempt, finished, limit = 0, False, self.timeout</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    while not finished:</span></span><br><span class="line"><span class="string">      try:</span></span><br><span class="line"><span class="string">        attempt += 1</span></span><br><span class="line"><span class="string">        result = self.try_command()</span></span><br><span class="line"><span class="string">        finished = True</span></span><br><span class="line"><span class="string">        return result</span></span><br><span class="line"><span class="string">      except CmdTimedOut:</span></span><br><span class="line"><span class="string">        if attempt != ntries:</span></span><br><span class="line"><span class="string">          self.notify_retry()</span></span><br><span class="line"><span class="string">          self.timeout += limit</span></span><br><span class="line"><span class="string">        else:</span></span><br><span class="line"><span class="string">          raise</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  def notify_retry(self):</span></span><br><span class="line"><span class="string">    \\\&quot;\\\&quot;\\\&quot; Retry required for command, notify user. \\\&quot;\\\&quot;\\\&quot;</span></span><br><span class="line"><span class="string">    for count in range(3, 0, -1):</span></span><br><span class="line"><span class="string">      if G_STOP.is_set():</span></span><br><span class="line"><span class="string">        raise KeyboardInterrupt</span></span><br><span class="line"><span class="string">      msg = &#x27;Timeout. Will retry in &#123;0&#125; second&#123;1&#125; ...&#x27;.format(</span></span><br><span class="line"><span class="string">            count, &#x27;s&#x27; if count != 1 else &#x27;&#x27;)</span></span><br><span class="line"><span class="string">      self.callback([msg])</span></span><br><span class="line"><span class="string">      time.sleep(1)</span></span><br><span class="line"><span class="string">    self.callback([&#x27;Retrying ...&#x27;])</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  def try_command(self):</span></span><br><span class="line"><span class="string">    \\\&quot;\\\&quot;\\\&quot; Execute a cmd &amp; poll for callback. Returns list of output.</span></span><br><span class="line"><span class="string">        Raises CmdFailed   -&gt; return code for Popen isn&#x27;t 0</span></span><br><span class="line"><span class="string">        Raises CmdTimedOut -&gt; command exceeded timeout without new output</span></span><br><span class="line"><span class="string">    \\\&quot;\\\&quot;\\\&quot;</span></span><br><span class="line"><span class="string">    first_line = True</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    try:</span></span><br><span class="line"><span class="string">      tfile = tempfile.NamedTemporaryFile(mode=&#x27;w+b&#x27;)</span></span><br><span class="line"><span class="string">      preexec_fn = not G_IS_WIN and os.setsid or None</span></span><br><span class="line"><span class="string">      self.proc = subprocess.Popen(self.cmd, stdout=tfile,</span></span><br><span class="line"><span class="string">                                   stderr=subprocess.STDOUT,</span></span><br><span class="line"><span class="string">                                   stdin=subprocess.PIPE, shell=True,</span></span><br><span class="line"><span class="string">                                   preexec_fn=preexec_fn)</span></span><br><span class="line"><span class="string">      thrd = thr.Thread(target=(lambda proc: proc.wait()), args=(self.proc,))</span></span><br><span class="line"><span class="string">      thrd.start()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      thread_not_started = True</span></span><br><span class="line"><span class="string">      while thread_not_started:</span></span><br><span class="line"><span class="string">        try:</span></span><br><span class="line"><span class="string">          thrd.join(0.1)</span></span><br><span class="line"><span class="string">          thread_not_started = False</span></span><br><span class="line"><span class="string">        except RuntimeError:</span></span><br><span class="line"><span class="string">          pass</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      while self.alive:</span></span><br><span class="line"><span class="string">        if G_STOP.is_set():</span></span><br><span class="line"><span class="string">          raise KeyboardInterrupt</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        if first_line or random.random() &lt; G_LOG_PROB:</span></span><br><span class="line"><span class="string">          first_line = False</span></span><br><span class="line"><span class="string">          line = &#x27;&#x27; if G_IS_WIN else nonblock_read(tfile.name)</span></span><br><span class="line"><span class="string">          if line:</span></span><br><span class="line"><span class="string">            self.callback([line])</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        time_diff = time.time() - os.path.getmtime(tfile.name)</span></span><br><span class="line"><span class="string">        if time_diff &gt; self.timeout:</span></span><br><span class="line"><span class="string">          raise CmdTimedOut([&#x27;Timeout!&#x27;])</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        thrd.join(0.5)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      tfile.seek(0)</span></span><br><span class="line"><span class="string">      result = [line.decode(&#x27;utf-8&#x27;, &#x27;replace&#x27;).rstrip() for line in tfile]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      if self.proc.returncode != 0:</span></span><br><span class="line"><span class="string">        raise CmdFailed([&#x27;&#x27;] + result)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      return result</span></span><br><span class="line"><span class="string">    except:</span></span><br><span class="line"><span class="string">      self.terminate()</span></span><br><span class="line"><span class="string">      raise</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  def terminate(self):</span></span><br><span class="line"><span class="string">    \\\&quot;\\\&quot;\\\&quot; Terminate process and cleanup. \\\&quot;\\\&quot;\\\&quot;</span></span><br><span class="line"><span class="string">    if self.alive:</span></span><br><span class="line"><span class="string">      if G_IS_WIN:</span></span><br><span class="line"><span class="string">        os.kill(self.proc.pid, signal.SIGINT)</span></span><br><span class="line"><span class="string">      else:</span></span><br><span class="line"><span class="string">        os.killpg(self.proc.pid, signal.SIGTERM)</span></span><br><span class="line"><span class="string">    self.clean()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">class Plugin(object):</span></span><br><span class="line"><span class="string">  def __init__(self, name, args, buf_q, lock):</span></span><br><span class="line"><span class="string">    self.name = name</span></span><br><span class="line"><span class="string">    self.args = args</span></span><br><span class="line"><span class="string">    self.buf_q = buf_q</span></span><br><span class="line"><span class="string">    self.lock = lock</span></span><br><span class="line"><span class="string">    self.tag = args.get(&#x27;tag&#x27;, 0)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  def manage(self):</span></span><br><span class="line"><span class="string">    try:</span></span><br><span class="line"><span class="string">      if os.path.exists(self.args[&#x27;dir&#x27;]):</span></span><br><span class="line"><span class="string">        self.update()</span></span><br><span class="line"><span class="string">      else:</span></span><br><span class="line"><span class="string">        self.install()</span></span><br><span class="line"><span class="string">        with self.lock:</span></span><br><span class="line"><span class="string">          thread_vim_command(\\\&quot;let s:update.new[&#x27;&#123;0&#125;&#x27;] = 1\\\&quot;.format(self.name))</span></span><br><span class="line"><span class="string">    except PlugError as exc:</span></span><br><span class="line"><span class="string">      self.write(Action.ERROR, self.name, exc.msg)</span></span><br><span class="line"><span class="string">    except KeyboardInterrupt:</span></span><br><span class="line"><span class="string">      G_STOP.set()</span></span><br><span class="line"><span class="string">      self.write(Action.ERROR, self.name, [&#x27;Interrupted!&#x27;])</span></span><br><span class="line"><span class="string">    except:</span></span><br><span class="line"><span class="string">      # Any exception except those above print stack trace</span></span><br><span class="line"><span class="string">      msg = &#x27;Trace:\\\\n&#123;0&#125;&#x27;.format(traceback.format_exc().rstrip())</span></span><br><span class="line"><span class="string">      self.write(Action.ERROR, self.name, msg.split(&#x27;\\\\n&#x27;))</span></span><br><span class="line"><span class="string">      raise</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  def install(self):</span></span><br><span class="line"><span class="string">    target = self.args[&#x27;dir&#x27;]</span></span><br><span class="line"><span class="string">    if target[-1] == &#x27;\\\\\\\\&#x27;:</span></span><br><span class="line"><span class="string">      target = target[0:-1]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    def clean(target):</span></span><br><span class="line"><span class="string">      def _clean():</span></span><br><span class="line"><span class="string">        try:</span></span><br><span class="line"><span class="string">          shutil.rmtree(target)</span></span><br><span class="line"><span class="string">        except OSError:</span></span><br><span class="line"><span class="string">          pass</span></span><br><span class="line"><span class="string">      return _clean</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    self.write(Action.INSTALL, self.name, [&#x27;Installing ...&#x27;])</span></span><br><span class="line"><span class="string">    callback = functools.partial(self.write, Action.INSTALL, self.name)</span></span><br><span class="line"><span class="string">    cmd = &#x27;git clone &#123;0&#125; &#123;1&#125; &#123;2&#125; &#123;3&#125; 2&gt;&amp;1&#x27;.format(</span></span><br><span class="line"><span class="string">          &#x27;&#x27; if self.tag else G_CLONE_OPT, G_PROGRESS, self.args[&#x27;uri&#x27;],</span></span><br><span class="line"><span class="string">          esc(target))</span></span><br><span class="line"><span class="string">    com = Command(cmd, None, G_TIMEOUT, callback, clean(target))</span></span><br><span class="line"><span class="string">    result = com.execute(G_RETRIES)</span></span><br><span class="line"><span class="string">    self.write(Action.DONE, self.name, result[-1:])</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  def repo_uri(self):</span></span><br><span class="line"><span class="string">    cmd = &#x27;git rev-parse --abbrev-ref HEAD 2&gt;&amp;1 &amp;&amp; git config -f .git/config remote.origin.url&#x27;</span></span><br><span class="line"><span class="string">    command = Command(cmd, self.args[&#x27;dir&#x27;], G_TIMEOUT,)</span></span><br><span class="line"><span class="string">    result = command.execute(G_RETRIES)</span></span><br><span class="line"><span class="string">    return result[-1]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  def update(self):</span></span><br><span class="line"><span class="string">    actual_uri = self.repo_uri()</span></span><br><span class="line"><span class="string">    expect_uri = self.args[&#x27;uri&#x27;]</span></span><br><span class="line"><span class="string">    regex = re.compile(r&#x27;^(?:\\\\w+://)?(?:[^@/]*@)?([^:/]*(?::[0-9]*)?)[:/](.*?)(?:\\\\.git)?/?\\\$&#x27;)</span></span><br><span class="line"><span class="string">    ma = regex.match(actual_uri)</span></span><br><span class="line"><span class="string">    mb = regex.match(expect_uri)</span></span><br><span class="line"><span class="string">    if ma is None or mb is None or ma.groups() != mb.groups():</span></span><br><span class="line"><span class="string">      msg = [&#x27;&#x27;,</span></span><br><span class="line"><span class="string">             &#x27;Invalid URI: &#123;0&#125;&#x27;.format(actual_uri),</span></span><br><span class="line"><span class="string">             &#x27;Expected     &#123;0&#125;&#x27;.format(expect_uri),</span></span><br><span class="line"><span class="string">             &#x27;PlugClean required.&#x27;]</span></span><br><span class="line"><span class="string">      raise InvalidURI(msg)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    if G_PULL:</span></span><br><span class="line"><span class="string">      self.write(Action.UPDATE, self.name, [&#x27;Updating ...&#x27;])</span></span><br><span class="line"><span class="string">      callback = functools.partial(self.write, Action.UPDATE, self.name)</span></span><br><span class="line"><span class="string">      fetch_opt = &#x27;--depth 99999999&#x27; if self.tag and os.path.isfile(os.path.join(self.args[&#x27;dir&#x27;], &#x27;.git/shallow&#x27;)) else &#x27;&#x27;</span></span><br><span class="line"><span class="string">      cmd = &#x27;git fetch &#123;0&#125; &#123;1&#125; 2&gt;&amp;1&#x27;.format(fetch_opt, G_PROGRESS)</span></span><br><span class="line"><span class="string">      com = Command(cmd, self.args[&#x27;dir&#x27;], G_TIMEOUT, callback)</span></span><br><span class="line"><span class="string">      result = com.execute(G_RETRIES)</span></span><br><span class="line"><span class="string">      self.write(Action.DONE, self.name, result[-1:])</span></span><br><span class="line"><span class="string">    else:</span></span><br><span class="line"><span class="string">      self.write(Action.DONE, self.name, [&#x27;Already installed&#x27;])</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  def write(self, action, name, msg):</span></span><br><span class="line"><span class="string">    self.buf_q.put((action, name, msg))</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">class PlugThread(thr.Thread):</span></span><br><span class="line"><span class="string">  def __init__(self, tname, args):</span></span><br><span class="line"><span class="string">    super(PlugThread, self).__init__()</span></span><br><span class="line"><span class="string">    self.tname = tname</span></span><br><span class="line"><span class="string">    self.args = args</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  def run(self):</span></span><br><span class="line"><span class="string">    thr.current_thread().name = self.tname</span></span><br><span class="line"><span class="string">    buf_q, work_q, lock = self.args</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    try:</span></span><br><span class="line"><span class="string">      while not G_STOP.is_set():</span></span><br><span class="line"><span class="string">        name, args = work_q.get_nowait()</span></span><br><span class="line"><span class="string">        plug = Plugin(name, args, buf_q, lock)</span></span><br><span class="line"><span class="string">        plug.manage()</span></span><br><span class="line"><span class="string">        work_q.task_done()</span></span><br><span class="line"><span class="string">    except queue.Empty:</span></span><br><span class="line"><span class="string">      pass</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">class RefreshThread(thr.Thread):</span></span><br><span class="line"><span class="string">  def __init__(self, lock):</span></span><br><span class="line"><span class="string">    super(RefreshThread, self).__init__()</span></span><br><span class="line"><span class="string">    self.lock = lock</span></span><br><span class="line"><span class="string">    self.running = True</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  def run(self):</span></span><br><span class="line"><span class="string">    while self.running:</span></span><br><span class="line"><span class="string">      with self.lock:</span></span><br><span class="line"><span class="string">        thread_vim_command(&#x27;noautocmd normal! a&#x27;)</span></span><br><span class="line"><span class="string">      time.sleep(0.33)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  def stop(self):</span></span><br><span class="line"><span class="string">    self.running = False</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">if G_NVIM:</span></span><br><span class="line"><span class="string">  def thread_vim_command(cmd):</span></span><br><span class="line"><span class="string">    vim.session.threadsafe_call(lambda: vim.command(cmd))</span></span><br><span class="line"><span class="string">else:</span></span><br><span class="line"><span class="string">  def thread_vim_command(cmd):</span></span><br><span class="line"><span class="string">    vim.command(cmd)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">def esc(name):</span></span><br><span class="line"><span class="string">  return &#x27;\\\&quot;&#x27; + name.replace(&#x27;\\\&quot;&#x27;, &#x27;\\\\\\\&quot;&#x27;) + &#x27;\\\&quot;&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">def nonblock_read(fname):</span></span><br><span class="line"><span class="string">  \\\&quot;\\\&quot;\\\&quot; Read a file with nonblock flag. Return the last line. \\\&quot;\\\&quot;\\\&quot;</span></span><br><span class="line"><span class="string">  fread = os.open(fname, os.O_RDONLY | os.O_NONBLOCK)</span></span><br><span class="line"><span class="string">  buf = os.read(fread, 100000).decode(&#x27;utf-8&#x27;, &#x27;replace&#x27;)</span></span><br><span class="line"><span class="string">  os.close(fread)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  line = buf.rstrip(&#x27;\\\\r\\\\n&#x27;)</span></span><br><span class="line"><span class="string">  left = max(line.rfind(&#x27;\\\\r&#x27;), line.rfind(&#x27;\\\\n&#x27;))</span></span><br><span class="line"><span class="string">  if left != -1:</span></span><br><span class="line"><span class="string">    left += 1</span></span><br><span class="line"><span class="string">    line = line[left:]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  return line</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">def main():</span></span><br><span class="line"><span class="string">  thr.current_thread().name = &#x27;main&#x27;</span></span><br><span class="line"><span class="string">  nthreads = int(vim.eval(&#x27;s:update.threads&#x27;))</span></span><br><span class="line"><span class="string">  plugs = vim.eval(&#x27;s:update.todo&#x27;)</span></span><br><span class="line"><span class="string">  mac_gui = vim.eval(&#x27;s:mac_gui&#x27;) == &#x27;1&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  lock = thr.Lock()</span></span><br><span class="line"><span class="string">  buf = Buffer(lock, len(plugs), G_PULL)</span></span><br><span class="line"><span class="string">  buf_q, work_q = queue.Queue(), queue.Queue()</span></span><br><span class="line"><span class="string">  for work in plugs.items():</span></span><br><span class="line"><span class="string">    work_q.put(work)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  start_cnt = thr.active_count()</span></span><br><span class="line"><span class="string">  for num in range(nthreads):</span></span><br><span class="line"><span class="string">    tname = &#x27;PlugT-&#123;0:02&#125;&#x27;.format(num)</span></span><br><span class="line"><span class="string">    thread = PlugThread(tname, (buf_q, work_q, lock))</span></span><br><span class="line"><span class="string">    thread.start()</span></span><br><span class="line"><span class="string">  if mac_gui:</span></span><br><span class="line"><span class="string">    rthread = RefreshThread(lock)</span></span><br><span class="line"><span class="string">    rthread.start()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  while not buf_q.empty() or thr.active_count() != start_cnt:</span></span><br><span class="line"><span class="string">    try:</span></span><br><span class="line"><span class="string">      action, name, msg = buf_q.get(True, 0.25)</span></span><br><span class="line"><span class="string">      buf.write(action, name, [&#x27;OK&#x27;] if not msg else msg)</span></span><br><span class="line"><span class="string">      buf_q.task_done()</span></span><br><span class="line"><span class="string">    except queue.Empty:</span></span><br><span class="line"><span class="string">      pass</span></span><br><span class="line"><span class="string">    except KeyboardInterrupt:</span></span><br><span class="line"><span class="string">      G_STOP.set()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  if mac_gui:</span></span><br><span class="line"><span class="string">    rthread.stop()</span></span><br><span class="line"><span class="string">    rthread.join()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">main()</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:update_ruby()</span></span><br><span class="line"><span class="string">  ruby &lt;&lt; EOF</span></span><br><span class="line"><span class="string">  module PlugStream</span></span><br><span class="line"><span class="string">    SEP = [\\\&quot;\\\\r\\\&quot;, \\\&quot;\\\\n\\\&quot;, nil]</span></span><br><span class="line"><span class="string">    def get_line</span></span><br><span class="line"><span class="string">      buffer = &#x27;&#x27;</span></span><br><span class="line"><span class="string">      loop do</span></span><br><span class="line"><span class="string">        char = readchar rescue return</span></span><br><span class="line"><span class="string">        if SEP.include? char.chr</span></span><br><span class="line"><span class="string">          buffer &lt;&lt; \\\$/</span></span><br><span class="line"><span class="string">          break</span></span><br><span class="line"><span class="string">        else</span></span><br><span class="line"><span class="string">          buffer &lt;&lt; char</span></span><br><span class="line"><span class="string">        end</span></span><br><span class="line"><span class="string">      end</span></span><br><span class="line"><span class="string">      buffer</span></span><br><span class="line"><span class="string">    end</span></span><br><span class="line"><span class="string">  end unless defined?(PlugStream)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  def esc arg</span></span><br><span class="line"><span class="string">    %[\\\&quot;#&#123;arg.gsub(&#x27;\\\&quot;&#x27;, &#x27;\\\\\\\&quot;&#x27;)&#125;\\\&quot;]</span></span><br><span class="line"><span class="string">  end</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  def killall pid</span></span><br><span class="line"><span class="string">    pids = [pid]</span></span><br><span class="line"><span class="string">    if /mswin|mingw|bccwin/ =~ RUBY_PLATFORM</span></span><br><span class="line"><span class="string">      pids.each &#123; |pid| Process.kill &#x27;INT&#x27;, pid.to_i rescue nil &#125;</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">      unless \\\`which pgrep 2&gt; /dev/null\\\`.empty?</span></span><br><span class="line"><span class="string">        children = pids</span></span><br><span class="line"><span class="string">        until children.empty?</span></span><br><span class="line"><span class="string">          children = children.map &#123; |pid|</span></span><br><span class="line"><span class="string">            \\\`pgrep -P #&#123;pid&#125;\\\`.lines.map &#123; |l| l.chomp &#125;</span></span><br><span class="line"><span class="string">          &#125;.flatten</span></span><br><span class="line"><span class="string">          pids += children</span></span><br><span class="line"><span class="string">        end</span></span><br><span class="line"><span class="string">      end</span></span><br><span class="line"><span class="string">      pids.each &#123; |pid| Process.kill &#x27;TERM&#x27;, pid.to_i rescue nil &#125;</span></span><br><span class="line"><span class="string">    end</span></span><br><span class="line"><span class="string">  end</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  def compare_git_uri a, b</span></span><br><span class="line"><span class="string">    regex = %r&#123;^(?:\\\\w+://)?(?:[^@/]*@)?([^:/]*(?::[0-9]*)?)[:/](.*?)(?:\\\\.git)?/?\\\$&#125;</span></span><br><span class="line"><span class="string">    regex.match(a).to_a.drop(1) == regex.match(b).to_a.drop(1)</span></span><br><span class="line"><span class="string">  end</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  require &#x27;thread&#x27;</span></span><br><span class="line"><span class="string">  require &#x27;fileutils&#x27;</span></span><br><span class="line"><span class="string">  require &#x27;timeout&#x27;</span></span><br><span class="line"><span class="string">  running = true</span></span><br><span class="line"><span class="string">  iswin = VIM::evaluate(&#x27;s:is_win&#x27;).to_i == 1</span></span><br><span class="line"><span class="string">  pull  = VIM::evaluate(&#x27;s:update.pull&#x27;).to_i == 1</span></span><br><span class="line"><span class="string">  base  = VIM::evaluate(&#x27;g:plug_home&#x27;)</span></span><br><span class="line"><span class="string">  all   = VIM::evaluate(&#x27;s:update.todo&#x27;)</span></span><br><span class="line"><span class="string">  limit = VIM::evaluate(&#x27;get(g:, \\\&quot;plug_timeout\\\&quot;, 60)&#x27;)</span></span><br><span class="line"><span class="string">  tries = VIM::evaluate(&#x27;get(g:, \\\&quot;plug_retries\\\&quot;, 2)&#x27;) + 1</span></span><br><span class="line"><span class="string">  nthr  = VIM::evaluate(&#x27;s:update.threads&#x27;).to_i</span></span><br><span class="line"><span class="string">  maxy  = VIM::evaluate(&#x27;winheight(\\\&quot;.\\\&quot;)&#x27;).to_i</span></span><br><span class="line"><span class="string">  vim7  = VIM::evaluate(&#x27;v:version&#x27;).to_i &lt;= 703 &amp;&amp; RUBY_PLATFORM =~ /darwin/</span></span><br><span class="line"><span class="string">  cd    = iswin ? &#x27;cd /d&#x27; : &#x27;cd&#x27;</span></span><br><span class="line"><span class="string">  tot   = VIM::evaluate(&#x27;len(s:update.todo)&#x27;) || 0</span></span><br><span class="line"><span class="string">  bar   = &#x27;&#x27;</span></span><br><span class="line"><span class="string">  skip  = &#x27;Already installed&#x27;</span></span><br><span class="line"><span class="string">  mtx   = Mutex.new</span></span><br><span class="line"><span class="string">  take1 = proc &#123; mtx.synchronize &#123; running &amp;&amp; all.shift &#125; &#125;</span></span><br><span class="line"><span class="string">  logh  = proc &#123;</span></span><br><span class="line"><span class="string">    cnt = bar.length</span></span><br><span class="line"><span class="string">    \\\$curbuf[1] = \\\&quot;#&#123;pull ? &#x27;Updating&#x27; : &#x27;Installing&#x27;&#125; plugins (#&#123;cnt&#125;/#&#123;tot&#125;)\\\&quot;</span></span><br><span class="line"><span class="string">    \\\$curbuf[2] = &#x27;[&#x27; + bar.ljust(tot) + &#x27;]&#x27;</span></span><br><span class="line"><span class="string">    VIM::command(&#x27;normal! 2G&#x27;)</span></span><br><span class="line"><span class="string">    VIM::command(&#x27;redraw&#x27;)</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  where = proc &#123; |name| (1..(\\\$curbuf.length)).find &#123; |l| \\\$curbuf[l] =~ /^[-+x*] #&#123;name&#125;:/ &#125; &#125;</span></span><br><span class="line"><span class="string">  log   = proc &#123; |name, result, type|</span></span><br><span class="line"><span class="string">    mtx.synchronize do</span></span><br><span class="line"><span class="string">      ing  = ![true, false].include?(type)</span></span><br><span class="line"><span class="string">      bar += type ? &#x27;=&#x27; : &#x27;x&#x27; unless ing</span></span><br><span class="line"><span class="string">      b = case type</span></span><br><span class="line"><span class="string">          when :install  then &#x27;+&#x27; when :update then &#x27;*&#x27;</span></span><br><span class="line"><span class="string">          when true, nil then &#x27;-&#x27; else</span></span><br><span class="line"><span class="string">            VIM::command(\\\&quot;call add(s:update.errors, &#x27;#&#123;name&#125;&#x27;)\\\&quot;)</span></span><br><span class="line"><span class="string">            &#x27;x&#x27;</span></span><br><span class="line"><span class="string">          end</span></span><br><span class="line"><span class="string">      result =</span></span><br><span class="line"><span class="string">        if type || type.nil?</span></span><br><span class="line"><span class="string">          [\\\&quot;#&#123;b&#125; #&#123;name&#125;: #&#123;result.lines.to_a.last || &#x27;OK&#x27;&#125;\\\&quot;]</span></span><br><span class="line"><span class="string">        elsif result =~ /^Interrupted|^Timeout/</span></span><br><span class="line"><span class="string">          [\\\&quot;#&#123;b&#125; #&#123;name&#125;: #&#123;result&#125;\\\&quot;]</span></span><br><span class="line"><span class="string">        else</span></span><br><span class="line"><span class="string">          [\\\&quot;#&#123;b&#125; #&#123;name&#125;\\\&quot;] + result.lines.map &#123; |l| \\\&quot;    \\\&quot; &lt;&lt; l &#125;</span></span><br><span class="line"><span class="string">        end</span></span><br><span class="line"><span class="string">      if lnum = where.call(name)</span></span><br><span class="line"><span class="string">        \\\$curbuf.delete lnum</span></span><br><span class="line"><span class="string">        lnum = 4 if ing &amp;&amp; lnum &gt; maxy</span></span><br><span class="line"><span class="string">      end</span></span><br><span class="line"><span class="string">      result.each_with_index do |line, offset|</span></span><br><span class="line"><span class="string">        \\\$curbuf.append((lnum || 4) - 1 + offset, line.gsub(/\\\\e\\\\[./, &#x27;&#x27;).chomp)</span></span><br><span class="line"><span class="string">      end</span></span><br><span class="line"><span class="string">      logh.call</span></span><br><span class="line"><span class="string">    end</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  bt = proc &#123; |cmd, name, type, cleanup|</span></span><br><span class="line"><span class="string">    tried = timeout = 0</span></span><br><span class="line"><span class="string">    begin</span></span><br><span class="line"><span class="string">      tried += 1</span></span><br><span class="line"><span class="string">      timeout += limit</span></span><br><span class="line"><span class="string">      fd = nil</span></span><br><span class="line"><span class="string">      data = &#x27;&#x27;</span></span><br><span class="line"><span class="string">      if iswin</span></span><br><span class="line"><span class="string">        Timeout::timeout(timeout) do</span></span><br><span class="line"><span class="string">          tmp = VIM::evaluate(&#x27;tempname()&#x27;)</span></span><br><span class="line"><span class="string">          system(\\\&quot;(#&#123;cmd&#125;) &gt; #&#123;tmp&#125;\\\&quot;)</span></span><br><span class="line"><span class="string">          data = File.read(tmp).chomp</span></span><br><span class="line"><span class="string">          File.unlink tmp rescue nil</span></span><br><span class="line"><span class="string">        end</span></span><br><span class="line"><span class="string">      else</span></span><br><span class="line"><span class="string">        fd = IO.popen(cmd).extend(PlugStream)</span></span><br><span class="line"><span class="string">        first_line = true</span></span><br><span class="line"><span class="string">        log_prob = 1.0 / nthr</span></span><br><span class="line"><span class="string">        while line = Timeout::timeout(timeout) &#123; fd.get_line &#125;</span></span><br><span class="line"><span class="string">          data &lt;&lt; line</span></span><br><span class="line"><span class="string">          log.call name, line.chomp, type if name &amp;&amp; (first_line || rand &lt; log_prob)</span></span><br><span class="line"><span class="string">          first_line = false</span></span><br><span class="line"><span class="string">        end</span></span><br><span class="line"><span class="string">        fd.close</span></span><br><span class="line"><span class="string">      end</span></span><br><span class="line"><span class="string">      [\\\$? == 0, data.chomp]</span></span><br><span class="line"><span class="string">    rescue Timeout::Error, Interrupt =&gt; e</span></span><br><span class="line"><span class="string">      if fd &amp;&amp; !fd.closed?</span></span><br><span class="line"><span class="string">        killall fd.pid</span></span><br><span class="line"><span class="string">        fd.close</span></span><br><span class="line"><span class="string">      end</span></span><br><span class="line"><span class="string">      cleanup.call if cleanup</span></span><br><span class="line"><span class="string">      if e.is_a?(Timeout::Error) &amp;&amp; tried &lt; tries</span></span><br><span class="line"><span class="string">        3.downto(1) do |countdown|</span></span><br><span class="line"><span class="string">          s = countdown &gt; 1 ? &#x27;s&#x27; : &#x27;&#x27;</span></span><br><span class="line"><span class="string">          log.call name, \\\&quot;Timeout. Will retry in #&#123;countdown&#125; second#&#123;s&#125; ...\\\&quot;, type</span></span><br><span class="line"><span class="string">          sleep 1</span></span><br><span class="line"><span class="string">        end</span></span><br><span class="line"><span class="string">        log.call name, &#x27;Retrying ...&#x27;, type</span></span><br><span class="line"><span class="string">        retry</span></span><br><span class="line"><span class="string">      end</span></span><br><span class="line"><span class="string">      [false, e.is_a?(Interrupt) ? \\\&quot;Interrupted!\\\&quot; : \\\&quot;Timeout!\\\&quot;]</span></span><br><span class="line"><span class="string">    end</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  main = Thread.current</span></span><br><span class="line"><span class="string">  threads = []</span></span><br><span class="line"><span class="string">  watcher = Thread.new &#123;</span></span><br><span class="line"><span class="string">    if vim7</span></span><br><span class="line"><span class="string">      while VIM::evaluate(&#x27;getchar(1)&#x27;)</span></span><br><span class="line"><span class="string">        sleep 0.1</span></span><br><span class="line"><span class="string">      end</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">      require &#x27;io/console&#x27; # &gt;= Ruby 1.9</span></span><br><span class="line"><span class="string">      nil until IO.console.getch == 3.chr</span></span><br><span class="line"><span class="string">    end</span></span><br><span class="line"><span class="string">    mtx.synchronize do</span></span><br><span class="line"><span class="string">      running = false</span></span><br><span class="line"><span class="string">      threads.each &#123; |t| t.raise Interrupt &#125; unless vim7</span></span><br><span class="line"><span class="string">    end</span></span><br><span class="line"><span class="string">    threads.each &#123; |t| t.join rescue nil &#125;</span></span><br><span class="line"><span class="string">    main.kill</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  refresh = Thread.new &#123;</span></span><br><span class="line"><span class="string">    while true</span></span><br><span class="line"><span class="string">      mtx.synchronize do</span></span><br><span class="line"><span class="string">        break unless running</span></span><br><span class="line"><span class="string">        VIM::command(&#x27;noautocmd normal! a&#x27;)</span></span><br><span class="line"><span class="string">      end</span></span><br><span class="line"><span class="string">      sleep 0.2</span></span><br><span class="line"><span class="string">    end</span></span><br><span class="line"><span class="string">  &#125; if VIM::evaluate(&#x27;s:mac_gui&#x27;) == 1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  clone_opt = VIM::evaluate(&#x27;s:clone_opt&#x27;).join(&#x27; &#x27;)</span></span><br><span class="line"><span class="string">  progress = VIM::evaluate(&#x27;s:progress_opt(1)&#x27;)</span></span><br><span class="line"><span class="string">  nthr.times do</span></span><br><span class="line"><span class="string">    mtx.synchronize do</span></span><br><span class="line"><span class="string">      threads &lt;&lt; Thread.new &#123;</span></span><br><span class="line"><span class="string">        while pair = take1.call</span></span><br><span class="line"><span class="string">          name = pair.first</span></span><br><span class="line"><span class="string">          dir, uri, tag = pair.last.values_at *%w[dir uri tag]</span></span><br><span class="line"><span class="string">          exists = File.directory? dir</span></span><br><span class="line"><span class="string">          ok, result =</span></span><br><span class="line"><span class="string">            if exists</span></span><br><span class="line"><span class="string">              chdir = \\\&quot;#&#123;cd&#125; #&#123;iswin ? dir : esc(dir)&#125;\\\&quot;</span></span><br><span class="line"><span class="string">              ret, data = bt.call \\\&quot;#&#123;chdir&#125; &amp;&amp; git rev-parse --abbrev-ref HEAD 2&gt;&amp;1 &amp;&amp; git config -f .git/config remote.origin.url\\\&quot;, nil, nil, nil</span></span><br><span class="line"><span class="string">              current_uri = data.lines.to_a.last</span></span><br><span class="line"><span class="string">              if !ret</span></span><br><span class="line"><span class="string">                if data =~ /^Interrupted|^Timeout/</span></span><br><span class="line"><span class="string">                  [false, data]</span></span><br><span class="line"><span class="string">                else</span></span><br><span class="line"><span class="string">                  [false, [data.chomp, \\\&quot;PlugClean required.\\\&quot;].join(\\\$/)]</span></span><br><span class="line"><span class="string">                end</span></span><br><span class="line"><span class="string">              elsif !compare_git_uri(current_uri, uri)</span></span><br><span class="line"><span class="string">                [false, [\\\&quot;Invalid URI: #&#123;current_uri&#125;\\\&quot;,</span></span><br><span class="line"><span class="string">                         \\\&quot;Expected:    #&#123;uri&#125;\\\&quot;,</span></span><br><span class="line"><span class="string">                         \\\&quot;PlugClean required.\\\&quot;].join(\\\$/)]</span></span><br><span class="line"><span class="string">              else</span></span><br><span class="line"><span class="string">                if pull</span></span><br><span class="line"><span class="string">                  log.call name, &#x27;Updating ...&#x27;, :update</span></span><br><span class="line"><span class="string">                  fetch_opt = (tag &amp;&amp; File.exist?(File.join(dir, &#x27;.git/shallow&#x27;))) ? &#x27;--depth 99999999&#x27; : &#x27;&#x27;</span></span><br><span class="line"><span class="string">                  bt.call \\\&quot;#&#123;chdir&#125; &amp;&amp; git fetch #&#123;fetch_opt&#125; #&#123;progress&#125; 2&gt;&amp;1\\\&quot;, name, :update, nil</span></span><br><span class="line"><span class="string">                else</span></span><br><span class="line"><span class="string">                  [true, skip]</span></span><br><span class="line"><span class="string">                end</span></span><br><span class="line"><span class="string">              end</span></span><br><span class="line"><span class="string">            else</span></span><br><span class="line"><span class="string">              d = esc dir.sub(%r&#123;[\\\\\\\\/]+\\\$&#125;, &#x27;&#x27;)</span></span><br><span class="line"><span class="string">              log.call name, &#x27;Installing ...&#x27;, :install</span></span><br><span class="line"><span class="string">              bt.call \\\&quot;git clone #&#123;clone_opt unless tag&#125; #&#123;progress&#125; #&#123;uri&#125; #&#123;d&#125; 2&gt;&amp;1\\\&quot;, name, :install, proc &#123;</span></span><br><span class="line"><span class="string">                FileUtils.rm_rf dir</span></span><br><span class="line"><span class="string">              &#125;</span></span><br><span class="line"><span class="string">            end</span></span><br><span class="line"><span class="string">          mtx.synchronize &#123; VIM::command(\\\&quot;let s:update.new[&#x27;#&#123;name&#125;&#x27;] = 1\\\&quot;) &#125; if !exists &amp;&amp; ok</span></span><br><span class="line"><span class="string">          log.call name, result, ok</span></span><br><span class="line"><span class="string">        end</span></span><br><span class="line"><span class="string">      &#125; if running</span></span><br><span class="line"><span class="string">    end</span></span><br><span class="line"><span class="string">  end</span></span><br><span class="line"><span class="string">  threads.each &#123; |t| t.join rescue nil &#125;</span></span><br><span class="line"><span class="string">  logh.call</span></span><br><span class="line"><span class="string">  refresh.kill if refresh</span></span><br><span class="line"><span class="string">  watcher.kill</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:shellesc_cmd(arg, script)</span></span><br><span class="line"><span class="string">  let escaped = substitute(&#x27;\\\&quot;&#x27;.a:arg.&#x27;\\\&quot;&#x27;, &#x27;[&amp;|&lt;&gt;()@^!\\\&quot;]&#x27;, &#x27;^&amp;&#x27;, &#x27;g&#x27;)</span></span><br><span class="line"><span class="string">  return substitute(escaped, &#x27;%&#x27;, (a:script ? &#x27;%&#x27; : &#x27;^&#x27;) . &#x27;&amp;&#x27;, &#x27;g&#x27;)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:shellesc_ps1(arg)</span></span><br><span class="line"><span class="string">  return \\\&quot;&#x27;\\\&quot;.substitute(escape(a:arg, &#x27;\\\\\\\&quot;&#x27;), \\\&quot;&#x27;\\\&quot;, \\\&quot;&#x27;&#x27;\\\&quot;, &#x27;g&#x27;).\\\&quot;&#x27;\\\&quot;</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:shellesc_sh(arg)</span></span><br><span class="line"><span class="string">  return \\\&quot;&#x27;\\\&quot;.substitute(a:arg, \\\&quot;&#x27;\\\&quot;, \\\&quot;&#x27;\\\\\\\\\\\\\\\\&#x27;&#x27;\\\&quot;, &#x27;g&#x27;).\\\&quot;&#x27;\\\&quot;</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">\\\&quot; Escape the shell argument based on the shell.</span></span><br><span class="line"><span class="string">\\\&quot; Vim and Neovim&#x27;s shellescape() are insufficient.</span></span><br><span class="line"><span class="string">\\\&quot; 1. shellslash determines whether to use single/double quotes.</span></span><br><span class="line"><span class="string">\\\&quot;    Double-quote escaping is fragile for cmd.exe.</span></span><br><span class="line"><span class="string">\\\&quot; 2. It does not work for powershell.</span></span><br><span class="line"><span class="string">\\\&quot; 3. It does not work for *sh shells if the command is executed</span></span><br><span class="line"><span class="string">\\\&quot;    via cmd.exe (ie. cmd.exe /c sh -c command command_args)</span></span><br><span class="line"><span class="string">\\\&quot; 4. It does not support batchfile syntax.</span></span><br><span class="line"><span class="string">\\\&quot;</span></span><br><span class="line"><span class="string">\\\&quot; Accepts an optional dictionary with the following keys:</span></span><br><span class="line"><span class="string">\\\&quot; - shell: same as Vim/Neovim &#x27;shell&#x27; option.</span></span><br><span class="line"><span class="string">\\\&quot;          If unset, fallback to &#x27;cmd.exe&#x27; on Windows or &#x27;sh&#x27;.</span></span><br><span class="line"><span class="string">\\\&quot; - script: If truthy and shell is cmd.exe, escape for batchfile syntax.</span></span><br><span class="line"><span class="string">function! plug#shellescape(arg, ...)</span></span><br><span class="line"><span class="string">  if a:arg =~# &#x27;^[A-Za-z0-9_/:.-]\\\\+\\\$&#x27;</span></span><br><span class="line"><span class="string">    return a:arg</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  let opts = a:0 &gt; 0 &amp;&amp; type(a:1) == s:TYPE.dict ? a:1 : &#123;&#125;</span></span><br><span class="line"><span class="string">  let shell = get(opts, &#x27;shell&#x27;, s:is_win ? &#x27;cmd.exe&#x27; : &#x27;sh&#x27;)</span></span><br><span class="line"><span class="string">  let script = get(opts, &#x27;script&#x27;, 1)</span></span><br><span class="line"><span class="string">  if shell =~# &#x27;cmd\\\\(\\\\.exe\\\\)\\\\?\\\$&#x27;</span></span><br><span class="line"><span class="string">    return s:shellesc_cmd(a:arg, script)</span></span><br><span class="line"><span class="string">  elseif s:is_powershell(shell)</span></span><br><span class="line"><span class="string">    return s:shellesc_ps1(a:arg)</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  return s:shellesc_sh(a:arg)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:glob_dir(path)</span></span><br><span class="line"><span class="string">  return map(filter(s:glob(a:path, &#x27;**&#x27;), &#x27;isdirectory(v:val)&#x27;), &#x27;s:dirpath(v:val)&#x27;)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:progress_bar(line, bar, total)</span></span><br><span class="line"><span class="string">  call setline(a:line, &#x27;[&#x27; . s:lpad(a:bar, a:total) . &#x27;]&#x27;)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:compare_git_uri(a, b)</span></span><br><span class="line"><span class="string">  \\\&quot; See \\\`git help clone&#x27;</span></span><br><span class="line"><span class="string">  \\\&quot; https:// [user@] github.com[:port] / junegunn/vim-plug [.git]</span></span><br><span class="line"><span class="string">  \\\&quot;          [git@]  github.com[:port] : junegunn/vim-plug [.git]</span></span><br><span class="line"><span class="string">  \\\&quot; file://                            / junegunn/vim-plug        [/]</span></span><br><span class="line"><span class="string">  \\\&quot;                                    / junegunn/vim-plug        [/]</span></span><br><span class="line"><span class="string">  let pat = &#x27;^\\\\%(\\\\w\\\\+://\\\\)\\\\=&#x27;.&#x27;\\\\%([^@/]*@\\\\)\\\\=&#x27;.&#x27;\\\\([^:/]*\\\\%(:[0-9]*\\\\)\\\\=\\\\)&#x27;.&#x27;[:/]&#x27;.&#x27;\\\\(.\\\\&#123;-&#125;\\\\)&#x27;.&#x27;\\\\%(\\\\.git\\\\)\\\\=/\\\\?\\\$&#x27;</span></span><br><span class="line"><span class="string">  let ma = matchlist(a:a, pat)</span></span><br><span class="line"><span class="string">  let mb = matchlist(a:b, pat)</span></span><br><span class="line"><span class="string">  return ma[1:2] ==# mb[1:2]</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:format_message(bullet, name, message)</span></span><br><span class="line"><span class="string">  if a:bullet != &#x27;x&#x27;</span></span><br><span class="line"><span class="string">    return [printf(&#x27;%s %s: %s&#x27;, a:bullet, a:name, s:lastline(a:message))]</span></span><br><span class="line"><span class="string">  else</span></span><br><span class="line"><span class="string">    let lines = map(s:lines(a:message), &#x27;\\\&quot;    \\\&quot;.v:val&#x27;)</span></span><br><span class="line"><span class="string">    return extend([printf(&#x27;x %s:&#x27;, a:name)], lines)</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:with_cd(cmd, dir, ...)</span></span><br><span class="line"><span class="string">  let script = a:0 &gt; 0 ? a:1 : 1</span></span><br><span class="line"><span class="string">  return printf(&#x27;cd%s %s &amp;&amp; %s&#x27;, s:is_win ? &#x27; /d&#x27; : &#x27;&#x27;, plug#shellescape(a:dir, &#123;&#x27;script&#x27;: script&#125;), a:cmd)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:system(cmd, ...)</span></span><br><span class="line"><span class="string">  let batchfile = &#x27;&#x27;</span></span><br><span class="line"><span class="string">  try</span></span><br><span class="line"><span class="string">    let [sh, shellcmdflag, shrd] = s:chsh(1)</span></span><br><span class="line"><span class="string">    if type(a:cmd) == s:TYPE.list</span></span><br><span class="line"><span class="string">      \\\&quot; Neovim&#x27;s system() supports list argument to bypass the shell</span></span><br><span class="line"><span class="string">      \\\&quot; but it cannot set the working directory for the command.</span></span><br><span class="line"><span class="string">      \\\&quot; Assume that the command does not rely on the shell.</span></span><br><span class="line"><span class="string">      if has(&#x27;nvim&#x27;) &amp;&amp; a:0 == 0</span></span><br><span class="line"><span class="string">        return system(a:cmd)</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">      let cmd = join(map(copy(a:cmd), &#x27;plug#shellescape(v:val, &#123;\\\&quot;shell\\\&quot;: &amp;shell, \\\&quot;script\\\&quot;: 0&#125;)&#x27;))</span></span><br><span class="line"><span class="string">      if s:is_powershell(&amp;shell)</span></span><br><span class="line"><span class="string">        let cmd = &#x27;&amp; &#x27; . cmd</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">      let cmd = a:cmd</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    if a:0 &gt; 0</span></span><br><span class="line"><span class="string">      let cmd = s:with_cd(cmd, a:1, type(a:cmd) != s:TYPE.list)</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    if s:is_win &amp;&amp; type(a:cmd) != s:TYPE.list</span></span><br><span class="line"><span class="string">      let [batchfile, cmd] = s:batchfile(cmd)</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    return system(cmd)</span></span><br><span class="line"><span class="string">  finally</span></span><br><span class="line"><span class="string">    let [&amp;shell, &amp;shellcmdflag, &amp;shellredir] = [sh, shellcmdflag, shrd]</span></span><br><span class="line"><span class="string">    if s:is_win &amp;&amp; filereadable(batchfile)</span></span><br><span class="line"><span class="string">      call delete(batchfile)</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">  endtry</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:system_chomp(...)</span></span><br><span class="line"><span class="string">  let ret = call(&#x27;s:system&#x27;, a:000)</span></span><br><span class="line"><span class="string">  return v:shell_error ? &#x27;&#x27; : substitute(ret, &#x27;\\\\n\\\$&#x27;, &#x27;&#x27;, &#x27;&#x27;)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:git_validate(spec, check_branch)</span></span><br><span class="line"><span class="string">  let err = &#x27;&#x27;</span></span><br><span class="line"><span class="string">  if isdirectory(a:spec.dir)</span></span><br><span class="line"><span class="string">    let result = [s:git_local_branch(a:spec.dir), s:git_origin_url(a:spec.dir)]</span></span><br><span class="line"><span class="string">    let remote = result[-1]</span></span><br><span class="line"><span class="string">    if empty(remote)</span></span><br><span class="line"><span class="string">      let err = join([remote, &#x27;PlugClean required.&#x27;], \\\&quot;\\\\n\\\&quot;)</span></span><br><span class="line"><span class="string">    elseif !s:compare_git_uri(remote, a:spec.uri)</span></span><br><span class="line"><span class="string">      let err = join([&#x27;Invalid URI: &#x27;.remote,</span></span><br><span class="line"><span class="string">                    \\\\ &#x27;Expected:    &#x27;.a:spec.uri,</span></span><br><span class="line"><span class="string">                    \\\\ &#x27;PlugClean required.&#x27;], \\\&quot;\\\\n\\\&quot;)</span></span><br><span class="line"><span class="string">    elseif a:check_branch &amp;&amp; has_key(a:spec, &#x27;commit&#x27;)</span></span><br><span class="line"><span class="string">      let sha = s:git_revision(a:spec.dir)</span></span><br><span class="line"><span class="string">      if empty(sha)</span></span><br><span class="line"><span class="string">        let err = join(add(result, &#x27;PlugClean required.&#x27;), \\\&quot;\\\\n\\\&quot;)</span></span><br><span class="line"><span class="string">      elseif !s:hash_match(sha, a:spec.commit)</span></span><br><span class="line"><span class="string">        let err = join([printf(&#x27;Invalid HEAD (expected: %s, actual: %s)&#x27;,</span></span><br><span class="line"><span class="string">                              \\\\ a:spec.commit[:6], sha[:6]),</span></span><br><span class="line"><span class="string">                      \\\\ &#x27;PlugUpdate required.&#x27;], \\\&quot;\\\\n\\\&quot;)</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">    elseif a:check_branch</span></span><br><span class="line"><span class="string">      let current_branch = result[0]</span></span><br><span class="line"><span class="string">      \\\&quot; Check tag</span></span><br><span class="line"><span class="string">      let origin_branch = s:git_origin_branch(a:spec)</span></span><br><span class="line"><span class="string">      if has_key(a:spec, &#x27;tag&#x27;)</span></span><br><span class="line"><span class="string">        let tag = s:system_chomp(&#x27;git describe --exact-match --tags HEAD 2&gt;&amp;1&#x27;, a:spec.dir)</span></span><br><span class="line"><span class="string">        if a:spec.tag !=# tag &amp;&amp; a:spec.tag !~ &#x27;\\\\*&#x27;</span></span><br><span class="line"><span class="string">          let err = printf(&#x27;Invalid tag: %s (expected: %s). Try PlugUpdate.&#x27;,</span></span><br><span class="line"><span class="string">                \\\\ (empty(tag) ? &#x27;N/A&#x27; : tag), a:spec.tag)</span></span><br><span class="line"><span class="string">        endif</span></span><br><span class="line"><span class="string">      \\\&quot; Check branch</span></span><br><span class="line"><span class="string">      elseif origin_branch !=# current_branch</span></span><br><span class="line"><span class="string">        let err = printf(&#x27;Invalid branch: %s (expected: %s). Try PlugUpdate.&#x27;,</span></span><br><span class="line"><span class="string">              \\\\ current_branch, origin_branch)</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">      if empty(err)</span></span><br><span class="line"><span class="string">        let [ahead, behind] = split(s:lastline(s:system([</span></span><br><span class="line"><span class="string">        \\\\ &#x27;git&#x27;, &#x27;rev-list&#x27;, &#x27;--count&#x27;, &#x27;--left-right&#x27;,</span></span><br><span class="line"><span class="string">        \\\\ printf(&#x27;HEAD...origin/%s&#x27;, origin_branch)</span></span><br><span class="line"><span class="string">        \\\\ ], a:spec.dir)), &#x27;\\\\t&#x27;)</span></span><br><span class="line"><span class="string">        if !v:shell_error &amp;&amp; ahead</span></span><br><span class="line"><span class="string">          if behind</span></span><br><span class="line"><span class="string">            \\\&quot; Only mention PlugClean if diverged, otherwise it&#x27;s likely to be</span></span><br><span class="line"><span class="string">            \\\&quot; pushable (and probably not that messed up).</span></span><br><span class="line"><span class="string">            let err = printf(</span></span><br><span class="line"><span class="string">                  \\\\ \\\&quot;Diverged from origin/%s (%d commit(s) ahead and %d commit(s) behind!\\\\n\\\&quot;</span></span><br><span class="line"><span class="string">                  \\\\ .&#x27;Backup local changes and run PlugClean and PlugUpdate to reinstall it.&#x27;, origin_branch, ahead, behind)</span></span><br><span class="line"><span class="string">          else</span></span><br><span class="line"><span class="string">            let err = printf(\\\&quot;Ahead of origin/%s by %d commit(s).\\\\n\\\&quot;</span></span><br><span class="line"><span class="string">                  \\\\ .&#x27;Cannot update until local changes are pushed.&#x27;,</span></span><br><span class="line"><span class="string">                  \\\\ origin_branch, ahead)</span></span><br><span class="line"><span class="string">          endif</span></span><br><span class="line"><span class="string">        endif</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">  else</span></span><br><span class="line"><span class="string">    let err = &#x27;Not found&#x27;</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  return [err, err =~# &#x27;PlugClean&#x27;]</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:rm_rf(dir)</span></span><br><span class="line"><span class="string">  if isdirectory(a:dir)</span></span><br><span class="line"><span class="string">    return s:system(s:is_win</span></span><br><span class="line"><span class="string">    \\\\ ? &#x27;rmdir /S /Q &#x27;.plug#shellescape(a:dir)</span></span><br><span class="line"><span class="string">    \\\\ : [&#x27;rm&#x27;, &#x27;-rf&#x27;, a:dir])</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:clean(force)</span></span><br><span class="line"><span class="string">  call s:prepare()</span></span><br><span class="line"><span class="string">  call append(0, &#x27;Searching for invalid plugins in &#x27;.g:plug_home)</span></span><br><span class="line"><span class="string">  call append(1, &#x27;&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  \\\&quot; List of valid directories</span></span><br><span class="line"><span class="string">  let dirs = []</span></span><br><span class="line"><span class="string">  let errs = &#123;&#125;</span></span><br><span class="line"><span class="string">  let [cnt, total] = [0, len(g:plugs)]</span></span><br><span class="line"><span class="string">  for [name, spec] in items(g:plugs)</span></span><br><span class="line"><span class="string">    if !s:is_managed(name)</span></span><br><span class="line"><span class="string">      call add(dirs, spec.dir)</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">      let [err, clean] = s:git_validate(spec, 1)</span></span><br><span class="line"><span class="string">      if clean</span></span><br><span class="line"><span class="string">        let errs[spec.dir] = s:lines(err)[0]</span></span><br><span class="line"><span class="string">      else</span></span><br><span class="line"><span class="string">        call add(dirs, spec.dir)</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    let cnt += 1</span></span><br><span class="line"><span class="string">    call s:progress_bar(2, repeat(&#x27;=&#x27;, cnt), total)</span></span><br><span class="line"><span class="string">    normal! 2G</span></span><br><span class="line"><span class="string">    redraw</span></span><br><span class="line"><span class="string">  endfor</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  let allowed = &#123;&#125;</span></span><br><span class="line"><span class="string">  for dir in dirs</span></span><br><span class="line"><span class="string">    let allowed[s:dirpath(s:plug_fnamemodify(dir, &#x27;:h:h&#x27;))] = 1</span></span><br><span class="line"><span class="string">    let allowed[dir] = 1</span></span><br><span class="line"><span class="string">    for child in s:glob_dir(dir)</span></span><br><span class="line"><span class="string">      let allowed[child] = 1</span></span><br><span class="line"><span class="string">    endfor</span></span><br><span class="line"><span class="string">  endfor</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  let todo = []</span></span><br><span class="line"><span class="string">  let found = sort(s:glob_dir(g:plug_home))</span></span><br><span class="line"><span class="string">  while !empty(found)</span></span><br><span class="line"><span class="string">    let f = remove(found, 0)</span></span><br><span class="line"><span class="string">    if !has_key(allowed, f) &amp;&amp; isdirectory(f)</span></span><br><span class="line"><span class="string">      call add(todo, f)</span></span><br><span class="line"><span class="string">      call append(line(&#x27;\\\$&#x27;), &#x27;- &#x27; . f)</span></span><br><span class="line"><span class="string">      if has_key(errs, f)</span></span><br><span class="line"><span class="string">        call append(line(&#x27;\\\$&#x27;), &#x27;    &#x27; . errs[f])</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">      let found = filter(found, &#x27;stridx(v:val, f) != 0&#x27;)</span></span><br><span class="line"><span class="string">    end</span></span><br><span class="line"><span class="string">  endwhile</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  4</span></span><br><span class="line"><span class="string">  redraw</span></span><br><span class="line"><span class="string">  if empty(todo)</span></span><br><span class="line"><span class="string">    call append(line(&#x27;\\\$&#x27;), &#x27;Already clean.&#x27;)</span></span><br><span class="line"><span class="string">  else</span></span><br><span class="line"><span class="string">    let s:clean_count = 0</span></span><br><span class="line"><span class="string">    call append(3, [&#x27;Directories to delete:&#x27;, &#x27;&#x27;])</span></span><br><span class="line"><span class="string">    redraw!</span></span><br><span class="line"><span class="string">    if a:force || s:ask_no_interrupt(&#x27;Delete all directories?&#x27;)</span></span><br><span class="line"><span class="string">      call s:delete([6, line(&#x27;\\\$&#x27;)], 1)</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">      call setline(4, &#x27;Cancelled.&#x27;)</span></span><br><span class="line"><span class="string">      nnoremap &lt;silent&gt; &lt;buffer&gt; d :set opfunc=&lt;sid&gt;delete_op&lt;cr&gt;g@</span></span><br><span class="line"><span class="string">      nmap     &lt;silent&gt; &lt;buffer&gt; dd d_</span></span><br><span class="line"><span class="string">      xnoremap &lt;silent&gt; &lt;buffer&gt; d :&lt;c-u&gt;call &lt;sid&gt;delete_op(visualmode(), 1)&lt;cr&gt;</span></span><br><span class="line"><span class="string">      echo &#x27;Delete the lines (d&#123;motion&#125;) to delete the corresponding directories&#x27;</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  4</span></span><br><span class="line"><span class="string">  setlocal nomodifiable</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:delete_op(type, ...)</span></span><br><span class="line"><span class="string">  call s:delete(a:0 ? [line(\\\&quot;&#x27;&lt;\\\&quot;), line(\\\&quot;&#x27;&gt;\\\&quot;)] : [line(\\\&quot;&#x27;[\\\&quot;), line(\\\&quot;&#x27;]\\\&quot;)], 0)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:delete(range, force)</span></span><br><span class="line"><span class="string">  let [l1, l2] = a:range</span></span><br><span class="line"><span class="string">  let force = a:force</span></span><br><span class="line"><span class="string">  let err_count = 0</span></span><br><span class="line"><span class="string">  while l1 &lt;= l2</span></span><br><span class="line"><span class="string">    let line = getline(l1)</span></span><br><span class="line"><span class="string">    if line =~ &#x27;^- &#x27; &amp;&amp; isdirectory(line[2:])</span></span><br><span class="line"><span class="string">      execute l1</span></span><br><span class="line"><span class="string">      redraw!</span></span><br><span class="line"><span class="string">      let answer = force ? 1 : s:ask(&#x27;Delete &#x27;.line[2:].&#x27;?&#x27;, 1)</span></span><br><span class="line"><span class="string">      let force = force || answer &gt; 1</span></span><br><span class="line"><span class="string">      if answer</span></span><br><span class="line"><span class="string">        let err = s:rm_rf(line[2:])</span></span><br><span class="line"><span class="string">        setlocal modifiable</span></span><br><span class="line"><span class="string">        if empty(err)</span></span><br><span class="line"><span class="string">          call setline(l1, &#x27;~&#x27;.line[1:])</span></span><br><span class="line"><span class="string">          let s:clean_count += 1</span></span><br><span class="line"><span class="string">        else</span></span><br><span class="line"><span class="string">          delete _</span></span><br><span class="line"><span class="string">          call append(l1 - 1, s:format_message(&#x27;x&#x27;, line[1:], err))</span></span><br><span class="line"><span class="string">          let l2 += len(s:lines(err))</span></span><br><span class="line"><span class="string">          let err_count += 1</span></span><br><span class="line"><span class="string">        endif</span></span><br><span class="line"><span class="string">        let msg = printf(&#x27;Removed %d directories.&#x27;, s:clean_count)</span></span><br><span class="line"><span class="string">        if err_count &gt; 0</span></span><br><span class="line"><span class="string">          let msg .= printf(&#x27; Failed to remove %d directories.&#x27;, err_count)</span></span><br><span class="line"><span class="string">        endif</span></span><br><span class="line"><span class="string">        call setline(4, msg)</span></span><br><span class="line"><span class="string">        setlocal nomodifiable</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    let l1 += 1</span></span><br><span class="line"><span class="string">  endwhile</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:upgrade()</span></span><br><span class="line"><span class="string">  echo &#x27;Downloading the latest version of vim-plug&#x27;</span></span><br><span class="line"><span class="string">  redraw</span></span><br><span class="line"><span class="string">  let tmp = s:plug_tempname()</span></span><br><span class="line"><span class="string">  let new = tmp . &#x27;/plug.vim&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  try</span></span><br><span class="line"><span class="string">    let out = s:system([&#x27;git&#x27;, &#x27;clone&#x27;, &#x27;--depth&#x27;, &#x27;1&#x27;, s:plug_src, tmp])</span></span><br><span class="line"><span class="string">    if v:shell_error</span></span><br><span class="line"><span class="string">      return s:err(&#x27;Error upgrading vim-plug: &#x27;. out)</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    if readfile(s:me) ==# readfile(new)</span></span><br><span class="line"><span class="string">      echo &#x27;vim-plug is already up-to-date&#x27;</span></span><br><span class="line"><span class="string">      return 0</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">      call rename(s:me, s:me . &#x27;.old&#x27;)</span></span><br><span class="line"><span class="string">      call rename(new, s:me)</span></span><br><span class="line"><span class="string">      unlet g:loaded_plug</span></span><br><span class="line"><span class="string">      echo &#x27;vim-plug has been upgraded&#x27;</span></span><br><span class="line"><span class="string">      return 1</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">  finally</span></span><br><span class="line"><span class="string">    silent! call s:rm_rf(tmp)</span></span><br><span class="line"><span class="string">  endtry</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:upgrade_specs()</span></span><br><span class="line"><span class="string">  for spec in values(g:plugs)</span></span><br><span class="line"><span class="string">    let spec.frozen = get(spec, &#x27;frozen&#x27;, 0)</span></span><br><span class="line"><span class="string">  endfor</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:status()</span></span><br><span class="line"><span class="string">  call s:prepare()</span></span><br><span class="line"><span class="string">  call append(0, &#x27;Checking plugins&#x27;)</span></span><br><span class="line"><span class="string">  call append(1, &#x27;&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  let ecnt = 0</span></span><br><span class="line"><span class="string">  let unloaded = 0</span></span><br><span class="line"><span class="string">  let [cnt, total] = [0, len(g:plugs)]</span></span><br><span class="line"><span class="string">  for [name, spec] in items(g:plugs)</span></span><br><span class="line"><span class="string">    let is_dir = isdirectory(spec.dir)</span></span><br><span class="line"><span class="string">    if has_key(spec, &#x27;uri&#x27;)</span></span><br><span class="line"><span class="string">      if is_dir</span></span><br><span class="line"><span class="string">        let [err, _] = s:git_validate(spec, 1)</span></span><br><span class="line"><span class="string">        let [valid, msg] = [empty(err), empty(err) ? &#x27;OK&#x27; : err]</span></span><br><span class="line"><span class="string">      else</span></span><br><span class="line"><span class="string">        let [valid, msg] = [0, &#x27;Not found. Try PlugInstall.&#x27;]</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">      if is_dir</span></span><br><span class="line"><span class="string">        let [valid, msg] = [1, &#x27;OK&#x27;]</span></span><br><span class="line"><span class="string">      else</span></span><br><span class="line"><span class="string">        let [valid, msg] = [0, &#x27;Not found.&#x27;]</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    let cnt += 1</span></span><br><span class="line"><span class="string">    let ecnt += !valid</span></span><br><span class="line"><span class="string">    \\\&quot; \\\`s:loaded\\\` entry can be missing if PlugUpgraded</span></span><br><span class="line"><span class="string">    if is_dir &amp;&amp; get(s:loaded, name, -1) == 0</span></span><br><span class="line"><span class="string">      let unloaded = 1</span></span><br><span class="line"><span class="string">      let msg .= &#x27; (not loaded)&#x27;</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    call s:progress_bar(2, repeat(&#x27;=&#x27;, cnt), total)</span></span><br><span class="line"><span class="string">    call append(3, s:format_message(valid ? &#x27;-&#x27; : &#x27;x&#x27;, name, msg))</span></span><br><span class="line"><span class="string">    normal! 2G</span></span><br><span class="line"><span class="string">    redraw</span></span><br><span class="line"><span class="string">  endfor</span></span><br><span class="line"><span class="string">  call setline(1, &#x27;Finished. &#x27;.ecnt.&#x27; error(s).&#x27;)</span></span><br><span class="line"><span class="string">  normal! gg</span></span><br><span class="line"><span class="string">  setlocal nomodifiable</span></span><br><span class="line"><span class="string">  if unloaded</span></span><br><span class="line"><span class="string">    echo \\\&quot;Press &#x27;L&#x27; on each line to load plugin, or &#x27;U&#x27; to update\\\&quot;</span></span><br><span class="line"><span class="string">    nnoremap &lt;silent&gt; &lt;buffer&gt; L :call &lt;SID&gt;status_load(line(&#x27;.&#x27;))&lt;cr&gt;</span></span><br><span class="line"><span class="string">    xnoremap &lt;silent&gt; &lt;buffer&gt; L :call &lt;SID&gt;status_load(line(&#x27;.&#x27;))&lt;cr&gt;</span></span><br><span class="line"><span class="string">  end</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:extract_name(str, prefix, suffix)</span></span><br><span class="line"><span class="string">  return matchstr(a:str, &#x27;^&#x27;.a:prefix.&#x27; \\\\zs[^:]\\\\+\\\\ze:.*&#x27;.a:suffix.&#x27;\\\$&#x27;)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:status_load(lnum)</span></span><br><span class="line"><span class="string">  let line = getline(a:lnum)</span></span><br><span class="line"><span class="string">  let name = s:extract_name(line, &#x27;-&#x27;, &#x27;(not loaded)&#x27;)</span></span><br><span class="line"><span class="string">  if !empty(name)</span></span><br><span class="line"><span class="string">    call plug#load(name)</span></span><br><span class="line"><span class="string">    setlocal modifiable</span></span><br><span class="line"><span class="string">    call setline(a:lnum, substitute(line, &#x27; (not loaded)\\\$&#x27;, &#x27;&#x27;, &#x27;&#x27;))</span></span><br><span class="line"><span class="string">    setlocal nomodifiable</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:status_update() range</span></span><br><span class="line"><span class="string">  let lines = getline(a:firstline, a:lastline)</span></span><br><span class="line"><span class="string">  let names = filter(map(lines, &#x27;s:extract_name(v:val, \\\&quot;[x-]\\\&quot;, \\\&quot;\\\&quot;)&#x27;), &#x27;!empty(v:val)&#x27;)</span></span><br><span class="line"><span class="string">  if !empty(names)</span></span><br><span class="line"><span class="string">    echo</span></span><br><span class="line"><span class="string">    execute &#x27;PlugUpdate&#x27; join(names)</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:is_preview_window_open()</span></span><br><span class="line"><span class="string">  silent! wincmd P</span></span><br><span class="line"><span class="string">  if &amp;previewwindow</span></span><br><span class="line"><span class="string">    wincmd p</span></span><br><span class="line"><span class="string">    return 1</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:find_name(lnum)</span></span><br><span class="line"><span class="string">  for lnum in reverse(range(1, a:lnum))</span></span><br><span class="line"><span class="string">    let line = getline(lnum)</span></span><br><span class="line"><span class="string">    if empty(line)</span></span><br><span class="line"><span class="string">      return &#x27;&#x27;</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    let name = s:extract_name(line, &#x27;-&#x27;, &#x27;&#x27;)</span></span><br><span class="line"><span class="string">    if !empty(name)</span></span><br><span class="line"><span class="string">      return name</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">  endfor</span></span><br><span class="line"><span class="string">  return &#x27;&#x27;</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:preview_commit()</span></span><br><span class="line"><span class="string">  if b:plug_preview &lt; 0</span></span><br><span class="line"><span class="string">    let b:plug_preview = !s:is_preview_window_open()</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  let sha = matchstr(getline(&#x27;.&#x27;), &#x27;^  \\\\X*\\\\zs[0-9a-f]\\\\&#123;7,9&#125;&#x27;)</span></span><br><span class="line"><span class="string">  if empty(sha)</span></span><br><span class="line"><span class="string">    let name = matchstr(getline(&#x27;.&#x27;), &#x27;^- \\\\zs[^:]*\\\\ze:\\\$&#x27;)</span></span><br><span class="line"><span class="string">    if empty(name)</span></span><br><span class="line"><span class="string">      return</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    let title = &#x27;HEAD@&#123;1&#125;..&#x27;</span></span><br><span class="line"><span class="string">    let command = &#x27;git diff --no-color HEAD@&#123;1&#125;&#x27;</span></span><br><span class="line"><span class="string">  else</span></span><br><span class="line"><span class="string">    let title = sha</span></span><br><span class="line"><span class="string">    let command = &#x27;git show --no-color --pretty=medium &#x27;.sha</span></span><br><span class="line"><span class="string">    let name = s:find_name(line(&#x27;.&#x27;))</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  if empty(name) || !has_key(g:plugs, name) || !isdirectory(g:plugs[name].dir)</span></span><br><span class="line"><span class="string">    return</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  if exists(&#x27;g:plug_pwindow&#x27;) &amp;&amp; !s:is_preview_window_open()</span></span><br><span class="line"><span class="string">    execute g:plug_pwindow</span></span><br><span class="line"><span class="string">    execute &#x27;e&#x27; title</span></span><br><span class="line"><span class="string">  else</span></span><br><span class="line"><span class="string">    execute &#x27;pedit&#x27; title</span></span><br><span class="line"><span class="string">    wincmd P</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  setlocal previewwindow filetype=git buftype=nofile bufhidden=wipe nobuflisted modifiable</span></span><br><span class="line"><span class="string">  let batchfile = &#x27;&#x27;</span></span><br><span class="line"><span class="string">  try</span></span><br><span class="line"><span class="string">    let [sh, shellcmdflag, shrd] = s:chsh(1)</span></span><br><span class="line"><span class="string">    let cmd = &#x27;cd &#x27;.plug#shellescape(g:plugs[name].dir).&#x27; &amp;&amp; &#x27;.command</span></span><br><span class="line"><span class="string">    if s:is_win</span></span><br><span class="line"><span class="string">      let [batchfile, cmd] = s:batchfile(cmd)</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    execute &#x27;silent %!&#x27; cmd</span></span><br><span class="line"><span class="string">  finally</span></span><br><span class="line"><span class="string">    let [&amp;shell, &amp;shellcmdflag, &amp;shellredir] = [sh, shellcmdflag, shrd]</span></span><br><span class="line"><span class="string">    if s:is_win &amp;&amp; filereadable(batchfile)</span></span><br><span class="line"><span class="string">      call delete(batchfile)</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">  endtry</span></span><br><span class="line"><span class="string">  setlocal nomodifiable</span></span><br><span class="line"><span class="string">  nnoremap &lt;silent&gt; &lt;buffer&gt; q :q&lt;cr&gt;</span></span><br><span class="line"><span class="string">  wincmd p</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:section(flags)</span></span><br><span class="line"><span class="string">  call search(&#x27;\\\\(^[x-] \\\\)\\\\@&lt;=[^:]\\\\+:&#x27;, a:flags)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:format_git_log(line)</span></span><br><span class="line"><span class="string">  let indent = &#x27;  &#x27;</span></span><br><span class="line"><span class="string">  let tokens = split(a:line, nr2char(1))</span></span><br><span class="line"><span class="string">  if len(tokens) != 5</span></span><br><span class="line"><span class="string">    return indent.substitute(a:line, &#x27;\\\\s*\\\$&#x27;, &#x27;&#x27;, &#x27;&#x27;)</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  let [graph, sha, refs, subject, date] = tokens</span></span><br><span class="line"><span class="string">  let tag = matchstr(refs, &#x27;tag: [^,)]\\\\+&#x27;)</span></span><br><span class="line"><span class="string">  let tag = empty(tag) ? &#x27; &#x27; : &#x27; (&#x27;.tag.&#x27;) &#x27;</span></span><br><span class="line"><span class="string">  return printf(&#x27;%s%s%s%s%s (%s)&#x27;, indent, graph, sha, tag, subject, date)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:append_ul(lnum, text)</span></span><br><span class="line"><span class="string">  call append(a:lnum, [&#x27;&#x27;, a:text, repeat(&#x27;-&#x27;, len(a:text))])</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:diff()</span></span><br><span class="line"><span class="string">  call s:prepare()</span></span><br><span class="line"><span class="string">  call append(0, [&#x27;Collecting changes ...&#x27;, &#x27;&#x27;])</span></span><br><span class="line"><span class="string">  let cnts = [0, 0]</span></span><br><span class="line"><span class="string">  let bar = &#x27;&#x27;</span></span><br><span class="line"><span class="string">  let total = filter(copy(g:plugs), &#x27;s:is_managed(v:key) &amp;&amp; isdirectory(v:val.dir)&#x27;)</span></span><br><span class="line"><span class="string">  call s:progress_bar(2, bar, len(total))</span></span><br><span class="line"><span class="string">  for origin in [1, 0]</span></span><br><span class="line"><span class="string">    let plugs = reverse(sort(items(filter(copy(total), (origin ? &#x27;&#x27; : &#x27;!&#x27;).&#x27;(has_key(v:val, \\\&quot;commit\\\&quot;) || has_key(v:val, \\\&quot;tag\\\&quot;))&#x27;))))</span></span><br><span class="line"><span class="string">    if empty(plugs)</span></span><br><span class="line"><span class="string">      continue</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    call s:append_ul(2, origin ? &#x27;Pending updates:&#x27; : &#x27;Last update:&#x27;)</span></span><br><span class="line"><span class="string">    for [k, v] in plugs</span></span><br><span class="line"><span class="string">      let branch = s:git_origin_branch(v)</span></span><br><span class="line"><span class="string">      if len(branch)</span></span><br><span class="line"><span class="string">        let range = origin ? &#x27;..origin/&#x27;.branch : &#x27;HEAD@&#123;1&#125;..&#x27;</span></span><br><span class="line"><span class="string">        let cmd = [&#x27;git&#x27;, &#x27;log&#x27;, &#x27;--graph&#x27;, &#x27;--color=never&#x27;]</span></span><br><span class="line"><span class="string">        if s:git_version_requirement(2, 10, 0)</span></span><br><span class="line"><span class="string">          call add(cmd, &#x27;--no-show-signature&#x27;)</span></span><br><span class="line"><span class="string">        endif</span></span><br><span class="line"><span class="string">        call extend(cmd, [&#x27;--pretty=format:%x01%h%x01%d%x01%s%x01%cr&#x27;, range])</span></span><br><span class="line"><span class="string">        if has_key(v, &#x27;rtp&#x27;)</span></span><br><span class="line"><span class="string">          call extend(cmd, [&#x27;--&#x27;, v.rtp])</span></span><br><span class="line"><span class="string">        endif</span></span><br><span class="line"><span class="string">        let diff = s:system_chomp(cmd, v.dir)</span></span><br><span class="line"><span class="string">        if !empty(diff)</span></span><br><span class="line"><span class="string">          let ref = has_key(v, &#x27;tag&#x27;) ? (&#x27; (tag: &#x27;.v.tag.&#x27;)&#x27;) : has_key(v, &#x27;commit&#x27;) ? (&#x27; &#x27;.v.commit) : &#x27;&#x27;</span></span><br><span class="line"><span class="string">          call append(5, extend([&#x27;&#x27;, &#x27;- &#x27;.k.&#x27;:&#x27;.ref], map(s:lines(diff), &#x27;s:format_git_log(v:val)&#x27;)))</span></span><br><span class="line"><span class="string">          let cnts[origin] += 1</span></span><br><span class="line"><span class="string">        endif</span></span><br><span class="line"><span class="string">      endif</span></span><br><span class="line"><span class="string">      let bar .= &#x27;=&#x27;</span></span><br><span class="line"><span class="string">      call s:progress_bar(2, bar, len(total))</span></span><br><span class="line"><span class="string">      normal! 2G</span></span><br><span class="line"><span class="string">      redraw</span></span><br><span class="line"><span class="string">    endfor</span></span><br><span class="line"><span class="string">    if !cnts[origin]</span></span><br><span class="line"><span class="string">      call append(5, [&#x27;&#x27;, &#x27;N/A&#x27;])</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">  endfor</span></span><br><span class="line"><span class="string">  call setline(1, printf(&#x27;%d plugin(s) updated.&#x27;, cnts[0])</span></span><br><span class="line"><span class="string">        \\\\ . (cnts[1] ? printf(&#x27; %d plugin(s) have pending updates.&#x27;, cnts[1]) : &#x27;&#x27;))</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  if cnts[0] || cnts[1]</span></span><br><span class="line"><span class="string">    nnoremap &lt;silent&gt; &lt;buffer&gt; &lt;plug&gt;(plug-preview) :silent! call &lt;SID&gt;preview_commit()&lt;cr&gt;</span></span><br><span class="line"><span class="string">    if empty(maparg(\\\&quot;\\\\&lt;cr&gt;\\\&quot;, &#x27;n&#x27;))</span></span><br><span class="line"><span class="string">      nmap &lt;buffer&gt; &lt;cr&gt; &lt;plug&gt;(plug-preview)</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    if empty(maparg(&#x27;o&#x27;, &#x27;n&#x27;))</span></span><br><span class="line"><span class="string">      nmap &lt;buffer&gt; o &lt;plug&gt;(plug-preview)</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  if cnts[0]</span></span><br><span class="line"><span class="string">    nnoremap &lt;silent&gt; &lt;buffer&gt; X :call &lt;SID&gt;revert()&lt;cr&gt;</span></span><br><span class="line"><span class="string">    echo \\\&quot;Press &#x27;X&#x27; on each block to revert the update\\\&quot;</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">  normal! gg</span></span><br><span class="line"><span class="string">  setlocal nomodifiable</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:revert()</span></span><br><span class="line"><span class="string">  if search(&#x27;^Pending updates&#x27;, &#x27;bnW&#x27;)</span></span><br><span class="line"><span class="string">    return</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  let name = s:find_name(line(&#x27;.&#x27;))</span></span><br><span class="line"><span class="string">  if empty(name) || !has_key(g:plugs, name) ||</span></span><br><span class="line"><span class="string">    \\\\ input(printf(&#x27;Revert the update of %s? (y/N) &#x27;, name)) !~? &#x27;^y&#x27;</span></span><br><span class="line"><span class="string">    return</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  call s:system(&#x27;git reset --hard HEAD@&#123;1&#125; &amp;&amp; git checkout &#x27;.plug#shellescape(g:plugs[name].branch).&#x27; --&#x27;, g:plugs[name].dir)</span></span><br><span class="line"><span class="string">  setlocal modifiable</span></span><br><span class="line"><span class="string">  normal! \\\&quot;_dap</span></span><br><span class="line"><span class="string">  setlocal nomodifiable</span></span><br><span class="line"><span class="string">  echo &#x27;Reverted&#x27;</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:snapshot(force, ...) abort</span></span><br><span class="line"><span class="string">  call s:prepare()</span></span><br><span class="line"><span class="string">  setf vim</span></span><br><span class="line"><span class="string">  call append(0, [&#x27;\\\&quot; Generated by vim-plug&#x27;,</span></span><br><span class="line"><span class="string">                \\\\ &#x27;\\\&quot; &#x27;.strftime(\\\&quot;%c\\\&quot;),</span></span><br><span class="line"><span class="string">                \\\\ &#x27;\\\&quot; :source this file in vim to restore the snapshot&#x27;,</span></span><br><span class="line"><span class="string">                \\\\ &#x27;\\\&quot; or execute: vim -S snapshot.vim&#x27;,</span></span><br><span class="line"><span class="string">                \\\\ &#x27;&#x27;, &#x27;&#x27;, &#x27;PlugUpdate!&#x27;])</span></span><br><span class="line"><span class="string">  1</span></span><br><span class="line"><span class="string">  let anchor = line(&#x27;\\\$&#x27;) - 3</span></span><br><span class="line"><span class="string">  let names = sort(keys(filter(copy(g:plugs),</span></span><br><span class="line"><span class="string">        \\\\&#x27;has_key(v:val, \\\&quot;uri\\\&quot;) &amp;&amp; isdirectory(v:val.dir)&#x27;)))</span></span><br><span class="line"><span class="string">  for name in reverse(names)</span></span><br><span class="line"><span class="string">    let sha = has_key(g:plugs[name], &#x27;commit&#x27;) ? g:plugs[name].commit : s:git_revision(g:plugs[name].dir)</span></span><br><span class="line"><span class="string">    if !empty(sha)</span></span><br><span class="line"><span class="string">      call append(anchor, printf(\\\&quot;silent! let g:plugs[&#x27;%s&#x27;].commit = &#x27;%s&#x27;\\\&quot;, name, sha))</span></span><br><span class="line"><span class="string">      redraw</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">  endfor</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  if a:0 &gt; 0</span></span><br><span class="line"><span class="string">    let fn = s:plug_expand(a:1)</span></span><br><span class="line"><span class="string">    if filereadable(fn) &amp;&amp; !(a:force || s:ask(a:1.&#x27; already exists. Overwrite?&#x27;))</span></span><br><span class="line"><span class="string">      return</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    call writefile(getline(1, &#x27;\\\$&#x27;), fn)</span></span><br><span class="line"><span class="string">    echo &#x27;Saved as &#x27;.a:1</span></span><br><span class="line"><span class="string">    silent execute &#x27;e&#x27; s:esc(fn)</span></span><br><span class="line"><span class="string">    setf vim</span></span><br><span class="line"><span class="string">  endif</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function! s:split_rtp()</span></span><br><span class="line"><span class="string">  return split(&amp;rtp, &#x27;\\\\\\\\\\\\@&lt;!,&#x27;)</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">let s:first_rtp = s:escrtp(get(s:split_rtp(), 0, &#x27;&#x27;))</span></span><br><span class="line"><span class="string">let s:last_rtp  = s:escrtp(get(s:split_rtp(), -1, &#x27;&#x27;))</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">if exists(&#x27;g:plugs&#x27;)</span></span><br><span class="line"><span class="string">  let g:plugs_order = get(g:, &#x27;plugs_order&#x27;, keys(g:plugs))</span></span><br><span class="line"><span class="string">  call s:upgrade_specs()</span></span><br><span class="line"><span class="string">  call s:define_commands()</span></span><br><span class="line"><span class="string">endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">let &amp;cpo = s:cpo_save</span></span><br><span class="line"><span class="string">unlet s:cpo_save</span></span><br><span class="line"><span class="string">    \&quot; &gt; ~/.vim/autoload/plug.vim</span></span><br><span class="line"><span class="string">&quot;</span></span><br></pre></td></tr></table></figure></div>
<!-- flag of hidden posts -->
        </div>

        
            <div class="post-copyright-info w-full my-8 px-2 sm:px-6 md:px-8">
                <div class="article-copyright-info-container">
    <ul>
        <li><strong>Title:</strong> Ubuntu-Conf</li>
        <li><strong>Author:</strong> Forestsetyou</li>
        <li><strong>Created at
                :</strong> 2023-09-24 17:04:00</li>
        
            <li>
                <strong>Updated at
                    :</strong> 2023-09-29 14:09:00
            </li>
        
        <li>
            <strong>Link:</strong> https://forestsetyou.github.io/2023/09/24/Solution/Custom/Ubuntu-Conf/
        </li>
        <li>
            <strong>
                License:
            </strong>
            

            
                This work is licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0">CC BY-NC-SA 4.0</a>.
            
        </li>
    </ul>
</div>

            </div>
        

        

        

        


        
    </div>

    
        <div class="toc-content-container">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <div class="toc-title">On this page</div>
        <div class="page-title">Ubuntu-Conf</div>
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Ubuntu-Conf"><span class="nav-text">Ubuntu Conf</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BD%AF%E4%BB%B6%E6%BA%90%E4%BF%A1%E6%81%AF"><span class="nav-text">软件源信息</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#v2204"><span class="nav-text">v2204</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#WSL-Ubuntu"><span class="nav-text">WSL-Ubuntu</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#myUbuntu-sh"><span class="nav-text">myUbuntu.sh</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#preSource-sh"><span class="nav-text">preSource.sh</span></a></li></ol></li></ol></li></ol>

    </div>
</div>
        </div>
    
</div>



                

            </div>

            

        </div>

        <div class="main-content-footer">
            <footer class="footer mt-5 py-5 h-auto text-base text-third-text-color relative border-t-2 border-t-border-color">
    <div class="info-container py-3 text-center">
        
        <div class="text-center">
            &copy;
            
              <span>2024</span>
              -
            
            2024&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">Forestsetyou</a>
            
        </div>
        
        <div class="relative text-center lg:absolute lg:left-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-left">
            <span class="lg:block text-sm">POWERED BY <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg class="relative top-[2px] inline-block align-baseline" version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" class="text-base" href="https://hexo.io">Hexo</a></span>
            <span class="text-sm lg:block">THEME&nbsp;<a class="text-base" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.6.1</a></span>
        </div>
        
        
        
        
        
    </div>  
</footer>
        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="article-tools-list">
        <!-- TOC aside toggle -->
        
            <li class="right-bottom-tools page-aside-toggle">
                <i class="fa-regular fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-side-tools-container">
        <div class="side-tools-container">
    <ul class="hidden-tools-list">
        <li class="right-bottom-tools tool-font-adjust-plus flex justify-center items-center">
            <i class="fa-regular fa-magnifying-glass-plus"></i>
        </li>

        <li class="right-bottom-tools tool-font-adjust-minus flex justify-center items-center">
            <i class="fa-regular fa-magnifying-glass-minus"></i>
        </li>

        <li class="right-bottom-tools tool-dark-light-toggle flex justify-center items-center">
            <i class="fa-regular fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="right-bottom-tools tool-scroll-to-bottom flex justify-center items-center">
            <i class="fa-regular fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="visible-tools-list">
        <li class="right-bottom-tools toggle-tools-list flex justify-center items-center">
            <i class="fa-regular fa-cog fa-spin"></i>
        </li>
        
            <li class="right-bottom-tools tool-scroll-to-top flex justify-center items-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
        
    </ul>
</div>

    </div>

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fa-solid fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fa-solid fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>


    
<script src="/js/libs/Swup.min.js"></script>

<script src="/js/libs/SwupSlideTheme.min.js"></script>

<script src="/js/libs/SwupScriptsPlugin.min.js"></script>

<script src="/js/libs/SwupProgressPlugin.min.js"></script>

<script src="/js/libs/SwupScrollPlugin.min.js"></script>

<script src="/js/libs/SwupPreloadPlugin.min.js"></script>

<script>
    const swup = new Swup({
        plugins: [
            new SwupScriptsPlugin({
                optin: true,
            }),
            new SwupProgressPlugin(),
            new SwupScrollPlugin({
                offset: 80,
            }),
            new SwupSlideTheme({
                mainElement: ".main-content-body",
            }),
            new SwupPreloadPlugin(),
        ],
        containers: ["#swup"],
    });
</script>







<script src="/js/tools/imageViewer.js" type="module"></script>

<script src="/js/utils.js" type="module"></script>

<script src="/js/main.js" type="module"></script>

<script src="/js/layouts/navbarShrink.js" type="module"></script>

<script src="/js/tools/scrollTopBottom.js" type="module"></script>

<script src="/js/tools/lightDarkSwitch.js" type="module"></script>

<script src="/js/layouts/categoryList.js" type="module"></script>



    
<script src="/js/tools/localSearch.js" type="module"></script>




    
<script src="/js/tools/codeBlock.js" type="module"></script>




    
<script src="/js/layouts/lazyload.js" type="module"></script>






  
<script src="/js/libs/Typed.min.js"></script>

  
<script src="/js/plugins/typed.js" type="module"></script>









<div class="post-scripts" data-swup-reload-script>
    
        
<script src="/js/tools/tocToggle.js" type="module"></script>

<script src="/js/layouts/toc.js" type="module"></script>

<script src="/js/plugins/tabs.js" type="module"></script>

    
</div>


</body>
</html>
