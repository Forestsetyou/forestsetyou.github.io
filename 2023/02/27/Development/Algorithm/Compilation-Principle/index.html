<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="ctf, solution, note, blog">
    
    <meta name="author" content="Forestsetyou">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    
    <!--- Seo Part-->
    
    <link rel="canonical" href="http://forestsetyou.github.io/2023/02/27/development/algorithm/compilation-principle/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
        <meta name="description" content="false">
<meta property="og:type" content="article">
<meta property="og:title" content="Compilation-Principle">
<meta property="og:url" content="http://forestsetyou.github.io/2023/02/27/Development/Algorithm/Compilation-Principle/index.html">
<meta property="og:site_name" content="Festu&#39;s Blog">
<meta property="og:description" content="false">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://picturebed-1310517892.file.myqcloud.com/image-20230416145626058.png">
<meta property="og:image" content="https://picturebed-1310517892.file.myqcloud.com/image-20230522215511189.png">
<meta property="article:published_time" content="2023-02-27T15:04:00.000Z">
<meta property="article:modified_time" content="2023-08-03T10:08:00.000Z">
<meta property="article:author" content="Forestsetyou">
<meta property="article:tag" content="Schoolwork">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://picturebed-1310517892.file.myqcloud.com/image-20230416145626058.png">
    
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="/hide_imgs/smiling_face.png" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="/hide_imgs/smiling_face.png">
    <meta name="theme-color" content="#A31F34">
    <link rel="shortcut icon" href="/hide_imgs/smiling_face.png">
    <!--- Page Info-->
    
    <title>
        
            Compilation-Principle -
        
        Festu&#39;s Blog
    </title>

    
<link rel="stylesheet" href="/fonts/Chillax/chillax.css">


    <!--- Inject Part-->
    

    
        <style>
    :root {
        --preloader-background-color: #fff;
        --preloader-text-color: #000;
    }

    @media (prefers-color-scheme: dark) {
        :root {
            --preloader-background-color: #202124;
            --preloader-text-color: #fff;
        }
    }

    @media (prefers-color-scheme: light) {
        :root {
            --preloader-background-color: #fff;
            --preloader-text-color: #000;
        }
    }

    @media (max-width: 600px) {
        .ml13 {
            font-size: 2.6rem !important; /* Adjust this value as needed */
        }
    }

    .preloader {
        display: flex;
        flex-direction: column;
        gap: 1rem; /* Tailwind 'gap-4' is 1rem */
        align-items: center;
        justify-content: center;
        position: fixed;
        padding: 12px;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        width: 100vw;
        height: 100vh; /* 'h-screen' is 100% of the viewport height */
        background-color: var(--preloader-background-color);
        z-index: 1100; /* 'z-[1100]' sets the z-index */
        transition: opacity 0.2s ease-in-out;
    }

    .ml13 {
        font-size: 3.2rem;
        /* text-transform: uppercase; */
        color: var(--preloader-text-color);
        letter-spacing: -1px;
        font-weight: 500;
        font-family: 'Chillax-Variable', sans-serif;
        text-align: center;
    }

    .ml13 .word {
        display: inline-flex;
        flex-wrap: wrap;
        white-space: nowrap;
    }

    .ml13 .letter {
        display: inline-block;
        line-height: 1em;
    }
</style>

<div class="preloader">
    
<script src="/js/libs/anime.min.js"></script>

    <h1 class="ml13">
        Festu&#39;s Blog
    </h1>
    <script>
        var textWrapper = document.querySelector('.ml13');
        // Split text into words
        var words = textWrapper.textContent.trim().split(' ');

        // Clear the existing content
        textWrapper.innerHTML = '';

        // Wrap each word and its letters in spans
        words.forEach(function(word) {
            var wordSpan = document.createElement('span');
            wordSpan.classList.add('word');
            wordSpan.innerHTML = word.replace(/\S/g, "<span class='letter'>$&</span>");
            textWrapper.appendChild(wordSpan);
            textWrapper.appendChild(document.createTextNode(' ')); // Add space between words
        });


        anime.timeline({loop: true})
            .add({
                targets: '.ml13 .letter',
                translateY: [100,0],
                translateZ: 0,
                opacity: [0,1],
                easing: "easeOutExpo",
                duration: 1400,
                delay: (el, i) => 300 + 30 * i
            }).add({
            targets: '.ml13 .letter',
            translateY: [0,-100],
            opacity: [1,0],
            easing: "easeInExpo",
            duration: 1200,
            delay: (el, i) => 100 + 30 * i
        });

        let themeStatus = JSON.parse(localStorage.getItem('REDEFINE-THEME-STATUS'))?.isDark;

        // If the theme status is not found in local storage, check the preferred color scheme
        if (themeStatus === undefined || themeStatus === null) {
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                themeStatus = 'dark';
            } else {
                themeStatus = 'light';
            }
        }

        // Now you can use the themeStatus variable in your code
        if (themeStatus) {
            document.documentElement.style.setProperty('--preloader-background-color', '#202124');
            document.documentElement.style.setProperty('--preloader-text-color', '#fff');
        } else {
            document.documentElement.style.setProperty('--preloader-background-color', '#fff');
            document.documentElement.style.setProperty('--preloader-text-color', '#000');
        }

        window.addEventListener('load', function () {
            hidePreloaderAfterTimeout(1000); // Hide after 1000 milliseconds once the window has loaded
        });

        // Backup failsafe: Hide preloader after a maximum of 5000 milliseconds, regardless of the window load event
        hidePreloaderAfterTimeout(5000);

        function hidePreloaderAfterTimeout(delay) {
            setTimeout(function () {
                var preloader = document.querySelector('.preloader');
                preloader.style.opacity = '0';
                setTimeout(function () {
                    preloader.style.display = 'none';
                }, 200);
            }, delay);
        }
    </script>
</div>
    

    
<link rel="stylesheet" href="/css/style.css">


    
        
<link rel="stylesheet" href="/assets/build/styles.css">

    

    
<link rel="stylesheet" href="/fonts/fonts.css">

    
<link rel="stylesheet" href="/fonts/Satoshi/satoshi.css">

    <!--- Font Part-->
    
    
    
    


    <script id="hexo-configurations">
    window.config = {"hostname":"forestsetyou.github.io","root":"/","language":"en","path":"search.xml"};
    window.theme = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center","image_caption":false,"link_icon":true,"title_alignment":"left","headings_top_spacing":{"h1":"5rem","h2":"4rem","h3":"2.8rem","h4":"2.5rem","h5":"2.2rem","h6":"2rem"}},"word_count":{"enable":false,"count":true,"min2read":true},"author_label":{"enable":false,"auto":false,"list":[]},"code_block":{"copy":true,"style":"simple","font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":3,"number":false,"expand":true,"init_open":true},"copyright":{"enable":true,"default":"cc_by_nc_sa"},"lazyload":true,"recommendation":{"enable":false,"title":"推荐阅读","limit":3,"mobile_limit":2,"placeholder":"/images/wallhaven-wqery6-light.webp","skip_dirs":[]}},"colors":{"primary":"#A31F34","secondary":null,"default_mode":"light"},"global":{"fonts":{"chinese":{"enable":false,"family":null,"url":null},"english":{"enable":false,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":false},"scroll_progress":{"bar":false,"percentage":true},"website_counter":{"url":"https://cn.vercount.one/js","enable":false,"site_pv":true,"site_uv":true,"post_pv":true},"single_page":true,"preloader":true,"open_graph":true,"google_analytics":{"enable":false,"id":null}},"home_banner":{"enable":true,"style":"fixed","image":{"light":"/hide_imgs/light_banner-5.png","dark":"/hide_imgs/dark_banner.png"},"title":"Festu's Blog","subtitle":{"text":["Life Goes On."],"hitokoto":{"enable":false,"api":"https://v1.hitokoto.cn"},"typing_speed":100,"backing_speed":80,"starting_delay":500,"backing_delay":1500,"loop":false,"smart_backspace":false},"text_color":{"light":"#fff","dark":"#d1d1b6"},"text_style":{"title_size":"2.8rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":false,"family":null,"url":null},"social_links":{"enable":true,"style":"default","links":{"github":"https://github.com/Forestsetyou","instagram":null,"zhihu":null,"twitter":null,"email":null},"qrs":{"weixin":null}}},"plugins":{"feed":{"enable":false},"aplayer":{"enable":false,"type":"fixed","audios":[{"name":null,"artist":null,"url":null,"cover":null,"lrc":null}]},"mermaid":{"enable":false,"version":"9.3.0"}},"version":"2.6.1","navbar":{"auto_hide":false,"color":{"left":"#f78736","right":"#367df7","transparency":35},"width":{"home":"1200px","pages":"1000px"},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"categories":{"path":"/categories","icon":"fa-regular fa-folder"},"tags":{"path":"/tags","icon":"fa-regular fa-tags"}},"search":{"enable":true,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"blur"},"home":{"sidebar":{"enable":true,"position":"left","first_item":"menu","announcement":null,"show_on_mobile":true,"links":null},"article_date_format":"auto","categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":3}},"footerStart":"2024/03/11 03:27:59"};
    window.lang_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
    window.data = {"masonry":false};
  </script>
    
    <!--- Fontawesome Part-->
    
<link rel="stylesheet" href="/fontawesome/fontawesome.min.css">

    
<link rel="stylesheet" href="/fontawesome/brands.min.css">

    
<link rel="stylesheet" href="/fontawesome/solid.min.css">

    
<link rel="stylesheet" href="/fontawesome/regular.min.css">

    
    
    
    
<meta name="generator" content="Hexo 7.1.1"></head>


<body>
<div class="progress-bar-container">
    

    
        <span class="pjax-progress-bar"></span>
<!--        <span class="swup-progress-icon">-->
<!--            <i class="fa-solid fa-circle-notch fa-spin"></i>-->
<!--        </span>-->
    
</div>


<main class="page-container" id="swup">

    

    <div class="main-content-container">


        <div class="main-content-header">
            <header class="navbar-container px-6 md:px-12">

    <div class="navbar-content ">
        <div class="left">
            
                <a class="logo-image" href="/">
                    <img src="/hide_imgs/smiling_face.png">
                </a>
            
            <a class="logo-title" href="/">
                
                Festu&#39;s Blog
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/"
                                        >
                                    <i class="fa-regular fa-house fa-fw"></i>
                                    HOME
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/archives"
                                        >
                                    <i class="fa-regular fa-archive fa-fw"></i>
                                    ARCHIVES
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/categories"
                                        >
                                    <i class="fa-regular fa-folder fa-fw"></i>
                                    CATEGORIES
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/tags"
                                        >
                                    <i class="fa-regular fa-tags fa-fw"></i>
                                    TAGS
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                    
                        <li class="navbar-item search search-popup-trigger">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </li>
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i>
                    </div>
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile sheet -->
    <div class="navbar-drawer h-screen w-full absolute top-0 left-0 bg-background-color flex flex-col justify-between">
        <ul class="drawer-navbar-list flex flex-col px-4 justify-center items-start">
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/"
                        >
                            <span>
                                HOME
                            </span>
                            
                                <i class="fa-regular fa-house fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/archives"
                        >
                            <span>
                                ARCHIVES
                            </span>
                            
                                <i class="fa-regular fa-archive fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/categories"
                        >
                            <span>
                                CATEGORIES
                            </span>
                            
                                <i class="fa-regular fa-folder fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/tags"
                        >
                            <span>
                                TAGS
                            </span>
                            
                                <i class="fa-regular fa-tags fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            

            
            
        </ul>

        <div class="statistics flex justify-around my-2.5">
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/tags">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">1</div>
        <div class="label text-third-text-color text-sm">Tags</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/categories">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">10</div>
        <div class="label text-third-text-color text-sm">Categories</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/archives">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">14</div>
        <div class="label text-third-text-color text-sm">Posts</div>
    </a>
</div>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="main-content-body">

            

            <div class="main-content">

                
                    <div class="post-page-container flex relative justify-between box-border w-full h-full">
    <div class="article-content-container">

        <div class="article-title relative w-full">
            
                
                
                <img src="/hide_imgs/post_thumbnail.png" alt="Compilation-Principle" class="w-full h-60 sm:h-72 md:h-80 object-cover sm:rounded-t-large dark:brightness-75"/>
                
                <div class="w-full flex items-center absolute bottom-0 justify-start">
                    <h1 class="article-title-cover text-center mx-6 my-6 text-second-text-color bg-background-color-transparent px-4 py-3 text-3xl sm:text-4xl md:text-5xl font-bold backdrop-blur-lg rounded-xl border border-border-color ">Compilation-Principle</h1>
                </div>
            
            </div>

        
            <div class="article-header flex flex-row gap-2 items-center px-2 sm:px-6 md:px-8">
                <div class="avatar w-[46px] h-[46px] flex-shrink-0 rounded-medium border border-border-color p-[1px]">
                    <img src="/hide_imgs/avatar.png">
                </div>
                <div class="info flex flex-col justify-between">
                    <div class="author flex items-center">
                        <span class="name text-default-text-color text-lg font-semibold">Forestsetyou</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2023-02-27 23:04</span>
        <span class="mobile">2023-02-27 23:04</span>
        <span class="hover-info">Created</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2023-08-03 18:08</span>
            <span class="mobile">2023-08-03 18:08</span>
            <span class="hover-info">Updated</span>
        </span>
    

    
        <span class="article-categories article-meta-item">
            <i class="fa-regular fa-folders"></i>&nbsp;
            <ul>
                
                
                    
                        
                        <li>
                            <a href="/categories/Development/">Development</a>&nbsp;
                        </li>
                    
                    
                
                    
                        
                            <li>></li>
                        
                        <li>
                            <a href="/categories/Development/Algorithm/">Algorithm</a>&nbsp;
                        </li>
                    
                    
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fa-regular fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/Schoolwork/">Schoolwork</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
</div>

                    </div>
                </div>
            </div>
        

        


        <div class="article-content markdown-body px-2 sm:px-6 md:px-8 pb-8">
            <h2 id="Lexical-Analysis"><a href="#Lexical-Analysis" class="headerlink" title="Lexical Analysis"></a>Lexical Analysis</h2><p>采用NFA，符合一般思维习惯。</p>
<h3 id="Pascal版本"><a href="#Pascal版本" class="headerlink" title="Pascal版本"></a>Pascal版本</h3><p>高度封装，尽可能用函数代替重复的部分来减少代码的行数。</p>
<p>源码：</p>
<div class="highlight-container" data-rel="C++"><figure class="iseeu highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdarg.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> idMax 20</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> keyWordsLen 17</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">wordsAnalyzer</span>&#123;</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        <span class="type">char</span> wd;            <span class="comment">// 读取字符</span></span><br><span class="line">        <span class="type">int</span> status;         <span class="comment">// 自动机状态</span></span><br><span class="line">        <span class="type">int</span> len;            <span class="comment">// 缓存长度</span></span><br><span class="line">        <span class="type">int</span> flag;           <span class="comment">// 标记分析器是否正常</span></span><br><span class="line">        <span class="type">int</span> wordsLen;       <span class="comment">// 词元数量</span></span><br><span class="line">        <span class="type">int</span> type;           <span class="comment">// 种别归类: 0-关键字 1-运算符 2-常数 3-界符 4-标识符 5-注释串</span></span><br><span class="line">        <span class="type">int</span> cag;         <span class="comment">// 种别码, 保持为可查表位序+1</span></span><br><span class="line">        <span class="type">int</span> srcLen;     <span class="comment">// 源码长度</span></span><br><span class="line">        <span class="type">int</span> needOF;     <span class="comment">// 是否需要保存至文件</span></span><br><span class="line">        <span class="type">int</span> p;          <span class="comment">// 迭代指针</span></span><br><span class="line">        vector&lt;string&gt; strV;    <span class="comment">// 存储词元</span></span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; typeV;    <span class="comment">// 存储种别码</span></span><br><span class="line">        string words;       <span class="comment">// 缓存</span></span><br><span class="line">        string src;     <span class="comment">// 源码字符串</span></span><br><span class="line">        FILE *oF;    <span class="comment">// 结果保存文件，默认为fiP</span></span><br><span class="line">        string oFP;     <span class="comment">// 保存路径</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="comment">// 词元编码表</span></span><br><span class="line">        vector&lt;string&gt; wordsTable = &#123;</span><br><span class="line">            <span class="string">&quot;program&quot;</span>, <span class="string">&quot;var&quot;</span>, <span class="string">&quot;integer&quot;</span>, <span class="string">&quot;bool&quot;</span>,        <span class="comment">// 0-3</span></span><br><span class="line">            <span class="string">&quot;real&quot;</span>, <span class="string">&quot;char&quot;</span>, <span class="string">&quot;const&quot;</span>, <span class="string">&quot;begin&quot;</span>,           <span class="comment">// 4-7</span></span><br><span class="line">            <span class="string">&quot;if&quot;</span>, <span class="string">&quot;then&quot;</span>, <span class="string">&quot;else&quot;</span>, <span class="string">&quot;while&quot;</span>,              <span class="comment">// 8-11</span></span><br><span class="line">            <span class="string">&quot;do&quot;</span>, <span class="string">&quot;repeat&quot;</span>, <span class="string">&quot;until&quot;</span>, <span class="string">&quot;for&quot;</span>,             <span class="comment">// 12-15</span></span><br><span class="line">            <span class="string">&quot;to&quot;</span>, <span class="string">&quot;non&quot;</span>, <span class="string">&quot;non&quot;</span>, <span class="string">&quot;non&quot;</span>,                  <span class="comment">// 16(17-19跳过)</span></span><br><span class="line">            <span class="string">&quot;!&quot;</span>, <span class="string">&quot;&amp;&amp;&quot;</span>, <span class="string">&quot;||&quot;</span>, <span class="string">&quot;+&quot;</span>,                       <span class="comment">// 20-23</span></span><br><span class="line">            <span class="string">&quot;-&quot;</span>, <span class="string">&quot;*&quot;</span>, <span class="string">&quot;/&quot;</span>, <span class="string">&quot;&lt;&quot;</span>,                         <span class="comment">// 24-27</span></span><br><span class="line">            <span class="string">&quot;&gt;&quot;</span>, <span class="string">&quot;&lt;=&quot;</span>, <span class="string">&quot;&gt;=&quot;</span>, <span class="string">&quot;=&quot;</span>,                       <span class="comment">// 28-31</span></span><br><span class="line">            <span class="string">&quot;:=&quot;</span>, <span class="string">&quot;id&quot;</span>, <span class="string">&quot;intConst&quot;</span>, <span class="string">&quot;realConst&quot;</span>,        <span class="comment">// 32-35</span></span><br><span class="line">            <span class="string">&quot;strConst&quot;</span>, <span class="string">&quot;boolConst&quot;</span>, <span class="string">&quot;;&quot;</span>, <span class="string">&quot;,&quot;</span>,          <span class="comment">// 36-39</span></span><br><span class="line">            <span class="string">&quot;&#x27;&quot;</span>, <span class="string">&quot;\&quot;&quot;</span>, <span class="string">&quot;//&quot;</span>, <span class="string">&quot;/*&quot;</span>,                      <span class="comment">// 40-43</span></span><br><span class="line">            <span class="string">&quot;*/&quot;</span>, <span class="string">&quot;:&quot;</span>, <span class="string">&quot;(&quot;</span>, <span class="string">&quot;)&quot;</span>,                        <span class="comment">// 44-47</span></span><br><span class="line">            <span class="string">&quot;.&quot;</span>,                                        <span class="comment">// 48</span></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// 空白字符</span></span><br><span class="line">        vector&lt;<span class="type">char</span>&gt; filt = &#123;<span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;\n&#x27;</span>, <span class="string">&#x27;\t&#x27;</span>, <span class="string">&#x27;\0&#x27;</span>&#125;;</span><br><span class="line">        <span class="comment">// 单字分隔符,不考虑冒号,点号</span></span><br><span class="line">        vector&lt;<span class="type">char</span>&gt; delm = &#123;<span class="string">&#x27;;&#x27;</span>, <span class="string">&#x27;,&#x27;</span>, <span class="string">&#x27;(&#x27;</span>, <span class="string">&#x27;)&#x27;</span>&#125;;</span><br><span class="line">        <span class="comment">// 布尔常量</span></span><br><span class="line">        vector&lt;string&gt; boolean = &#123;<span class="string">&quot;true&quot;</span>, <span class="string">&quot;false&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">wordsAnalyzer</span>(string fiP = <span class="string">&quot;./test.txt&quot;</span>, string foP = <span class="string">&quot;./res.txt&quot;</span>)&#123;</span><br><span class="line">            flag = <span class="number">1</span>;               <span class="comment">// 分析器状态ok</span></span><br><span class="line">            words = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            len = <span class="number">0</span>;</span><br><span class="line">            status = <span class="number">0</span>;     <span class="comment">// 自动机起点</span></span><br><span class="line">            wordsLen = <span class="number">0</span>;   <span class="comment">// 词元数量</span></span><br><span class="line">            oFP = foP;      <span class="comment">// 保存路径</span></span><br><span class="line">            p = <span class="number">0</span>;          <span class="comment">// 指针初始化为0</span></span><br><span class="line">            ifstream ins;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span>(oFP!=<span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">                needOF = <span class="number">1</span>;</span><br><span class="line">                oF = <span class="built_in">fopen</span>(oFP.<span class="built_in">c_str</span>(), <span class="string">&quot;w&quot;</span>);    <span class="comment">// 覆盖式的写入</span></span><br><span class="line">                <span class="keyword">if</span>(oF==<span class="literal">NULL</span>)&#123;</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;Fail to write in the file: %s&quot;</span>, oFP.<span class="built_in">c_str</span>());</span><br><span class="line">                    <span class="keyword">this</span>-&gt;flag = <span class="number">0</span>;</span><br><span class="line">                    <span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="built_in">newPrintf</span>(<span class="string">&quot;Output file path: %s -&gt; Succeed!\n&quot;</span>, oFP.<span class="built_in">c_str</span>());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> needOF = <span class="number">0</span>;    <span class="comment">// 不保存文件</span></span><br><span class="line">            ins.<span class="built_in">open</span>(fiP, ios::in);     <span class="comment">// 读入模式打开文件</span></span><br><span class="line">            <span class="keyword">if</span>(!ins.<span class="built_in">good</span>())&#123;    <span class="comment">// 检测文件是否正常打开</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Fail to open the file: %s&quot;</span>, fiP.<span class="built_in">c_str</span>());</span><br><span class="line">                <span class="keyword">this</span>-&gt;flag = <span class="number">0</span>;</span><br><span class="line">                <span class="built_in">exit</span>(<span class="number">-1</span>);       <span class="comment">// 出错, 终止程序</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">newPrintf</span>(<span class="string">&quot;Input file path: %s -&gt; Succeed!\n&quot;</span>, fiP.<span class="built_in">c_str</span>());   <span class="comment">// 展示读取路径</span></span><br><span class="line">            <span class="built_in">printSplit</span>(<span class="string">&quot;Src&quot;</span>);  <span class="comment">// 分割线</span></span><br><span class="line">            </span><br><span class="line">            <span class="type">char</span> _ch;</span><br><span class="line">            src = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="keyword">while</span>((_ch = ins.<span class="built_in">get</span>()) != EOF)&#123;    <span class="comment">// 存入源码串中</span></span><br><span class="line">                src += _ch;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            ins.<span class="built_in">close</span>();</span><br><span class="line">            src += <span class="string">&#x27;\0&#x27;</span>;    <span class="comment">// 终止符</span></span><br><span class="line">            srcLen = src.<span class="built_in">length</span>();  <span class="comment">// 源码串长度</span></span><br><span class="line">            <span class="built_in">newPrintf</span>(<span class="string">&quot;%s\n&quot;</span>, src.<span class="built_in">c_str</span>());    <span class="comment">// 展示源码</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ~<span class="built_in">wordsAnalyzer</span>()&#123;</span><br><span class="line">            <span class="built_in">fclose</span>(oF);     <span class="comment">// 关闭FILE文件流</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">analyze</span><span class="params">()</span></span>&#123;    <span class="comment">// 词法分析器</span></span><br><span class="line">            <span class="keyword">while</span>(p &lt; srcLen)&#123;</span><br><span class="line">                wd = src[p];</span><br><span class="line">                <span class="keyword">switch</span>(status)&#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">0</span>:    <span class="comment">// 自动机起点，words为空</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isBlank</span>()) <span class="built_in">blankContinue</span>();   <span class="comment">// 跳过空白字符, 并迭代指针</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isLowerLetter</span>() || <span class="built_in">isUpperLetter</span>()) <span class="built_in">newStatus</span>(<span class="number">1</span>);   <span class="comment">// 转移状态-&gt;1 字母开头 大写字母可以用于区分标识符和关键字，但即使全是小写字母也需要单独检查，因此全是字母归为一类</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">0</span>)) <span class="built_in">newStatus</span>(<span class="number">2</span>);                          <span class="comment">// 转移状态-&gt;2 非零数字开头</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;0&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">3</span>);                            <span class="comment">// 转移状态-&gt;3  0开头</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;&amp;&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">4</span>);                                 <span class="comment">// 转移状态-&gt;4</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;|&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">5</span>);         <span class="comment">// 转移状态-&gt;5</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;:&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">6</span>);         <span class="comment">// 转移状态-&gt;6</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;&gt;&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">7</span>);         <span class="comment">// 转移状态-&gt;7</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;&lt;&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">8</span>);         <span class="comment">// 转移状态-&gt;8</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;/&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">9</span>);         <span class="comment">// 转移状态-&gt;9</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;*&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">10</span>);        <span class="comment">// 状态转移-&gt;10 单字运算符</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;=&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">11</span>);        <span class="comment">// 状态转移-&gt;11 单字运算符</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;!&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">12</span>);        <span class="comment">// 状态转移-&gt;12 单字运算符</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;+&#x27;</span> || wd == <span class="string">&#x27;-&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">13</span>);         <span class="comment">// 状态转移-&gt;13 加减号(正负号)</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;.&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">14</span>);        <span class="comment">// 状态转移-&gt;14 考虑.5 == 0.5 ,此时.后必须有数字</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isDelimiter</span>())&#123;        <span class="comment">// 单字分界符直接给出结果</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            <span class="built_in">typeDelimiter</span>();</span><br><span class="line">                            <span class="built_in">output</span>();               <span class="comment">// 存储词元、输出、初始化</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;\&#x27;&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">15</span>);      <span class="comment">// 状态转移-&gt;15 单引号</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;&quot;&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">16</span>);       <span class="comment">// 状态转移-&gt;16 双引号</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="built_in">passError</span>();      <span class="comment">// 检测到非法字符如&quot;^#$&quot;等</span></span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">1</span>:&#123;    <span class="comment">// 字母开头,全字母情况 可终止 -&gt; 标识符或关键字或布尔常量</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isLowerLetter</span>() || <span class="built_in">isUpperLetter</span>()) <span class="built_in">newStatus</span>(<span class="number">1</span>);    <span class="comment">// 原地踏步</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isNumber</span>() || wd == <span class="string">&#x27;_&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">17</span>);         <span class="comment">// 状态转移-&gt;17</span></span><br><span class="line">                        <span class="keyword">else</span>&#123;       <span class="comment">// 处理缓存内容</span></span><br><span class="line">                            <span class="built_in">typeWords</span>();</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">2</span>:&#123;        <span class="comment">// 非零数字开头，可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd==<span class="string">&#x27;.&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">18</span>);    <span class="comment">// 转移状态-&gt;18 十进制实数, 此时.后可以无内容</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;e&#x27;</span> || wd == <span class="string">&#x27;E&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">19</span>);    <span class="comment">// 转移状态-&gt;19 科学计数法E</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isNumber</span>()) <span class="built_in">newStatus</span>(<span class="number">2</span>);      <span class="comment">// 原地踏步</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isLowerLetter</span>() || <span class="built_in">isUpperLetter</span>() || wd == <span class="string">&#x27;\&#x27;&#x27;</span> || wd == <span class="string">&#x27;&quot;&#x27;</span>)     <span class="comment">// 十进制数后跟字母或引号铁铁出错</span></span><br><span class="line">                            <span class="built_in">passError</span>();   <span class="comment">// 出错处理</span></span><br><span class="line">                        <span class="keyword">else</span>&#123;       <span class="comment">// 被视为整常数，重置缓存</span></span><br><span class="line">                            <span class="built_in">typeConst</span>(<span class="number">0</span>);   <span class="comment">// 整常数-&gt;0</span></span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">3</span>:&#123;    <span class="comment">// 0开头数字，可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;X&#x27;</span> || wd == <span class="string">&#x27;x&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">20</span>);           <span class="comment">// 状态转移-&gt;20 十六进制X</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;b&#x27;</span> || wd == <span class="string">&#x27;B&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">21</span>);      <span class="comment">// 状态转移-&gt;21 二进制数b</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">8</span>)) <span class="built_in">newStatus</span>(<span class="number">22</span>);                 <span class="comment">// 状态转移-&gt;22 八进制数</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isLowerLetter</span>() || <span class="built_in">isUpperLetter</span>() || wd == <span class="string">&#x27;\&#x27;&#x27;</span> || wd == <span class="string">&#x27;&quot;&#x27;</span>)     <span class="comment">// 十进制数后跟字母或引号铁铁出错</span></span><br><span class="line">                            <span class="built_in">passError</span>();   <span class="comment">// 出错处理</span></span><br><span class="line">                        <span class="keyword">else</span>&#123;       <span class="comment">// 被视为整常数0</span></span><br><span class="line">                            <span class="built_in">typeConst</span>(<span class="number">0</span>);</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">4</span>:&#123;    <span class="comment">// 检查 &amp; 不可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;&amp;&#x27;</span>)&#123;  <span class="comment">// 与运算符</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            <span class="built_in">typeOperator</span>();</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="built_in">passError</span>();</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">5</span>:&#123;    <span class="comment">// 检查 | 不可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;|&#x27;</span>)&#123;  <span class="comment">// 或运算符</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            <span class="built_in">typeOperator</span>();</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="built_in">passError</span>();</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">6</span>:&#123;    <span class="comment">// 检查 : 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;=&#x27;</span>)&#123;  <span class="comment">// 赋值号:=</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            <span class="built_in">typeOperator</span>();</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span>&#123;    <span class="comment">// 冒号:</span></span><br><span class="line">                            <span class="built_in">typeDelimiter</span>();</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">7</span>:&#123;    <span class="comment">// 检查 &gt; 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;=&#x27;</span>)&#123;  <span class="comment">// &gt;=</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            <span class="built_in">typeOperator</span>();</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;    <span class="comment">// &gt;</span></span><br><span class="line">                            <span class="built_in">typeOperator</span>();</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">8</span>:&#123;    <span class="comment">// 检查 &lt; 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;=&#x27;</span>)&#123;  <span class="comment">// &lt;=</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            <span class="built_in">typeOperator</span>();</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;    <span class="comment">// &lt;</span></span><br><span class="line">                            <span class="built_in">typeOperator</span>();</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">9</span>:&#123;    <span class="comment">// 检查 / 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;/&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">23</span>);    <span class="comment">// 状态转移-&gt;23 单行注释符//</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;*&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">24</span>);   <span class="comment">// 状态转移-&gt;24 多行注释符</span></span><br><span class="line">                        <span class="keyword">else</span> &#123;    <span class="comment">// 除号/</span></span><br><span class="line">                            <span class="built_in">typeOperator</span>();</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">10</span>:&#123;   <span class="comment">// 检查 * 这样的语法是允许的：3*-5*+5 可终止</span></span><br><span class="line">                        <span class="comment">// if(wd == &#x27;&amp;&#x27; || wd == &#x27;|&#x27; || &#x27;*&#x27; || &#x27;/&#x27; || &#x27;&lt;&#x27; || &#x27;&gt;&#x27; || &#x27;=&#x27; || &#x27;;&#x27; || &#x27;,&#x27; || &#x27;\&#x27;&#x27; || &#x27;&quot;&#x27; || &#x27;:&#x27;)&#123;</span></span><br><span class="line">                        <span class="comment">//     i = passError(i);</span></span><br><span class="line">                        <span class="comment">// &#125; else &#123;</span></span><br><span class="line">                        <span class="comment">//     type = 1;</span></span><br><span class="line">                        <span class="comment">//     output();</span></span><br><span class="line">                        <span class="comment">//     i -= 1;</span></span><br><span class="line">                        <span class="comment">// &#125;</span></span><br><span class="line">                        <span class="built_in">typeOperator</span>();</span><br><span class="line">                        <span class="built_in">output</span>();</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">11</span>:&#123;   <span class="comment">// 检查 =  a = /*2333333*/ 5;</span></span><br><span class="line">                        <span class="comment">// if(wd == &#x27;=&#x27; || &#x27;&amp;&#x27; || &#x27;|&#x27; || &#x27;*&#x27; || &#x27;&lt;&#x27; || &#x27;&gt;&#x27; || &#x27;:&#x27; || &#x27;;&#x27; || &#x27;,&#x27;)&#123;</span></span><br><span class="line">                        <span class="comment">//     i = passError(i);</span></span><br><span class="line">                        <span class="comment">// &#125; else &#123;</span></span><br><span class="line">                        <span class="comment">//     type = 1;</span></span><br><span class="line">                        <span class="comment">//     output();</span></span><br><span class="line">                        <span class="comment">//     i -= 1;</span></span><br><span class="line">                        <span class="comment">// &#125;</span></span><br><span class="line">                        <span class="built_in">typeOperator</span>();</span><br><span class="line">                        <span class="built_in">output</span>();</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">12</span>:&#123;   <span class="comment">// 检查 ! 先不谈!=, 这样的语法是可以的 !-.5 == !(-0.5) == 0(boolean) 或者 !!&quot;0&quot; == 1(boolean) 可终止</span></span><br><span class="line">                        <span class="comment">// if(wd == &#x27;&amp;&#x27; || wd == &#x27;|&#x27; || wd == &#x27;*&#x27; || wd == &#x27;&lt;&#x27; || wd == &#x27;&gt;&#x27; || wd == &#x27;:&#x27; || wd == &#x27;;&#x27; || wd == &#x27;,&#x27;)</span></span><br><span class="line">                        <span class="built_in">typeOperator</span>();</span><br><span class="line">                        <span class="built_in">output</span>();</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">13</span>:&#123;   <span class="comment">// +-号 不完美的DFA 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(cag &gt;= <span class="number">34</span> &amp;&amp; cag &lt;= <span class="number">38</span> || cag == <span class="number">48</span>)&#123;     <span class="comment">// 前面出现操作数则为加减号, &#x27;(&#x27;被视为有效界符, &#x27;)&#x27; 则被视为操作数</span></span><br><span class="line">                            <span class="built_in">typeOperator</span>();</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;.&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">14</span>);       <span class="comment">// 状态转移-&gt;14 实数</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">0</span>)) <span class="built_in">newStatus</span>(<span class="number">2</span>);      <span class="comment">// 状态转移-&gt;2 非0数字</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;0&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">3</span>);        <span class="comment">// 状态转移-&gt;3 数字0</span></span><br><span class="line">                        <span class="keyword">else</span>&#123;   <span class="comment">// 加减号</span></span><br><span class="line">                            <span class="built_in">typeOperator</span>();</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">14</span>:&#123;   <span class="comment">// . 实数 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>()) <span class="built_in">newStatus</span>(<span class="number">18</span>);   <span class="comment">// 状态转移-&gt;18 正常实数</span></span><br><span class="line">                        <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="built_in">typeDelimiter</span>();</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">15</span>:&#123;   <span class="comment">// 单引号 条件终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;\&#x27;&#x27;</span>)&#123;     <span class="comment">// 字符常量</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            <span class="built_in">typeConst</span>(<span class="number">2</span>);</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="built_in">newStatus</span>(<span class="number">15</span>);       <span class="comment">// 原地踏步</span></span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">16</span>:&#123;   <span class="comment">// 双引号 条件终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;&quot;&#x27;</span>)&#123;  <span class="comment">// 字符常量</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            <span class="built_in">typeConst</span>(<span class="number">2</span>);</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="built_in">newStatus</span>(<span class="number">16</span>);       <span class="comment">// 原地踏步</span></span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">17</span>:&#123;   <span class="comment">// 标识符 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>() || <span class="built_in">isLowerLetter</span>() || <span class="built_in">isUpperLetter</span>() || wd == <span class="string">&#x27;_&#x27;</span>)   <span class="comment">// 原地踏步</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">17</span>);</span><br><span class="line">                        <span class="keyword">else</span> &#123;    <span class="comment">// 获取标识符</span></span><br><span class="line">                            <span class="built_in">typeWords</span>(<span class="number">1</span>);</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">18</span>:&#123;   <span class="comment">// 真 实数 后可不跟数字 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>()) <span class="built_in">newStatus</span>(<span class="number">18</span>);   <span class="comment">// 原地踏步</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;e&#x27;</span> || wd == <span class="string">&#x27;E&#x27;</span>)     <span class="comment">// 状态转移-&gt;19 科学计数法  允许有: 3.e7 的写法</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">19</span>);</span><br><span class="line">                        <span class="keyword">else</span> &#123;    <span class="comment">// 截取实数</span></span><br><span class="line">                            <span class="built_in">typeConst</span>(<span class="number">1</span>);</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125; </span><br><span class="line">                    <span class="keyword">case</span> <span class="number">19</span>:&#123;   <span class="comment">// 科学计数法e 不可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;+&#x27;</span> || wd == <span class="string">&#x27;-&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">25</span>);       <span class="comment">// 状态转移-&gt;25 科学计数法+-</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isNumber</span>()) <span class="built_in">newStatus</span>(<span class="number">26</span>);      <span class="comment">// 状态转移-&gt;26 十进制整数后终态</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="built_in">passError</span>();      <span class="comment">// 出错啦</span></span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">20</span>:&#123;   <span class="comment">// 十六进制x 不可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">16</span>)) <span class="built_in">newStatus</span>(<span class="number">27</span>);     <span class="comment">// 状态转移-&gt;27 十六进制整数后终态</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="built_in">passError</span>();</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">21</span>:&#123;   <span class="comment">// 二进制数b 不可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">2</span>)) <span class="built_in">newStatus</span>(<span class="number">28</span>);      <span class="comment">// 状态转移-&gt;28 二进制数后终态</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="built_in">passError</span>();</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">22</span>:&#123;   <span class="comment">// 八进制数中态 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">8</span>)) <span class="built_in">newStatus</span>(<span class="number">22</span>);      <span class="comment">// 原地踏步</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;e&#x27;</span> || wd == <span class="string">&#x27;E&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">19</span>);      <span class="comment">// 状态转移-&gt;19 科学计数法e</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;.&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">18</span>);   <span class="comment">// 状态转移-&gt;18 当做十进制数处理的八进制小数(C++中自适应)</span></span><br><span class="line">                        <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="built_in">typeConst</span>(<span class="number">0</span>);</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">23</span>:&#123;   <span class="comment">// 单行注释符// 条件终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;\n&#x27;</span>)&#123;   <span class="comment">// 截取单行注释串</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            <span class="built_in">typeNote</span>();</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="built_in">newStatus</span>(<span class="number">23</span>);    <span class="comment">// 原地踏步</span></span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">24</span>:&#123;   <span class="comment">// 多行注释符/* 不可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;*&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">29</span>);    <span class="comment">// 状态转移-&gt;29 检测退出记号*/</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="built_in">newStatus</span>(<span class="number">24</span>);    <span class="comment">// 原地踏步</span></span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">25</span>:&#123;   <span class="comment">// 科学计数法+- 不可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>()) <span class="built_in">newStatus</span>(<span class="number">26</span>);       <span class="comment">// 状态转移-&gt;26 十进制整数后终态</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="built_in">passError</span>();</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">26</span>:&#123;   <span class="comment">// 十进制整数后终态 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>()) <span class="built_in">newStatus</span>(<span class="number">26</span>);       <span class="comment">// 原地踏步</span></span><br><span class="line">                        <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="built_in">typeConst</span>(<span class="number">1</span>);</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">27</span>:&#123;   <span class="comment">// 十六进制整数后终态 十六进制不接受小数点</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">16</span>)) <span class="built_in">newStatus</span>(<span class="number">27</span>);     <span class="comment">// 原地踏步</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;e&#x27;</span> || wd == <span class="string">&#x27;E&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">19</span>);      <span class="comment">// 状态转移-&gt;19</span></span><br><span class="line">                        <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="built_in">typeConst</span>(<span class="number">0</span>);</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">28</span>:&#123;   <span class="comment">// 二进制数后终态</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">2</span>)) <span class="built_in">newStatus</span>(<span class="number">28</span>);</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;e&#x27;</span> || wd == <span class="string">&#x27;E&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">19</span>);</span><br><span class="line">                        <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="built_in">typeConst</span>(<span class="number">0</span>);</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">29</span>:&#123;   <span class="comment">// 检测退出记号 */</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;/&#x27;</span>)&#123;</span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);  </span><br><span class="line">                            <span class="built_in">typeNote</span>();</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;*&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">29</span>);     <span class="comment">// 原地踏步</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="built_in">newStatus</span>(<span class="number">24</span>);    <span class="comment">// 状态转移-&gt;24</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(needOF)&#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;==&gt; The output has been saved to the file: %s&quot;</span>, oFP.<span class="built_in">c_str</span>());   <span class="comment">// 保存文件</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">blankContinue</span><span class="params">()</span></span>&#123;    <span class="comment">// 跳过空白字符，考虑换行对正负加减的影响</span></span><br><span class="line">            <span class="keyword">if</span>(wd == <span class="string">&#x27;\n&#x27;</span>) cag = <span class="number">3</span>;     <span class="comment">// 对于大部分词元而言换行等价于界符 </span></span><br><span class="line">            p += <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">passError</span><span class="params">()</span></span>&#123;   <span class="comment">// 跳过错误部分，不考虑错误部分引号的性质</span></span><br><span class="line">            <span class="keyword">while</span>(p &lt; srcLen)&#123;</span><br><span class="line">                wd = src[p];</span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">isDelimiter</span>() || <span class="built_in">isBlank</span>() || wd == <span class="string">&#x27;.&#x27;</span>)&#123;</span><br><span class="line">                    <span class="built_in">outError</span>();</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(wd == <span class="string">&#x27;:&#x27;</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(src[p+<span class="number">1</span>]!=<span class="string">&#x27;=&#x27;</span>)&#123;</span><br><span class="line">                        <span class="built_in">outError</span>();</span><br><span class="line">                        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(wd == <span class="string">&#x27;/&#x27;</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(src[p+<span class="number">1</span>]==<span class="string">&#x27;/&#x27;</span> || src[p+<span class="number">1</span>]==<span class="string">&#x27;*&#x27;</span>)&#123;</span><br><span class="line">                        <span class="built_in">outError</span>();</span><br><span class="line">                        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="built_in">newStatus</span>(<span class="number">-1</span>);  <span class="comment">// 避免分界符被放入错误输出中</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;   <span class="comment">// error?</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">outError</span><span class="params">()</span></span>&#123;     <span class="comment">// 错误报告</span></span><br><span class="line">            <span class="built_in">newPrintf</span>(<span class="string">&quot;Error with: %s\n&quot;</span>, words.<span class="built_in">c_str</span>());</span><br><span class="line">            <span class="built_in">newStatus</span>(<span class="number">0</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">newStatus</span><span class="params">(<span class="type">int</span> _s)</span></span>&#123;  <span class="comment">// 更新状态, 不初始化则迭代指针</span></span><br><span class="line">            <span class="keyword">switch</span>(_s)&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>:    <span class="comment">// 为0则初始化状态</span></span><br><span class="line">                    status = <span class="number">0</span>;    <span class="comment">// 原始状态</span></span><br><span class="line">                    len = <span class="number">0</span>;</span><br><span class="line">                    words = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">-1</span>:   <span class="comment">// -1作为一个暂态，处理不需要状态实际转移的情况</span></span><br><span class="line">                    len += <span class="number">1</span>;</span><br><span class="line">                    words += wd;</span><br><span class="line">                    p += <span class="number">1</span>;     <span class="comment">// 迭代指针</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:    <span class="comment">// 不为0就更新状态</span></span><br><span class="line">                    status = _s;</span><br><span class="line">                    len += <span class="number">1</span>;</span><br><span class="line">                    words += wd;</span><br><span class="line">                    p += <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">output</span><span class="params">()</span></span>&#123;   <span class="comment">// 存储词元、输出、初始化</span></span><br><span class="line">            <span class="keyword">switch</span>(type)&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>: <span class="keyword">break</span>;      <span class="comment">// 关键字</span></span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>:    <span class="comment">// 运算符</span></span><br><span class="line">                    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">20</span>; i&lt;<span class="number">33</span>; i++)</span><br><span class="line">                        <span class="keyword">if</span>(wordsTable[i] == words)&#123;</span><br><span class="line">                            cag = i+<span class="number">1</span>;</span><br><span class="line">                            <span class="keyword">break</span>;  <span class="comment">// 跳出for循环而非case</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                    <span class="comment">// 出错啦</span></span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>: <span class="keyword">break</span>;      <span class="comment">// 常数</span></span><br><span class="line">                <span class="keyword">case</span> <span class="number">3</span>:    <span class="comment">// 界符</span></span><br><span class="line">                    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">38</span>; i&lt;<span class="number">49</span>; i++)</span><br><span class="line">                        <span class="keyword">if</span>(wordsTable[i] == words)&#123;</span><br><span class="line">                            cag = i+<span class="number">1</span>;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                    <span class="comment">// 出错啦</span></span><br><span class="line">                <span class="keyword">case</span> <span class="number">4</span>:    <span class="comment">// 标识符</span></span><br><span class="line">                    cag = <span class="number">34</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">5</span>:     <span class="comment">// 注释 无需输出与存储，初始化后退出</span></span><br><span class="line">                    <span class="built_in">newStatus</span>(<span class="number">0</span>);</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            wordsLen += <span class="number">1</span>;</span><br><span class="line">            <span class="built_in">newPrintf</span>(<span class="string">&quot;(%d)(%d,%s)\n&quot;</span>, wordsLen, cag, words.<span class="built_in">c_str</span>());</span><br><span class="line">            strV.<span class="built_in">push_back</span>(words);   <span class="comment">// 存储词元</span></span><br><span class="line">            typeV.<span class="built_in">push_back</span>(cag);   <span class="comment">// 存储词元</span></span><br><span class="line">            <span class="built_in">newStatus</span>(<span class="number">0</span>);   <span class="comment">// 初始化</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">typeWords</span><span class="params">(<span class="type">int</span> n = <span class="number">0</span>)</span></span>&#123;    <span class="comment">// 确定全字母词元 关键字 || 标识符 || 布尔常量</span></span><br><span class="line">            <span class="keyword">if</span>(!n)&#123;</span><br><span class="line">                cag = <span class="built_in">isKeywords</span>();</span><br><span class="line">                <span class="keyword">if</span>(cag) type = <span class="number">0</span>;   <span class="comment">// 是关键字</span></span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isBoolean</span>())&#123;   <span class="comment">// 布尔常量</span></span><br><span class="line">                    type = <span class="number">2</span>;</span><br><span class="line">                    cag = <span class="number">38</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> type = <span class="number">4</span>;    <span class="comment">// 标识符</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;    <span class="comment">// 标识符</span></span><br><span class="line">                type = <span class="number">4</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">typeOperator</span><span class="params">()</span></span>&#123;    <span class="comment">// 确定运算符</span></span><br><span class="line">            type = <span class="number">1</span>;   <span class="comment">// 常量</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">typeConst</span><span class="params">(<span class="type">int</span> n)</span></span>&#123;    <span class="comment">// 确定常量, 0-&gt;整型 1-&gt;实数 2-&gt;字符串 3-&gt;布尔</span></span><br><span class="line">            type = <span class="number">2</span>;   <span class="comment">// 常量</span></span><br><span class="line">            <span class="keyword">switch</span>(n)&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                    cag = <span class="number">35</span>;</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                    cag = <span class="number">36</span>;</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                    cag = <span class="number">37</span>;</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                    cag = <span class="number">38</span>;</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">typeDelimiter</span><span class="params">()</span></span>&#123;    <span class="comment">// 确定界符</span></span><br><span class="line">            type = <span class="number">4</span>;   <span class="comment">// 常量</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">typeNote</span><span class="params">()</span></span>&#123;    <span class="comment">// 确定注释</span></span><br><span class="line">            type = <span class="number">5</span>;   <span class="comment">// 常量</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">isBlank</span><span class="params">()</span><span class="type">const</span></span>&#123;    <span class="comment">// 检测空白字符</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">4</span>; i++)</span><br><span class="line">                <span class="keyword">if</span>(filt[i] == wd) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">isDelimiter</span><span class="params">()</span><span class="type">const</span></span>&#123;    <span class="comment">// 判断是否是单字分界符</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">4</span>; i++)</span><br><span class="line">                <span class="keyword">if</span>(wd == delm[i]) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">isBoolean</span><span class="params">()</span><span class="type">const</span></span>&#123;   <span class="comment">// 判断布尔常量</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">2</span>; i++)</span><br><span class="line">                <span class="keyword">if</span>(words == boolean[i]) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">isKeywords</span><span class="params">()</span><span class="type">const</span></span>&#123;  <span class="comment">// 判断关键字，返回种别码或0</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;keyWordsLen; i++)</span><br><span class="line">                <span class="keyword">if</span>(words == wordsTable[i]) <span class="keyword">return</span> i+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">isNumber</span><span class="params">(<span class="type">int</span> lim = <span class="number">10</span>)</span><span class="type">const</span></span>&#123;  <span class="comment">// 判断数字</span></span><br><span class="line">            <span class="keyword">switch</span> (lim)&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>:    <span class="comment">// 除0以外的十进制数字</span></span><br><span class="line">                    <span class="keyword">if</span>(wd &gt;= <span class="string">&#x27;1&#x27;</span> &amp;&amp; wd &lt;= <span class="string">&#x27;9&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">10</span>:        <span class="comment">// 十进制</span></span><br><span class="line">                    <span class="keyword">if</span>(wd&gt;=<span class="string">&#x27;0&#x27;</span> &amp;&amp; wd&lt;=<span class="string">&#x27;9&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">                    <span class="keyword">if</span>(wd &gt;=<span class="string">&#x27;0&#x27;</span> &amp;&amp; wd&lt;=<span class="string">&#x27;7&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                    <span class="keyword">if</span>(wd &gt;=<span class="string">&#x27;2&#x27;</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">16</span>:</span><br><span class="line">                    <span class="keyword">if</span>(wd &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; wd &lt;= <span class="string">&#x27;9&#x27;</span> || wd &gt;= <span class="string">&#x27;a&#x27;</span> &amp;&amp; wd &lt;= <span class="string">&#x27;f&#x27;</span> || wd &gt;= <span class="string">&#x27;A&#x27;</span> &amp;&amp; wd &lt;= <span class="string">&#x27;F&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">isLowerLetter</span><span class="params">()</span><span class="type">const</span></span>&#123;  <span class="comment">// 判断大写字母</span></span><br><span class="line">            <span class="keyword">if</span>(wd&gt;=<span class="string">&#x27;a&#x27;</span> &amp;&amp; wd&lt;=<span class="string">&#x27;z&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">isUpperLetter</span><span class="params">()</span><span class="type">const</span></span>&#123;  <span class="comment">// 判断大写字母</span></span><br><span class="line">            <span class="keyword">if</span>(wd&gt;=<span class="string">&#x27;A&#x27;</span> &amp;&amp; wd&lt;=<span class="string">&#x27;Z&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">printSplit</span><span class="params">(string text)</span></span>&#123;  <span class="comment">// 输出夹带文本的分割线</span></span><br><span class="line">            <span class="type">const</span> <span class="type">int</span> aLen = <span class="number">60</span>;</span><br><span class="line">            <span class="type">int</span> _len = text.<span class="built_in">length</span>()+<span class="number">2</span>; <span class="comment">// 两侧留空</span></span><br><span class="line">            <span class="type">int</span> left = (aLen-_len)/<span class="number">2</span>, right = aLen - left - _len;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;left; i++) <span class="built_in">newPrintf</span>(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">            <span class="built_in">newPrintf</span>(<span class="string">&quot; %s &quot;</span>, text.<span class="built_in">c_str</span>());</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;right; i++) <span class="built_in">newPrintf</span>(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">            <span class="built_in">newPrintf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">newPrintf</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *fmt, ...)</span></span>&#123;   <span class="comment">// 重载自己的printf, 便于保存输出的内容, 参考: https://blog.csdn.net/weixin_51281362/article/details/125445742 | https://blog.csdn.net/wanruiou/article/details/115180466</span></span><br><span class="line">            va_list arg;    </span><br><span class="line">            <span class="built_in">va_start</span>(arg, fmt); <span class="comment">// 传入地址</span></span><br><span class="line">            <span class="built_in">vprintf</span>(fmt, arg); </span><br><span class="line">            <span class="keyword">if</span>(needOF)  <span class="comment">// 需要保存至文件</span></span><br><span class="line">                <span class="built_in">vfprintf</span>(oF, fmt, arg); <span class="comment">// 借助FILE将printf重定向至文件流, 参考: https://blog.csdn.net/LuyaoYing001/article/details/79750833</span></span><br><span class="line">            <span class="built_in">va_end</span>(arg);    <span class="comment">// 结束可变参数的获取</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    wordsAnalyzer *wA = <span class="keyword">new</span> <span class="built_in">wordsAnalyzer</span>();</span><br><span class="line">    wA-&gt;<span class="built_in">printSplit</span>(<span class="string">&quot;Lexical Analysis&quot;</span>);</span><br><span class="line">    wA-&gt;<span class="built_in">analyze</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="Z语言版本"><a href="#Z语言版本" class="headerlink" title="Z语言版本"></a>Z语言版本</h3><p>鉴于编译原理老师神奇的吃表操作，而且新的表甚至抛弃了布尔常量和字符串，特地改了一份符合新词元表的词法分析器，总体与上一个版本是一样的。为了后续维护的方便，没有做高度的封装，将一些功能开放出来。</p>
<p>源码：</p>
<div class="highlight-container" data-rel="C++"><figure class="iseeu highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdarg.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> idMax 20</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> keyWordsLen 14</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">wordsAnalyzer</span>&#123;</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        <span class="type">char</span> wd;            <span class="comment">// 读取字符</span></span><br><span class="line">        <span class="type">int</span> len, status;    <span class="comment">// 缓存长度与自动机状态</span></span><br><span class="line">        <span class="type">int</span> flag;           <span class="comment">// 标记分析器是否正常</span></span><br><span class="line">        <span class="type">int</span> wordsLen;       <span class="comment">// 词元数量</span></span><br><span class="line">        <span class="type">int</span> type;           <span class="comment">// 种别归类: 0-关键字 1-运算符 2-常数 3-界符 4-标识符 5-注释串</span></span><br><span class="line">        <span class="type">int</span> cag;         <span class="comment">// 种别码, 保持为可查表位序+1</span></span><br><span class="line">        <span class="type">int</span> srcLen;     <span class="comment">// 源码长度</span></span><br><span class="line">        <span class="type">int</span> needOF;     <span class="comment">// 是否需要保存至文件</span></span><br><span class="line">        vector&lt;string&gt; strV;    <span class="comment">// 存储词元</span></span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; typeV;    <span class="comment">// 存储种别码</span></span><br><span class="line">        string words;       <span class="comment">// 缓存</span></span><br><span class="line">        string src;     <span class="comment">// 源码字符串</span></span><br><span class="line">        FILE *oF;    <span class="comment">// 结果保存文件，默认为fiP</span></span><br><span class="line">        string oFP;     <span class="comment">// 保存路径</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="comment">// 词元编码表</span></span><br><span class="line">        vector&lt;string&gt; wordsTable = &#123;</span><br><span class="line">            <span class="string">&quot;program&quot;</span>, <span class="string">&quot;var&quot;</span>, <span class="string">&quot;integer&quot;</span>, <span class="string">&quot;real&quot;</span>,            <span class="comment">// 0-3</span></span><br><span class="line">            <span class="string">&quot;begin&quot;</span>, <span class="string">&quot;end&quot;</span>, <span class="string">&quot;if&quot;</span>, <span class="string">&quot;then&quot;</span>,                   <span class="comment">// 4-7</span></span><br><span class="line">            <span class="string">&quot;else&quot;</span>, <span class="string">&quot;while&quot;</span>, <span class="string">&quot;do&quot;</span>, <span class="string">&quot;repeat&quot;</span>,                <span class="comment">// 8-11</span></span><br><span class="line">            <span class="string">&quot;until&quot;</span>, <span class="string">&quot;for&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>,                   <span class="comment">// 12-15（跳过14, 15）</span></span><br><span class="line">            <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>,                     <span class="comment">// 16-19（全跳过）</span></span><br><span class="line">            <span class="string">&quot;+&quot;</span>, <span class="string">&quot;-&quot;</span>, <span class="string">&quot;*&quot;</span>, <span class="string">&quot;/&quot;</span>,                             <span class="comment">// 20-23</span></span><br><span class="line">            <span class="string">&quot;&gt;&quot;</span>, <span class="string">&quot;&gt;=&quot;</span>, <span class="string">&quot;&lt;&quot;</span>, <span class="string">&quot;&lt;=&quot;</span>,                           <span class="comment">// 24-27</span></span><br><span class="line">            <span class="string">&quot;=&quot;</span>, <span class="string">&quot;&lt;&gt;&quot;</span>, <span class="string">&quot;:=&quot;</span>, <span class="string">&quot;&amp;&amp;&quot;</span>,                          <span class="comment">// 28-31</span></span><br><span class="line">            <span class="string">&quot;||&quot;</span>, <span class="string">&quot;!&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>,                        <span class="comment">// 32-35（跳过34, 35）</span></span><br><span class="line">            <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>,                     <span class="comment">// 36-39（全跳过）</span></span><br><span class="line">            <span class="string">&quot;integerConst&quot;</span>, <span class="string">&quot;doubleConst&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>,    <span class="comment">// 40-43（跳过42, 43）</span></span><br><span class="line">            <span class="string">&quot;id&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>,                      <span class="comment">// 44-47（跳过45, 47）</span></span><br><span class="line">            <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;;&quot;</span>, <span class="string">&quot;.&quot;</span>,                         <span class="comment">// 48-51（跳过48, 49）</span></span><br><span class="line">            <span class="string">&quot;,&quot;</span>, <span class="string">&quot;:&quot;</span>, <span class="string">&quot;(&quot;</span>, <span class="string">&quot;)&quot;</span>,                             <span class="comment">// 52-55</span></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// 空白字符</span></span><br><span class="line">        <span class="type">const</span> vector&lt;<span class="type">char</span>&gt; filt = &#123;<span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;\n&#x27;</span>, <span class="string">&#x27;\t&#x27;</span>, <span class="string">&#x27;\0&#x27;</span>&#125;;</span><br><span class="line">        <span class="comment">// 单字分隔符,不考虑冒号,点号</span></span><br><span class="line">        <span class="type">const</span> vector&lt;<span class="type">char</span>&gt; delm = &#123;<span class="string">&#x27;;&#x27;</span>, <span class="string">&#x27;,&#x27;</span>, <span class="string">&#x27;(&#x27;</span>, <span class="string">&#x27;)&#x27;</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">wordsAnalyzer</span>(string fiP = <span class="string">&quot;./test.txt&quot;</span>, string foP = <span class="string">&quot;./res.txt&quot;</span>)&#123;</span><br><span class="line">            flag = <span class="number">1</span>;               <span class="comment">// 分析器状态ok</span></span><br><span class="line">            words = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            len = <span class="number">0</span>;</span><br><span class="line">            status = <span class="number">0</span>;     <span class="comment">// 自动机起点</span></span><br><span class="line">            wordsLen = <span class="number">0</span>;   <span class="comment">// 词元数量</span></span><br><span class="line">            oFP = foP;      <span class="comment">// 保存路径</span></span><br><span class="line">            ifstream ins;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span>(oFP!=<span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">                needOF = <span class="number">1</span>;</span><br><span class="line">                oF = <span class="built_in">fopen</span>(oFP.<span class="built_in">c_str</span>(), <span class="string">&quot;w&quot;</span>);    <span class="comment">// 覆盖式的写入</span></span><br><span class="line">                <span class="keyword">if</span>(oF==<span class="literal">NULL</span>)&#123;</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;Fail to write in the file: %s&quot;</span>, oFP.<span class="built_in">c_str</span>());</span><br><span class="line">                    <span class="keyword">this</span>-&gt;flag = <span class="number">0</span>;</span><br><span class="line">                    <span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="built_in">newPrintf</span>(<span class="string">&quot;Output file path: %s -&gt; Succeed!\n&quot;</span>, oFP.<span class="built_in">c_str</span>());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> needOF = <span class="number">0</span>;    <span class="comment">// 不保存文件</span></span><br><span class="line">            ins.<span class="built_in">open</span>(fiP, ios::in);     <span class="comment">// 读入模式打开文件</span></span><br><span class="line">            <span class="keyword">if</span>(!ins.<span class="built_in">good</span>())&#123;    <span class="comment">// 检测文件是否正常打开</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Fail to open the file: %s&quot;</span>, fiP.<span class="built_in">c_str</span>());</span><br><span class="line">                <span class="keyword">this</span>-&gt;flag = <span class="number">0</span>;</span><br><span class="line">                <span class="built_in">exit</span>(<span class="number">-1</span>);       <span class="comment">// 出错, 终止程序</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">newPrintf</span>(<span class="string">&quot;Input file path: %s -&gt; Succeed!\n&quot;</span>, fiP.<span class="built_in">c_str</span>());   <span class="comment">// 展示读取路径</span></span><br><span class="line">            <span class="built_in">printSplit</span>(<span class="string">&quot;Src&quot;</span>);  <span class="comment">// 分割线</span></span><br><span class="line">            </span><br><span class="line">            <span class="type">char</span> _ch;</span><br><span class="line">            src = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="keyword">while</span>((_ch = ins.<span class="built_in">get</span>()) != EOF)&#123;    <span class="comment">// 存入源码串中</span></span><br><span class="line">                src += _ch;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            ins.<span class="built_in">close</span>();</span><br><span class="line">            src += <span class="string">&#x27;\0&#x27;</span>;    <span class="comment">// 添加终止符</span></span><br><span class="line">            srcLen = src.<span class="built_in">length</span>();  <span class="comment">// 源码串长度</span></span><br><span class="line">            <span class="built_in">newPrintf</span>(<span class="string">&quot;%s\n&quot;</span>, src.<span class="built_in">c_str</span>());    <span class="comment">// 展示源码</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ~<span class="built_in">wordsAnalyzer</span>()&#123;</span><br><span class="line">            <span class="built_in">fclose</span>(oF);     <span class="comment">// 关闭FILE文件流</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">analyze</span><span class="params">()</span></span>&#123;    <span class="comment">// 词法分析器</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;srcLen; i++)&#123;</span><br><span class="line">                wd = src[i];</span><br><span class="line">                <span class="keyword">switch</span>(status)&#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">0</span>:    <span class="comment">// 自动机起点，words为空</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isBlank</span>()) <span class="built_in">blankContinue</span>();   <span class="comment">// 跳过空白字符</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isLowerLetter</span>() || <span class="built_in">isUpperLetter</span>()) <span class="built_in">newStatus</span>(<span class="number">1</span>);   <span class="comment">// 转移状态-&gt;1 字母开头 大写字母可以用于区分标识符和关键字，但即使全是小写字母也需要单独检查，因此全是字母归为一类</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">0</span>)) <span class="built_in">newStatus</span>(<span class="number">2</span>);                          <span class="comment">// 转移状态-&gt;2 非零数字开头</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;0&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">3</span>);                            <span class="comment">// 转移状态-&gt;3  0开头</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;&amp;&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">4</span>);         <span class="comment">// 转移状态-&gt;4  多字运算符</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;|&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">5</span>);         <span class="comment">// 转移状态-&gt;5  </span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;:&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">6</span>);         <span class="comment">// 转移状态-&gt;6</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;&gt;&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">7</span>);         <span class="comment">// 转移状态-&gt;7</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;&lt;&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">8</span>);         <span class="comment">// 转移状态-&gt;8</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;/&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">9</span>);         <span class="comment">// 转移状态-&gt;9</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;*&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">10</span>);        <span class="comment">// 状态转移-&gt;10 单字运算符</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;=&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">11</span>);        <span class="comment">// 状态转移-&gt;11 </span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;!&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">12</span>);        <span class="comment">// 状态转移-&gt;12 </span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;+&#x27;</span> || wd == <span class="string">&#x27;-&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">13</span>);         <span class="comment">// 状态转移-&gt;13 加减号(正负号)</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;.&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">14</span>);        <span class="comment">// 状态转移-&gt;14 考虑.5 == 0.5 ,此时.后必须有数字</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isDelimiter</span>())&#123;        <span class="comment">// 单字分界符直接给出结果</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            type = <span class="number">3</span>;</span><br><span class="line">                            <span class="built_in">output</span>();               <span class="comment">// 存储词元、输出、初始化</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> i = <span class="built_in">passError</span>(i);      <span class="comment">// 检测到非法字符如&quot;^#$&quot;等</span></span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">1</span>:&#123;    <span class="comment">// 字母开头,全字母情况 可终止 -&gt; 标识符或关键字</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isLowerLetter</span>() || <span class="built_in">isUpperLetter</span>()) <span class="built_in">newStatus</span>(<span class="number">1</span>);    <span class="comment">// 原地踏步</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isNumber</span>() || wd == <span class="string">&#x27;_&#x27;</span>)&#123;     <span class="comment">// 状态转移-&gt;17</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">17</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span>&#123;       <span class="comment">// 处理缓存内容</span></span><br><span class="line">                            cag = <span class="built_in">isKeywords</span>();</span><br><span class="line">                            <span class="keyword">if</span>(cag) type = <span class="number">0</span>;   <span class="comment">// 是关键字</span></span><br><span class="line">                            <span class="keyword">else</span> type = <span class="number">4</span>;    <span class="comment">// 标识符</span></span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">2</span>:&#123;        <span class="comment">// 非零数字开头，可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd==<span class="string">&#x27;.&#x27;</span>)&#123;    <span class="comment">// 转移状态-&gt;18 十进制实数, 此时.后可以无内容</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">18</span>);   </span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;e&#x27;</span> || wd == <span class="string">&#x27;E&#x27;</span>)&#123;    <span class="comment">// 转移状态-&gt;19 科学计数法E</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">19</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isNumber</span>())&#123;      <span class="comment">// 原地踏步</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">2</span>);   </span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isLowerLetter</span>() || <span class="built_in">isUpperLetter</span>() || wd == <span class="string">&#x27;\&#x27;&#x27;</span> || wd == <span class="string">&#x27;&quot;&#x27;</span>)&#123;     <span class="comment">// 十进制数后跟字母或引号铁铁出错</span></span><br><span class="line">                            i = <span class="built_in">passError</span>(i);   <span class="comment">// 出错处理</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span>&#123;       <span class="comment">// 被视为整常数，重置缓存</span></span><br><span class="line">                            type = <span class="number">2</span>;</span><br><span class="line">                            cag = <span class="number">41</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">3</span>:&#123;    <span class="comment">// 0开头数字，可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;X&#x27;</span> || wd == <span class="string">&#x27;x&#x27;</span>)&#123;     <span class="comment">// 状态转移-&gt;20 十六进制X</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">20</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;b&#x27;</span> || wd == <span class="string">&#x27;B&#x27;</span>)&#123;    <span class="comment">// 状态转移-&gt;21 二进制数b</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">21</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">8</span>))&#123;   <span class="comment">// 状态转移-&gt;22 八进制数</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">22</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isLowerLetter</span>() || <span class="built_in">isUpperLetter</span>() || wd == <span class="string">&#x27;\&#x27;&#x27;</span> || wd == <span class="string">&#x27;&quot;&#x27;</span>)&#123;     <span class="comment">// 十进制数后跟字母或引号铁铁出错</span></span><br><span class="line">                            i = <span class="built_in">passError</span>(i);   <span class="comment">// 出错处理</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span>&#123;       <span class="comment">// 被视为整常数0</span></span><br><span class="line">                            type = <span class="number">2</span>;</span><br><span class="line">                            cag = <span class="number">41</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">4</span>:&#123;    <span class="comment">// 检查 &amp; 不可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;&amp;&#x27;</span>)&#123;  <span class="comment">// 与运算符</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            i = <span class="built_in">passError</span>(i);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">5</span>:&#123;    <span class="comment">// 检查 | 不可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;|&#x27;</span>)&#123;  <span class="comment">// 或运算符</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            i = <span class="built_in">passError</span>(i);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">6</span>:&#123;    <span class="comment">// 检查 : 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;=&#x27;</span>)&#123;  <span class="comment">// 赋值号:=</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span>&#123;    <span class="comment">// 冒号:</span></span><br><span class="line">                            type = <span class="number">3</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">7</span>:&#123;    <span class="comment">// 检查 &gt; 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;=&#x27;</span>)&#123;  <span class="comment">// &gt;=</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;    <span class="comment">// &gt;</span></span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">8</span>:&#123;    <span class="comment">// 检查 &lt; 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;=&#x27;</span>)&#123;  <span class="comment">// &lt;=</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;&gt;&#x27;</span>)&#123;   <span class="comment">// &lt;&gt;</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> &#123;    <span class="comment">// &lt;</span></span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">9</span>:&#123;    <span class="comment">// 检查 / 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;/&#x27;</span>)&#123;  <span class="comment">// 状态转移-&gt;23 单行注释符//</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">23</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;*&#x27;</span>)&#123; <span class="comment">// 状态转移-&gt;24 多行注释符</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">24</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;    <span class="comment">// 除号/</span></span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">10</span>:&#123;   <span class="comment">// 检查 *</span></span><br><span class="line">                        type = <span class="number">1</span>;</span><br><span class="line">                        <span class="built_in">output</span>();</span><br><span class="line">                        i -= <span class="number">1</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">11</span>:&#123;   <span class="comment">// 检查 =</span></span><br><span class="line">                        type = <span class="number">1</span>;</span><br><span class="line">                        <span class="built_in">output</span>();</span><br><span class="line">                        i -= <span class="number">1</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">12</span>:&#123;   <span class="comment">// 检查 !</span></span><br><span class="line">                        type = <span class="number">1</span>;</span><br><span class="line">                        <span class="built_in">output</span>();</span><br><span class="line">                        i -= <span class="number">1</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">13</span>:&#123;   <span class="comment">// +-号 不完美的DFA 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(cag == <span class="number">41</span> || cag == <span class="number">42</span> || cag == <span class="number">45</span> || cag ==<span class="number">56</span> )&#123;     <span class="comment">// 前面出现操作数则为加减号, &#x27;(&#x27;被视为有效界符, &#x27;)&#x27; 则被视为操作数</span></span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;.&#x27;</span>)&#123;         <span class="comment">// 状态转移-&gt;14 实数</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">14</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">0</span>))&#123;        <span class="comment">// 状态转移-&gt;2 非0数字</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">2</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;0&#x27;</span>)&#123;         <span class="comment">// 状态转移-&gt;3 数字0</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">3</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span>&#123;   <span class="comment">// 加减号</span></span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">14</span>:&#123;   <span class="comment">// . 实数 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>())&#123; <span class="comment">// 状态转移-&gt;18 正常实数</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">18</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            type = <span class="number">3</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">17</span>:&#123;   <span class="comment">// 标识符 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>() || <span class="built_in">isLowerLetter</span>() || <span class="built_in">isUpperLetter</span>() || wd == <span class="string">&#x27;_&#x27;</span>)&#123;  <span class="comment">// 原地踏步</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">17</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;    <span class="comment">// 获取标识符</span></span><br><span class="line">                            type = <span class="number">4</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">18</span>:&#123;   <span class="comment">// 真 实数 后可不跟数字 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>())&#123; <span class="comment">// 原地踏步</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">18</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;e&#x27;</span> || wd == <span class="string">&#x27;E&#x27;</span>)&#123;  <span class="comment">// 状态转移-&gt;19 科学计数法  允许有: 3.e7 的写法</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">19</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;    <span class="comment">// 截取实数</span></span><br><span class="line">                            type = <span class="number">2</span>;</span><br><span class="line">                            cag = <span class="number">42</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125; </span><br><span class="line">                    <span class="keyword">case</span> <span class="number">19</span>:&#123;   <span class="comment">// 科学计数法e 不可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;+&#x27;</span> || wd == <span class="string">&#x27;-&#x27;</span>)&#123;     <span class="comment">// 状态转移-&gt;25 科学计数法+-</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">25</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isNumber</span>())&#123;      <span class="comment">// 状态转移-&gt;26 十进制整数后终态</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">26</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;    <span class="comment">// 出错啦</span></span><br><span class="line">                            i = <span class="built_in">passError</span>(i);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">20</span>:&#123;   <span class="comment">// 十六进制x 不可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">16</span>))&#123;   <span class="comment">// 状态转移-&gt;27 十六进制整数后终态</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">27</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            i = <span class="built_in">passError</span>(i);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">21</span>:&#123;   <span class="comment">// 二进制数b 不可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">2</span>))&#123;    <span class="comment">// 状态转移-&gt;28 二进制数后终态</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">28</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            i = <span class="built_in">passError</span>(i);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">22</span>:&#123;   <span class="comment">// 八进制数中态 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">8</span>))&#123;    <span class="comment">// 原地踏步</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">22</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;e&#x27;</span> || wd == <span class="string">&#x27;E&#x27;</span>)&#123;  <span class="comment">// 状态转移-&gt;19 科学计数法e</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">19</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;.&#x27;</span>)&#123;   <span class="comment">// 状态转移-&gt;18 当做十进制数处理的八进制小数(C++中自适应)</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">18</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            type = <span class="number">2</span>;</span><br><span class="line">                            cag = <span class="number">41</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">23</span>:&#123;   <span class="comment">// 单行注释符// 条件终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;\n&#x27;</span>)&#123;   <span class="comment">// 截取单行注释串</span></span><br><span class="line">                            type = <span class="number">5</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;    <span class="comment">// 原地踏步</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">23</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">24</span>:&#123;   <span class="comment">// 多行注释符/* 不可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;*&#x27;</span>)&#123;  <span class="comment">// 状态转移-&gt;29 检测退出记号*/</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">29</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;    <span class="comment">// 原地踏步</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">24</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">25</span>:&#123;   <span class="comment">// 科学计数法+- 不可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>())&#123;     <span class="comment">// 状态转移-&gt;26 十进制整数后终态</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">26</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            i = <span class="built_in">passError</span>(i);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">26</span>:&#123;   <span class="comment">// 十进制整数后终态 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>())&#123;     <span class="comment">// 原地踏步</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">26</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            type = <span class="number">2</span>;</span><br><span class="line">                            cag = <span class="number">42</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">27</span>:&#123;   <span class="comment">// 十六进制整数后终态 十六进制不接受小数点</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">16</span>))&#123;   <span class="comment">// 原地踏步</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">27</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;e&#x27;</span> || wd == <span class="string">&#x27;E&#x27;</span>)&#123;  <span class="comment">// 状态转移-&gt;19</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">19</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            type = <span class="number">2</span>;</span><br><span class="line">                            cag = <span class="number">41</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">28</span>:&#123;   <span class="comment">// 二进制数后终态</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">2</span>))&#123;</span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">28</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;e&#x27;</span> || wd == <span class="string">&#x27;E&#x27;</span>)&#123;</span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">19</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            type = <span class="number">2</span>;</span><br><span class="line">                            cag = <span class="number">41</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">29</span>:&#123;   <span class="comment">// 检测退出记号 */</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;/&#x27;</span>)&#123;</span><br><span class="line">                            type = <span class="number">5</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; </span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;*&#x27;</span>)&#123;     <span class="comment">// 原地踏步</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">29</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> &#123;    <span class="comment">// 状态转移-&gt;24</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">24</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(needOF)&#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;==&gt; The output has been saved to the file: %s&quot;</span>, oFP.<span class="built_in">c_str</span>());   <span class="comment">// 保存文件</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">blankContinue</span><span class="params">()</span></span>&#123;    <span class="comment">// 跳过空白字符，考虑换行对正负加减的影响</span></span><br><span class="line">            <span class="keyword">if</span>(wd == <span class="string">&#x27;\n&#x27;</span>) cag = <span class="number">51</span>;     <span class="comment">// 对于大部分词元而言换行等价于分号 </span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">passError</span><span class="params">(<span class="type">int</span> n)</span></span>&#123;   <span class="comment">// 跳过错误部分，不考虑错误部分引号的性质</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=n; i&lt;srcLen; i++)&#123;</span><br><span class="line">                wd = src[i];</span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">isDelimiter</span>() || <span class="built_in">isBlank</span>() || wd == <span class="string">&#x27;.&#x27;</span>)&#123;</span><br><span class="line">                    <span class="built_in">outError</span>();</span><br><span class="line">                    <span class="keyword">return</span> i<span class="number">-1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(wd == <span class="string">&#x27;:&#x27;</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(src[i+<span class="number">1</span>]!=<span class="string">&#x27;=&#x27;</span>)&#123;</span><br><span class="line">                        <span class="built_in">outError</span>();</span><br><span class="line">                        <span class="keyword">return</span> i<span class="number">-1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(wd == <span class="string">&#x27;/&#x27;</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(src[i+<span class="number">1</span>]==<span class="string">&#x27;/&#x27;</span> || src[i+<span class="number">1</span>]==<span class="string">&#x27;*&#x27;</span>)&#123;</span><br><span class="line">                        <span class="built_in">outError</span>();</span><br><span class="line">                        <span class="keyword">return</span> i<span class="number">-1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="built_in">newStatus</span>(<span class="number">-1</span>);  <span class="comment">// 避免分界符被放入错误输出中</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> srcLen<span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">outError</span><span class="params">()</span></span>&#123;     <span class="comment">// 错误报告</span></span><br><span class="line">            <span class="built_in">newPrintf</span>(<span class="string">&quot;Error with: %s\n&quot;</span>, words.<span class="built_in">c_str</span>());</span><br><span class="line">            <span class="built_in">newStatus</span>(<span class="number">0</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">newStatus</span><span class="params">(<span class="type">int</span> _s)</span></span>&#123;  <span class="comment">// 更新状态</span></span><br><span class="line">            <span class="keyword">switch</span>(_s)&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>:    <span class="comment">// 为0则初始化状态</span></span><br><span class="line">                    status = <span class="number">0</span>;    <span class="comment">// 原始状态</span></span><br><span class="line">                    len = <span class="number">0</span>;</span><br><span class="line">                    words = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">-1</span>:   <span class="comment">// -1作为一个暂态，处理不需要状态实际转移的情况</span></span><br><span class="line">                    len += <span class="number">1</span>;</span><br><span class="line">                    words += wd;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:    <span class="comment">// 不为0就更新状态</span></span><br><span class="line">                    status = _s;</span><br><span class="line">                    len += <span class="number">1</span>;</span><br><span class="line">                    words += wd;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">output</span><span class="params">()</span></span>&#123;   <span class="comment">// 存储词元、输出、初始化</span></span><br><span class="line">            <span class="keyword">switch</span>(type)&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>: <span class="keyword">break</span>;      <span class="comment">// 关键字</span></span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>:    <span class="comment">// 运算符</span></span><br><span class="line">                    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">20</span>; i&lt;<span class="number">33</span>; i++)</span><br><span class="line">                        <span class="keyword">if</span>(wordsTable[i] == words)&#123;</span><br><span class="line">                            cag = i+<span class="number">1</span>;</span><br><span class="line">                            <span class="keyword">break</span>;  <span class="comment">// 跳出for循环而非case</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    <span class="comment">// 出错啦</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>: <span class="keyword">break</span>;      <span class="comment">// 常数</span></span><br><span class="line">                <span class="keyword">case</span> <span class="number">3</span>:    <span class="comment">// 界符</span></span><br><span class="line">                    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">50</span>; i&lt;<span class="number">56</span>; i++)</span><br><span class="line">                        <span class="keyword">if</span>(wordsTable[i] == words)&#123;</span><br><span class="line">                            cag = i+<span class="number">1</span>;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                    <span class="comment">// 出错啦</span></span><br><span class="line">                <span class="keyword">case</span> <span class="number">4</span>:    <span class="comment">// 标识符</span></span><br><span class="line">                    cag = <span class="number">45</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">5</span>:     <span class="comment">// 注释 无需输出与存储，初始化后退出</span></span><br><span class="line">                    <span class="built_in">newStatus</span>(<span class="number">0</span>);</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            wordsLen += <span class="number">1</span>;</span><br><span class="line">            <span class="built_in">newPrintf</span>(<span class="string">&quot;(%d)(%d,%s)\n&quot;</span>, wordsLen, cag, words.<span class="built_in">c_str</span>());</span><br><span class="line">            strV.<span class="built_in">push_back</span>(words);   <span class="comment">// 存储词元</span></span><br><span class="line">            typeV.<span class="built_in">push_back</span>(cag);   <span class="comment">// 存储词元</span></span><br><span class="line">            <span class="built_in">newStatus</span>(<span class="number">0</span>);   <span class="comment">// 初始化</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">isBlank</span><span class="params">()</span><span class="type">const</span></span>&#123;    <span class="comment">// 检测空白字符</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">4</span>; i++)</span><br><span class="line">                <span class="keyword">if</span>(filt[i] == wd) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">isDelimiter</span><span class="params">()</span><span class="type">const</span></span>&#123;    <span class="comment">// 判断是否是单字分界符</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">4</span>; i++)</span><br><span class="line">                <span class="keyword">if</span>(wd == delm[i]) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">isKeywords</span><span class="params">()</span><span class="type">const</span></span>&#123;  <span class="comment">// 判断关键字，返回种别码或0</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;keyWordsLen; i++)</span><br><span class="line">                <span class="keyword">if</span>(words == wordsTable[i]) <span class="keyword">return</span> i+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">isNumber</span><span class="params">(<span class="type">int</span> lim = <span class="number">10</span>)</span><span class="type">const</span></span>&#123;  <span class="comment">// 判断数字</span></span><br><span class="line">            <span class="keyword">switch</span> (lim)&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>:    <span class="comment">// 除0以外的十进制数字</span></span><br><span class="line">                    <span class="keyword">if</span>(wd &gt;= <span class="string">&#x27;1&#x27;</span> &amp;&amp; wd &lt;= <span class="string">&#x27;9&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">10</span>:        <span class="comment">// 十进制</span></span><br><span class="line">                    <span class="keyword">if</span>(wd&gt;=<span class="string">&#x27;0&#x27;</span> &amp;&amp; wd&lt;=<span class="string">&#x27;9&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">                    <span class="keyword">if</span>(wd &gt;=<span class="string">&#x27;0&#x27;</span> &amp;&amp; wd&lt;=<span class="string">&#x27;7&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                    <span class="keyword">if</span>(wd &gt;=<span class="string">&#x27;2&#x27;</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">16</span>:</span><br><span class="line">                    <span class="keyword">if</span>(wd &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; wd &lt;= <span class="string">&#x27;9&#x27;</span> || wd &gt;= <span class="string">&#x27;a&#x27;</span> &amp;&amp; wd &lt;= <span class="string">&#x27;f&#x27;</span> || wd &gt;= <span class="string">&#x27;A&#x27;</span> &amp;&amp; wd &lt;= <span class="string">&#x27;F&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">isLowerLetter</span><span class="params">()</span><span class="type">const</span></span>&#123;  <span class="comment">// 判断大写字母</span></span><br><span class="line">            <span class="keyword">if</span>(wd&gt;=<span class="string">&#x27;a&#x27;</span> &amp;&amp; wd&lt;=<span class="string">&#x27;z&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">isUpperLetter</span><span class="params">()</span><span class="type">const</span></span>&#123;  <span class="comment">// 判断大写字母</span></span><br><span class="line">            <span class="keyword">if</span>(wd&gt;=<span class="string">&#x27;A&#x27;</span> &amp;&amp; wd&lt;=<span class="string">&#x27;Z&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">printSplit</span><span class="params">(string text)</span></span>&#123;  <span class="comment">// 输出夹带文本的分割线</span></span><br><span class="line">            <span class="type">const</span> <span class="type">int</span> aLen = <span class="number">60</span>;</span><br><span class="line">            <span class="type">int</span> _len = text.<span class="built_in">length</span>()+<span class="number">2</span>; <span class="comment">// 两侧留空</span></span><br><span class="line">            <span class="type">int</span> left = (aLen-_len)/<span class="number">2</span>, right = aLen - left - _len;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;left; i++) <span class="built_in">newPrintf</span>(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">            <span class="built_in">newPrintf</span>(<span class="string">&quot; %s &quot;</span>, text.<span class="built_in">c_str</span>());</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;right; i++) <span class="built_in">newPrintf</span>(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">            <span class="built_in">newPrintf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">newPrintf</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *fmt, ...)</span></span>&#123;   <span class="comment">// 重载自己的printf, 便于保存输出的内容, 参考: https://blog.csdn.net/weixin_51281362/article/details/125445742 | https://blog.csdn.net/wanruiou/article/details/115180466</span></span><br><span class="line">            va_list arg;    </span><br><span class="line">            <span class="built_in">va_start</span>(arg, fmt); <span class="comment">// 传入地址</span></span><br><span class="line">            <span class="built_in">vprintf</span>(fmt, arg); </span><br><span class="line">            <span class="keyword">if</span>(needOF)  <span class="comment">// 需要保存至文件</span></span><br><span class="line">                <span class="built_in">vfprintf</span>(oF, fmt, arg); <span class="comment">// 借助FILE将printf重定向至文件流, 参考: https://blog.csdn.net/LuyaoYing001/article/details/79750833</span></span><br><span class="line">            <span class="built_in">va_end</span>(arg);    <span class="comment">// 结束可变参数的获取</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    wordsAnalyzer *wA = <span class="keyword">new</span> <span class="built_in">wordsAnalyzer</span>();</span><br><span class="line">    wA-&gt;<span class="built_in">printSplit</span>(<span class="string">&quot;Lexical Analysis&quot;</span>);</span><br><span class="line">    wA-&gt;<span class="built_in">analyze</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h3><ul>
<li>若某些功能需要指向一些常做修改的变量，并且在代码中多次出现，则建议将其封装进函数，如此处的 <code>cag-&gt;wordsTable</code> ，这样当”wordsTable”发生变化，cag指向需要修改的时候只需要修改一个函数就能解决。</li>
</ul>
<h3 id="测试源码"><a href="#测试源码" class="headerlink" title="测试源码"></a>测试源码</h3><div class="highlight-container" data-rel="Pascal"><figure class="iseeu highlight pascal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">++; &gt;=&lt;=:=&lt;&gt;/*sdfsadfasdf23123123sdfsdf*<span class="number">22332376</span>FDD_**/</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">var</span> <span class="number">32</span>asg,&amp;&amp;<span class="number">&amp;3</span>sdf,sdf123:integer; -*/,;,</span><br><span class="line">a=b+c; a++; a=<span class="number">1234</span>; &gt;=  <span class="comment">//sdfsadfasdf23123123sdfsdf;</span></span><br><span class="line">;  , /*sdfsadfasdf23123123sdfsdf*<span class="number">22332376</span>FDD_**/ ;<span class="number">4</span>;,,,,,<span class="comment">//*sdfsaf*22332376FDD_*</span></span><br><span class="line">a=b+c;  /  boolean  <span class="keyword">mod</span>;a <span class="keyword">div</span> b  a&lt;&gt;b  <span class="number">1234.123</span> sdfddsasdfsdf  aaaaasdfsdfsdfsdfsad12123sdfsdfsdfsdf</span><br><span class="line">-<span class="number">5</span> <span class="keyword">if</span> -(<span class="number">5</span>+<span class="number">6</span>)+<span class="number">1</span>e25-<span class="number">0</span>x233a+<span class="number">0316</span>/<span class="number">2.5</span>E7  abc123a <span class="keyword">begin</span>&quot;<span class="number">123</span>++aefb<span class="comment">///*&quot;</span></span><br><span class="line">/* <span class="number">23123</span>dfsdfsdfdf</span><br><span class="line">++++dsfsdf  <span class="keyword">begin</span></span><br><span class="line">*/</span><br></pre></td></tr></table></figure></div>

<h2 id="Grammar-Analysis"><a href="#Grammar-Analysis" class="headerlink" title="Grammar Analysis"></a>Grammar Analysis</h2><h3 id="LL-1-文法"><a href="#LL-1-文法" class="headerlink" title="LL(1)文法"></a>LL(1)文法</h3><p><em>上接Z语言词法分析器</em></p>
<h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><ol>
<li><p>处理产生式集合，消除左递归与左因子部分：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;程序&gt; -&gt; program&lt;标识符&gt;;&lt;分程序&gt;</span><br><span class="line">&lt;分程序&gt; -&gt; &lt;变量说明&gt;begin&lt;语句表&gt;end.</span><br><span class="line">&lt;变量说明&gt; -&gt; var&lt;变量说明表&gt;</span><br><span class="line">&lt;变量说明表&gt; -&gt; &lt;变量表&gt;:&lt;类型&gt;;&lt;后变量说明表&gt;</span><br><span class="line">&lt;后变量说明表&gt; -&gt; &lt;变量说明表&gt; | &lt;空&gt;</span><br><span class="line">&lt;类型&gt; -&gt; integer | real</span><br><span class="line">&lt;变量表&gt; -&gt; &lt;变量&gt;&lt;后变量表&gt;</span><br><span class="line">&lt;后变量表&gt; -&gt; ,&lt;变量表&gt; | &lt;空&gt;</span><br><span class="line">&lt;语句表&gt; -&gt; &lt;语句&gt;&lt;后语句表&gt;</span><br><span class="line">&lt;后语句表&gt; -&gt; ;&lt;语句表&gt; | &lt;空&gt;</span><br><span class="line">&lt;语句&gt; -&gt; &lt;赋值语句&gt; | &lt;条件语句&gt; | &lt;WHILE语句&gt; | &lt;复合语句&gt;</span><br><span class="line">&lt;赋值语句&gt; -&gt; &lt;变量&gt;:=&lt;算术表达式&gt;</span><br><span class="line">&lt;条件语句&gt; -&gt; if&lt;关系表达式&gt;then&lt;语句&gt;else&lt;语句&gt;</span><br><span class="line">&lt;WHILE语句&gt; -&gt; while&lt;关系表达式&gt;do&lt;语句&gt;</span><br><span class="line">&lt;复合语句&gt; -&gt; begin&lt;语句表&gt;end</span><br><span class="line">&lt;算术表达式&gt; -&gt; &lt;项&gt;&lt;替算术表达式&gt;</span><br><span class="line">&lt;替算术表达式&gt; -&gt; &lt;另算术表达式&gt; | &lt;空&gt;</span><br><span class="line">&lt;另算术表达式&gt; -&gt; &lt;后算术表达式&gt;&lt;另算术表达式&gt; | &lt;空&gt;</span><br><span class="line">&lt;后算术表达式&gt; -&gt; +&lt;项&gt; | -&lt;项&gt;</span><br><span class="line">&lt;项&gt; -&gt; &lt;因式&gt;&lt;替项&gt;</span><br><span class="line">&lt;替项&gt; -&gt; &lt;另项&gt; | &lt;空&gt;</span><br><span class="line">&lt;另项&gt; -&gt; &lt;后项&gt;&lt;另项&gt; | &lt;空&gt;</span><br><span class="line">&lt;后项&gt; -&gt; *&lt;因式&gt; | /&lt;因式&gt;</span><br><span class="line">&lt;因式&gt; -&gt; &lt;变量&gt; | &lt;常数&gt; | (&lt;算术表达式&gt;)</span><br><span class="line">&lt;关系表达式&gt; -&gt; &lt;算术表达式&gt;&lt;关系符&gt;&lt;算术表达式&gt;</span><br><span class="line">&lt;变量&gt; -&gt; &lt;标识符&gt;</span><br><span class="line">&lt;常数&gt; -&gt; &lt;整数&gt; | &lt;浮点数&gt;</span><br><span class="line">&lt;关系符&gt; -&gt; &lt; | &lt;= | = | &gt; | &gt;= | &lt;&gt;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>符号的机内表示：将推导式中的字母（1位字母过于有限）替换为数字来标记类型。（为了表示方便，展示推导式时仍保留字母）。将VN从100开始编号：</p>
<table>
<thead>
<tr>
<th align="center">VN</th>
<th align="center">Str</th>
<th>int</th>
</tr>
</thead>
<tbody><tr>
<td align="center">&lt;程序&gt;</td>
<td align="center">A</td>
<td>100</td>
</tr>
<tr>
<td align="center">&lt;分程序&gt;</td>
<td align="center">B</td>
<td>101</td>
</tr>
<tr>
<td align="center">&lt;变量说明&gt;</td>
<td align="center">C</td>
<td>102</td>
</tr>
<tr>
<td align="center">&lt;变量说明表&gt;</td>
<td align="center">D</td>
<td>103</td>
</tr>
<tr>
<td align="center">&lt;类型&gt;</td>
<td align="center">E</td>
<td>104</td>
</tr>
<tr>
<td align="center">&lt;变量表&gt;</td>
<td align="center">F</td>
<td>105</td>
</tr>
<tr>
<td align="center">&lt;语句表&gt;</td>
<td align="center">G</td>
<td>106</td>
</tr>
<tr>
<td align="center">&lt;语句&gt;</td>
<td align="center">H</td>
<td>107</td>
</tr>
<tr>
<td align="center">&lt;赋值语句&gt;</td>
<td align="center">I</td>
<td>108</td>
</tr>
<tr>
<td align="center">&lt;条件语句&gt;</td>
<td align="center">J</td>
<td>109</td>
</tr>
<tr>
<td align="center">&lt;WHILE语句&gt;</td>
<td align="center">K</td>
<td>110</td>
</tr>
<tr>
<td align="center">&lt;复合语句&gt;</td>
<td align="center">L</td>
<td>111</td>
</tr>
<tr>
<td align="center">&lt;算术表达式&gt;</td>
<td align="center">M</td>
<td>112</td>
</tr>
<tr>
<td align="center">&lt;替算术表达式&gt;</td>
<td align="center">N</td>
<td>113</td>
</tr>
<tr>
<td align="center">&lt;另算术表达式&gt;</td>
<td align="center">O</td>
<td>114</td>
</tr>
<tr>
<td align="center">&lt;后算术表达式&gt;</td>
<td align="center">P</td>
<td>115</td>
</tr>
<tr>
<td align="center">&lt;项&gt;</td>
<td align="center">Q</td>
<td>116</td>
</tr>
<tr>
<td align="center">&lt;另项&gt;</td>
<td align="center">R</td>
<td>117</td>
</tr>
<tr>
<td align="center">&lt;后项&gt;</td>
<td align="center">S</td>
<td>118</td>
</tr>
<tr>
<td align="center">&lt;因式&gt;</td>
<td align="center">T</td>
<td>119</td>
</tr>
<tr>
<td align="center">&lt;关系表达式&gt;</td>
<td align="center">U</td>
<td>120</td>
</tr>
<tr>
<td align="center">&lt;变量&gt;</td>
<td align="center">V</td>
<td>121</td>
</tr>
<tr>
<td align="center">&lt;常数&gt;</td>
<td align="center">W</td>
<td>122</td>
</tr>
<tr>
<td align="center">&lt;关系符&gt;</td>
<td align="center">X</td>
<td>123</td>
</tr>
<tr>
<td align="center">&lt;后变量说明表&gt;</td>
<td align="center">Y</td>
<td>124</td>
</tr>
<tr>
<td align="center">&lt;后变量表&gt;</td>
<td align="center">Z</td>
<td>125</td>
</tr>
<tr>
<td align="center">&lt;后语句表&gt;</td>
<td align="center">A<del>1</del></td>
<td>126</td>
</tr>
<tr>
<td align="center">&lt;替项&gt;</td>
<td align="center">B<del>1</del></td>
<td>127</td>
</tr>
<tr>
<td align="center">&lt;空&gt;</td>
<td align="center">C<del>1</del></td>
<td>128</td>
</tr>
</tbody></table>
<p>列出VT（不考虑 <code>&amp;&amp;</code> 、<code>||</code> 、<code>until</code> 、<code>for</code> 、<code>repeat</code> 、<code>!</code> ）：</p>
<table>
<thead>
<tr>
<th align="center">VT</th>
<th align="center">STR</th>
<th align="center">INt</th>
</tr>
</thead>
<tbody><tr>
<td align="center">program</td>
<td align="center">a</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">var</td>
<td align="center">b</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">integer</td>
<td align="center">c</td>
<td align="center">2</td>
</tr>
<tr>
<td align="center">real</td>
<td align="center">d</td>
<td align="center">3</td>
</tr>
<tr>
<td align="center">begin</td>
<td align="center">e</td>
<td align="center">4</td>
</tr>
<tr>
<td align="center">end</td>
<td align="center">f</td>
<td align="center">5</td>
</tr>
<tr>
<td align="center">if</td>
<td align="center">g</td>
<td align="center">6</td>
</tr>
<tr>
<td align="center">then</td>
<td align="center">h</td>
<td align="center">7</td>
</tr>
<tr>
<td align="center">else</td>
<td align="center">i</td>
<td align="center">8</td>
</tr>
<tr>
<td align="center">while</td>
<td align="center">j</td>
<td align="center">9</td>
</tr>
<tr>
<td align="center">do</td>
<td align="center">k</td>
<td align="center">10</td>
</tr>
<tr>
<td align="center">+</td>
<td align="center">l</td>
<td align="center">20</td>
</tr>
<tr>
<td align="center">-</td>
<td align="center">m</td>
<td align="center">21</td>
</tr>
<tr>
<td align="center">*</td>
<td align="center">n</td>
<td align="center">22</td>
</tr>
<tr>
<td align="center">&#x2F;</td>
<td align="center">o</td>
<td align="center">23</td>
</tr>
<tr>
<td align="center">&gt;</td>
<td align="center">p</td>
<td align="center">24</td>
</tr>
<tr>
<td align="center">&gt;&#x3D;</td>
<td align="center">q</td>
<td align="center">25</td>
</tr>
<tr>
<td align="center">&lt;</td>
<td align="center">r</td>
<td align="center">26</td>
</tr>
<tr>
<td align="center">&lt;&#x3D;</td>
<td align="center">s</td>
<td align="center">27</td>
</tr>
<tr>
<td align="center">&#x3D;</td>
<td align="center">t</td>
<td align="center">28</td>
</tr>
<tr>
<td align="center">&lt;&gt;</td>
<td align="center">u</td>
<td align="center">29</td>
</tr>
<tr>
<td align="center">:&#x3D;</td>
<td align="center">v</td>
<td align="center">30</td>
</tr>
<tr>
<td align="center">&lt;整数&gt;</td>
<td align="center">w</td>
<td align="center">40</td>
</tr>
<tr>
<td align="center">&lt;浮点数&gt;</td>
<td align="center">x</td>
<td align="center">41</td>
</tr>
<tr>
<td align="center">&lt;标识符&gt;</td>
<td align="center">y</td>
<td align="center">44</td>
</tr>
<tr>
<td align="center">;</td>
<td align="center">z</td>
<td align="center">50</td>
</tr>
<tr>
<td align="center">.</td>
<td align="center">a<del>1</del></td>
<td align="center">51</td>
</tr>
<tr>
<td align="center">,</td>
<td align="center">b<del>1</del></td>
<td align="center">52</td>
</tr>
<tr>
<td align="center">:</td>
<td align="center">c<del>1</del></td>
<td align="center">53</td>
</tr>
<tr>
<td align="center">(</td>
<td align="center">d<del>1</del></td>
<td align="center">54</td>
</tr>
<tr>
<td align="center">)</td>
<td align="center">e<del>1</del></td>
<td align="center">55</td>
</tr>
</tbody></table>
</li>
<li><p>First集与Follow集：</p>
<table>
<thead>
<tr>
<th align="center">VN</th>
<th align="center">产生式</th>
<th align="center">First</th>
<th align="center">follow</th>
<th align="center">产生式（入栈数字）</th>
</tr>
</thead>
<tbody><tr>
<td align="center">A</td>
<td align="center">A-&gt;ayzB</td>
<td align="center">a</td>
<td align="center">#</td>
<td align="center">101, 50, 44, 0</td>
</tr>
<tr>
<td align="center">B</td>
<td align="center">B-&gt;CeGfa<del>1</del></td>
<td align="center">b</td>
<td align="center">#</td>
<td align="center">51, 5, 106, 4, 102</td>
</tr>
<tr>
<td align="center">C</td>
<td align="center">C-&gt;bD</td>
<td align="center">b</td>
<td align="center">e</td>
<td align="center">103, 1</td>
</tr>
<tr>
<td align="center">D</td>
<td align="center">D-&gt;Fc<del>1</del>EzY</td>
<td align="center">y</td>
<td align="center">e</td>
<td align="center">124, 50, 104, 53, 105</td>
</tr>
<tr>
<td align="center">Y</td>
<td align="center">Y-&gt;D</td>
<td align="center">y</td>
<td align="center">e</td>
<td align="center">103</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">Y-&gt;&lt;空&gt;</td>
<td align="center">&lt;空&gt;</td>
<td align="center"></td>
<td align="center">128</td>
</tr>
<tr>
<td align="center">E</td>
<td align="center">E-&gt;c</td>
<td align="center">c</td>
<td align="center">z</td>
<td align="center">2</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">E-&gt;d</td>
<td align="center">d</td>
<td align="center"></td>
<td align="center">3</td>
</tr>
<tr>
<td align="center">F</td>
<td align="center">F-&gt;VZ</td>
<td align="center">y</td>
<td align="center">c<del>1</del></td>
<td align="center">125, 121</td>
</tr>
<tr>
<td align="center">Z</td>
<td align="center">Z-&gt;b<del>1</del>F</td>
<td align="center">b<del>1</del></td>
<td align="center">c<del>1</del></td>
<td align="center">105, 52</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">Z-&gt;&lt;空&gt;</td>
<td align="center">&lt;空&gt;</td>
<td align="center"></td>
<td align="center">128</td>
</tr>
<tr>
<td align="center">G</td>
<td align="center">G-&gt;HA<del>1</del></td>
<td align="center">y,g,j,e</td>
<td align="center">f</td>
<td align="center">126, 107</td>
</tr>
<tr>
<td align="center">A<del>1</del></td>
<td align="center">A<del>1</del>-&gt;zG</td>
<td align="center">z</td>
<td align="center">f</td>
<td align="center">106, 50</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">A<del>1</del>-&gt;&lt;空&gt;</td>
<td align="center">&lt;空&gt;</td>
<td align="center"></td>
<td align="center">128</td>
</tr>
<tr>
<td align="center">H</td>
<td align="center">H-&gt;I</td>
<td align="center">y</td>
<td align="center">z, f, i</td>
<td align="center">108</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">H-&gt;J</td>
<td align="center">g</td>
<td align="center"></td>
<td align="center">109</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">H-&gt;K</td>
<td align="center">j</td>
<td align="center"></td>
<td align="center">110</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">H-&gt;L</td>
<td align="center">e</td>
<td align="center"></td>
<td align="center">111</td>
</tr>
<tr>
<td align="center">I</td>
<td align="center">I-&gt;VvM</td>
<td align="center">y</td>
<td align="center">z, f, i</td>
<td align="center">112, 30, 121</td>
</tr>
<tr>
<td align="center">J</td>
<td align="center">J-&gt;gUhHiH</td>
<td align="center">g</td>
<td align="center">z, f, i</td>
<td align="center">107, 8, 107, 7, 120, 6</td>
</tr>
<tr>
<td align="center">K</td>
<td align="center">K-&gt;jUkH</td>
<td align="center">j</td>
<td align="center">z, f, i</td>
<td align="center">107, 10, 120, 9</td>
</tr>
<tr>
<td align="center">L</td>
<td align="center">L-&gt;eGf</td>
<td align="center">e</td>
<td align="center">z, f, i</td>
<td align="center">5, 106, 4</td>
</tr>
<tr>
<td align="center">M</td>
<td align="center">M-&gt;QN</td>
<td align="center">y,w,x,d<del>1</del></td>
<td align="center">z, f, i, p, q, r, s, t, u, h, k, e<del>1</del></td>
<td align="center">113, 116</td>
</tr>
<tr>
<td align="center">N</td>
<td align="center">N-&gt;O</td>
<td align="center">l,m</td>
<td align="center">z, f, i, p, q, r, s, t, u, h, k, e<del>1</del></td>
<td align="center">114</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">N-&gt;&lt;空&gt;</td>
<td align="center">&lt;空&gt;</td>
<td align="center"></td>
<td align="center">128</td>
</tr>
<tr>
<td align="center">O</td>
<td align="center">O-&gt;PO</td>
<td align="center">l,m</td>
<td align="center">z, f, i, p, q, r, s, t, u, h, k, e<del>1</del></td>
<td align="center">114, 115</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">O-&gt;&lt;空&gt;</td>
<td align="center">&lt;空&gt;</td>
<td align="center"></td>
<td align="center">128</td>
</tr>
<tr>
<td align="center">P</td>
<td align="center">P-&gt;lQ</td>
<td align="center">l</td>
<td align="center">l, m, z, f, i, p, q, r, s, t, u, h, k, e<del>1</del></td>
<td align="center">116, 20</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">P-&gt;mQ</td>
<td align="center">m</td>
<td align="center"></td>
<td align="center">116, 21</td>
</tr>
<tr>
<td align="center">Q</td>
<td align="center">Q-&gt;TB<del>1</del></td>
<td align="center">y,w,x,d<del>1</del></td>
<td align="center">l, m, z, f, i, p, q, r, s, t, u, h, k, e<del>1</del></td>
<td align="center">127, 119</td>
</tr>
<tr>
<td align="center">B<del>1</del></td>
<td align="center">B<del>1</del>-&gt;R</td>
<td align="center">n,o</td>
<td align="center">l, m, z, f, i, p, q, r, s, t, u, h, k, e<del>1</del></td>
<td align="center">117</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">B<del>1</del>-&gt;&lt;空&gt;</td>
<td align="center">&lt;空&gt;</td>
<td align="center"></td>
<td align="center">128</td>
</tr>
<tr>
<td align="center">R</td>
<td align="center">R-&gt;SR</td>
<td align="center">n,o</td>
<td align="center">l, m, z, f, i, p, q, r, s, t, u, h, k, e<del>1</del></td>
<td align="center">117, 118</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">R-&gt;&lt;空&gt;</td>
<td align="center">&lt;空&gt;</td>
<td align="center"></td>
<td align="center">128</td>
</tr>
<tr>
<td align="center">S</td>
<td align="center">S-&gt;nT</td>
<td align="center">n</td>
<td align="center">n, o, l, m, z, f, i, p, q, r, s, t, u, h, k, e<del>1</del></td>
<td align="center">119, 22</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">S-&gt;oT</td>
<td align="center">o</td>
<td align="center"></td>
<td align="center">119, 23</td>
</tr>
<tr>
<td align="center">T</td>
<td align="center">T-&gt;V</td>
<td align="center">y</td>
<td align="center">n, o, l, m, z, f, i, p, q, r, s, t, u, h, k, e<del>1</del></td>
<td align="center">121</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">T-&gt;W</td>
<td align="center">w,x</td>
<td align="center"></td>
<td align="center">122</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">T-&gt;d<del>1</del>Me<del>1</del></td>
<td align="center">d<del>1</del></td>
<td align="center"></td>
<td align="center">55, 112, 54</td>
</tr>
<tr>
<td align="center">U</td>
<td align="center">U-&gt;MXM</td>
<td align="center">y,w,x,d<del>1</del></td>
<td align="center">k, h</td>
<td align="center">112, 123, 112</td>
</tr>
<tr>
<td align="center">V</td>
<td align="center">V-&gt;y</td>
<td align="center">y</td>
<td align="center">n, o, l, m, z, f, i, p, q, r, s, t, u, v, b<del>1</del>, c<del>1</del>, h, k, e<del>1</del></td>
<td align="center">44</td>
</tr>
<tr>
<td align="center">W</td>
<td align="center">W-&gt;w</td>
<td align="center">w</td>
<td align="center">n, o, l, m, z, f, i, p, q, r, s, t, u, h, k, e<del>1</del></td>
<td align="center">40</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">W-&gt;x</td>
<td align="center">x</td>
<td align="center"></td>
<td align="center">41</td>
</tr>
<tr>
<td align="center">X</td>
<td align="center">X-&gt;p</td>
<td align="center">p</td>
<td align="center">y,w,x,d<del>1</del></td>
<td align="center">24</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">X-&gt;q</td>
<td align="center">q</td>
<td align="center"></td>
<td align="center">25</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">X-&gt;r</td>
<td align="center">r</td>
<td align="center"></td>
<td align="center">26</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">X-&gt;s</td>
<td align="center">s</td>
<td align="center"></td>
<td align="center">27</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">X-&gt;t</td>
<td align="center">t</td>
<td align="center"></td>
<td align="center">28</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">X-&gt;u</td>
<td align="center">u</td>
<td align="center"></td>
<td align="center">29</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
</li>
</ol>
<h4 id="预测表"><a href="#预测表" class="headerlink" title="预测表"></a>预测表</h4><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://picturebed-1310517892.file.myqcloud.com/image-20230416145626058.png"
                      alt="image-20230416145626058"
                ></p>
<h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><div class="highlight-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdarg.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> idMax 20</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> keyWordsLen 14</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">wordsAnalyzer</span>&#123;</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        <span class="type">char</span> wd;            <span class="comment">// 读取字符</span></span><br><span class="line">        <span class="type">int</span> silence;        <span class="comment">// 是否需要输出</span></span><br><span class="line">        <span class="type">int</span> len, status;    <span class="comment">// 缓存长度与自动机状态</span></span><br><span class="line">        <span class="type">int</span> flag;           <span class="comment">// 标记分析器是否正常</span></span><br><span class="line">        <span class="type">int</span> wordsLen;       <span class="comment">// 词元数量</span></span><br><span class="line">        <span class="type">int</span> type;           <span class="comment">// 种别归类: 0-关键字 1-运算符 2-常数 3-界符 4-标识符 5-注释串</span></span><br><span class="line">        <span class="type">int</span> cag;         <span class="comment">// 种别码, 保持为可查表位序+1</span></span><br><span class="line">        <span class="type">int</span> srcLen;     <span class="comment">// 源码长度</span></span><br><span class="line">        <span class="type">int</span> needOF;     <span class="comment">// 是否需要保存至文件</span></span><br><span class="line">        vector&lt;string&gt; strV;    <span class="comment">// 存储词元</span></span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; typeV;    <span class="comment">// 存储种别码</span></span><br><span class="line">        string words;       <span class="comment">// 缓存</span></span><br><span class="line">        string src;     <span class="comment">// 源码字符串</span></span><br><span class="line">        FILE *oF;    <span class="comment">// 结果保存文件，默认为fiP</span></span><br><span class="line">        string oFP;     <span class="comment">// 保存路径</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="comment">// 词元编码表</span></span><br><span class="line">        vector&lt;string&gt; wordsTable = &#123;</span><br><span class="line">            <span class="string">&quot;program&quot;</span>, <span class="string">&quot;var&quot;</span>, <span class="string">&quot;integer&quot;</span>, <span class="string">&quot;real&quot;</span>,            <span class="comment">// 0-3</span></span><br><span class="line">            <span class="string">&quot;begin&quot;</span>, <span class="string">&quot;end&quot;</span>, <span class="string">&quot;if&quot;</span>, <span class="string">&quot;then&quot;</span>,                   <span class="comment">// 4-7</span></span><br><span class="line">            <span class="string">&quot;else&quot;</span>, <span class="string">&quot;while&quot;</span>, <span class="string">&quot;do&quot;</span>, <span class="string">&quot;repeat&quot;</span>,                <span class="comment">// 8-11</span></span><br><span class="line">            <span class="string">&quot;until&quot;</span>, <span class="string">&quot;for&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>,                   <span class="comment">// 12-15（跳过14, 15）</span></span><br><span class="line">            <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>,                     <span class="comment">// 16-19（全跳过）</span></span><br><span class="line">            <span class="string">&quot;+&quot;</span>, <span class="string">&quot;-&quot;</span>, <span class="string">&quot;*&quot;</span>, <span class="string">&quot;/&quot;</span>,                             <span class="comment">// 20-23</span></span><br><span class="line">            <span class="string">&quot;&gt;&quot;</span>, <span class="string">&quot;&gt;=&quot;</span>, <span class="string">&quot;&lt;&quot;</span>, <span class="string">&quot;&lt;=&quot;</span>,                           <span class="comment">// 24-27</span></span><br><span class="line">            <span class="string">&quot;=&quot;</span>, <span class="string">&quot;&lt;&gt;&quot;</span>, <span class="string">&quot;:=&quot;</span>, <span class="string">&quot;&amp;&amp;&quot;</span>,                          <span class="comment">// 28-31</span></span><br><span class="line">            <span class="string">&quot;||&quot;</span>, <span class="string">&quot;!&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>,                        <span class="comment">// 32-35（跳过34, 35）</span></span><br><span class="line">            <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>,                     <span class="comment">// 36-39（全跳过）</span></span><br><span class="line">            <span class="string">&quot;integerConst&quot;</span>, <span class="string">&quot;doubleConst&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>,    <span class="comment">// 40-43（跳过42, 43）</span></span><br><span class="line">            <span class="string">&quot;id&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>,                      <span class="comment">// 44-47（跳过45, 47）</span></span><br><span class="line">            <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;;&quot;</span>, <span class="string">&quot;.&quot;</span>,                         <span class="comment">// 48-51（跳过48, 49）</span></span><br><span class="line">            <span class="string">&quot;,&quot;</span>, <span class="string">&quot;:&quot;</span>, <span class="string">&quot;(&quot;</span>, <span class="string">&quot;)&quot;</span>,                             <span class="comment">// 52-55</span></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// 空白字符</span></span><br><span class="line">        <span class="type">const</span> vector&lt;<span class="type">char</span>&gt; filt = &#123;<span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;\n&#x27;</span>, <span class="string">&#x27;\t&#x27;</span>, <span class="string">&#x27;\0&#x27;</span>&#125;;</span><br><span class="line">        <span class="comment">// 单字分隔符,不考虑冒号,点号</span></span><br><span class="line">        <span class="type">const</span> vector&lt;<span class="type">char</span>&gt; delm = &#123;<span class="string">&#x27;;&#x27;</span>, <span class="string">&#x27;,&#x27;</span>, <span class="string">&#x27;(&#x27;</span>, <span class="string">&#x27;)&#x27;</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">wordsAnalyzer</span>(<span class="type">int</span> sil=<span class="number">0</span>, string fiP = <span class="string">&quot;./test.txt&quot;</span>, string foP = <span class="string">&quot;./res.txt&quot;</span>)&#123;</span><br><span class="line">            silence = sil;  </span><br><span class="line">            flag = <span class="number">1</span>;               <span class="comment">// 分析器状态ok</span></span><br><span class="line">            words = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            len = <span class="number">0</span>;</span><br><span class="line">            status = <span class="number">0</span>;     <span class="comment">// 自动机起点</span></span><br><span class="line">            wordsLen = <span class="number">0</span>;   <span class="comment">// 词元数量</span></span><br><span class="line">            oFP = foP;      <span class="comment">// 保存路径</span></span><br><span class="line">            ifstream ins;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span>(oFP!=<span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">                needOF = <span class="number">1</span>;</span><br><span class="line">                oF = <span class="built_in">fopen</span>(oFP.<span class="built_in">c_str</span>(), <span class="string">&quot;w&quot;</span>);    <span class="comment">// 覆盖式的写入</span></span><br><span class="line">                <span class="keyword">if</span>(oF==<span class="literal">NULL</span>)&#123;</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;Fail to write in the file: %s&quot;</span>, oFP.<span class="built_in">c_str</span>());</span><br><span class="line">                    <span class="keyword">this</span>-&gt;flag = <span class="number">0</span>;</span><br><span class="line">                    <span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="built_in">newPrintf</span>(<span class="string">&quot;Output file path: %s -&gt; Succeed!\n&quot;</span>, oFP.<span class="built_in">c_str</span>());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> needOF = <span class="number">0</span>;    <span class="comment">// 不保存文件</span></span><br><span class="line">            ins.<span class="built_in">open</span>(fiP, ios::in);     <span class="comment">// 读入模式打开文件</span></span><br><span class="line">            <span class="keyword">if</span>(!ins.<span class="built_in">good</span>())&#123;    <span class="comment">// 检测文件是否正常打开</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Fail to open the file: %s&quot;</span>, fiP.<span class="built_in">c_str</span>());</span><br><span class="line">                <span class="keyword">this</span>-&gt;flag = <span class="number">0</span>;</span><br><span class="line">                <span class="built_in">exit</span>(<span class="number">-1</span>);       <span class="comment">// 出错, 终止程序</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">newPrintf</span>(<span class="string">&quot;Input file path: %s -&gt; Succeed!\n&quot;</span>, fiP.<span class="built_in">c_str</span>());   <span class="comment">// 展示读取路径</span></span><br><span class="line">            <span class="built_in">printSplit</span>(<span class="string">&quot;Src&quot;</span>);  <span class="comment">// 分割线</span></span><br><span class="line">            </span><br><span class="line">            <span class="type">char</span> _ch;</span><br><span class="line">            src = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="keyword">while</span>((_ch = ins.<span class="built_in">get</span>()) != EOF)&#123;    <span class="comment">// 存入源码串中</span></span><br><span class="line">                src += _ch;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            ins.<span class="built_in">close</span>();</span><br><span class="line">            src += <span class="string">&#x27;\0&#x27;</span>;    <span class="comment">// 添加终止符</span></span><br><span class="line">            srcLen = src.<span class="built_in">length</span>();  <span class="comment">// 源码串长度</span></span><br><span class="line">            <span class="built_in">newPrintf</span>(<span class="string">&quot;%s\n&quot;</span>, src.<span class="built_in">c_str</span>());    <span class="comment">// 展示源码</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ~<span class="built_in">wordsAnalyzer</span>()&#123;</span><br><span class="line">            <span class="built_in">fclose</span>(oF);     <span class="comment">// 关闭FILE文件流</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">analyze</span><span class="params">()</span></span>&#123;    <span class="comment">// 词法分析器</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;srcLen; i++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(i==<span class="number">447</span>)&#123;</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, i);</span><br><span class="line">                &#125;</span><br><span class="line">                wd = src[i];</span><br><span class="line">                <span class="keyword">switch</span>(status)&#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">0</span>:    <span class="comment">// 自动机起点，words为空</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isBlank</span>()) <span class="built_in">blankContinue</span>();   <span class="comment">// 跳过空白字符</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isLowerLetter</span>() || <span class="built_in">isUpperLetter</span>()) <span class="built_in">newStatus</span>(<span class="number">1</span>);   <span class="comment">// 转移状态-&gt;1 字母开头 大写字母可以用于区分标识符和关键字，但即使全是小写字母也需要单独检查，因此全是字母归为一类</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">0</span>)) <span class="built_in">newStatus</span>(<span class="number">2</span>);                          <span class="comment">// 转移状态-&gt;2 非零数字开头</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;0&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">3</span>);                            <span class="comment">// 转移状态-&gt;3  0开头</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;&amp;&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">4</span>);         <span class="comment">// 转移状态-&gt;4  多字运算符</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;|&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">5</span>);         <span class="comment">// 转移状态-&gt;5  </span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;:&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">6</span>);         <span class="comment">// 转移状态-&gt;6</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;&gt;&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">7</span>);         <span class="comment">// 转移状态-&gt;7</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;&lt;&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">8</span>);         <span class="comment">// 转移状态-&gt;8</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;/&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">9</span>);         <span class="comment">// 转移状态-&gt;9</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;*&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">10</span>);        <span class="comment">// 状态转移-&gt;10 单字运算符</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;=&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">11</span>);        <span class="comment">// 状态转移-&gt;11 </span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;!&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">12</span>);        <span class="comment">// 状态转移-&gt;12 </span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;+&#x27;</span> || wd == <span class="string">&#x27;-&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">13</span>);         <span class="comment">// 状态转移-&gt;13 加减号(正负号)</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;.&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">14</span>);        <span class="comment">// 状态转移-&gt;14 考虑.5 == 0.5 ,此时.后必须有数字</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isDelimiter</span>())&#123;        <span class="comment">// 单字分界符直接给出结果</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            type = <span class="number">3</span>;</span><br><span class="line">                            <span class="built_in">output</span>();               <span class="comment">// 存储词元、输出、初始化</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> i = <span class="built_in">passError</span>(i);      <span class="comment">// 检测到非法字符如&quot;^#$&quot;等</span></span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">1</span>:&#123;    <span class="comment">// 字母开头,全字母情况 可终止 -&gt; 标识符或关键字</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isLowerLetter</span>() || <span class="built_in">isUpperLetter</span>()) <span class="built_in">newStatus</span>(<span class="number">1</span>);    <span class="comment">// 原地踏步</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isNumber</span>() || wd == <span class="string">&#x27;_&#x27;</span>)&#123;     <span class="comment">// 状态转移-&gt;17</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">17</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span>&#123;       <span class="comment">// 处理缓存内容</span></span><br><span class="line">                            cag = <span class="built_in">isKeywords</span>();</span><br><span class="line">                            <span class="keyword">if</span>(cag) type = <span class="number">0</span>;   <span class="comment">// 是关键字</span></span><br><span class="line">                            <span class="keyword">else</span> type = <span class="number">4</span>;    <span class="comment">// 标识符</span></span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">2</span>:&#123;        <span class="comment">// 非零数字开头，可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd==<span class="string">&#x27;.&#x27;</span>)&#123;    <span class="comment">// 转移状态-&gt;18 十进制实数, 此时.后可以无内容</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">18</span>);   </span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;e&#x27;</span> || wd == <span class="string">&#x27;E&#x27;</span>)&#123;    <span class="comment">// 转移状态-&gt;19 科学计数法E</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">19</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isNumber</span>())&#123;      <span class="comment">// 原地踏步</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">2</span>);   </span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isLowerLetter</span>() || <span class="built_in">isUpperLetter</span>() || wd == <span class="string">&#x27;\&#x27;&#x27;</span> || wd == <span class="string">&#x27;&quot;&#x27;</span>)&#123;     <span class="comment">// 十进制数后跟字母或引号铁铁出错</span></span><br><span class="line">                            i = <span class="built_in">passError</span>(i);   <span class="comment">// 出错处理</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span>&#123;       <span class="comment">// 被视为整常数，重置缓存</span></span><br><span class="line">                            type = <span class="number">2</span>;</span><br><span class="line">                            cag = <span class="number">41</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">3</span>:&#123;    <span class="comment">// 0开头数字，可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;X&#x27;</span> || wd == <span class="string">&#x27;x&#x27;</span>)&#123;     <span class="comment">// 状态转移-&gt;20 十六进制X</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">20</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;b&#x27;</span> || wd == <span class="string">&#x27;B&#x27;</span>)&#123;    <span class="comment">// 状态转移-&gt;21 二进制数b</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">21</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">8</span>))&#123;   <span class="comment">// 状态转移-&gt;22 八进制数</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">22</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isLowerLetter</span>() || <span class="built_in">isUpperLetter</span>() || wd == <span class="string">&#x27;\&#x27;&#x27;</span> || wd == <span class="string">&#x27;&quot;&#x27;</span>)&#123;     <span class="comment">// 十进制数后跟字母或引号铁铁出错</span></span><br><span class="line">                            i = <span class="built_in">passError</span>(i);   <span class="comment">// 出错处理</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span>&#123;       <span class="comment">// 被视为整常数0</span></span><br><span class="line">                            type = <span class="number">2</span>;</span><br><span class="line">                            cag = <span class="number">41</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">4</span>:&#123;    <span class="comment">// 检查 &amp; 不可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;&amp;&#x27;</span>)&#123;  <span class="comment">// 与运算符</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            i = <span class="built_in">passError</span>(i);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">5</span>:&#123;    <span class="comment">// 检查 | 不可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;|&#x27;</span>)&#123;  <span class="comment">// 或运算符</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            i = <span class="built_in">passError</span>(i);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">6</span>:&#123;    <span class="comment">// 检查 : 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;=&#x27;</span>)&#123;  <span class="comment">// 赋值号:=</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span>&#123;    <span class="comment">// 冒号:</span></span><br><span class="line">                            type = <span class="number">3</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">7</span>:&#123;    <span class="comment">// 检查 &gt; 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;=&#x27;</span>)&#123;  <span class="comment">// &gt;=</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;    <span class="comment">// &gt;</span></span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">8</span>:&#123;    <span class="comment">// 检查 &lt; 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;=&#x27;</span>)&#123;  <span class="comment">// &lt;=</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;&gt;&#x27;</span>)&#123;   <span class="comment">// &lt;&gt;</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> &#123;    <span class="comment">// &lt;</span></span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">9</span>:&#123;    <span class="comment">// 检查 / 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;/&#x27;</span>)&#123;  <span class="comment">// 状态转移-&gt;23 单行注释符//</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">23</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;*&#x27;</span>)&#123; <span class="comment">// 状态转移-&gt;24 多行注释符</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">24</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;    <span class="comment">// 除号/</span></span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">10</span>:&#123;   <span class="comment">// 检查 *</span></span><br><span class="line">                        type = <span class="number">1</span>;</span><br><span class="line">                        <span class="built_in">output</span>();</span><br><span class="line">                        i -= <span class="number">1</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">11</span>:&#123;   <span class="comment">// 检查 =</span></span><br><span class="line">                        type = <span class="number">1</span>;</span><br><span class="line">                        <span class="built_in">output</span>();</span><br><span class="line">                        i -= <span class="number">1</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">12</span>:&#123;   <span class="comment">// 检查 !</span></span><br><span class="line">                        type = <span class="number">1</span>;</span><br><span class="line">                        <span class="built_in">output</span>();</span><br><span class="line">                        i -= <span class="number">1</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">13</span>:&#123;   <span class="comment">// +-号 不完美的DFA 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(cag == <span class="number">41</span> || cag == <span class="number">42</span> || cag == <span class="number">45</span> || cag ==<span class="number">56</span> )&#123;     <span class="comment">// 前面出现操作数则为加减号, &#x27;(&#x27;被视为有效界符, &#x27;)&#x27; 则被视为操作数</span></span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;.&#x27;</span>)&#123;         <span class="comment">// 状态转移-&gt;14 实数</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">14</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">0</span>))&#123;        <span class="comment">// 状态转移-&gt;2 非0数字</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">2</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;0&#x27;</span>)&#123;         <span class="comment">// 状态转移-&gt;3 数字0</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">3</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span>&#123;   <span class="comment">// 加减号</span></span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">14</span>:&#123;   <span class="comment">// . 实数 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>())&#123; <span class="comment">// 状态转移-&gt;18 正常实数</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">18</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            type = <span class="number">3</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">17</span>:&#123;   <span class="comment">// 标识符 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>() || <span class="built_in">isLowerLetter</span>() || <span class="built_in">isUpperLetter</span>() || wd == <span class="string">&#x27;_&#x27;</span>)&#123;  <span class="comment">// 原地踏步</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">17</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;    <span class="comment">// 获取标识符</span></span><br><span class="line">                            type = <span class="number">4</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">18</span>:&#123;   <span class="comment">// 真 实数 后可不跟数字 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>())&#123; <span class="comment">// 原地踏步</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">18</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;e&#x27;</span> || wd == <span class="string">&#x27;E&#x27;</span>)&#123;  <span class="comment">// 状态转移-&gt;19 科学计数法  允许有: 3.e7 的写法</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">19</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;    <span class="comment">// 截取实数</span></span><br><span class="line">                            type = <span class="number">2</span>;</span><br><span class="line">                            cag = <span class="number">42</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125; </span><br><span class="line">                    <span class="keyword">case</span> <span class="number">19</span>:&#123;   <span class="comment">// 科学计数法e 不可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;+&#x27;</span> || wd == <span class="string">&#x27;-&#x27;</span>)&#123;     <span class="comment">// 状态转移-&gt;25 科学计数法+-</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">25</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isNumber</span>())&#123;      <span class="comment">// 状态转移-&gt;26 十进制整数后终态</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">26</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;    <span class="comment">// 出错啦</span></span><br><span class="line">                            i = <span class="built_in">passError</span>(i);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">20</span>:&#123;   <span class="comment">// 十六进制x 不可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">16</span>))&#123;   <span class="comment">// 状态转移-&gt;27 十六进制整数后终态</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">27</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            i = <span class="built_in">passError</span>(i);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">21</span>:&#123;   <span class="comment">// 二进制数b 不可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">2</span>))&#123;    <span class="comment">// 状态转移-&gt;28 二进制数后终态</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">28</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            i = <span class="built_in">passError</span>(i);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">22</span>:&#123;   <span class="comment">// 八进制数中态 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">8</span>))&#123;    <span class="comment">// 原地踏步</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">22</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;e&#x27;</span> || wd == <span class="string">&#x27;E&#x27;</span>)&#123;  <span class="comment">// 状态转移-&gt;19 科学计数法e</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">19</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;.&#x27;</span>)&#123;   <span class="comment">// 状态转移-&gt;18 当做十进制数处理的八进制小数(C++中自适应)</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">18</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            type = <span class="number">2</span>;</span><br><span class="line">                            cag = <span class="number">41</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">23</span>:&#123;   <span class="comment">// 单行注释符// 条件终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;\n&#x27;</span>)&#123;   <span class="comment">// 截取单行注释串</span></span><br><span class="line">                            type = <span class="number">5</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;    <span class="comment">// 原地踏步</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">23</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">24</span>:&#123;   <span class="comment">// 多行注释符/* 不可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;*&#x27;</span>)&#123;  <span class="comment">// 状态转移-&gt;29 检测退出记号*/</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">29</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;    <span class="comment">// 原地踏步</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">24</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">25</span>:&#123;   <span class="comment">// 科学计数法+- 不可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>())&#123;     <span class="comment">// 状态转移-&gt;26 十进制整数后终态</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">26</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            i = <span class="built_in">passError</span>(i);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">26</span>:&#123;   <span class="comment">// 十进制整数后终态 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>())&#123;     <span class="comment">// 原地踏步</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">26</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            type = <span class="number">2</span>;</span><br><span class="line">                            cag = <span class="number">42</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">27</span>:&#123;   <span class="comment">// 十六进制整数后终态 十六进制不接受小数点</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">16</span>))&#123;   <span class="comment">// 原地踏步</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">27</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;e&#x27;</span> || wd == <span class="string">&#x27;E&#x27;</span>)&#123;  <span class="comment">// 状态转移-&gt;19</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">19</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            type = <span class="number">2</span>;</span><br><span class="line">                            cag = <span class="number">41</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">28</span>:&#123;   <span class="comment">// 二进制数后终态</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">2</span>))&#123;</span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">28</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;e&#x27;</span> || wd == <span class="string">&#x27;E&#x27;</span>)&#123;</span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">19</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            type = <span class="number">2</span>;</span><br><span class="line">                            cag = <span class="number">41</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">29</span>:&#123;   <span class="comment">// 检测退出记号 */</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;/&#x27;</span>)&#123;</span><br><span class="line">                            type = <span class="number">5</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; </span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;*&#x27;</span>)&#123;     <span class="comment">// 原地踏步</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">29</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> &#123;    <span class="comment">// 状态转移-&gt;24</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">24</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(needOF &amp;&amp; !silence)&#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;==&gt; The output has been saved to the file: %s&quot;</span>, oFP.<span class="built_in">c_str</span>());   <span class="comment">// 保存文件</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">blankContinue</span><span class="params">()</span></span>&#123;    <span class="comment">// 跳过空白字符，考虑换行对正负加减的影响</span></span><br><span class="line">            <span class="keyword">if</span>(wd == <span class="string">&#x27;\n&#x27;</span>) cag = <span class="number">51</span>;     <span class="comment">// 对于大部分词元而言换行等价于分号 </span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">passError</span><span class="params">(<span class="type">int</span> n)</span></span>&#123;   <span class="comment">// 跳过错误部分，不考虑错误部分引号的性质</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=n; i&lt;srcLen; i++)&#123;</span><br><span class="line">                wd = src[i];</span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">isDelimiter</span>() || <span class="built_in">isBlank</span>() || wd == <span class="string">&#x27;.&#x27;</span>)&#123;</span><br><span class="line">                    <span class="built_in">outError</span>();</span><br><span class="line">                    <span class="keyword">return</span> i<span class="number">-1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(wd == <span class="string">&#x27;:&#x27;</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(src[i+<span class="number">1</span>]!=<span class="string">&#x27;=&#x27;</span>)&#123;</span><br><span class="line">                        <span class="built_in">outError</span>();</span><br><span class="line">                        <span class="keyword">return</span> i<span class="number">-1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(wd == <span class="string">&#x27;/&#x27;</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(src[i+<span class="number">1</span>]==<span class="string">&#x27;/&#x27;</span> || src[i+<span class="number">1</span>]==<span class="string">&#x27;*&#x27;</span>)&#123;</span><br><span class="line">                        <span class="built_in">outError</span>();</span><br><span class="line">                        <span class="keyword">return</span> i<span class="number">-1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="built_in">newStatus</span>(<span class="number">-1</span>);  <span class="comment">// 避免分界符被放入错误输出中</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> srcLen<span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">outError</span><span class="params">()</span></span>&#123;     <span class="comment">// 错误报告</span></span><br><span class="line">            <span class="built_in">newPrintf</span>(<span class="string">&quot;Error with: %s\n&quot;</span>, words.<span class="built_in">c_str</span>());</span><br><span class="line">            <span class="built_in">newStatus</span>(<span class="number">0</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">newStatus</span><span class="params">(<span class="type">int</span> _s)</span></span>&#123;  <span class="comment">// 更新状态</span></span><br><span class="line">            <span class="keyword">switch</span>(_s)&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>:    <span class="comment">// 为0则初始化状态</span></span><br><span class="line">                    status = <span class="number">0</span>;    <span class="comment">// 原始状态</span></span><br><span class="line">                    len = <span class="number">0</span>;</span><br><span class="line">                    words = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">-1</span>:   <span class="comment">// -1作为一个暂态，处理不需要状态实际转移的情况</span></span><br><span class="line">                    len += <span class="number">1</span>;</span><br><span class="line">                    words += wd;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:    <span class="comment">// 不为0就更新状态</span></span><br><span class="line">                    status = _s;</span><br><span class="line">                    len += <span class="number">1</span>;</span><br><span class="line">                    words += wd;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">output</span><span class="params">()</span></span>&#123;   <span class="comment">// 存储词元、输出、初始化</span></span><br><span class="line">            <span class="keyword">switch</span>(type)&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>: <span class="keyword">break</span>;      <span class="comment">// 关键字</span></span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>:    <span class="comment">// 运算符</span></span><br><span class="line">                    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">20</span>; i&lt;<span class="number">33</span>; i++)</span><br><span class="line">                        <span class="keyword">if</span>(wordsTable[i] == words)&#123;</span><br><span class="line">                            cag = i+<span class="number">1</span>;</span><br><span class="line">                            <span class="keyword">break</span>;  <span class="comment">// 跳出for循环而非case</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    <span class="comment">// 出错啦</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>: <span class="keyword">break</span>;      <span class="comment">// 常数</span></span><br><span class="line">                <span class="keyword">case</span> <span class="number">3</span>:    <span class="comment">// 界符</span></span><br><span class="line">                    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">50</span>; i&lt;<span class="number">56</span>; i++)</span><br><span class="line">                        <span class="keyword">if</span>(wordsTable[i] == words)&#123;</span><br><span class="line">                            cag = i+<span class="number">1</span>;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                    <span class="comment">// 出错啦</span></span><br><span class="line">                <span class="keyword">case</span> <span class="number">4</span>:    <span class="comment">// 标识符</span></span><br><span class="line">                    cag = <span class="number">45</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">5</span>:     <span class="comment">// 注释 无需输出与存储，初始化后退出</span></span><br><span class="line">                    <span class="built_in">newStatus</span>(<span class="number">0</span>);</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            wordsLen += <span class="number">1</span>;</span><br><span class="line">            <span class="built_in">newPrintf</span>(<span class="string">&quot;(%d)(%d,%s)\n&quot;</span>, wordsLen, cag, words.<span class="built_in">c_str</span>());</span><br><span class="line">            strV.<span class="built_in">push_back</span>(words);   <span class="comment">// 存储词元</span></span><br><span class="line">            typeV.<span class="built_in">push_back</span>(cag);   <span class="comment">// 存储词元</span></span><br><span class="line">            <span class="built_in">newStatus</span>(<span class="number">0</span>);   <span class="comment">// 初始化</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">isBlank</span><span class="params">()</span><span class="type">const</span></span>&#123;    <span class="comment">// 检测空白字符</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">4</span>; i++)</span><br><span class="line">                <span class="keyword">if</span>(filt[i] == wd) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">isDelimiter</span><span class="params">()</span><span class="type">const</span></span>&#123;    <span class="comment">// 判断是否是单字分界符</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">4</span>; i++)</span><br><span class="line">                <span class="keyword">if</span>(wd == delm[i]) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">isKeywords</span><span class="params">()</span><span class="type">const</span></span>&#123;  <span class="comment">// 判断关键字，返回种别码或0</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;keyWordsLen; i++)</span><br><span class="line">                <span class="keyword">if</span>(words == wordsTable[i]) <span class="keyword">return</span> i+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">isNumber</span><span class="params">(<span class="type">int</span> lim = <span class="number">10</span>)</span><span class="type">const</span></span>&#123;  <span class="comment">// 判断数字</span></span><br><span class="line">            <span class="keyword">switch</span> (lim)&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>:    <span class="comment">// 除0以外的十进制数字</span></span><br><span class="line">                    <span class="keyword">if</span>(wd &gt;= <span class="string">&#x27;1&#x27;</span> &amp;&amp; wd &lt;= <span class="string">&#x27;9&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">10</span>:        <span class="comment">// 十进制</span></span><br><span class="line">                    <span class="keyword">if</span>(wd&gt;=<span class="string">&#x27;0&#x27;</span> &amp;&amp; wd&lt;=<span class="string">&#x27;9&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">                    <span class="keyword">if</span>(wd &gt;=<span class="string">&#x27;0&#x27;</span> &amp;&amp; wd&lt;=<span class="string">&#x27;7&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                    <span class="keyword">if</span>(wd &gt;=<span class="string">&#x27;2&#x27;</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">16</span>:</span><br><span class="line">                    <span class="keyword">if</span>(wd &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; wd &lt;= <span class="string">&#x27;9&#x27;</span> || wd &gt;= <span class="string">&#x27;a&#x27;</span> &amp;&amp; wd &lt;= <span class="string">&#x27;f&#x27;</span> || wd &gt;= <span class="string">&#x27;A&#x27;</span> &amp;&amp; wd &lt;= <span class="string">&#x27;F&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">isLowerLetter</span><span class="params">()</span><span class="type">const</span></span>&#123;  <span class="comment">// 判断大写字母</span></span><br><span class="line">            <span class="keyword">if</span>(wd&gt;=<span class="string">&#x27;a&#x27;</span> &amp;&amp; wd&lt;=<span class="string">&#x27;z&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">isUpperLetter</span><span class="params">()</span><span class="type">const</span></span>&#123;  <span class="comment">// 判断大写字母</span></span><br><span class="line">            <span class="keyword">if</span>(wd&gt;=<span class="string">&#x27;A&#x27;</span> &amp;&amp; wd&lt;=<span class="string">&#x27;Z&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">printSplit</span><span class="params">(string text)</span></span>&#123;  <span class="comment">// 输出夹带文本的分割线</span></span><br><span class="line">            <span class="keyword">if</span>(silence==<span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line">            <span class="type">const</span> <span class="type">int</span> aLen = <span class="number">60</span>;</span><br><span class="line">            <span class="type">int</span> _len = text.<span class="built_in">length</span>()+<span class="number">2</span>; <span class="comment">// 两侧留空</span></span><br><span class="line">            <span class="type">int</span> left = (aLen-_len)/<span class="number">2</span>, right = aLen - left - _len;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;left; i++) <span class="built_in">newPrintf</span>(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">            <span class="built_in">newPrintf</span>(<span class="string">&quot; %s &quot;</span>, text.<span class="built_in">c_str</span>());</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;right; i++) <span class="built_in">newPrintf</span>(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">            <span class="built_in">newPrintf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">newPrintf</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *fmt, ...)</span></span>&#123;   <span class="comment">// 重载自己的printf, 便于保存输出的内容, 参考: https://blog.csdn.net/weixin_51281362/article/details/125445742 | https://blog.csdn.net/wanruiou/article/details/115180466</span></span><br><span class="line">            <span class="keyword">if</span>(silence==<span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line">            va_list arg;    </span><br><span class="line">            <span class="built_in">va_start</span>(arg, fmt); <span class="comment">// 传入地址</span></span><br><span class="line">            <span class="built_in">vprintf</span>(fmt, arg); </span><br><span class="line">            <span class="keyword">if</span>(needOF)  <span class="comment">// 需要保存至文件</span></span><br><span class="line">                <span class="built_in">vfprintf</span>(oF, fmt, arg); <span class="comment">// 借助FILE将printf重定向至文件流, 参考: https://blog.csdn.net/LuyaoYing001/article/details/79750833</span></span><br><span class="line">            <span class="built_in">va_end</span>(arg);    <span class="comment">// 结束可变参数的获取</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">getVL</span><span class="params">()</span><span class="type">const</span></span>&#123; <span class="keyword">return</span> typeV.<span class="built_in">size</span>(); &#125;    <span class="comment">// 数组长度</span></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">atTV</span><span class="params">(<span class="type">int</span> n)</span><span class="type">const</span></span>&#123; <span class="keyword">return</span> typeV[n]; &#125;    </span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">getTV</span><span class="params">()</span><span class="type">const</span></span>&#123; <span class="keyword">return</span> typeV; &#125;   </span><br><span class="line">        <span class="function">vector&lt;string&gt; <span class="title">getSV</span><span class="params">()</span><span class="type">const</span></span>&#123; <span class="keyword">return</span> strV; &#125;   </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> threshold=<span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getLen</span><span class="params">(T&amp; arr)</span></span>&#123; <span class="comment">// 快速获取数组长度</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sizeof</span>(arr)/<span class="built_in">sizeof</span>(arr[<span class="number">0</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">grammarAnalyzer</span>&#123;</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        stack&lt;<span class="type">int</span>&gt; S;</span><br><span class="line">        map&lt;pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;, vector&lt;<span class="type">int</span>&gt;&gt; init;  <span class="comment">// 预测表</span></span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; typeV;</span><br><span class="line">        vector&lt;string&gt; strV;</span><br><span class="line">        <span class="type">int</span> flag;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="built_in">grammarAnalyzer</span>(vector&lt;<span class="type">int</span>&gt; tv, vector&lt;string&gt; sv):<span class="built_in">typeV</span>(tv), <span class="built_in">strV</span>(sv)&#123;  <span class="comment">// 初始化预测表</span></span><br><span class="line">            typeV.<span class="built_in">push_back</span>(<span class="number">0</span>);   <span class="comment">// 终止符#外标记为0，内标记为-1</span></span><br><span class="line">            strV.<span class="built_in">push_back</span>(<span class="string">&quot;#&quot;</span>);   <span class="comment">// 终止符#外标记为0，内标记为-1</span></span><br><span class="line">            <span class="type">int</span> tmp1[]=&#123;<span class="number">101</span>,<span class="number">50</span>,<span class="number">44</span>,<span class="number">0</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">100</span>, <span class="number">0</span>, tmp1, <span class="built_in">getLen</span>(tmp1));</span><br><span class="line">            <span class="type">int</span> tmp2[]=&#123;<span class="number">51</span>,<span class="number">5</span>,<span class="number">106</span>,<span class="number">4</span>,<span class="number">102</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">101</span>, <span class="number">1</span>, tmp2, <span class="built_in">getLen</span>(tmp2));</span><br><span class="line">            <span class="type">int</span> tmp3[]=&#123;<span class="number">103</span>,<span class="number">1</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">102</span>, <span class="number">1</span>, tmp3, <span class="built_in">getLen</span>(tmp3));</span><br><span class="line">            <span class="type">int</span> tmp4[]=&#123;<span class="number">124</span>,<span class="number">50</span>,<span class="number">104</span>,<span class="number">53</span>,<span class="number">105</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">103</span>, <span class="number">44</span>, tmp4, <span class="built_in">getLen</span>(tmp4));</span><br><span class="line">            <span class="type">int</span> tmp5[]=&#123;<span class="number">2</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">104</span>, <span class="number">2</span>, tmp5, <span class="built_in">getLen</span>(tmp5));</span><br><span class="line">            <span class="type">int</span> tmp6[]=&#123;<span class="number">3</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">104</span>, <span class="number">3</span>, tmp6, <span class="built_in">getLen</span>(tmp6));</span><br><span class="line">            <span class="type">int</span> tmp7[]=&#123;<span class="number">125</span>,<span class="number">121</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">105</span>, <span class="number">44</span>, tmp7, <span class="built_in">getLen</span>(tmp7));</span><br><span class="line">            <span class="type">int</span> tmp8[]=&#123;<span class="number">126</span>,<span class="number">107</span>&#125;;<span class="type">int</span> tmp9[]=&#123;<span class="number">4</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">44</span>&#125;;<span class="built_in">buildMoreMap</span>(<span class="number">106</span>, tmp8, tmp9, <span class="built_in">getLen</span>(tmp8), <span class="built_in">getLen</span>(tmp9));</span><br><span class="line">            <span class="type">int</span> tmp10[]=&#123;<span class="number">111</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">107</span>, <span class="number">4</span>, tmp10, <span class="built_in">getLen</span>(tmp10));</span><br><span class="line">            <span class="type">int</span> tmp11[]=&#123;<span class="number">109</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">107</span>, <span class="number">6</span>, tmp11, <span class="built_in">getLen</span>(tmp11));</span><br><span class="line">            <span class="type">int</span> tmp12[]=&#123;<span class="number">110</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">107</span>, <span class="number">9</span>, tmp12, <span class="built_in">getLen</span>(tmp12));</span><br><span class="line">            <span class="type">int</span> tmp13[]=&#123;<span class="number">111</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">107</span>, <span class="number">4</span>, tmp13, <span class="built_in">getLen</span>(tmp13));</span><br><span class="line">            <span class="type">int</span> tmp14[]=&#123;<span class="number">108</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">107</span>, <span class="number">44</span>, tmp14, <span class="built_in">getLen</span>(tmp14));</span><br><span class="line">            <span class="type">int</span> tmp15[]=&#123;<span class="number">112</span>,<span class="number">30</span>,<span class="number">121</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">108</span>, <span class="number">44</span>, tmp15, <span class="built_in">getLen</span>(tmp15));</span><br><span class="line">            <span class="type">int</span> tmp16[]=&#123;<span class="number">107</span>,<span class="number">8</span>,<span class="number">107</span>,<span class="number">7</span>,<span class="number">120</span>,<span class="number">6</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">109</span>, <span class="number">6</span>, tmp16, <span class="built_in">getLen</span>(tmp16));</span><br><span class="line">            <span class="type">int</span> tmp17[]=&#123;<span class="number">107</span>,<span class="number">10</span>,<span class="number">120</span>,<span class="number">9</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">110</span>, <span class="number">9</span>, tmp17, <span class="built_in">getLen</span>(tmp17));</span><br><span class="line">            <span class="type">int</span> tmp18[]=&#123;<span class="number">5</span>,<span class="number">106</span>,<span class="number">4</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">111</span>, <span class="number">4</span>, tmp18, <span class="built_in">getLen</span>(tmp18));</span><br><span class="line">            <span class="type">int</span> tmp19[]=&#123;<span class="number">113</span>,<span class="number">116</span>&#125;;<span class="type">int</span> tmp20[]=&#123;<span class="number">40</span>,<span class="number">41</span>,<span class="number">44</span>&#125;;<span class="built_in">buildMoreMap</span>(<span class="number">112</span>, tmp19, tmp20, <span class="built_in">getLen</span>(tmp19), <span class="built_in">getLen</span>(tmp20));</span><br><span class="line">            <span class="type">int</span> tmp21[]=&#123;<span class="number">128</span>&#125;;<span class="type">int</span> tmp22[]=&#123;<span class="number">5</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">10</span>,<span class="number">24</span>,<span class="number">25</span>,<span class="number">26</span>,<span class="number">27</span>,<span class="number">28</span>,<span class="number">29</span>,<span class="number">50</span>,<span class="number">55</span>&#125;;<span class="built_in">buildMoreMap</span>(<span class="number">113</span>, tmp21, tmp22, <span class="built_in">getLen</span>(tmp21), <span class="built_in">getLen</span>(tmp22));</span><br><span class="line">            <span class="type">int</span> tmp23[]=&#123;<span class="number">114</span>&#125;;<span class="type">int</span> tmp24[]=&#123;<span class="number">20</span>,<span class="number">21</span>&#125;;<span class="built_in">buildMoreMap</span>(<span class="number">113</span>, tmp23, tmp24, <span class="built_in">getLen</span>(tmp23), <span class="built_in">getLen</span>(tmp24));</span><br><span class="line">            <span class="type">int</span> tmp25[]=&#123;<span class="number">128</span>&#125;;<span class="type">int</span> tmp26[]=&#123;<span class="number">5</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">10</span>,<span class="number">24</span>,<span class="number">25</span>,<span class="number">26</span>,<span class="number">27</span>,<span class="number">28</span>,<span class="number">29</span>,<span class="number">50</span>,<span class="number">55</span>&#125;;<span class="built_in">buildMoreMap</span>(<span class="number">114</span>, tmp25, tmp26, <span class="built_in">getLen</span>(tmp25), <span class="built_in">getLen</span>(tmp26));</span><br><span class="line">            <span class="type">int</span> tmp27[]=&#123;<span class="number">114</span>,<span class="number">115</span>&#125;;<span class="type">int</span> tmp28[]=&#123;<span class="number">20</span>,<span class="number">21</span>&#125;;<span class="built_in">buildMoreMap</span>(<span class="number">114</span>, tmp27, tmp28, <span class="built_in">getLen</span>(tmp27), <span class="built_in">getLen</span>(tmp28));</span><br><span class="line">            <span class="type">int</span> tmp29[]=&#123;<span class="number">116</span>,<span class="number">20</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">115</span>, <span class="number">20</span>, tmp29, <span class="built_in">getLen</span>(tmp29));</span><br><span class="line">            <span class="type">int</span> tmp30[]=&#123;<span class="number">116</span>,<span class="number">21</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">115</span>, <span class="number">21</span>, tmp30, <span class="built_in">getLen</span>(tmp30));</span><br><span class="line">            <span class="type">int</span> tmp31[]=&#123;<span class="number">127</span>,<span class="number">119</span>&#125;;<span class="type">int</span> tmp32[]=&#123;<span class="number">40</span>,<span class="number">41</span>,<span class="number">44</span>,<span class="number">54</span>&#125;;<span class="built_in">buildMoreMap</span>(<span class="number">116</span>, tmp31, tmp32, <span class="built_in">getLen</span>(tmp31), <span class="built_in">getLen</span>(tmp32));</span><br><span class="line">            <span class="type">int</span> tmp33[]=&#123;<span class="number">128</span>&#125;;<span class="type">int</span> tmp34[]=&#123;<span class="number">5</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">10</span>,<span class="number">20</span>,<span class="number">21</span>,<span class="number">24</span>,<span class="number">25</span>,<span class="number">26</span>,<span class="number">27</span>,<span class="number">28</span>,<span class="number">29</span>,<span class="number">50</span>,<span class="number">55</span>&#125;;<span class="built_in">buildMoreMap</span>(<span class="number">117</span>, tmp33, tmp34, <span class="built_in">getLen</span>(tmp33), <span class="built_in">getLen</span>(tmp34));</span><br><span class="line">            <span class="type">int</span> tmp35[]=&#123;<span class="number">117</span>,<span class="number">118</span>&#125;;<span class="type">int</span> tmp36[]=&#123;<span class="number">22</span>,<span class="number">23</span>&#125;;<span class="built_in">buildMoreMap</span>(<span class="number">117</span>, tmp35, tmp36, <span class="built_in">getLen</span>(tmp35), <span class="built_in">getLen</span>(tmp36));</span><br><span class="line">            <span class="type">int</span> tmp37[]=&#123;<span class="number">119</span>,<span class="number">22</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">118</span>, <span class="number">22</span>, tmp37, <span class="built_in">getLen</span>(tmp37));</span><br><span class="line">            <span class="type">int</span> tmp38[]=&#123;<span class="number">119</span>,<span class="number">23</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">118</span>, <span class="number">23</span>, tmp38, <span class="built_in">getLen</span>(tmp38));</span><br><span class="line">            <span class="type">int</span> tmp39[]=&#123;<span class="number">122</span>&#125;;<span class="type">int</span> tmp40[]=&#123;<span class="number">40</span>,<span class="number">41</span>&#125;;<span class="built_in">buildMoreMap</span>(<span class="number">119</span>, tmp39, tmp40, <span class="built_in">getLen</span>(tmp39), <span class="built_in">getLen</span>(tmp40));</span><br><span class="line">            <span class="type">int</span> tmp41[]=&#123;<span class="number">121</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">119</span>, <span class="number">44</span>, tmp41, <span class="built_in">getLen</span>(tmp41));</span><br><span class="line">            <span class="type">int</span> tmp42[]=&#123;<span class="number">55</span>,<span class="number">112</span>,<span class="number">54</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">119</span>, <span class="number">54</span>, tmp42, <span class="built_in">getLen</span>(tmp42));</span><br><span class="line">            <span class="type">int</span> tmp43[]=&#123;<span class="number">112</span>,<span class="number">123</span>,<span class="number">112</span>&#125;;<span class="type">int</span> tmp44[]=&#123;<span class="number">40</span>,<span class="number">41</span>,<span class="number">44</span>,<span class="number">54</span>&#125;;<span class="built_in">buildMoreMap</span>(<span class="number">120</span>, tmp43, tmp44, <span class="built_in">getLen</span>(tmp43), <span class="built_in">getLen</span>(tmp44));</span><br><span class="line">            <span class="type">int</span> tmp45[]=&#123;<span class="number">44</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">121</span>, <span class="number">44</span>, tmp45, <span class="built_in">getLen</span>(tmp45));</span><br><span class="line">            <span class="type">int</span> tmp46[]=&#123;<span class="number">40</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">122</span>, <span class="number">40</span>, tmp46, <span class="built_in">getLen</span>(tmp46));</span><br><span class="line">            <span class="type">int</span> tmp47[]=&#123;<span class="number">41</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">122</span>, <span class="number">41</span>, tmp47, <span class="built_in">getLen</span>(tmp47));</span><br><span class="line">            <span class="type">int</span> tmp48[]=&#123;<span class="number">24</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">123</span>, <span class="number">24</span>, tmp48, <span class="built_in">getLen</span>(tmp48));</span><br><span class="line">            <span class="type">int</span> tmp49[]=&#123;<span class="number">25</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">123</span>, <span class="number">25</span>, tmp49, <span class="built_in">getLen</span>(tmp49));</span><br><span class="line">            <span class="type">int</span> tmp50[]=&#123;<span class="number">26</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">123</span>, <span class="number">26</span>, tmp50, <span class="built_in">getLen</span>(tmp50));</span><br><span class="line">            <span class="type">int</span> tmp51[]=&#123;<span class="number">27</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">123</span>, <span class="number">27</span>, tmp51, <span class="built_in">getLen</span>(tmp51));</span><br><span class="line">            <span class="type">int</span> tmp52[]=&#123;<span class="number">28</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">123</span>, <span class="number">28</span>, tmp52, <span class="built_in">getLen</span>(tmp52));</span><br><span class="line">            <span class="type">int</span> tmp53[]=&#123;<span class="number">29</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">123</span>, <span class="number">29</span>, tmp53, <span class="built_in">getLen</span>(tmp53));</span><br><span class="line">            <span class="type">int</span> tmp54[]=&#123;<span class="number">128</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">124</span>, <span class="number">4</span>, tmp54, <span class="built_in">getLen</span>(tmp54));</span><br><span class="line">            <span class="type">int</span> tmp55[]=&#123;<span class="number">105</span>,<span class="number">52</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">125</span>, <span class="number">52</span>, tmp55, <span class="built_in">getLen</span>(tmp55));</span><br><span class="line">            <span class="type">int</span> tmp56[]=&#123;<span class="number">128</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">125</span>, <span class="number">53</span>, tmp56, <span class="built_in">getLen</span>(tmp56));</span><br><span class="line">            <span class="type">int</span> tmp57[]=&#123;<span class="number">128</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">126</span>, <span class="number">5</span>, tmp57, <span class="built_in">getLen</span>(tmp57));</span><br><span class="line">            <span class="type">int</span> tmp58[]=&#123;<span class="number">106</span>,<span class="number">50</span>&#125;;<span class="built_in">buildMap</span>(<span class="number">126</span>, <span class="number">50</span>, tmp58, <span class="built_in">getLen</span>(tmp58));</span><br><span class="line">            <span class="type">int</span> tmp59[]=&#123;<span class="number">128</span>&#125;;<span class="type">int</span> tmp60[]=&#123;<span class="number">5</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">10</span>,<span class="number">20</span>,<span class="number">21</span>,<span class="number">24</span>,<span class="number">25</span>,<span class="number">26</span>,<span class="number">27</span>,<span class="number">28</span>,<span class="number">29</span>,<span class="number">50</span>,<span class="number">55</span>&#125;;<span class="built_in">buildMoreMap</span>(<span class="number">127</span>, tmp59, tmp60, <span class="built_in">getLen</span>(tmp59), <span class="built_in">getLen</span>(tmp60));</span><br><span class="line">            <span class="type">int</span> tmp61[]=&#123;<span class="number">117</span>&#125;;<span class="type">int</span> tmp62[]=&#123;<span class="number">22</span>,<span class="number">23</span>&#125;;<span class="built_in">buildMoreMap</span>(<span class="number">127</span>, tmp61, tmp62, <span class="built_in">getLen</span>(tmp61), <span class="built_in">getLen</span>(tmp62));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">buildMoreMap</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> V[], <span class="type">int</span> s[], <span class="type">int</span> len, <span class="type">int</span> lens)</span></span>&#123;</span><br><span class="line">            vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i&lt;len; i++)&#123;</span><br><span class="line">                v.<span class="built_in">push_back</span>(V[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j&lt;lens; j++)&#123;</span><br><span class="line">                <span class="function">pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; <span class="title">p</span><span class="params">(a, s[j])</span></span>;</span><br><span class="line">                <span class="keyword">if</span>(init.<span class="built_in">count</span>(p)) <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">// 重复定义</span></span><br><span class="line">                init[p]=v;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">buildMap</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">int</span> V[], <span class="type">int</span> len)</span></span>&#123;</span><br><span class="line">            <span class="function">pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; <span class="title">p</span><span class="params">(a, b)</span></span>;</span><br><span class="line">            vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i&lt;len; i++)&#123;</span><br><span class="line">                v.<span class="built_in">push_back</span>(V[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            init[p]=v;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">isVT</span><span class="params">(<span class="type">int</span> n)</span></span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(n&gt;=<span class="number">100</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">isEmpty</span><span class="params">(<span class="type">int</span> n)</span></span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(n==<span class="number">128</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">getPush</span><span class="params">(vector&lt;<span class="type">int</span>&gt; V)</span></span>&#123;        <span class="comment">// 逐个入栈</span></span><br><span class="line">            <span class="type">int</span> len = V.<span class="built_in">size</span>();</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;len; i++)&#123;</span><br><span class="line">                S.<span class="built_in">push</span>(V[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">analyze</span><span class="params">()</span></span>&#123;</span><br><span class="line">            S.<span class="built_in">push</span>(<span class="number">-1</span>);     <span class="comment">// 终止符</span></span><br><span class="line">            S.<span class="built_in">push</span>(<span class="number">100</span>);      <span class="comment">// 起始符A</span></span><br><span class="line">            <span class="type">int</span> len = typeV.<span class="built_in">size</span>(), c=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>(!S.<span class="built_in">empty</span>() &amp;&amp; c&lt;len)&#123;</span><br><span class="line">                <span class="type">int</span> tmp = S.<span class="built_in">top</span>();</span><br><span class="line">                S.<span class="built_in">pop</span>();</span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">isEmpty</span>(tmp))&#123;   <span class="comment">// 空串跳过</span></span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">isVT</span>(tmp))&#123;  <span class="comment">// 非终结符</span></span><br><span class="line">                    <span class="function">pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; <span class="title">tmpP</span><span class="params">(tmp, typeV[c]<span class="number">-1</span>)</span></span>;</span><br><span class="line">                    <span class="keyword">if</span>(init.<span class="built_in">count</span>(tmpP)==<span class="number">0</span>)&#123;    <span class="comment">// 语法错误</span></span><br><span class="line">                        <span class="built_in">printf</span>(<span class="string">&quot;false with unknown: %d (%d,%s)&quot;</span>, tmp, typeV[c]<span class="number">-1</span>, strV[c].<span class="built_in">c_str</span>());</span><br><span class="line">                        <span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    vector&lt;<span class="type">int</span>&gt; tmpV = init[tmpP];</span><br><span class="line">                    <span class="built_in">getPush</span>(tmpV);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;    <span class="comment">// 终结符</span></span><br><span class="line">                    <span class="keyword">if</span>(tmp!=typeV[c]<span class="number">-1</span>)&#123;    <span class="comment">// 语法错误</span></span><br><span class="line">                        <span class="built_in">printf</span>(<span class="string">&quot;false with: %d (%d,%s)&quot;</span>, tmp, typeV[c]<span class="number">-1</span>, strV[c].<span class="built_in">c_str</span>());</span><br><span class="line">                        <span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="built_in">printf</span>(<span class="string">&quot;true: (%d,%s)\n&quot;</span>, typeV[c]<span class="number">-1</span>, strV[c].<span class="built_in">c_str</span>());</span><br><span class="line">                        ++c;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(!S.<span class="built_in">empty</span>()) <span class="built_in">printf</span>(<span class="string">&quot;stack!&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span>(c&lt;len) <span class="built_in">printf</span>(<span class="string">&quot;vector!&quot;</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;all true!&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    wordsAnalyzer *wA = <span class="keyword">new</span> <span class="built_in">wordsAnalyzer</span>(<span class="number">1</span>);</span><br><span class="line">    wA-&gt;<span class="built_in">printSplit</span>(<span class="string">&quot;Lexical Analysis&quot;</span>);</span><br><span class="line">    wA-&gt;<span class="built_in">analyze</span>();</span><br><span class="line">    grammarAnalyzer *gA = <span class="keyword">new</span> <span class="built_in">grammarAnalyzer</span>(wA-&gt;<span class="built_in">getTV</span>(), wA-&gt;<span class="built_in">getSV</span>());</span><br><span class="line">    gA-&gt;<span class="built_in">analyze</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="Semantic-Analysis"><a href="#Semantic-Analysis" class="headerlink" title="Semantic Analysis"></a>Semantic Analysis</h2><h3 id="LL-1-文法-1"><a href="#LL-1-文法-1" class="headerlink" title="LL(1)文法"></a>LL(1)文法</h3><p><em>递归下降是语义分析最直观的解决方式，仍然使用LL(1)文法解决</em></p>
<h4 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h4><ol>
<li><p>产生式集合与语法分析稍有不同，多加了 <code>&amp;&amp;</code> 和 <code>||</code> ，以及if后不一定要跟着else：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;程序&gt; -&gt; program&lt;标识符&gt;;&lt;分程序&gt;</span><br><span class="line">&lt;分程序&gt; -&gt; &lt;变量说明&gt;begin&lt;语句表&gt;end.</span><br><span class="line">&lt;变量说明&gt; -&gt; var&lt;变量说明表&gt;</span><br><span class="line">&lt;变量说明表&gt; -&gt; &lt;变量表&gt;:&lt;类型&gt;;&lt;后变量说明表&gt;</span><br><span class="line">&lt;后变量说明表&gt; -&gt; &lt;变量说明表&gt; | &lt;空&gt;</span><br><span class="line">&lt;类型&gt; -&gt; integer | real</span><br><span class="line">&lt;变量表&gt; -&gt; &lt;变量&gt;&lt;后变量表&gt;</span><br><span class="line">&lt;后变量表&gt; -&gt; ,&lt;变量表&gt; | &lt;空&gt;</span><br><span class="line">&lt;语句表&gt; -&gt; &lt;语句&gt;&lt;后语句表&gt;</span><br><span class="line">&lt;后语句表&gt; -&gt; ;&lt;语句表&gt; | &lt;空&gt;</span><br><span class="line">&lt;语句&gt; -&gt; &lt;赋值语句&gt; | &lt;条件语句&gt; | &lt;WHILE语句&gt; | &lt;复合语句&gt;</span><br><span class="line">&lt;赋值语句&gt; -&gt; &lt;变量&gt;:=&lt;算术表达式&gt;</span><br><span class="line">&lt;条件语句&gt; -&gt; if&lt;关系表达式&gt;then&lt;语句&gt;&lt;后条件语句&gt;</span><br><span class="line">&lt;后条件语句&gt; -&gt; &lt;空&gt; | else&lt;语句&gt;</span><br><span class="line">&lt;WHILE语句&gt; -&gt; while&lt;关系表达式&gt;do&lt;语句&gt;</span><br><span class="line">&lt;复合语句&gt; -&gt; begin&lt;语句表&gt;end</span><br><span class="line">&lt;算术表达式&gt; -&gt; &lt;项&gt;&lt;替算术表达式&gt;</span><br><span class="line">&lt;替算术表达式&gt; -&gt; &lt;另算术表达式&gt; | &lt;空&gt;</span><br><span class="line">&lt;另算术表达式&gt; -&gt; &lt;后算术表达式&gt;&lt;另算术表达式&gt; | &lt;空&gt;</span><br><span class="line">&lt;后算术表达式&gt; -&gt; +&lt;项&gt; | -&lt;项&gt;</span><br><span class="line">&lt;项&gt; -&gt; &lt;因式&gt;&lt;替项&gt;</span><br><span class="line">&lt;替项&gt; -&gt; &lt;另项&gt; | &lt;空&gt;</span><br><span class="line">&lt;另项&gt; -&gt; &lt;后项&gt;&lt;另项&gt; | &lt;空&gt;</span><br><span class="line">&lt;后项&gt; -&gt; *&lt;因式&gt; | /&lt;因式&gt;</span><br><span class="line">&lt;因式&gt; -&gt; &lt;变量&gt; | &lt;常数&gt; | (&lt;算术表达式&gt;)</span><br><span class="line">&lt;关系表达式&gt; -&gt; &lt;子关系表达式&gt;&lt;后子关系表达式&gt;</span><br><span class="line">&lt;子关系表达式&gt; -&gt; &lt;算术表达式&gt;&lt;关系符&gt;&lt;算术表达式&gt;</span><br><span class="line">&lt;后子关系表达式&gt; -&gt; &lt;逻辑运算符&gt;&lt;关系表达式&gt; | &lt;空&gt;</span><br><span class="line">&lt;逻辑运算符&gt; -&gt; &amp;&amp; | ||</span><br><span class="line">&lt;变量&gt; -&gt; &lt;标识符&gt;</span><br><span class="line">&lt;常数&gt; -&gt; &lt;整数&gt; | &lt;浮点数&gt;</span><br><span class="line">&lt;关系符&gt; -&gt; &lt; | &lt;= | = | &gt; | &gt;= | &lt;&gt;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>符号的机内表示：将推导式中的字母（1位字母过于有限）替换为数字来标记类型。（为了表示方便，展示推导式时仍保留字母）。将VN从100开始编号：</p>
<table>
<thead>
<tr>
<th align="center">VN</th>
<th align="center">Str</th>
<th>int</th>
</tr>
</thead>
<tbody><tr>
<td align="center">&lt;程序&gt;</td>
<td align="center">A</td>
<td>100</td>
</tr>
<tr>
<td align="center">&lt;分程序&gt;</td>
<td align="center">B</td>
<td>101</td>
</tr>
<tr>
<td align="center">&lt;变量说明&gt;</td>
<td align="center">C</td>
<td>102</td>
</tr>
<tr>
<td align="center">&lt;变量说明表&gt;</td>
<td align="center">D</td>
<td>103</td>
</tr>
<tr>
<td align="center">&lt;类型&gt;</td>
<td align="center">E</td>
<td>104</td>
</tr>
<tr>
<td align="center">&lt;变量表&gt;</td>
<td align="center">F</td>
<td>105</td>
</tr>
<tr>
<td align="center">&lt;语句表&gt;</td>
<td align="center">G</td>
<td>106</td>
</tr>
<tr>
<td align="center">&lt;语句&gt;</td>
<td align="center">H</td>
<td>107</td>
</tr>
<tr>
<td align="center">&lt;赋值语句&gt;</td>
<td align="center">I</td>
<td>108</td>
</tr>
<tr>
<td align="center">&lt;条件语句&gt;</td>
<td align="center">J</td>
<td>109</td>
</tr>
<tr>
<td align="center">&lt;WHILE语句&gt;</td>
<td align="center">K</td>
<td>110</td>
</tr>
<tr>
<td align="center">&lt;复合语句&gt;</td>
<td align="center">L</td>
<td>111</td>
</tr>
<tr>
<td align="center">&lt;算术表达式&gt;</td>
<td align="center">M</td>
<td>112</td>
</tr>
<tr>
<td align="center">&lt;替算术表达式&gt;</td>
<td align="center">N</td>
<td>113</td>
</tr>
<tr>
<td align="center">&lt;另算术表达式&gt;</td>
<td align="center">O</td>
<td>114</td>
</tr>
<tr>
<td align="center">&lt;后算术表达式&gt;</td>
<td align="center">P</td>
<td>115</td>
</tr>
<tr>
<td align="center">&lt;项&gt;</td>
<td align="center">Q</td>
<td>116</td>
</tr>
<tr>
<td align="center">&lt;另项&gt;</td>
<td align="center">R</td>
<td>117</td>
</tr>
<tr>
<td align="center">&lt;后项&gt;</td>
<td align="center">S</td>
<td>118</td>
</tr>
<tr>
<td align="center">&lt;因式&gt;</td>
<td align="center">T</td>
<td>119</td>
</tr>
<tr>
<td align="center">&lt;关系表达式&gt;</td>
<td align="center">U</td>
<td>120</td>
</tr>
<tr>
<td align="center">&lt;变量&gt;</td>
<td align="center">V</td>
<td>121</td>
</tr>
<tr>
<td align="center">&lt;常数&gt;</td>
<td align="center">W</td>
<td>122</td>
</tr>
<tr>
<td align="center">&lt;关系符&gt;</td>
<td align="center">X</td>
<td>123</td>
</tr>
<tr>
<td align="center">&lt;后变量说明表&gt;</td>
<td align="center">Y</td>
<td>124</td>
</tr>
<tr>
<td align="center">&lt;后变量表&gt;</td>
<td align="center">Z</td>
<td>125</td>
</tr>
<tr>
<td align="center">&lt;后语句表&gt;</td>
<td align="center">A<del>1</del></td>
<td>126</td>
</tr>
<tr>
<td align="center">&lt;替项&gt;</td>
<td align="center">B<del>1</del></td>
<td>127</td>
</tr>
<tr>
<td align="center">&lt;空&gt;</td>
<td align="center">C<del>1</del></td>
<td>128</td>
</tr>
<tr>
<td align="center">&lt;后条件语句&gt;</td>
<td align="center">D<del>1</del></td>
<td>129</td>
</tr>
<tr>
<td align="center">&lt;子关系表达式&gt;</td>
<td align="center">E<del>1</del></td>
<td>130</td>
</tr>
<tr>
<td align="center">&lt;后子关系表达式&gt;</td>
<td align="center">F<del>1</del></td>
<td>131</td>
</tr>
<tr>
<td align="center">&lt;逻辑运算符&gt;</td>
<td align="center">G<del>1</del></td>
<td>132</td>
</tr>
</tbody></table>
<p>列出VT（不考虑 <code>&amp;&amp;</code> 、<code>||</code> 、<code>until</code> 、<code>for</code> 、<code>repeat</code> 、<code>!</code> ）：</p>
<table>
<thead>
<tr>
<th align="center">VT</th>
<th align="center">STR</th>
<th align="center">INt</th>
</tr>
</thead>
<tbody><tr>
<td align="center">program</td>
<td align="center">a</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">var</td>
<td align="center">b</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">integer</td>
<td align="center">c</td>
<td align="center">2</td>
</tr>
<tr>
<td align="center">real</td>
<td align="center">d</td>
<td align="center">3</td>
</tr>
<tr>
<td align="center">begin</td>
<td align="center">e</td>
<td align="center">4</td>
</tr>
<tr>
<td align="center">end</td>
<td align="center">f</td>
<td align="center">5</td>
</tr>
<tr>
<td align="center">if</td>
<td align="center">g</td>
<td align="center">6</td>
</tr>
<tr>
<td align="center">then</td>
<td align="center">h</td>
<td align="center">7</td>
</tr>
<tr>
<td align="center">else</td>
<td align="center">i</td>
<td align="center">8</td>
</tr>
<tr>
<td align="center">while</td>
<td align="center">j</td>
<td align="center">9</td>
</tr>
<tr>
<td align="center">do</td>
<td align="center">k</td>
<td align="center">10</td>
</tr>
<tr>
<td align="center">+</td>
<td align="center">l</td>
<td align="center">20</td>
</tr>
<tr>
<td align="center">-</td>
<td align="center">m</td>
<td align="center">21</td>
</tr>
<tr>
<td align="center">*</td>
<td align="center">n</td>
<td align="center">22</td>
</tr>
<tr>
<td align="center">&#x2F;</td>
<td align="center">o</td>
<td align="center">23</td>
</tr>
<tr>
<td align="center">&gt;</td>
<td align="center">p</td>
<td align="center">24</td>
</tr>
<tr>
<td align="center">&gt;&#x3D;</td>
<td align="center">q</td>
<td align="center">25</td>
</tr>
<tr>
<td align="center">&lt;</td>
<td align="center">r</td>
<td align="center">26</td>
</tr>
<tr>
<td align="center">&lt;&#x3D;</td>
<td align="center">s</td>
<td align="center">27</td>
</tr>
<tr>
<td align="center">&#x3D;</td>
<td align="center">t</td>
<td align="center">28</td>
</tr>
<tr>
<td align="center">&lt;&gt;</td>
<td align="center">u</td>
<td align="center">29</td>
</tr>
<tr>
<td align="center">:&#x3D;</td>
<td align="center">v</td>
<td align="center">30</td>
</tr>
<tr>
<td align="center">&lt;整数&gt;</td>
<td align="center">w</td>
<td align="center">40</td>
</tr>
<tr>
<td align="center">&lt;浮点数&gt;</td>
<td align="center">x</td>
<td align="center">41</td>
</tr>
<tr>
<td align="center">&lt;标识符&gt;</td>
<td align="center">y</td>
<td align="center">44</td>
</tr>
<tr>
<td align="center">;</td>
<td align="center">z</td>
<td align="center">50</td>
</tr>
<tr>
<td align="center">.</td>
<td align="center">a<del>1</del></td>
<td align="center">51</td>
</tr>
<tr>
<td align="center">,</td>
<td align="center">b<del>1</del></td>
<td align="center">52</td>
</tr>
<tr>
<td align="center">:</td>
<td align="center">c<del>1</del></td>
<td align="center">53</td>
</tr>
<tr>
<td align="center">(</td>
<td align="center">d<del>1</del></td>
<td align="center">54</td>
</tr>
<tr>
<td align="center">)</td>
<td align="center">e<del>1</del></td>
<td align="center">55</td>
</tr>
<tr>
<td align="center">&amp;&amp;</td>
<td align="center">f<del>1</del></td>
<td align="center">31</td>
</tr>
<tr>
<td align="center">||</td>
<td align="center">g<del>1</del></td>
<td align="center">32</td>
</tr>
</tbody></table>
</li>
<li><p>First集与Follow集：</p>
<table>
<thead>
<tr>
<th align="center">VN</th>
<th align="center">产生式</th>
<th align="center">First</th>
<th align="center">follow</th>
<th align="center">产生式（入栈数字）</th>
</tr>
</thead>
<tbody><tr>
<td align="center">A</td>
<td align="center">A-&gt;ayzB</td>
<td align="center">a</td>
<td align="center">#</td>
<td align="center">101, 50, 44, 0</td>
</tr>
<tr>
<td align="center">B</td>
<td align="center">B-&gt;CeGfa<del>1</del></td>
<td align="center">b</td>
<td align="center">#</td>
<td align="center">51, 5, 106, 4, 102</td>
</tr>
<tr>
<td align="center">C</td>
<td align="center">C-&gt;bD</td>
<td align="center">b</td>
<td align="center">e</td>
<td align="center">103, 1</td>
</tr>
<tr>
<td align="center">D</td>
<td align="center">D-&gt;Fc<del>1</del>EzY</td>
<td align="center">y</td>
<td align="center">e</td>
<td align="center">124, 50, 104, 53, 105</td>
</tr>
<tr>
<td align="center">Y</td>
<td align="center">Y-&gt;D</td>
<td align="center">y</td>
<td align="center">e</td>
<td align="center">103</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">Y-&gt;&lt;空&gt;</td>
<td align="center">&lt;空&gt;</td>
<td align="center"></td>
<td align="center">128</td>
</tr>
<tr>
<td align="center">E</td>
<td align="center">E-&gt;c</td>
<td align="center">c</td>
<td align="center">z</td>
<td align="center">2</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">E-&gt;d</td>
<td align="center">d</td>
<td align="center"></td>
<td align="center">3</td>
</tr>
<tr>
<td align="center">F</td>
<td align="center">F-&gt;VZ</td>
<td align="center">y</td>
<td align="center">c<del>1</del></td>
<td align="center">125, 121</td>
</tr>
<tr>
<td align="center">Z</td>
<td align="center">Z-&gt;b<del>1</del>F</td>
<td align="center">b<del>1</del></td>
<td align="center">c<del>1</del></td>
<td align="center">105, 52</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">Z-&gt;&lt;空&gt;</td>
<td align="center">&lt;空&gt;</td>
<td align="center"></td>
<td align="center">128</td>
</tr>
<tr>
<td align="center">G</td>
<td align="center">G-&gt;HA<del>1</del></td>
<td align="center">y,g,j,e</td>
<td align="center">f</td>
<td align="center">126, 107</td>
</tr>
<tr>
<td align="center">A<del>1</del></td>
<td align="center">A<del>1</del>-&gt;zG</td>
<td align="center">z</td>
<td align="center">f</td>
<td align="center">106, 50</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">A<del>1</del>-&gt;&lt;空&gt;</td>
<td align="center">&lt;空&gt;</td>
<td align="center"></td>
<td align="center">128</td>
</tr>
<tr>
<td align="center">H</td>
<td align="center">H-&gt;I</td>
<td align="center">y</td>
<td align="center">z, f, i</td>
<td align="center">108</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">H-&gt;J</td>
<td align="center">g</td>
<td align="center"></td>
<td align="center">109</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">H-&gt;K</td>
<td align="center">j</td>
<td align="center"></td>
<td align="center">110</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">H-&gt;L</td>
<td align="center">e</td>
<td align="center"></td>
<td align="center">111</td>
</tr>
<tr>
<td align="center">I</td>
<td align="center">I-&gt;VvM</td>
<td align="center">y</td>
<td align="center">z, f, i</td>
<td align="center">112, 30, 121</td>
</tr>
<tr>
<td align="center">J</td>
<td align="center">J-&gt;gUhHD<del>1</del></td>
<td align="center">g</td>
<td align="center">z, f, i</td>
<td align="center">129, 107, 7, 120, 6</td>
</tr>
<tr>
<td align="center">D<del>1</del></td>
<td align="center">D<del>1</del>-&gt;iH</td>
<td align="center">i</td>
<td align="center">z, f, (i)</td>
<td align="center">107, 8</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">D<del>1</del>-&gt;&lt;空&gt;</td>
<td align="center">&lt;空&gt;</td>
<td align="center"></td>
<td align="center">128</td>
</tr>
<tr>
<td align="center">K</td>
<td align="center">K-&gt;jUkH</td>
<td align="center">j</td>
<td align="center">z, f, i</td>
<td align="center">107, 10, 120, 9</td>
</tr>
<tr>
<td align="center">L</td>
<td align="center">L-&gt;eGf</td>
<td align="center">e</td>
<td align="center">z, f, i</td>
<td align="center">5, 106, 4</td>
</tr>
<tr>
<td align="center">M</td>
<td align="center">M-&gt;QN</td>
<td align="center">y,w,x,d<del>1</del></td>
<td align="center">z, f, i, p, q, r, s, t, u, h, k, e<del>1</del>, f<del>1</del>, g<del>1</del></td>
<td align="center">113, 116</td>
</tr>
<tr>
<td align="center">N</td>
<td align="center">N-&gt;O</td>
<td align="center">l,m</td>
<td align="center">z, f, i, p, q, r, s, t, u, h, k, e<del>1</del>, f<del>1</del>, g<del>1</del></td>
<td align="center">114</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">N-&gt;&lt;空&gt;</td>
<td align="center">&lt;空&gt;</td>
<td align="center"></td>
<td align="center">128</td>
</tr>
<tr>
<td align="center">O</td>
<td align="center">O-&gt;PO</td>
<td align="center">l,m</td>
<td align="center">z, f, i, p, q, r, s, t, u, h, k, e<del>1</del>, f<del>1</del>, g<del>1</del></td>
<td align="center">114, 115</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">O-&gt;&lt;空&gt;</td>
<td align="center">&lt;空&gt;</td>
<td align="center"></td>
<td align="center">128</td>
</tr>
<tr>
<td align="center">P</td>
<td align="center">P-&gt;lQ</td>
<td align="center">l</td>
<td align="center">l, m, z, f, i, p, q, r, s, t, u, h, k, e<del>1</del>, f<del>1</del>, g<del>1</del></td>
<td align="center">116, 20</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">P-&gt;mQ</td>
<td align="center">m</td>
<td align="center"></td>
<td align="center">116, 21</td>
</tr>
<tr>
<td align="center">Q</td>
<td align="center">Q-&gt;TB<del>1</del></td>
<td align="center">y,w,x,d<del>1</del></td>
<td align="center">l, m, z, f, i, p, q, r, s, t, u, h, k, e<del>1</del>, f<del>1</del>, g<del>1</del></td>
<td align="center">127, 119</td>
</tr>
<tr>
<td align="center">B<del>1</del></td>
<td align="center">B<del>1</del>-&gt;R</td>
<td align="center">n,o</td>
<td align="center">l, m, z, f, i, p, q, r, s, t, u, h, k, e<del>1</del>, f<del>1</del>, g<del>1</del></td>
<td align="center">117</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">B<del>1</del>-&gt;&lt;空&gt;</td>
<td align="center">&lt;空&gt;</td>
<td align="center"></td>
<td align="center">128</td>
</tr>
<tr>
<td align="center">R</td>
<td align="center">R-&gt;SR</td>
<td align="center">n,o</td>
<td align="center">l, m, z, f, i, p, q, r, s, t, u, h, k, e<del>1</del>, f<del>1</del>, g<del>1</del></td>
<td align="center">117, 118</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">R-&gt;&lt;空&gt;</td>
<td align="center">&lt;空&gt;</td>
<td align="center"></td>
<td align="center">128</td>
</tr>
<tr>
<td align="center">S</td>
<td align="center">S-&gt;nT</td>
<td align="center">n</td>
<td align="center">n, o, l, m, z, f, i, p, q, r, s, t, u, h, k, e<del>1</del>, f<del>1</del>, g<del>1</del></td>
<td align="center">119, 22</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">S-&gt;oT</td>
<td align="center">o</td>
<td align="center"></td>
<td align="center">119, 23</td>
</tr>
<tr>
<td align="center">T</td>
<td align="center">T-&gt;V</td>
<td align="center">y</td>
<td align="center">n, o, l, m, z, f, i, p, q, r, s, t, u, h, k, e<del>1</del>, f<del>1</del>, g<del>1</del></td>
<td align="center">121</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">T-&gt;W</td>
<td align="center">w,x</td>
<td align="center"></td>
<td align="center">122</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">T-&gt;d<del>1</del>Me<del>1</del></td>
<td align="center">d<del>1</del></td>
<td align="center"></td>
<td align="center">55, 112, 54</td>
</tr>
<tr>
<td align="center">U</td>
<td align="center">U-&gt;E<del>1</del>F<del>1</del></td>
<td align="center">y,w,x,d<del>1</del></td>
<td align="center">k, h</td>
<td align="center">131, 130</td>
</tr>
<tr>
<td align="center">E<del>1</del></td>
<td align="center">E<del>1</del>-&gt;MXM</td>
<td align="center">y,w,x,d<del>1</del></td>
<td align="center">k, h, f<del>1</del></td>
<td align="center">112, 123, 112</td>
</tr>
<tr>
<td align="center">F<del>1</del></td>
<td align="center">F<del>1</del>-&gt;G<del>1</del>U</td>
<td align="center">f<del>1</del>,g<del>1</del></td>
<td align="center">k, h</td>
<td align="center">120, 132</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">F<del>1</del>-&gt;&lt;空&gt;</td>
<td align="center">&lt;空&gt;</td>
<td align="center"></td>
<td align="center">128</td>
</tr>
<tr>
<td align="center">G<del>1</del></td>
<td align="center">G<del>1</del>-&gt;f<del>1</del></td>
<td align="center">f<del>1</del></td>
<td align="center">y,w,x,d<del>1</del></td>
<td align="center">31</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">G<del>1</del>-&gt;g<del>1</del></td>
<td align="center">g<del>1</del></td>
<td align="center"></td>
<td align="center">32</td>
</tr>
<tr>
<td align="center">V</td>
<td align="center">V-&gt;y</td>
<td align="center">y</td>
<td align="center">n, o, l, m, z, f, i, p, q, r, s, t, u, v, b<del>1</del>, c<del>1</del>, h, k, e<del>1</del>, f<del>1</del>, g<del>1</del></td>
<td align="center">44</td>
</tr>
<tr>
<td align="center">W</td>
<td align="center">W-&gt;w</td>
<td align="center">w</td>
<td align="center">n, o, l, m, z, f, i, p, q, r, s, t, u, h, k, e<del>1</del>, f<del>1</del>, g<del>1</del></td>
<td align="center">40</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">W-&gt;x</td>
<td align="center">x</td>
<td align="center"></td>
<td align="center">41</td>
</tr>
<tr>
<td align="center">X</td>
<td align="center">X-&gt;p</td>
<td align="center">p</td>
<td align="center">y,w,x,d<del>1</del></td>
<td align="center">24</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">X-&gt;q</td>
<td align="center">q</td>
<td align="center"></td>
<td align="center">25</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">X-&gt;r</td>
<td align="center">r</td>
<td align="center"></td>
<td align="center">26</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">X-&gt;s</td>
<td align="center">s</td>
<td align="center"></td>
<td align="center">27</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">X-&gt;t</td>
<td align="center">t</td>
<td align="center"></td>
<td align="center">28</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">X-&gt;u</td>
<td align="center">u</td>
<td align="center"></td>
<td align="center">29</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<p>需要注意的是产生式D<del>1</del>-&gt;iH，其Follow集合与First集合发生冲突了，按照LL(1)的分析步骤执行这个冲突消除不了，但实际上这个冲突并不成立。</p>
<p>会产生这个冲突，问题在于一个if语句与else的匹配原则。if总是匹配离他最近的else，<strong>除非</strong>它在复合语句中，if后紧跟end标明复合语句结束，下一个遇到的else才不属于该if，如：</p>
<div class="highlight-container" data-rel="Pascal"><figure class="iseeu highlight pascal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> a&gt;<span class="number">5</span></span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	<span class="keyword">if</span> b&gt;<span class="number">5</span></span><br><span class="line">	<span class="keyword">then</span></span><br><span class="line">		b=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	a=<span class="number">1</span>;</span><br></pre></td></tr></table></figure></div>

<p>而if的产生式是由&lt;条件语句&gt;开始的，&lt;条件语句&gt;首先是一个&lt;语句&gt;，他可能是then后面的那个&lt;语句&gt;，因此它的后面可能跟有else，对应字母H的Follow集中有i；其次 <code>&lt;条件语句&gt; -&gt; if&lt;关系表达式&gt;then&lt;语句&gt;&lt;后条件语句&gt;</code> 对于后条件语句而言，他可能产生else，因此碰到else他应该：<code>&lt;后条件语句&gt;-&gt;else&lt;语句&gt;</code> ，但同时它又可能为&lt;空&gt;，而他为&lt;空&gt;时参考他上级的&lt;条件语句&gt;Follow集，不巧的是这个集合里也有else。也就是说按照LL(1)的基本分析思路，这个Follow集中的else起作用的场景原本是，&lt;后条件语句&gt;为空，然后上一级的&lt;条件语句&gt;匹配到它后面可能跟的else，也就是跟在这整个&lt;语句&gt;后面的属于之前if的else。</p>
<p>看似很有道理，但实际上这并不符合if与else的匹配规则，因为if总是匹配离他最近的else！试想如果&lt;后条件语句&gt;为空，那就意味着该式子中的if就是没有else的，那么他后面要么跟其他语句，要么跟end，不可能出现后面跟着一个else，而且这个else还属于别的if！</p>
<p>因此这里虽然Follow集合中有i，但是实际制表时只将i放入First集中处理，即匹配到的所有else都采用 <code>&lt;后条件语句&gt; -&gt; else&lt;语句&gt;</code> 产生式。 </p>
</li>
<li><p>递归栈的种类标记：</p>
<table>
<thead>
<tr>
<th align="center">层数</th>
<th align="center">标记</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">始末标记</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">1</td>
<td align="center">条件语句</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">2</td>
<td align="center">if后的关系表达式</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">3</td>
<td align="center">then后的语句</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">4</td>
<td align="center">else后的语句</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">5</td>
<td align="center">子关系表达式</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">6</td>
<td align="center">算术表达式</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">7</td>
<td align="center">while语句</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">8</td>
<td align="center">while后的关系表达式</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">9</td>
<td align="center">do后的语句</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">10</td>
<td align="center">赋值语句</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">11</td>
<td align="center">赋值语句后的首个变量</td>
</tr>
</tbody></table>
</li>
</ol>
<h4 id="预测表-1"><a href="#预测表-1" class="headerlink" title="预测表"></a>预测表</h4><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://picturebed-1310517892.file.myqcloud.com/image-20230522215511189.png"
                      alt="image-20230522215511189"
                ></p>
<h4 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h4><div class="highlight-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdarg.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> idMax 20</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> keyWordsLen 14</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">wordsAnalyzer</span>&#123;</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        <span class="type">char</span> wd;            <span class="comment">// 读取字符</span></span><br><span class="line">        <span class="type">int</span> silence;        <span class="comment">// 是否需要输出</span></span><br><span class="line">        <span class="type">int</span> len, status;    <span class="comment">// 缓存长度与自动机状态</span></span><br><span class="line">        <span class="type">int</span> flag;           <span class="comment">// 标记分析器是否正常</span></span><br><span class="line">        <span class="type">int</span> wordsLen;       <span class="comment">// 词元数量</span></span><br><span class="line">        <span class="type">int</span> type;           <span class="comment">// 种别归类: 0-关键字 1-运算符 2-常数 3-界符 4-标识符 5-注释串</span></span><br><span class="line">        <span class="type">int</span> cag;         <span class="comment">// 种别码, 保持为可查表位序+1</span></span><br><span class="line">        <span class="type">int</span> srcLen;     <span class="comment">// 源码长度</span></span><br><span class="line">        <span class="type">int</span> needOF;     <span class="comment">// 是否需要保存至文件</span></span><br><span class="line">        vector&lt;string&gt; strV;    <span class="comment">// 存储词元</span></span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; typeV;    <span class="comment">// 存储种别码</span></span><br><span class="line">        string words;       <span class="comment">// 缓存</span></span><br><span class="line">        string src;     <span class="comment">// 源码字符串</span></span><br><span class="line">        FILE *oF;    <span class="comment">// 结果保存文件，默认为fiP</span></span><br><span class="line">        string oFP;     <span class="comment">// 保存路径</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="comment">// 词元编码表</span></span><br><span class="line">        vector&lt;string&gt; wordsTable = &#123;</span><br><span class="line">            <span class="string">&quot;program&quot;</span>, <span class="string">&quot;var&quot;</span>, <span class="string">&quot;integer&quot;</span>, <span class="string">&quot;real&quot;</span>,            <span class="comment">// 0-3</span></span><br><span class="line">            <span class="string">&quot;begin&quot;</span>, <span class="string">&quot;end&quot;</span>, <span class="string">&quot;if&quot;</span>, <span class="string">&quot;then&quot;</span>,                   <span class="comment">// 4-7</span></span><br><span class="line">            <span class="string">&quot;else&quot;</span>, <span class="string">&quot;while&quot;</span>, <span class="string">&quot;do&quot;</span>, <span class="string">&quot;repeat&quot;</span>,                <span class="comment">// 8-11</span></span><br><span class="line">            <span class="string">&quot;until&quot;</span>, <span class="string">&quot;for&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>,                   <span class="comment">// 12-15（跳过14, 15）</span></span><br><span class="line">            <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>,                     <span class="comment">// 16-19（全跳过）</span></span><br><span class="line">            <span class="string">&quot;+&quot;</span>, <span class="string">&quot;-&quot;</span>, <span class="string">&quot;*&quot;</span>, <span class="string">&quot;/&quot;</span>,                             <span class="comment">// 20-23</span></span><br><span class="line">            <span class="string">&quot;&gt;&quot;</span>, <span class="string">&quot;&gt;=&quot;</span>, <span class="string">&quot;&lt;&quot;</span>, <span class="string">&quot;&lt;=&quot;</span>,                           <span class="comment">// 24-27</span></span><br><span class="line">            <span class="string">&quot;=&quot;</span>, <span class="string">&quot;&lt;&gt;&quot;</span>, <span class="string">&quot;:=&quot;</span>, <span class="string">&quot;&amp;&amp;&quot;</span>,                          <span class="comment">// 28-31</span></span><br><span class="line">            <span class="string">&quot;||&quot;</span>, <span class="string">&quot;!&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>,                        <span class="comment">// 32-35（跳过34, 35）</span></span><br><span class="line">            <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>,                     <span class="comment">// 36-39（全跳过）</span></span><br><span class="line">            <span class="string">&quot;integerConst&quot;</span>, <span class="string">&quot;doubleConst&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>,    <span class="comment">// 40-43（跳过42, 43）</span></span><br><span class="line">            <span class="string">&quot;id&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>,                      <span class="comment">// 44-47（跳过45, 47）</span></span><br><span class="line">            <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;;&quot;</span>, <span class="string">&quot;.&quot;</span>,                         <span class="comment">// 48-51（跳过48, 49）</span></span><br><span class="line">            <span class="string">&quot;,&quot;</span>, <span class="string">&quot;:&quot;</span>, <span class="string">&quot;(&quot;</span>, <span class="string">&quot;)&quot;</span>,                             <span class="comment">// 52-55</span></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// 空白字符</span></span><br><span class="line">        <span class="type">const</span> vector&lt;<span class="type">char</span>&gt; filt = &#123;<span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;\n&#x27;</span>, <span class="string">&#x27;\t&#x27;</span>, <span class="string">&#x27;\0&#x27;</span>&#125;;</span><br><span class="line">        <span class="comment">// 单字分隔符,不考虑冒号,点号</span></span><br><span class="line">        <span class="type">const</span> vector&lt;<span class="type">char</span>&gt; delm = &#123;<span class="string">&#x27;;&#x27;</span>, <span class="string">&#x27;,&#x27;</span>, <span class="string">&#x27;(&#x27;</span>, <span class="string">&#x27;)&#x27;</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">wordsAnalyzer</span>(<span class="type">int</span> sil=<span class="number">0</span>, string fiP = <span class="string">&quot;./test.txt&quot;</span>, string foP = <span class="string">&quot;./res.txt&quot;</span>)&#123;</span><br><span class="line">            silence = sil;  </span><br><span class="line">            flag = <span class="number">1</span>;               <span class="comment">// 分析器状态ok</span></span><br><span class="line">            words = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            len = <span class="number">0</span>;</span><br><span class="line">            status = <span class="number">0</span>;     <span class="comment">// 自动机起点</span></span><br><span class="line">            wordsLen = <span class="number">0</span>;   <span class="comment">// 词元数量</span></span><br><span class="line">            oFP = foP;      <span class="comment">// 保存路径</span></span><br><span class="line">            ifstream ins;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span>(oFP!=<span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">                needOF = <span class="number">1</span>;</span><br><span class="line">                oF = <span class="built_in">fopen</span>(oFP.<span class="built_in">c_str</span>(), <span class="string">&quot;w&quot;</span>);    <span class="comment">// 覆盖式的写入</span></span><br><span class="line">                <span class="keyword">if</span>(oF==<span class="literal">NULL</span>)&#123;</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;Fail to write in the file: %s&quot;</span>, oFP.<span class="built_in">c_str</span>());</span><br><span class="line">                    <span class="keyword">this</span>-&gt;flag = <span class="number">0</span>;</span><br><span class="line">                    <span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="built_in">newPrintf</span>(<span class="string">&quot;Output file path: %s -&gt; Succeed!\n&quot;</span>, oFP.<span class="built_in">c_str</span>());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> needOF = <span class="number">0</span>;    <span class="comment">// 不保存文件</span></span><br><span class="line">            ins.<span class="built_in">open</span>(fiP, ios::in);     <span class="comment">// 读入模式打开文件</span></span><br><span class="line">            <span class="keyword">if</span>(!ins.<span class="built_in">good</span>())&#123;    <span class="comment">// 检测文件是否正常打开</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Fail to open the file: %s&quot;</span>, fiP.<span class="built_in">c_str</span>());</span><br><span class="line">                <span class="keyword">this</span>-&gt;flag = <span class="number">0</span>;</span><br><span class="line">                <span class="built_in">exit</span>(<span class="number">-1</span>);       <span class="comment">// 出错, 终止程序</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">newPrintf</span>(<span class="string">&quot;Input file path: %s -&gt; Succeed!\n&quot;</span>, fiP.<span class="built_in">c_str</span>());   <span class="comment">// 展示读取路径</span></span><br><span class="line">            <span class="built_in">printSplit</span>(<span class="string">&quot;Src&quot;</span>);  <span class="comment">// 分割线</span></span><br><span class="line">            </span><br><span class="line">            <span class="type">char</span> _ch;</span><br><span class="line">            src = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="keyword">while</span>((_ch = ins.<span class="built_in">get</span>()) != EOF)&#123;    <span class="comment">// 存入源码串中</span></span><br><span class="line">                src += _ch;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            ins.<span class="built_in">close</span>();</span><br><span class="line">            src += <span class="string">&#x27;\0&#x27;</span>;    <span class="comment">// 添加终止符</span></span><br><span class="line">            srcLen = src.<span class="built_in">length</span>();  <span class="comment">// 源码串长度</span></span><br><span class="line">            <span class="built_in">newPrintf</span>(<span class="string">&quot;%s\n&quot;</span>, src.<span class="built_in">c_str</span>());    <span class="comment">// 展示源码</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ~<span class="built_in">wordsAnalyzer</span>()&#123;</span><br><span class="line">            <span class="built_in">fclose</span>(oF);     <span class="comment">// 关闭FILE文件流</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">analyze</span><span class="params">()</span></span>&#123;    <span class="comment">// 词法分析器</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;srcLen; i++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(i==<span class="number">447</span>)&#123;</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, i);</span><br><span class="line">                &#125;</span><br><span class="line">                wd = src[i];</span><br><span class="line">                <span class="keyword">switch</span>(status)&#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">0</span>:    <span class="comment">// 自动机起点，words为空</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isBlank</span>()) <span class="built_in">blankContinue</span>();   <span class="comment">// 跳过空白字符</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isLowerLetter</span>() || <span class="built_in">isUpperLetter</span>()) <span class="built_in">newStatus</span>(<span class="number">1</span>);   <span class="comment">// 转移状态-&gt;1 字母开头 大写字母可以用于区分标识符和关键字，但即使全是小写字母也需要单独检查，因此全是字母归为一类</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">0</span>)) <span class="built_in">newStatus</span>(<span class="number">2</span>);                          <span class="comment">// 转移状态-&gt;2 非零数字开头</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;0&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">3</span>);                            <span class="comment">// 转移状态-&gt;3  0开头</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;&amp;&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">4</span>);         <span class="comment">// 转移状态-&gt;4  多字运算符</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;|&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">5</span>);         <span class="comment">// 转移状态-&gt;5  </span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;:&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">6</span>);         <span class="comment">// 转移状态-&gt;6</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;&gt;&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">7</span>);         <span class="comment">// 转移状态-&gt;7</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;&lt;&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">8</span>);         <span class="comment">// 转移状态-&gt;8</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;/&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">9</span>);         <span class="comment">// 转移状态-&gt;9</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;*&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">10</span>);        <span class="comment">// 状态转移-&gt;10 单字运算符</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;=&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">11</span>);        <span class="comment">// 状态转移-&gt;11 </span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;!&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">12</span>);        <span class="comment">// 状态转移-&gt;12 </span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;+&#x27;</span> || wd == <span class="string">&#x27;-&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">13</span>);         <span class="comment">// 状态转移-&gt;13 加减号(正负号)</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;.&#x27;</span>) <span class="built_in">newStatus</span>(<span class="number">14</span>);        <span class="comment">// 状态转移-&gt;14 考虑.5 == 0.5 ,此时.后必须有数字</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isDelimiter</span>())&#123;        <span class="comment">// 单字分界符直接给出结果</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            type = <span class="number">3</span>;</span><br><span class="line">                            <span class="built_in">output</span>();               <span class="comment">// 存储词元、输出、初始化</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> i = <span class="built_in">passError</span>(i);      <span class="comment">// 检测到非法字符如&quot;^#$&quot;等</span></span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">1</span>:&#123;    <span class="comment">// 字母开头,全字母情况 可终止 -&gt; 标识符或关键字</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isLowerLetter</span>() || <span class="built_in">isUpperLetter</span>()) <span class="built_in">newStatus</span>(<span class="number">1</span>);    <span class="comment">// 原地踏步</span></span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isNumber</span>() || wd == <span class="string">&#x27;_&#x27;</span>)&#123;     <span class="comment">// 状态转移-&gt;17</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">17</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span>&#123;       <span class="comment">// 处理缓存内容</span></span><br><span class="line">                            cag = <span class="built_in">isKeywords</span>();</span><br><span class="line">                            <span class="keyword">if</span>(cag) type = <span class="number">0</span>;   <span class="comment">// 是关键字</span></span><br><span class="line">                            <span class="keyword">else</span> type = <span class="number">4</span>;    <span class="comment">// 标识符</span></span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">2</span>:&#123;        <span class="comment">// 非零数字开头，可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd==<span class="string">&#x27;.&#x27;</span>)&#123;    <span class="comment">// 转移状态-&gt;18 十进制实数, 此时.后可以无内容</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">18</span>);   </span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;e&#x27;</span> || wd == <span class="string">&#x27;E&#x27;</span>)&#123;    <span class="comment">// 转移状态-&gt;19 科学计数法E</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">19</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isNumber</span>())&#123;      <span class="comment">// 原地踏步</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">2</span>);   </span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isLowerLetter</span>() || <span class="built_in">isUpperLetter</span>() || wd == <span class="string">&#x27;\&#x27;&#x27;</span> || wd == <span class="string">&#x27;&quot;&#x27;</span>)&#123;     <span class="comment">// 十进制数后跟字母或引号铁铁出错</span></span><br><span class="line">                            i = <span class="built_in">passError</span>(i);   <span class="comment">// 出错处理</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span>&#123;       <span class="comment">// 被视为整常数，重置缓存</span></span><br><span class="line">                            type = <span class="number">2</span>;</span><br><span class="line">                            cag = <span class="number">41</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">3</span>:&#123;    <span class="comment">// 0开头数字，可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;X&#x27;</span> || wd == <span class="string">&#x27;x&#x27;</span>)&#123;     <span class="comment">// 状态转移-&gt;20 十六进制X</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">20</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;b&#x27;</span> || wd == <span class="string">&#x27;B&#x27;</span>)&#123;    <span class="comment">// 状态转移-&gt;21 二进制数b</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">21</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">8</span>))&#123;   <span class="comment">// 状态转移-&gt;22 八进制数</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">22</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isLowerLetter</span>() || <span class="built_in">isUpperLetter</span>() || wd == <span class="string">&#x27;\&#x27;&#x27;</span> || wd == <span class="string">&#x27;&quot;&#x27;</span>)&#123;     <span class="comment">// 十进制数后跟字母或引号铁铁出错</span></span><br><span class="line">                            i = <span class="built_in">passError</span>(i);   <span class="comment">// 出错处理</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span>&#123;       <span class="comment">// 被视为整常数0</span></span><br><span class="line">                            type = <span class="number">2</span>;</span><br><span class="line">                            cag = <span class="number">41</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">4</span>:&#123;    <span class="comment">// 检查 &amp; 不可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;&amp;&#x27;</span>)&#123;  <span class="comment">// 与运算符</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            i = <span class="built_in">passError</span>(i);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">5</span>:&#123;    <span class="comment">// 检查 | 不可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;|&#x27;</span>)&#123;  <span class="comment">// 或运算符</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            i = <span class="built_in">passError</span>(i);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">6</span>:&#123;    <span class="comment">// 检查 : 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;=&#x27;</span>)&#123;  <span class="comment">// 赋值号:=</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span>&#123;    <span class="comment">// 冒号:</span></span><br><span class="line">                            type = <span class="number">3</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">7</span>:&#123;    <span class="comment">// 检查 &gt; 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;=&#x27;</span>)&#123;  <span class="comment">// &gt;=</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;    <span class="comment">// &gt;</span></span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">8</span>:&#123;    <span class="comment">// 检查 &lt; 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;=&#x27;</span>)&#123;  <span class="comment">// &lt;=</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;&gt;&#x27;</span>)&#123;   <span class="comment">// &lt;&gt;</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">-1</span>);</span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> &#123;    <span class="comment">// &lt;</span></span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">9</span>:&#123;    <span class="comment">// 检查 / 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;/&#x27;</span>)&#123;  <span class="comment">// 状态转移-&gt;23 单行注释符//</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">23</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;*&#x27;</span>)&#123; <span class="comment">// 状态转移-&gt;24 多行注释符</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">24</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;    <span class="comment">// 除号/</span></span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">10</span>:&#123;   <span class="comment">// 检查 *</span></span><br><span class="line">                        type = <span class="number">1</span>;</span><br><span class="line">                        <span class="built_in">output</span>();</span><br><span class="line">                        i -= <span class="number">1</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">11</span>:&#123;   <span class="comment">// 检查 =</span></span><br><span class="line">                        type = <span class="number">1</span>;</span><br><span class="line">                        <span class="built_in">output</span>();</span><br><span class="line">                        i -= <span class="number">1</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">12</span>:&#123;   <span class="comment">// 检查 !</span></span><br><span class="line">                        type = <span class="number">1</span>;</span><br><span class="line">                        <span class="built_in">output</span>();</span><br><span class="line">                        i -= <span class="number">1</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">13</span>:&#123;   <span class="comment">// +-号 不完美的DFA 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(cag == <span class="number">41</span> || cag == <span class="number">42</span> || cag == <span class="number">45</span> || cag ==<span class="number">56</span> )&#123;     <span class="comment">// 前面出现操作数则为加减号, &#x27;(&#x27;被视为有效界符, &#x27;)&#x27; 则被视为操作数</span></span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;.&#x27;</span>)&#123;         <span class="comment">// 状态转移-&gt;14 实数</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">14</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">0</span>))&#123;        <span class="comment">// 状态转移-&gt;2 非0数字</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">2</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;0&#x27;</span>)&#123;         <span class="comment">// 状态转移-&gt;3 数字0</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">3</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span>&#123;   <span class="comment">// 加减号</span></span><br><span class="line">                            type = <span class="number">1</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">14</span>:&#123;   <span class="comment">// . 实数 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>())&#123; <span class="comment">// 状态转移-&gt;18 正常实数</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">18</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            type = <span class="number">3</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">17</span>:&#123;   <span class="comment">// 标识符 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>() || <span class="built_in">isLowerLetter</span>() || <span class="built_in">isUpperLetter</span>() || wd == <span class="string">&#x27;_&#x27;</span>)&#123;  <span class="comment">// 原地踏步</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">17</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;    <span class="comment">// 获取标识符</span></span><br><span class="line">                            type = <span class="number">4</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">18</span>:&#123;   <span class="comment">// 真 实数 后可不跟数字 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>())&#123; <span class="comment">// 原地踏步</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">18</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;e&#x27;</span> || wd == <span class="string">&#x27;E&#x27;</span>)&#123;  <span class="comment">// 状态转移-&gt;19 科学计数法  允许有: 3.e7 的写法</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">19</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;    <span class="comment">// 截取实数</span></span><br><span class="line">                            type = <span class="number">2</span>;</span><br><span class="line">                            cag = <span class="number">42</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125; </span><br><span class="line">                    <span class="keyword">case</span> <span class="number">19</span>:&#123;   <span class="comment">// 科学计数法e 不可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;+&#x27;</span> || wd == <span class="string">&#x27;-&#x27;</span>)&#123;     <span class="comment">// 状态转移-&gt;25 科学计数法+-</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">25</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isNumber</span>())&#123;      <span class="comment">// 状态转移-&gt;26 十进制整数后终态</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">26</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;    <span class="comment">// 出错啦</span></span><br><span class="line">                            i = <span class="built_in">passError</span>(i);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">20</span>:&#123;   <span class="comment">// 十六进制x 不可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">16</span>))&#123;   <span class="comment">// 状态转移-&gt;27 十六进制整数后终态</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">27</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            i = <span class="built_in">passError</span>(i);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">21</span>:&#123;   <span class="comment">// 二进制数b 不可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">2</span>))&#123;    <span class="comment">// 状态转移-&gt;28 二进制数后终态</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">28</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            i = <span class="built_in">passError</span>(i);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">22</span>:&#123;   <span class="comment">// 八进制数中态 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">8</span>))&#123;    <span class="comment">// 原地踏步</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">22</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;e&#x27;</span> || wd == <span class="string">&#x27;E&#x27;</span>)&#123;  <span class="comment">// 状态转移-&gt;19 科学计数法e</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">19</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;.&#x27;</span>)&#123;   <span class="comment">// 状态转移-&gt;18 当做十进制数处理的八进制小数(C++中自适应)</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">18</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            type = <span class="number">2</span>;</span><br><span class="line">                            cag = <span class="number">41</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">23</span>:&#123;   <span class="comment">// 单行注释符// 条件终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;\n&#x27;</span>)&#123;   <span class="comment">// 截取单行注释串</span></span><br><span class="line">                            type = <span class="number">5</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;    <span class="comment">// 原地踏步</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">23</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">24</span>:&#123;   <span class="comment">// 多行注释符/* 不可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;*&#x27;</span>)&#123;  <span class="comment">// 状态转移-&gt;29 检测退出记号*/</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">29</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;    <span class="comment">// 原地踏步</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">24</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">25</span>:&#123;   <span class="comment">// 科学计数法+- 不可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>())&#123;     <span class="comment">// 状态转移-&gt;26 十进制整数后终态</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">26</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            i = <span class="built_in">passError</span>(i);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">26</span>:&#123;   <span class="comment">// 十进制整数后终态 可终止</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>())&#123;     <span class="comment">// 原地踏步</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">26</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            type = <span class="number">2</span>;</span><br><span class="line">                            cag = <span class="number">42</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">27</span>:&#123;   <span class="comment">// 十六进制整数后终态 十六进制不接受小数点</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">16</span>))&#123;   <span class="comment">// 原地踏步</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">27</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;e&#x27;</span> || wd == <span class="string">&#x27;E&#x27;</span>)&#123;  <span class="comment">// 状态转移-&gt;19</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">19</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            type = <span class="number">2</span>;</span><br><span class="line">                            cag = <span class="number">41</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">28</span>:&#123;   <span class="comment">// 二进制数后终态</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">isNumber</span>(<span class="number">2</span>))&#123;</span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">28</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;e&#x27;</span> || wd == <span class="string">&#x27;E&#x27;</span>)&#123;</span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">19</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            type = <span class="number">2</span>;</span><br><span class="line">                            cag = <span class="number">41</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                            i -= <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">29</span>:&#123;   <span class="comment">// 检测退出记号 */</span></span><br><span class="line">                        <span class="keyword">if</span>(wd == <span class="string">&#x27;/&#x27;</span>)&#123;</span><br><span class="line">                            type = <span class="number">5</span>;</span><br><span class="line">                            <span class="built_in">output</span>();</span><br><span class="line">                        &#125; </span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(wd == <span class="string">&#x27;*&#x27;</span>)&#123;     <span class="comment">// 原地踏步</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">29</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> &#123;    <span class="comment">// 状态转移-&gt;24</span></span><br><span class="line">                            <span class="built_in">newStatus</span>(<span class="number">24</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(needOF &amp;&amp; !silence)&#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;==&gt; The output has been saved to the file: %s&quot;</span>, oFP.<span class="built_in">c_str</span>());   <span class="comment">// 保存文件</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">blankContinue</span><span class="params">()</span></span>&#123;    <span class="comment">// 跳过空白字符，考虑换行对正负加减的影响</span></span><br><span class="line">            <span class="keyword">if</span>(wd == <span class="string">&#x27;\n&#x27;</span>) cag = <span class="number">51</span>;     <span class="comment">// 对于大部分词元而言换行等价于分号 </span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">passError</span><span class="params">(<span class="type">int</span> n)</span></span>&#123;   <span class="comment">// 跳过错误部分，不考虑错误部分引号的性质</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=n; i&lt;srcLen; i++)&#123;</span><br><span class="line">                wd = src[i];</span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">isDelimiter</span>() || <span class="built_in">isBlank</span>() || wd == <span class="string">&#x27;.&#x27;</span>)&#123;</span><br><span class="line">                    <span class="built_in">outError</span>();</span><br><span class="line">                    <span class="keyword">return</span> i<span class="number">-1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(wd == <span class="string">&#x27;:&#x27;</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(src[i+<span class="number">1</span>]!=<span class="string">&#x27;=&#x27;</span>)&#123;</span><br><span class="line">                        <span class="built_in">outError</span>();</span><br><span class="line">                        <span class="keyword">return</span> i<span class="number">-1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(wd == <span class="string">&#x27;/&#x27;</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(src[i+<span class="number">1</span>]==<span class="string">&#x27;/&#x27;</span> || src[i+<span class="number">1</span>]==<span class="string">&#x27;*&#x27;</span>)&#123;</span><br><span class="line">                        <span class="built_in">outError</span>();</span><br><span class="line">                        <span class="keyword">return</span> i<span class="number">-1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="built_in">newStatus</span>(<span class="number">-1</span>);  <span class="comment">// 避免分界符被放入错误输出中</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> srcLen<span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">outError</span><span class="params">()</span></span>&#123;     <span class="comment">// 错误报告</span></span><br><span class="line">            <span class="built_in">newPrintf</span>(<span class="string">&quot;Error with: %s\n&quot;</span>, words.<span class="built_in">c_str</span>());</span><br><span class="line">            <span class="built_in">newStatus</span>(<span class="number">0</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">newStatus</span><span class="params">(<span class="type">int</span> _s)</span></span>&#123;  <span class="comment">// 更新状态</span></span><br><span class="line">            <span class="keyword">switch</span>(_s)&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>:    <span class="comment">// 为0则初始化状态</span></span><br><span class="line">                    status = <span class="number">0</span>;    <span class="comment">// 原始状态</span></span><br><span class="line">                    len = <span class="number">0</span>;</span><br><span class="line">                    words = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">-1</span>:   <span class="comment">// -1作为一个暂态，处理不需要状态实际转移的情况</span></span><br><span class="line">                    len += <span class="number">1</span>;</span><br><span class="line">                    words += wd;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:    <span class="comment">// 不为0就更新状态</span></span><br><span class="line">                    status = _s;</span><br><span class="line">                    len += <span class="number">1</span>;</span><br><span class="line">                    words += wd;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">output</span><span class="params">()</span></span>&#123;   <span class="comment">// 存储词元、输出、初始化</span></span><br><span class="line">            <span class="keyword">switch</span>(type)&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>: <span class="keyword">break</span>;      <span class="comment">// 关键字</span></span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>:    <span class="comment">// 运算符</span></span><br><span class="line">                    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">20</span>; i&lt;<span class="number">33</span>; i++)</span><br><span class="line">                        <span class="keyword">if</span>(wordsTable[i] == words)&#123;</span><br><span class="line">                            cag = i+<span class="number">1</span>;</span><br><span class="line">                            <span class="keyword">break</span>;  <span class="comment">// 跳出for循环而非case</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    <span class="comment">// 出错啦</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>: <span class="keyword">break</span>;      <span class="comment">// 常数</span></span><br><span class="line">                <span class="keyword">case</span> <span class="number">3</span>:    <span class="comment">// 界符</span></span><br><span class="line">                    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">50</span>; i&lt;<span class="number">56</span>; i++)</span><br><span class="line">                        <span class="keyword">if</span>(wordsTable[i] == words)&#123;</span><br><span class="line">                            cag = i+<span class="number">1</span>;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                    <span class="comment">// 出错啦</span></span><br><span class="line">                <span class="keyword">case</span> <span class="number">4</span>:    <span class="comment">// 标识符</span></span><br><span class="line">                    cag = <span class="number">45</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">5</span>:     <span class="comment">// 注释 无需输出与存储，初始化后退出</span></span><br><span class="line">                    <span class="built_in">newStatus</span>(<span class="number">0</span>);</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            wordsLen += <span class="number">1</span>;</span><br><span class="line">            <span class="built_in">newPrintf</span>(<span class="string">&quot;(%d)(%d,%s)\n&quot;</span>, wordsLen, cag, words.<span class="built_in">c_str</span>());</span><br><span class="line">            strV.<span class="built_in">push_back</span>(words);   <span class="comment">// 存储词元</span></span><br><span class="line">            typeV.<span class="built_in">push_back</span>(cag);   <span class="comment">// 存储词元</span></span><br><span class="line">            <span class="built_in">newStatus</span>(<span class="number">0</span>);   <span class="comment">// 初始化</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">isBlank</span><span class="params">()</span><span class="type">const</span></span>&#123;    <span class="comment">// 检测空白字符</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">4</span>; i++)</span><br><span class="line">                <span class="keyword">if</span>(filt[i] == wd) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">isDelimiter</span><span class="params">()</span><span class="type">const</span></span>&#123;    <span class="comment">// 判断是否是单字分界符</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">4</span>; i++)</span><br><span class="line">                <span class="keyword">if</span>(wd == delm[i]) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">isKeywords</span><span class="params">()</span><span class="type">const</span></span>&#123;  <span class="comment">// 判断关键字，返回种别码或0</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;keyWordsLen; i++)</span><br><span class="line">                <span class="keyword">if</span>(words == wordsTable[i]) <span class="keyword">return</span> i+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">isNumber</span><span class="params">(<span class="type">int</span> lim = <span class="number">10</span>)</span><span class="type">const</span></span>&#123;  <span class="comment">// 判断数字</span></span><br><span class="line">            <span class="keyword">switch</span> (lim)&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>:    <span class="comment">// 除0以外的十进制数字</span></span><br><span class="line">                    <span class="keyword">if</span>(wd &gt;= <span class="string">&#x27;1&#x27;</span> &amp;&amp; wd &lt;= <span class="string">&#x27;9&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">10</span>:        <span class="comment">// 十进制</span></span><br><span class="line">                    <span class="keyword">if</span>(wd&gt;=<span class="string">&#x27;0&#x27;</span> &amp;&amp; wd&lt;=<span class="string">&#x27;9&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">                    <span class="keyword">if</span>(wd &gt;=<span class="string">&#x27;0&#x27;</span> &amp;&amp; wd&lt;=<span class="string">&#x27;7&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                    <span class="keyword">if</span>(wd &gt;=<span class="string">&#x27;2&#x27;</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">16</span>:</span><br><span class="line">                    <span class="keyword">if</span>(wd &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; wd &lt;= <span class="string">&#x27;9&#x27;</span> || wd &gt;= <span class="string">&#x27;a&#x27;</span> &amp;&amp; wd &lt;= <span class="string">&#x27;f&#x27;</span> || wd &gt;= <span class="string">&#x27;A&#x27;</span> &amp;&amp; wd &lt;= <span class="string">&#x27;F&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">isLowerLetter</span><span class="params">()</span><span class="type">const</span></span>&#123;  <span class="comment">// 判断大写字母</span></span><br><span class="line">            <span class="keyword">if</span>(wd&gt;=<span class="string">&#x27;a&#x27;</span> &amp;&amp; wd&lt;=<span class="string">&#x27;z&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">isUpperLetter</span><span class="params">()</span><span class="type">const</span></span>&#123;  <span class="comment">// 判断大写字母</span></span><br><span class="line">            <span class="keyword">if</span>(wd&gt;=<span class="string">&#x27;A&#x27;</span> &amp;&amp; wd&lt;=<span class="string">&#x27;Z&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">printSplit</span><span class="params">(string text)</span></span>&#123;  <span class="comment">// 输出夹带文本的分割线</span></span><br><span class="line">            <span class="keyword">if</span>(silence==<span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line">            <span class="type">const</span> <span class="type">int</span> aLen = <span class="number">60</span>;</span><br><span class="line">            <span class="type">int</span> _len = text.<span class="built_in">length</span>()+<span class="number">2</span>; <span class="comment">// 两侧留空</span></span><br><span class="line">            <span class="type">int</span> left = (aLen-_len)/<span class="number">2</span>, right = aLen - left - _len;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;left; i++) <span class="built_in">newPrintf</span>(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">            <span class="built_in">newPrintf</span>(<span class="string">&quot; %s &quot;</span>, text.<span class="built_in">c_str</span>());</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;right; i++) <span class="built_in">newPrintf</span>(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">            <span class="built_in">newPrintf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">newPrintf</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *fmt, ...)</span></span>&#123;   <span class="comment">// 重载自己的printf, 便于保存输出的内容, 参考: https://blog.csdn.net/weixin_51281362/article/details/125445742 | https://blog.csdn.net/wanruiou/article/details/115180466</span></span><br><span class="line">            <span class="keyword">if</span>(silence==<span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line">            va_list arg;    </span><br><span class="line">            <span class="built_in">va_start</span>(arg, fmt); <span class="comment">// 传入地址</span></span><br><span class="line">            <span class="built_in">vprintf</span>(fmt, arg); </span><br><span class="line">            <span class="keyword">if</span>(needOF)  <span class="comment">// 需要保存至文件</span></span><br><span class="line">                <span class="built_in">vfprintf</span>(oF, fmt, arg); <span class="comment">// 借助FILE将printf重定向至文件流, 参考: https://blog.csdn.net/LuyaoYing001/article/details/79750833</span></span><br><span class="line">            <span class="built_in">va_end</span>(arg);    <span class="comment">// 结束可变参数的获取</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">getVL</span><span class="params">()</span><span class="type">const</span></span>&#123; <span class="keyword">return</span> typeV.<span class="built_in">size</span>(); &#125;    <span class="comment">// 数组长度</span></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">atTV</span><span class="params">(<span class="type">int</span> n)</span><span class="type">const</span></span>&#123; <span class="keyword">return</span> typeV[n]; &#125;    </span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">getTV</span><span class="params">()</span><span class="type">const</span></span>&#123; <span class="keyword">return</span> typeV; &#125;   </span><br><span class="line">        <span class="function">vector&lt;string&gt; <span class="title">getSV</span><span class="params">()</span><span class="type">const</span></span>&#123; <span class="keyword">return</span> strV; &#125;   </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> threshold=<span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getLen</span><span class="params">(T&amp; arr)</span></span>&#123; <span class="comment">// 快速获取数组长度</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sizeof</span>(arr)/<span class="built_in">sizeof</span>(arr[<span class="number">0</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Chain</span>&#123;   <span class="comment">// 记录TrueChain指针与FalseChain指针的结构体</span></span><br><span class="line">    <span class="type">int</span> tC; <span class="comment">// trueChain</span></span><br><span class="line">    <span class="type">int</span> fC; <span class="comment">// falseChain</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">semanticAnalyzer</span>&#123;</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        <span class="type">const</span> <span class="type">int</span> opp[<span class="number">7</span>][<span class="number">7</span>]=&#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">2</span>,<span class="number">0</span>&#125;;  <span class="comment">//operatorPriority</span></span><br><span class="line">        <span class="comment">//运算符顺序:&#x27;+&#x27;,&#x27;-&#x27;,&#x27;*&#x27;,&#x27;/&#x27;,&#x27;(&#x27;,&#x27;)&#x27;,&#x27;#&#x27; 1表示大于，0等于，-1小于,2非法</span></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">              + - * / ( ) #</span></span><br><span class="line"><span class="comment">            + &gt; &gt; &lt; &lt; &lt; &gt; &gt;</span></span><br><span class="line"><span class="comment">            - &gt; &gt; &lt; &lt; &lt; &gt; &gt;</span></span><br><span class="line"><span class="comment">            * &gt; &gt; &gt; &gt; &lt; &gt; &gt;</span></span><br><span class="line"><span class="comment">            / &gt; &gt; &gt; &gt; &lt; &gt; &gt;</span></span><br><span class="line"><span class="comment">            ( &lt; &lt; &lt; &lt; &lt; = x</span></span><br><span class="line"><span class="comment">            ) &gt; &gt; &gt; &gt; x &gt; &gt;</span></span><br><span class="line"><span class="comment">            # &lt; &lt; &lt; &lt; &lt; x =</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">        <span class="type">const</span> <span class="type">int</span> opl[<span class="number">5</span>][<span class="number">5</span>]=&#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">-1</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">-1</span>, <span class="number">-1</span>, <span class="number">-1</span>, <span class="number">2</span>, <span class="number">0</span>&#125;;  <span class="comment">//operatorPriority</span></span><br><span class="line">        <span class="comment">//运算符顺序:&#x27;&amp;&amp;&#x27;,&#x27;||&#x27;,&#x27;(&#x27;,&#x27;)&#x27;,&#x27;#&#x27; 1表示大于，0等于，-1小于,2非法</span></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">              &amp; | ( ) #</span></span><br><span class="line"><span class="comment">            &amp; &gt; &gt; &lt; &gt; &gt;</span></span><br><span class="line"><span class="comment">            | &lt; &gt; &lt; &gt; &gt;</span></span><br><span class="line"><span class="comment">            ( &lt; &lt; &lt; = x</span></span><br><span class="line"><span class="comment">            ) x x x x x</span></span><br><span class="line"><span class="comment">            # &lt; &lt; &lt; x =</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">        stack&lt;<span class="type">int</span>&gt; S;</span><br><span class="line"></span><br><span class="line">        stack&lt;string&gt; calcNS;   <span class="comment">// 算术表达式操作数栈</span></span><br><span class="line">        stack&lt;<span class="type">int</span>&gt; calcOpS;   <span class="comment">// 算术表达式运算符栈</span></span><br><span class="line"></span><br><span class="line">        stack&lt;<span class="type">int</span>&gt; locNS;   <span class="comment">// 关系表达式操作数栈</span></span><br><span class="line">        stack&lt;<span class="type">int</span>&gt; locOpS;   <span class="comment">// 关系表达式运算符栈</span></span><br><span class="line"></span><br><span class="line">        stack&lt;string&gt; NS;     <span class="comment">// 关系运算操作数栈</span></span><br><span class="line">        stack&lt;<span class="type">int</span>&gt; opS;     <span class="comment">// 关系运算符号栈</span></span><br><span class="line"></span><br><span class="line">        stack&lt;Chain&gt; CS;    <span class="comment">// ChainStack</span></span><br><span class="line">        stack&lt;<span class="type">int</span>&gt; WS;      <span class="comment">// while首位栈</span></span><br><span class="line">        stack&lt;pair&lt;<span class="type">int</span>, string&gt;&gt; tdS;     <span class="comment">// 跳转待定栈</span></span><br><span class="line"></span><br><span class="line">        stack&lt;vector&lt;<span class="type">int</span>&gt;&gt; cirS;    <span class="comment">// 递归栈,V[层数（栈中元素个数替代）， 标记种类， 特殊位置标记]</span></span><br><span class="line">        map&lt;pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;, vector&lt;<span class="type">int</span>&gt;&gt; init;  <span class="comment">// 预测表</span></span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; typeV;</span><br><span class="line">        vector&lt;string&gt; strV;</span><br><span class="line">        vector&lt;vector&lt;string&gt;&gt; V4; <span class="comment">// 四元式存储</span></span><br><span class="line">        <span class="type">int</span> flag;</span><br><span class="line">        <span class="type">int</span> ops;    <span class="comment">// 临时操作数计数</span></span><br><span class="line">        <span class="type">int</span> lFlag;  <span class="comment">// 排除关系语句的首个关系式</span></span><br><span class="line">        <span class="type">int</span> rFlag;  <span class="comment">// 寻找赋值语句的首个变量</span></span><br><span class="line">        <span class="type">int</span> tFlag;  <span class="comment">// 寻找首层算术表达式</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="built_in">semanticAnalyzer</span>(vector&lt;<span class="type">int</span>&gt; tv, vector&lt;string&gt; sv):<span class="built_in">typeV</span>(tv), <span class="built_in">strV</span>(sv)&#123;  <span class="comment">// 初始化预测表</span></span><br><span class="line">            typeV.<span class="built_in">push_back</span>(<span class="number">0</span>);   <span class="comment">// 终止符#外标记为0，内标记为-1</span></span><br><span class="line">            strV.<span class="built_in">push_back</span>(<span class="string">&quot;#&quot;</span>);   <span class="comment">// 终止符#外标记为0，内标记为-1</span></span><br><span class="line">            locOpS.<span class="built_in">push</span>(<span class="number">0</span>); <span class="comment">// 起止符# 0</span></span><br><span class="line">            opS.<span class="built_in">push</span>(<span class="number">0</span>);</span><br><span class="line">            CS.<span class="built_in">push</span>(&#123;<span class="number">0</span>, <span class="number">0</span>&#125;);    <span class="comment">// 底层Chain</span></span><br><span class="line">            cirS.<span class="built_in">push</span>(&#123;<span class="number">-1</span>, <span class="number">-1</span>, <span class="number">-1</span>&#125;);    <span class="comment">// 垫底</span></span><br><span class="line">            tFlag = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// LL(1) 转移表</span></span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">100</span>, <span class="number">0</span>, &#123;<span class="number">101</span>,<span class="number">50</span>,<span class="number">44</span>,<span class="number">0</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">101</span>, <span class="number">1</span>, &#123;<span class="number">51</span>,<span class="number">5</span>,<span class="number">106</span>,<span class="number">4</span>,<span class="number">102</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">102</span>, <span class="number">1</span>, &#123;<span class="number">103</span>,<span class="number">1</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">103</span>, <span class="number">44</span>, &#123;<span class="number">124</span>,<span class="number">50</span>,<span class="number">104</span>,<span class="number">53</span>,<span class="number">105</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">104</span>, <span class="number">2</span>, &#123;<span class="number">2</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">104</span>, <span class="number">3</span>, &#123;<span class="number">3</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">105</span>, <span class="number">44</span>, &#123;<span class="number">125</span>,<span class="number">121</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">106</span>, &#123;<span class="number">4</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">44</span>&#125;, &#123;<span class="number">126</span>,<span class="number">107</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">107</span>, <span class="number">4</span>, &#123;<span class="number">111</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">107</span>, <span class="number">6</span>, &#123;<span class="number">109</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">107</span>, <span class="number">9</span>, &#123;<span class="number">110</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">107</span>, <span class="number">4</span>, &#123;<span class="number">111</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">107</span>, <span class="number">44</span>, &#123;<span class="number">108</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">108</span>, <span class="number">44</span>, &#123;<span class="number">112</span>,<span class="number">30</span>,<span class="number">121</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">109</span>, <span class="number">6</span>, &#123;<span class="number">129</span>,<span class="number">107</span>,<span class="number">7</span>,<span class="number">120</span>,<span class="number">6</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">110</span>, <span class="number">9</span>, &#123;<span class="number">107</span>,<span class="number">10</span>,<span class="number">120</span>,<span class="number">9</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">111</span>, <span class="number">4</span>, &#123;<span class="number">5</span>,<span class="number">106</span>,<span class="number">4</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">112</span>, &#123;<span class="number">40</span>,<span class="number">41</span>,<span class="number">44</span>&#125;, &#123;<span class="number">113</span>,<span class="number">116</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">113</span>, &#123;<span class="number">5</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">10</span>,<span class="number">24</span>,<span class="number">25</span>,<span class="number">26</span>,<span class="number">27</span>,<span class="number">28</span>,<span class="number">29</span>,<span class="number">50</span>,<span class="number">55</span>,<span class="number">31</span>,<span class="number">32</span>&#125;, &#123;<span class="number">128</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">113</span>, &#123;<span class="number">20</span>,<span class="number">21</span>&#125;, &#123;<span class="number">114</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">114</span>, &#123;<span class="number">5</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">10</span>,<span class="number">24</span>,<span class="number">25</span>,<span class="number">26</span>,<span class="number">27</span>,<span class="number">28</span>,<span class="number">29</span>,<span class="number">50</span>,<span class="number">55</span>,<span class="number">31</span>,<span class="number">32</span>&#125;, &#123;<span class="number">128</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">114</span>, &#123;<span class="number">20</span>,<span class="number">21</span>&#125;, &#123;<span class="number">114</span>,<span class="number">115</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">115</span>, <span class="number">20</span>, &#123;<span class="number">116</span>,<span class="number">20</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">115</span>, <span class="number">21</span>, &#123;<span class="number">116</span>,<span class="number">21</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">116</span>, &#123;<span class="number">40</span>,<span class="number">41</span>,<span class="number">44</span>,<span class="number">54</span>&#125;, &#123;<span class="number">127</span>,<span class="number">119</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">117</span>, &#123;<span class="number">5</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">10</span>,<span class="number">20</span>,<span class="number">21</span>,<span class="number">24</span>,<span class="number">25</span>,<span class="number">26</span>,<span class="number">27</span>,<span class="number">28</span>,<span class="number">29</span>,<span class="number">50</span>,<span class="number">55</span>,<span class="number">31</span>,<span class="number">32</span>&#125;, &#123;<span class="number">128</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">117</span>, &#123;<span class="number">22</span>,<span class="number">23</span>&#125;, &#123;<span class="number">117</span>,<span class="number">118</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">118</span>, <span class="number">22</span>, &#123;<span class="number">119</span>,<span class="number">22</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">118</span>, <span class="number">23</span>, &#123;<span class="number">119</span>,<span class="number">23</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">119</span>, &#123;<span class="number">40</span>,<span class="number">41</span>&#125;, &#123;<span class="number">122</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">119</span>, <span class="number">44</span>, &#123;<span class="number">121</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">119</span>, <span class="number">54</span>, &#123;<span class="number">55</span>,<span class="number">112</span>,<span class="number">54</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">120</span>, &#123;<span class="number">40</span>,<span class="number">41</span>,<span class="number">44</span>,<span class="number">54</span>&#125;, &#123;<span class="number">131</span>,<span class="number">130</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">121</span>, <span class="number">44</span>, &#123;<span class="number">44</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">122</span>, <span class="number">40</span>, &#123;<span class="number">40</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">122</span>, <span class="number">41</span>, &#123;<span class="number">41</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">123</span>, <span class="number">24</span>, &#123;<span class="number">24</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">123</span>, <span class="number">25</span>, &#123;<span class="number">25</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">123</span>, <span class="number">26</span>, &#123;<span class="number">26</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">123</span>, <span class="number">27</span>, &#123;<span class="number">27</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">123</span>, <span class="number">28</span>, &#123;<span class="number">28</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">123</span>, <span class="number">29</span>, &#123;<span class="number">29</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">124</span>, <span class="number">4</span>, &#123;<span class="number">128</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">125</span>, <span class="number">52</span>, &#123;<span class="number">105</span>,<span class="number">52</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">125</span>, <span class="number">53</span>, &#123;<span class="number">128</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">126</span>, <span class="number">5</span>, &#123;<span class="number">128</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">126</span>, <span class="number">50</span>, &#123;<span class="number">106</span>,<span class="number">50</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">127</span>, &#123;<span class="number">5</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">10</span>,<span class="number">20</span>,<span class="number">21</span>,<span class="number">24</span>,<span class="number">25</span>,<span class="number">26</span>,<span class="number">27</span>,<span class="number">28</span>,<span class="number">29</span>,<span class="number">50</span>,<span class="number">55</span>,<span class="number">31</span>,<span class="number">32</span>&#125;, &#123;<span class="number">128</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">127</span>, &#123;<span class="number">22</span>,<span class="number">23</span>&#125;, &#123;<span class="number">117</span>&#125;);</span><br><span class="line"></span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">129</span>, <span class="number">8</span>, &#123;<span class="number">107</span>,<span class="number">8</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">129</span>, &#123;<span class="number">50</span>, <span class="number">5</span>&#125;, &#123;<span class="number">128</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">130</span>, &#123;<span class="number">40</span>,<span class="number">41</span>,<span class="number">44</span>,<span class="number">54</span>&#125;, &#123;<span class="number">112</span>, <span class="number">123</span>, <span class="number">112</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">131</span>, &#123;<span class="number">31</span>,<span class="number">32</span>&#125;, &#123;<span class="number">120</span>,<span class="number">132</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">131</span>, &#123;<span class="number">10</span>, <span class="number">7</span>&#125;, &#123;<span class="number">128</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">132</span>, <span class="number">31</span>, &#123;<span class="number">31</span>&#125;);</span><br><span class="line">            <span class="built_in">buildMap</span>(<span class="number">132</span>, <span class="number">32</span>, &#123;<span class="number">32</span>&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">buildMap</span><span class="params">(<span class="type">int</span> a, vector&lt;<span class="type">int</span>&gt; s, vector&lt;<span class="type">int</span>&gt; V)</span></span>&#123;</span><br><span class="line">            vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">            <span class="type">int</span> len = V.<span class="built_in">size</span>(), lens = s.<span class="built_in">size</span>();</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i&lt;len; i++)&#123;</span><br><span class="line">                v.<span class="built_in">push_back</span>(V[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j&lt;lens; j++)&#123;</span><br><span class="line">                <span class="function">pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; <span class="title">p</span><span class="params">(a, s[j])</span></span>;</span><br><span class="line">                <span class="keyword">if</span>(init.<span class="built_in">count</span>(p)) <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">// 重复定义</span></span><br><span class="line">                init[p]=v;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">buildMap</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, vector&lt;<span class="type">int</span>&gt; V)</span></span>&#123;</span><br><span class="line">            <span class="type">int</span> len = V.<span class="built_in">size</span>();</span><br><span class="line">            <span class="function">pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; <span class="title">p</span><span class="params">(a, b)</span></span>;</span><br><span class="line">            vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i&lt;len; i++)&#123;</span><br><span class="line">                v.<span class="built_in">push_back</span>(V[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            init[p]=v;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">isVT</span><span class="params">(<span class="type">int</span> n)</span></span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(n&gt;=<span class="number">100</span> &amp;&amp; n!=<span class="number">128</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">isEmpty</span><span class="params">(<span class="type">int</span> n)</span></span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(n==<span class="number">128</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">getPush</span><span class="params">(vector&lt;<span class="type">int</span>&gt; V)</span></span>&#123;        <span class="comment">// 逐个入栈</span></span><br><span class="line">            <span class="type">int</span> len = V.<span class="built_in">size</span>();</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;len; i++)&#123;</span><br><span class="line">                S.<span class="built_in">push</span>(V[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">analyze</span><span class="params">()</span></span>&#123;</span><br><span class="line">            V4.<span class="built_in">resize</span>(<span class="number">0</span>);   <span class="comment">// 清空四元式存储</span></span><br><span class="line">            ops = <span class="number">1</span>;    <span class="comment">// 临时操作数从1开始</span></span><br><span class="line">            S.<span class="built_in">push</span>(<span class="number">-1</span>);     <span class="comment">// 终止符</span></span><br><span class="line">            S.<span class="built_in">push</span>(<span class="number">100</span>);      <span class="comment">// 起始符A</span></span><br><span class="line">            cirS.<span class="built_in">push</span>(&#123;<span class="number">-1</span>, <span class="number">-1</span>, <span class="number">-1</span>&#125;);</span><br><span class="line">            V4.<span class="built_in">push_back</span>(&#123;<span class="string">&quot;none&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;&quot;</span>&#125;);</span><br><span class="line"></span><br><span class="line">            <span class="type">int</span> len = typeV.<span class="built_in">size</span>(), c=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>(!S.<span class="built_in">empty</span>() &amp;&amp; c&lt;len)&#123;</span><br><span class="line">                <span class="type">int</span> tmp = S.<span class="built_in">top</span>();</span><br><span class="line">                string tmpS = strV[c];</span><br><span class="line">                S.<span class="built_in">pop</span>();    <span class="comment">// 当前符号出栈</span></span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">isVT</span>(tmp))&#123;  <span class="comment">// 非终结符</span></span><br><span class="line">                    <span class="function">pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; <span class="title">tmpP</span><span class="params">(tmp, getMinus(typeV, c))</span></span>;</span><br><span class="line">                    <span class="keyword">if</span>(init.<span class="built_in">count</span>(tmpP)==<span class="number">0</span>)&#123;    <span class="comment">// 语法错误</span></span><br><span class="line">                        <span class="comment">// printf(&quot;false with unknown: %d (%d,%s)&quot;, tmp, typeV[c]-1, strV[c].c_str());</span></span><br><span class="line">                        <span class="built_in">printf</span>(<span class="string">&quot;syntax error.&quot;</span>);</span><br><span class="line">                        <span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    vector&lt;<span class="type">int</span>&gt; tmpV = init[tmpP];</span><br><span class="line">                    <span class="keyword">if</span>(tmp == <span class="number">109</span>)&#123;     <span class="comment">// 条件语句</span></span><br><span class="line">                        <span class="built_in">addChain</span>();</span><br><span class="line">                        cirS.<span class="built_in">push</span>(&#123;<span class="built_in">int</span>(S.<span class="built_in">size</span>()), <span class="number">1</span>, <span class="number">0</span>&#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span>(tmp == <span class="number">120</span> &amp;&amp; <span class="built_in">getMinus</span>(typeV, c<span class="number">-1</span>) == <span class="number">6</span>)&#123; <span class="comment">// if后面的关系表达式</span></span><br><span class="line">                        cirS.<span class="built_in">push</span>(&#123;<span class="built_in">int</span>(S.<span class="built_in">size</span>()), <span class="number">2</span>, <span class="number">0</span>&#125;);</span><br><span class="line">                        locOpS.<span class="built_in">push</span>(<span class="number">0</span>);     <span class="comment">// 起止符标记关系表达式开始</span></span><br><span class="line">                        lFlag = <span class="number">1</span>;  <span class="comment">// l标记</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span>(tmp == <span class="number">107</span> &amp;&amp; <span class="built_in">getMinus</span>(typeV, c<span class="number">-1</span>) == <span class="number">7</span>)&#123; <span class="comment">// 准备进入then后面的语句</span></span><br><span class="line">                        <span class="built_in">linkUpV4</span>(<span class="built_in">getTC</span>(), <span class="built_in">to_string</span>(V4.<span class="built_in">size</span>()));</span><br><span class="line">                        cirS.<span class="built_in">push</span>(&#123;<span class="built_in">int</span>(S.<span class="built_in">size</span>()), <span class="number">3</span>, <span class="number">0</span>&#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span>(tmp == <span class="number">107</span> &amp;&amp; <span class="built_in">getMinus</span>(typeV, c<span class="number">-1</span>) == <span class="number">8</span>)&#123;   <span class="comment">// else后的语句</span></span><br><span class="line">                        <span class="comment">// FC跳转</span></span><br><span class="line">                        <span class="built_in">upChain</span>(V4.<span class="built_in">size</span>(), <span class="number">-1</span>);</span><br><span class="line">                        <span class="built_in">addV4</span>(&#123;<span class="string">&quot;j&quot;</span>, <span class="string">&quot; &quot;</span>, <span class="string">&quot; &quot;</span>, <span class="string">&quot;-1&quot;</span>&#125;);</span><br><span class="line">                        <span class="built_in">upV4</span>(<span class="built_in">getFC</span>(), <span class="number">3</span>, <span class="built_in">to_string</span>(V4.<span class="built_in">size</span>()));  <span class="comment">// 有else则多了一行，FC后移一个</span></span><br><span class="line">                        cirS.<span class="built_in">push</span>(&#123;<span class="built_in">int</span>(S.<span class="built_in">size</span>()), <span class="number">4</span>, <span class="number">0</span>&#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span>(tmp == <span class="number">130</span>)&#123;     <span class="comment">// 子关系表达式</span></span><br><span class="line">                        cirS.<span class="built_in">push</span>(&#123;<span class="built_in">int</span>(S.<span class="built_in">size</span>()), <span class="number">5</span>, <span class="number">0</span>&#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span>(tmp == <span class="number">112</span> &amp;&amp; tFlag == <span class="number">1</span>)&#123;     <span class="comment">// 第一层算术表达式</span></span><br><span class="line">                        tFlag = <span class="number">0</span>;  </span><br><span class="line">                        cirS.<span class="built_in">push</span>(&#123;<span class="built_in">int</span>(S.<span class="built_in">size</span>()), <span class="number">6</span>, c&#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span>(tmp == <span class="number">110</span>)&#123;     <span class="comment">// while语句</span></span><br><span class="line">                        <span class="built_in">addChain</span>();</span><br><span class="line">                        WS.<span class="built_in">push</span>(V4.<span class="built_in">size</span>());</span><br><span class="line">                        cirS.<span class="built_in">push</span>(&#123;<span class="built_in">int</span>(S.<span class="built_in">size</span>()), <span class="number">7</span>, <span class="number">0</span>&#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span>(tmp == <span class="number">120</span> &amp;&amp; <span class="built_in">getMinus</span>(typeV, c<span class="number">-1</span>) == <span class="number">9</span>)&#123; <span class="comment">// while后面的关系表达式</span></span><br><span class="line">                        cirS.<span class="built_in">push</span>(&#123;<span class="built_in">int</span>(S.<span class="built_in">size</span>()), <span class="number">8</span>, <span class="number">0</span>&#125;);</span><br><span class="line">                        locOpS.<span class="built_in">push</span>(<span class="number">0</span>);     <span class="comment">// 起止符标记关系表达式开始</span></span><br><span class="line">                        lFlag = <span class="number">1</span>;  <span class="comment">// l标记</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span>(tmp == <span class="number">107</span> &amp;&amp; <span class="built_in">getMinus</span>(typeV, c<span class="number">-1</span>) == <span class="number">10</span>)&#123; <span class="comment">// do后的语句</span></span><br><span class="line">                        <span class="built_in">linkUpV4</span>(<span class="built_in">getTC</span>(), <span class="built_in">to_string</span>(V4.<span class="built_in">size</span>()));</span><br><span class="line">                        cirS.<span class="built_in">push</span>(&#123;<span class="built_in">int</span>(S.<span class="built_in">size</span>()), <span class="number">9</span>, <span class="number">0</span>&#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span>(tmp == <span class="number">100</span>)&#123;     <span class="comment">// 起始符号</span></span><br><span class="line">                        cirS.<span class="built_in">push</span>(&#123;<span class="built_in">int</span>(S.<span class="built_in">size</span>()), <span class="number">0</span>, <span class="number">0</span>&#125;);   <span class="comment">// 始末标记</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span>(tmp == <span class="number">108</span>)&#123;     <span class="comment">// 赋值语句</span></span><br><span class="line">                        cirS.<span class="built_in">push</span>(&#123;<span class="built_in">int</span>(S.<span class="built_in">size</span>()), <span class="number">10</span>, <span class="number">0</span>&#125;);  </span><br><span class="line">                        rFlag = <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span>(tmp == <span class="number">121</span> &amp;&amp; rFlag)&#123;    <span class="comment">// 赋值语句后的变量</span></span><br><span class="line">                        cirS.<span class="built_in">push</span>(&#123;<span class="built_in">int</span>(S.<span class="built_in">size</span>()), <span class="number">11</span>, <span class="number">0</span>&#125;);</span><br><span class="line">                        rFlag = <span class="number">0</span>;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="built_in">getPush</span>(tmpV);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;    <span class="comment">// 终结符或空</span></span><br><span class="line">                    <span class="keyword">if</span>(!<span class="built_in">isEmpty</span>(tmp) &amp;&amp; tmp!=<span class="built_in">getMinus</span>(typeV, c))&#123;    <span class="comment">// 不为空才算语法错误</span></span><br><span class="line">                        <span class="comment">// printf(&quot;false with: %d (%d,%s)&quot;, tmp, typeV[c]-1, strV[c].c_str());</span></span><br><span class="line">                        <span class="built_in">printf</span>(<span class="string">&quot;syntax error.&quot;</span>);</span><br><span class="line">                        <span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="comment">// printf(&quot;true: (%d,%s)\n&quot;, typeV[c]-1, strV[c].c_str());</span></span><br><span class="line">                        <span class="keyword">if</span>(!<span class="built_in">isEmpty</span>(tmp))   <span class="comment">// 不为空才迭代</span></span><br><span class="line">                            ++c;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">                        vector&lt;<span class="type">int</span>&gt; tmpV = cirS.<span class="built_in">top</span>();  <span class="comment">// 取出顶部标识</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">getMinus</span>(typeV, c<span class="number">-1</span>) &gt;=<span class="number">24</span> &amp;&amp; <span class="built_in">getMinus</span>(typeV, c<span class="number">-1</span>) &lt;= <span class="number">29</span>)&#123;  <span class="comment">// 关系运算符</span></span><br><span class="line">                            opS.<span class="built_in">push</span>(<span class="built_in">getMinus</span>(typeV, c<span class="number">-1</span>));    <span class="comment">// 入栈</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">getMinus</span>(typeV, c<span class="number">-1</span>) == <span class="number">31</span> || <span class="built_in">getMinus</span>(typeV, c<span class="number">-1</span>) == <span class="number">32</span>)&#123; <span class="comment">// 逻辑运算符</span></span><br><span class="line">                            <span class="built_in">logicCheck</span>(<span class="built_in">getMinus</span>(typeV, c<span class="number">-1</span>));  <span class="comment">// 逻辑运算</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">getMinus</span>(typeV, c<span class="number">-1</span>) == <span class="number">30</span>)&#123;    <span class="comment">// 赋值号</span></span><br><span class="line">                            opS.<span class="built_in">push</span>(<span class="number">30</span>);   <span class="comment">// 赋值号入栈</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span>(S.<span class="built_in">size</span>() == tmpV[<span class="number">0</span>])&#123;    <span class="comment">// 若层数符合要求</span></span><br><span class="line">                            <span class="keyword">switch</span>(tmpV[<span class="number">1</span>])&#123;</span><br><span class="line">                                <span class="keyword">case</span> <span class="number">0</span>:&#123;</span><br><span class="line">                                    <span class="built_in">addV4</span>(&#123;<span class="string">&quot;ret&quot;</span>, <span class="string">&quot; &quot;</span>, <span class="string">&quot; &quot;</span>, <span class="string">&quot;0&quot;</span>&#125;);</span><br><span class="line">                                    <span class="keyword">break</span>;</span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="keyword">case</span> <span class="number">1</span>:&#123;    <span class="comment">// 条件语句</span></span><br><span class="line">                                    <span class="keyword">if</span>(!<span class="built_in">updatedChain</span>(<span class="built_in">getFC</span>()))&#123;     <span class="comment">// Falsechain未被连接说明if后没有else</span></span><br><span class="line">                                        <span class="built_in">linkUpV4</span>(<span class="built_in">getFC</span>(), <span class="built_in">to_string</span>(V4.<span class="built_in">size</span>()));</span><br><span class="line">                                    &#125;</span><br><span class="line">                                    <span class="built_in">delChain</span>();</span><br><span class="line">                                    <span class="keyword">break</span>;</span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="keyword">case</span> <span class="number">2</span>:&#123;   <span class="comment">// if后的关系表达式整理完毕</span></span><br><span class="line">                                    <span class="built_in">logicCheck</span>(<span class="number">0</span>);</span><br><span class="line">                                    <span class="keyword">break</span>;</span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="keyword">case</span> <span class="number">3</span>:&#123;    <span class="comment">// then后语句处理完毕</span></span><br><span class="line">                                    <span class="keyword">break</span>;</span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="keyword">case</span> <span class="number">4</span>:&#123;    <span class="comment">// 从else后语句中出来</span></span><br><span class="line">                                    <span class="comment">// 链接TrueChain</span></span><br><span class="line">                                    <span class="built_in">linkUpV4</span>(<span class="built_in">getTC</span>(), <span class="built_in">to_string</span>(V4.<span class="built_in">size</span>()));</span><br><span class="line">                                    <span class="keyword">break</span>;</span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="keyword">case</span> <span class="number">5</span>:&#123;    <span class="comment">// 子关系表达式结束</span></span><br><span class="line">                                    <span class="comment">// 处理关系运算</span></span><br><span class="line">                                    <span class="built_in">handleLogic</span>();</span><br><span class="line">                                    <span class="keyword">break</span>;</span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="keyword">case</span> <span class="number">6</span>:&#123;    <span class="comment">// 算术表达式结束</span></span><br><span class="line">                                    <span class="built_in">handleCalc</span>(tmpV[<span class="number">2</span>], c); <span class="comment">// 处理算术表达式</span></span><br><span class="line">                                    tFlag = <span class="number">1</span>;</span><br><span class="line">                                    <span class="keyword">break</span>;</span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="keyword">case</span> <span class="number">7</span>:&#123;    <span class="comment">// while语句</span></span><br><span class="line">                                    <span class="built_in">delChain</span>();</span><br><span class="line">                                    <span class="keyword">break</span>;</span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="keyword">case</span> <span class="number">8</span>:&#123;    <span class="comment">// while后的关系表达式结束</span></span><br><span class="line">                                    <span class="built_in">logicCheck</span>(<span class="number">0</span>);</span><br><span class="line">                                    <span class="keyword">break</span>;</span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="keyword">case</span> <span class="number">9</span>:&#123;    <span class="comment">// do后语句结束</span></span><br><span class="line">                                    <span class="type">int</span> wBeg = WS.<span class="built_in">top</span>();</span><br><span class="line">                                    WS.<span class="built_in">pop</span>();</span><br><span class="line">                                    <span class="built_in">addV4</span>(&#123;<span class="string">&quot;j&quot;</span>, <span class="string">&quot; &quot;</span>, <span class="string">&quot; &quot;</span>, <span class="built_in">to_string</span>(wBeg)&#125;);   </span><br><span class="line">                                    <span class="built_in">linkUpV4</span>(<span class="built_in">getFC</span>(), <span class="built_in">to_string</span>(V4.<span class="built_in">size</span>()));</span><br><span class="line">                                    <span class="keyword">break</span>;</span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="keyword">case</span> <span class="number">10</span>:&#123;   <span class="comment">// 赋值语句</span></span><br><span class="line">                                    string a, b;</span><br><span class="line">                                    <span class="type">int</span> tmpTp = opS.<span class="built_in">top</span>();</span><br><span class="line">                                    opS.<span class="built_in">pop</span>();</span><br><span class="line">                                    b = NS.<span class="built_in">top</span>();</span><br><span class="line">                                    NS.<span class="built_in">pop</span>();</span><br><span class="line">                                    a = NS.<span class="built_in">top</span>();</span><br><span class="line">                                    NS.<span class="built_in">pop</span>();</span><br><span class="line">                                    <span class="built_in">handleGive</span>(a, b, tmpTp);</span><br><span class="line">                                    <span class="keyword">break</span>;</span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="keyword">case</span> <span class="number">11</span>:&#123;   <span class="comment">// 赋值语句后的首个变量</span></span><br><span class="line">                                    NS.<span class="built_in">push</span>(strV[c<span class="number">-1</span>]);</span><br><span class="line">                                    <span class="keyword">break</span>;</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                            cirS.<span class="built_in">pop</span>();</span><br><span class="line">                            <span class="keyword">continue</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span>(S.<span class="built_in">size</span>() &lt; tmpV[<span class="number">0</span>])&#123;  <span class="comment">// 预留给内层的已失效，如对应if的else</span></span><br><span class="line">                            cirS.<span class="built_in">pop</span>();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// </span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// if(!S.empty()) printf(&quot;stack error&quot;);</span></span><br><span class="line">            <span class="comment">// if(c&lt;len) printf(&quot;vector error.&quot;);</span></span><br><span class="line">            <span class="comment">// printf(&quot;true&quot;);</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">getMinus</span><span class="params">(vector&lt;<span class="type">int</span>&gt; V, <span class="type">int</span> index)</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span> V[index] - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">getOut</span><span class="params">()</span></span>&#123;  <span class="comment">// 输出结果</span></span><br><span class="line">            <span class="type">int</span> len = V4.<span class="built_in">size</span>();</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;len; i++)&#123;</span><br><span class="line">                vector&lt;string&gt; tmp = V4[i];</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%d.(%s, %s, %s, %s)\n&quot;</span>, i, tmp[<span class="number">0</span>].<span class="built_in">c_str</span>(), tmp[<span class="number">1</span>].<span class="built_in">c_str</span>(), tmp[<span class="number">2</span>].<span class="built_in">c_str</span>(), tmp[<span class="number">3</span>].<span class="built_in">c_str</span>());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">updatedChain</span><span class="params">(<span class="type">int</span> idx)</span></span>&#123;     <span class="comment">// 检查if的FalseChain是否被连接过</span></span><br><span class="line">            string tmp = V4[idx][<span class="number">3</span>];</span><br><span class="line">            <span class="type">int</span> tmpN = <span class="built_in">stoi</span>(tmp);</span><br><span class="line">            <span class="keyword">if</span>(tmpN == <span class="number">-1</span> || tmpN == <span class="built_in">lastJ</span>(idx))&#123;     <span class="comment">// 指向空-1或前一个结点则认为未被连接</span></span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">logicCheck</span><span class="params">(<span class="type">int</span> k)</span></span>&#123;     <span class="comment">// 进行逻辑运算</span></span><br><span class="line">            <span class="type">int</span> k1, k2 = <span class="built_in">opl2Int</span>(k);</span><br><span class="line">            <span class="type">int</span> tmpVar;</span><br><span class="line">            <span class="keyword">while</span>(<span class="number">1</span>)&#123;   <span class="comment">// 执行前面的运算</span></span><br><span class="line">                k1 = <span class="built_in">opl2Int</span>(locOpS.<span class="built_in">top</span>());</span><br><span class="line">                <span class="keyword">if</span>(opl[k1][k2] != <span class="number">1</span>)</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                k1 = locOpS.<span class="built_in">top</span>();</span><br><span class="line">                tmpVar = locNS.<span class="built_in">top</span>();</span><br><span class="line">                locNS.<span class="built_in">pop</span>();</span><br><span class="line">                <span class="built_in">logicCalc</span>(tmpVar, k1);    <span class="comment">// 根据运算生成四元式</span></span><br><span class="line">                locOpS.<span class="built_in">pop</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(opp[k1][k2] == <span class="number">0</span>)&#123;    <span class="comment">// 等级相消</span></span><br><span class="line">                locOpS.<span class="built_in">pop</span>();</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(opp[k1][k2] == <span class="number">-1</span>)&#123;</span><br><span class="line">                locOpS.<span class="built_in">push</span>(k);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">lastJ</span><span class="params">(<span class="type">int</span> k)</span></span>&#123;   <span class="comment">// 关系表达式内的J跳转搜索</span></span><br><span class="line">            <span class="type">int</span> p = k<span class="number">-1</span>;</span><br><span class="line">            string tmp = V4[p][<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(tmp.<span class="built_in">substr</span>(<span class="number">0</span>, <span class="number">1</span>) == <span class="string">&quot;j&quot;</span>)&#123;    <span class="comment">// 检测到跳转语句</span></span><br><span class="line">                    <span class="keyword">return</span> p<span class="number">-1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                p -= <span class="number">1</span>;</span><br><span class="line">                tmp = V4[p][<span class="number">0</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;  <span class="comment">// error</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">logicCalc</span><span class="params">(<span class="type">int</span> loc, <span class="type">int</span> op)</span></span>&#123;   <span class="comment">// 逻辑运算</span></span><br><span class="line">            <span class="type">int</span> pre = <span class="built_in">lastJ</span>(loc), cur = loc;</span><br><span class="line">            <span class="keyword">switch</span>(op)&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">31</span>:&#123;   <span class="comment">// and</span></span><br><span class="line">                    <span class="built_in">backV4</span>(cur+<span class="number">1</span>);</span><br><span class="line">                    <span class="built_in">linkUpV4</span>(pre, <span class="built_in">to_string</span>(cur));</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">32</span>:&#123;   <span class="comment">// or</span></span><br><span class="line">                    <span class="built_in">backV4</span>(cur);</span><br><span class="line">                    <span class="built_in">linkUpV4</span>(pre+<span class="number">1</span>, <span class="built_in">to_string</span>(cur));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">handleGive</span><span class="params">(string a, string b, <span class="type">int</span> op)</span></span>&#123;</span><br><span class="line">            <span class="built_in">addV4</span>(&#123;<span class="string">&quot;=&quot;</span>, b, <span class="string">&quot; &quot;</span>, a&#125;);    <span class="comment">// 赋值语句</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">handleLogic</span><span class="params">()</span></span>&#123;     <span class="comment">// 处理关系运算式</span></span><br><span class="line">            string a, b;</span><br><span class="line">            <span class="type">int</span> tmpTp = opS.<span class="built_in">top</span>();</span><br><span class="line">            opS.<span class="built_in">pop</span>();</span><br><span class="line">            b = NS.<span class="built_in">top</span>();</span><br><span class="line">            NS.<span class="built_in">pop</span>();</span><br><span class="line">            a = NS.<span class="built_in">top</span>();</span><br><span class="line">            NS.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="built_in">opLogic</span>(a, b, tmpTp);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="function">string <span class="title">newOps</span><span class="params">()</span></span>&#123;    <span class="comment">// 迭代临时操作数</span></span><br><span class="line">            string tmp = <span class="string">&quot;T&quot;</span>;</span><br><span class="line">            tmp = tmp+<span class="built_in">to_string</span>(ops);</span><br><span class="line">            ops++;</span><br><span class="line">            <span class="keyword">return</span> tmp;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">op2Int</span><span class="params">(<span class="type">int</span> c)</span></span>&#123; <span class="comment">// 算术运算符转对应矩阵编号,-1表示异常</span></span><br><span class="line">            <span class="keyword">switch</span>(c)&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">20</span>:<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">21</span>:<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">22</span>:<span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">23</span>:<span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">54</span>:<span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">55</span>:<span class="keyword">return</span> <span class="number">5</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>:<span class="keyword">return</span> <span class="number">6</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">opl2Int</span><span class="params">(<span class="type">int</span> c)</span></span>&#123; <span class="comment">// 逻辑运算符转对应矩阵编号,-1表示异常</span></span><br><span class="line">            <span class="keyword">switch</span>(c)&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">31</span>:<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">32</span>:<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">54</span>:<span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">55</span>:<span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>:<span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">upChain</span><span class="params">(<span class="type">int</span> tC, <span class="type">int</span> fC)</span></span>&#123;     <span class="comment">// 更新最顶层的TC与FC，-1表示不更新</span></span><br><span class="line">            Chain tmp = CS.<span class="built_in">top</span>();</span><br><span class="line">            CS.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">if</span>(tC != <span class="number">-1</span>)&#123;    <span class="comment">// TC</span></span><br><span class="line">                tmp.tC = tC;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(fC != <span class="number">-1</span>)&#123;    <span class="comment">// FC</span></span><br><span class="line">                tmp.fC = fC;</span><br><span class="line">            &#125;</span><br><span class="line">            CS.<span class="built_in">push</span>(tmp);</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">addChain</span><span class="params">()</span></span>&#123;    <span class="comment">// 添加一层FC与TC</span></span><br><span class="line">            CS.<span class="built_in">push</span>(&#123;<span class="number">0</span>, <span class="number">0</span>&#125;);</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">delChain</span><span class="params">()</span></span>&#123;    <span class="comment">// 删除一层FC与TC</span></span><br><span class="line">            CS.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">getTC</span><span class="params">()</span></span>&#123;    <span class="comment">// 获取顶层TC</span></span><br><span class="line">            <span class="keyword">return</span> CS.<span class="built_in">top</span>().tC;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">getFC</span><span class="params">()</span></span>&#123;    <span class="comment">// 获取顶层FC</span></span><br><span class="line">            <span class="keyword">return</span> CS.<span class="built_in">top</span>().fC;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">opCalc</span><span class="params">(string a,string b,<span class="type">int</span> c)</span></span>&#123; <span class="comment">// 发生运算，记录四元式</span></span><br><span class="line">            string _ops = <span class="built_in">newOps</span>();</span><br><span class="line">            <span class="keyword">switch</span>(c)&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">20</span>:&#123;</span><br><span class="line">                    <span class="built_in">addV4</span>(&#123;<span class="string">&quot;+&quot;</span>, a, b, _ops&#125;);</span><br><span class="line">                    calcNS.<span class="built_in">push</span>(_ops);</span><br><span class="line">                    <span class="keyword">return</span> ;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">21</span>:&#123;</span><br><span class="line">                    <span class="built_in">addV4</span>(&#123;<span class="string">&quot;-&quot;</span>, a, b, _ops&#125;);</span><br><span class="line">                    calcNS.<span class="built_in">push</span>(_ops);</span><br><span class="line">                    <span class="keyword">return</span> ;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">22</span>:&#123;</span><br><span class="line">                    <span class="built_in">addV4</span>(&#123;<span class="string">&quot;*&quot;</span>, a, b, _ops&#125;);</span><br><span class="line">                    calcNS.<span class="built_in">push</span>(_ops);</span><br><span class="line">                    <span class="keyword">return</span> ;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">23</span>:&#123;</span><br><span class="line">                    <span class="built_in">addV4</span>(&#123;<span class="string">&quot;/&quot;</span>, a, b, _ops&#125;);</span><br><span class="line">                    calcNS.<span class="built_in">push</span>(_ops);</span><br><span class="line">                    <span class="keyword">return</span> ;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">opLogic</span><span class="params">(string a,string b,<span class="type">int</span> c)</span></span>&#123; <span class="comment">// 存在逻辑运算，记录四元式</span></span><br><span class="line">            <span class="type">int</span> tC, fC;</span><br><span class="line">            <span class="keyword">switch</span>(c)&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">24</span>:&#123;</span><br><span class="line">                    tC = <span class="built_in">addV4</span>(&#123;<span class="string">&quot;j&gt;&quot;</span>, a, b, <span class="string">&quot;-1&quot;</span>&#125;);    <span class="comment">// true指针</span></span><br><span class="line">                    fC = <span class="built_in">addV4</span>(&#123;<span class="string">&quot;j&quot;</span>, <span class="string">&quot; &quot;</span>, <span class="string">&quot; &quot;</span>, <span class="string">&quot;-1&quot;</span>&#125;);    <span class="comment">// false指针</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">25</span>:&#123;</span><br><span class="line">                    tC = <span class="built_in">addV4</span>(&#123;<span class="string">&quot;j&gt;=&quot;</span>, a, b, <span class="string">&quot;-1&quot;</span>&#125;);    <span class="comment">// true指针</span></span><br><span class="line">                    fC = <span class="built_in">addV4</span>(&#123;<span class="string">&quot;j&quot;</span>, <span class="string">&quot; &quot;</span>, <span class="string">&quot; &quot;</span>, <span class="string">&quot;-1&quot;</span>&#125;);    <span class="comment">// false指针</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">26</span>:&#123;</span><br><span class="line">                    tC = <span class="built_in">addV4</span>(&#123;<span class="string">&quot;j&lt;&quot;</span>, a, b, <span class="string">&quot;-1&quot;</span>&#125;);    <span class="comment">// true指针</span></span><br><span class="line">                    fC = <span class="built_in">addV4</span>(&#123;<span class="string">&quot;j&quot;</span>, <span class="string">&quot; &quot;</span>, <span class="string">&quot; &quot;</span>, <span class="string">&quot;-1&quot;</span>&#125;);    <span class="comment">// false指针</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">27</span>:&#123;</span><br><span class="line">                    tC = <span class="built_in">addV4</span>(&#123;<span class="string">&quot;j&lt;=&quot;</span>, a, b, <span class="string">&quot;-1&quot;</span>&#125;);    <span class="comment">// true指针</span></span><br><span class="line">                    fC = <span class="built_in">addV4</span>(&#123;<span class="string">&quot;j&quot;</span>, <span class="string">&quot; &quot;</span>, <span class="string">&quot; &quot;</span>, <span class="string">&quot;-1&quot;</span>&#125;);    <span class="comment">// false指针</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">28</span>:&#123;</span><br><span class="line">                    tC = <span class="built_in">addV4</span>(&#123;<span class="string">&quot;j=&quot;</span>, a, b, <span class="string">&quot;-1&quot;</span>&#125;);    <span class="comment">// true指针</span></span><br><span class="line">                    fC = <span class="built_in">addV4</span>(&#123;<span class="string">&quot;j&quot;</span>, <span class="string">&quot; &quot;</span>, <span class="string">&quot; &quot;</span>, <span class="string">&quot;-1&quot;</span>&#125;);    <span class="comment">// false指针</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">29</span>:&#123;</span><br><span class="line">                    tC = <span class="built_in">addV4</span>(&#123;<span class="string">&quot;j&lt;&gt;&quot;</span>, a, b, <span class="string">&quot;-1&quot;</span>&#125;);    <span class="comment">// true指针</span></span><br><span class="line">                    fC = <span class="built_in">addV4</span>(&#123;<span class="string">&quot;j&quot;</span>, <span class="string">&quot; &quot;</span>, <span class="string">&quot; &quot;</span>, <span class="string">&quot;-1&quot;</span>&#125;);    <span class="comment">// false指针</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">upChain</span>(tC, fC);    <span class="comment">// 更新Chain</span></span><br><span class="line">            <span class="keyword">if</span>(lFlag == <span class="number">1</span>)&#123; <span class="comment">// 首个不成对，不入栈</span></span><br><span class="line">                lFlag = <span class="number">0</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;    <span class="comment">// 入栈逻辑关系对: tC与tC-2</span></span><br><span class="line">                locNS.<span class="built_in">push</span>(tC);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">handleCalc</span><span class="params">(<span class="type">int</span> beg, <span class="type">int</span> end)</span></span>&#123;  <span class="comment">// 处理算术表达式</span></span><br><span class="line">            string _beg = strV[beg], _end = strV[end];</span><br><span class="line">            <span class="type">int</span> tmpTp;</span><br><span class="line">            string tmpStr;</span><br><span class="line">            calcOpS.<span class="built_in">push</span>(<span class="number">0</span>);    <span class="comment">// 起止符</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=beg; i&lt;end; i++)&#123;</span><br><span class="line">                tmpTp = <span class="built_in">getMinus</span>(typeV, i);</span><br><span class="line">                <span class="keyword">if</span>(tmpTp == <span class="number">50</span>) <span class="keyword">continue</span>;   <span class="comment">// 跳过分号</span></span><br><span class="line">                tmpStr = strV[i];</span><br><span class="line">                <span class="keyword">switch</span>(tmpTp)&#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">40</span>:&#123;   <span class="comment">// 整数</span></span><br><span class="line">                        calcNS.<span class="built_in">push</span>(tmpStr);    <span class="comment">// 推入操作数</span></span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">41</span>:&#123;   <span class="comment">// 浮点数</span></span><br><span class="line">                        calcNS.<span class="built_in">push</span>(tmpStr);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">44</span>:&#123;   <span class="comment">// 标识符</span></span><br><span class="line">                        calcNS.<span class="built_in">push</span>(tmpStr);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">20</span>:</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">21</span>:</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">22</span>:</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">23</span>:</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">54</span>:</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">55</span>:&#123;</span><br><span class="line">                        <span class="type">int</span> k1, k2 = <span class="built_in">op2Int</span>(tmpTp);</span><br><span class="line">                        string a, b;</span><br><span class="line">                        <span class="keyword">while</span>(<span class="number">1</span>)&#123;   <span class="comment">// 执行前面的运算</span></span><br><span class="line">                            k1 = <span class="built_in">op2Int</span>(calcOpS.<span class="built_in">top</span>());</span><br><span class="line">                            <span class="keyword">if</span>(opp[k1][k2] != <span class="number">1</span>)</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            k1 = calcOpS.<span class="built_in">top</span>();</span><br><span class="line">                            b = calcNS.<span class="built_in">top</span>();   <span class="comment">// 后运算符</span></span><br><span class="line">                            calcNS.<span class="built_in">pop</span>();</span><br><span class="line">                            a = calcNS.<span class="built_in">top</span>();   <span class="comment">// 前</span></span><br><span class="line">                            calcNS.<span class="built_in">pop</span>();</span><br><span class="line">                            <span class="built_in">opCalc</span>(a, b, k1);    <span class="comment">// 根据运算生成四元式</span></span><br><span class="line">                            calcOpS.<span class="built_in">pop</span>();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span>(opp[k1][k2] == <span class="number">0</span>)&#123;    <span class="comment">// 等级相消</span></span><br><span class="line">                            calcOpS.<span class="built_in">pop</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(opp[k1][k2] == <span class="number">-1</span>)&#123;</span><br><span class="line">                            calcOpS.<span class="built_in">push</span>(tmpTp);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            tmpTp = <span class="number">0</span>;</span><br><span class="line">            tmpStr = <span class="string">&quot;#&quot;</span>;</span><br><span class="line">            <span class="type">int</span> k1, k2 = <span class="built_in">op2Int</span>(tmpTp);</span><br><span class="line">            string a, b;</span><br><span class="line">            <span class="keyword">while</span>(<span class="number">1</span>)&#123;   <span class="comment">// 执行前面的运算</span></span><br><span class="line">                k1 = <span class="built_in">op2Int</span>(calcOpS.<span class="built_in">top</span>());</span><br><span class="line">                <span class="keyword">if</span>(opp[k1][k2] != <span class="number">1</span>)</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                k1 = calcOpS.<span class="built_in">top</span>();</span><br><span class="line">                b = calcNS.<span class="built_in">top</span>();   <span class="comment">// 后运算符</span></span><br><span class="line">                calcNS.<span class="built_in">pop</span>();</span><br><span class="line">                a = calcNS.<span class="built_in">top</span>();   <span class="comment">// 前</span></span><br><span class="line">                calcNS.<span class="built_in">pop</span>();</span><br><span class="line">                <span class="built_in">opCalc</span>(a, b, k1);    <span class="comment">// 根据运算生成四元式</span></span><br><span class="line">                calcOpS.<span class="built_in">pop</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(opp[k1][k2] == <span class="number">0</span>)&#123;    <span class="comment">// 等级相消</span></span><br><span class="line">                calcOpS.<span class="built_in">pop</span>();</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(opp[k1][k2] == <span class="number">-1</span>)&#123;</span><br><span class="line">                calcOpS.<span class="built_in">push</span>(tmpTp);</span><br><span class="line">            &#125;</span><br><span class="line">            tmpStr = calcNS.<span class="built_in">top</span>();</span><br><span class="line">            calcNS.<span class="built_in">pop</span>();</span><br><span class="line">            NS.<span class="built_in">push</span>(tmpStr);    <span class="comment">// 入关系运算操作数栈</span></span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">addV4</span><span class="params">(vector&lt;string&gt; V)</span></span>&#123;</span><br><span class="line">            V4.<span class="built_in">push_back</span>(V);</span><br><span class="line">            <span class="keyword">if</span>(V[<span class="number">0</span>] == <span class="string">&quot;j&quot;</span>)&#123;    <span class="comment">// 新添加语句是无条件跳转语句</span></span><br><span class="line">                <span class="keyword">while</span>(!tdS.<span class="built_in">empty</span>())&#123;    <span class="comment">// 待语句出现再回填</span></span><br><span class="line">                    pair&lt;<span class="type">int</span>, string&gt; tmp = tdS.<span class="built_in">top</span>();</span><br><span class="line">                    tdS.<span class="built_in">pop</span>();</span><br><span class="line">                    <span class="built_in">linkUpV4</span>(tmp.first, V[<span class="number">3</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;        <span class="comment">// 无用语句</span></span><br><span class="line">                <span class="keyword">while</span>(!tdS.<span class="built_in">empty</span>())&#123;    <span class="comment">// 待语句出现再回填</span></span><br><span class="line">                    pair&lt;<span class="type">int</span>, string&gt; tmp = tdS.<span class="built_in">top</span>();</span><br><span class="line">                    tdS.<span class="built_in">pop</span>();</span><br><span class="line">                    <span class="built_in">linkUpV4</span>(tmp.first, tmp.second);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> V4.<span class="built_in">size</span>()<span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">linkUpV4</span><span class="params">(<span class="type">int</span> idx, string dst)</span></span>&#123;    <span class="comment">// 按链条回填</span></span><br><span class="line">            string tmps = V4[idx][<span class="number">0</span>].<span class="built_in">substr</span>(<span class="number">0</span>, <span class="number">1</span>); </span><br><span class="line">            <span class="keyword">if</span>(tmps == <span class="string">&quot;j&quot;</span> &amp;&amp; <span class="built_in">stoi</span>(dst) &gt;= <span class="built_in">int</span>(V4.<span class="built_in">size</span>()))&#123;  <span class="comment">// 无条件跳转 且 跳转目标尚未确定 ——这种情况一般是下一条即将填写的语句就是目标语句</span></span><br><span class="line">                tdS.<span class="built_in">push</span>(&#123;idx, dst&#125;);</span><br><span class="line">                <span class="keyword">return</span> ;</span><br><span class="line">            &#125;</span><br><span class="line">            string s = V4[idx][<span class="number">3</span>], nul = <span class="string">&quot;-1&quot;</span>;</span><br><span class="line">            <span class="keyword">while</span>(s != nul)&#123;</span><br><span class="line">                <span class="built_in">upV4</span>(idx, <span class="number">3</span>, dst);</span><br><span class="line">                idx = <span class="built_in">lastJ</span>(idx);</span><br><span class="line">                s = V4[idx][<span class="number">3</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">upV4</span>(idx, <span class="number">3</span>, dst);</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">upV4</span><span class="params">(<span class="type">int</span> idx1, <span class="type">int</span> idx2, string dst)</span></span>&#123;  <span class="comment">// 单个修改</span></span><br><span class="line">            V4[idx1][idx2] = dst;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">backV4</span><span class="params">(<span class="type">int</span> idx)</span></span>&#123;</span><br><span class="line">            string s = V4[idx][<span class="number">3</span>], nul = <span class="string">&quot;-1&quot;</span>;</span><br><span class="line">            <span class="type">int</span> tmp;</span><br><span class="line">            <span class="keyword">if</span>(s == nul)&#123;   <span class="comment">// 值为空</span></span><br><span class="line">                tmp = <span class="built_in">lastJ</span>(idx);</span><br><span class="line">                <span class="built_in">upV4</span>(idx, <span class="number">3</span>, <span class="built_in">to_string</span>(tmp));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">linkUpV4</span>(<span class="built_in">lastJ</span>(idx), s);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    wordsAnalyzer *wA = <span class="keyword">new</span> <span class="built_in">wordsAnalyzer</span>(<span class="number">1</span>);</span><br><span class="line">    wA-&gt;<span class="built_in">printSplit</span>(<span class="string">&quot;Lexical Analysis&quot;</span>);</span><br><span class="line">    wA-&gt;<span class="built_in">analyze</span>();</span><br><span class="line">    semanticAnalyzer *sA = <span class="keyword">new</span> <span class="built_in">semanticAnalyzer</span>(wA-&gt;<span class="built_in">getTV</span>(), wA-&gt;<span class="built_in">getSV</span>());</span><br><span class="line">    sA-&gt;<span class="built_in">analyze</span>();</span><br><span class="line">    sA-&gt;<span class="built_in">getOut</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h2 id="问题解决"><a href="#问题解决" class="headerlink" title="问题解决"></a>问题解决</h2><h3 id="VSC-C-环境配置"><a href="#VSC-C-环境配置" class="headerlink" title="VSC C++环境配置"></a>VSC C++环境配置</h3><p>重新配置C++环境时，忘记配置编译器的环境变量，捣鼓了VSC的配置文件好久，发现了一些有意思的事。</p>
<p>编译连接C++的编译器是”g++.exe”，用于调试链接生成的可执行文件的是”gdb.exe”，在VSC中想要使用C++，一般需要先配置环境。</p>
<ol>
<li><p><code>Ctrl+Shift+P</code> 打开控制台，输入 “C&#x2F;C++: Edit Configurations (UI)”，进入配置页面，选择编译器路径为下载的MinGW中的”MinGW&#x2F;bin&#x2F;g++.exe”，选择IntelliSense模式为”windows-gcc-x64”。点击输入框外的地方vsc就会自动保存设置，并在当前文件夹下生成一个”.vscode”文件夹，里面会有一个”c_cpp_properties.json”文件，包含了C++的编译器配置。</p>
</li>
<li><p>“.vscode”下，”tasks.json”文件提供了编译链接CPP文件的设置，demo：</p>
<div class="highlight-container" data-rel="Json"><figure class="iseeu highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;tasks&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cppbuild&quot;</span><span class="punctuation">,</span>	</span><br><span class="line">        <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;C/C++: g++.exe build active file&quot;</span><span class="punctuation">,</span>		<span class="comment">// tasks的链接标签</span></span><br><span class="line">        <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;F:\\CPP\\MinGW\\bin\\g++.exe&quot;</span><span class="punctuation">,</span>			<span class="comment">// 输入g++的路径</span></span><br><span class="line">        <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">          <span class="string">&quot;-fdiagnostics-color=always&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="string">&quot;-g&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="string">&quot;$&#123;file&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="string">&quot;-o&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="string">&quot;$&#123;fileDirname&#125;\\$&#123;fileBasenameNoExtension&#125;.exe&quot;</span>	<span class="comment">// 链接所得的exe文件的位置</span></span><br><span class="line">        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;options&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;cwd&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;fileDirname&#125;&quot;</span>	<span class="comment">// 设置工作目录，它决定了代码中相对路径的起始路径</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span>							<span class="comment">// 即&quot;./&quot;所代表的位置</span></span><br><span class="line">        <span class="attr">&quot;problemMatcher&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;$gcc&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;group&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;kind&quot;</span><span class="punctuation">:</span> <span class="string">&quot;build&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;isDefault&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;detail&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Task generated by Debugger.&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2.0.0&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></div>

<p><code>$&#123;fileDirname&#125;</code> 表示源码所在文件夹的文件夹名称，带”&#x2F;“；<code>$&#123;fileBasenameNoExtension&#125;</code> 表示源码文件名，不带扩展名。</p>
<p>有该文件的情况下，配置了编译器的环境变量，则已经可以编译调试运行C++程序了。如果没有配置环境变量，将”cwd”设置为编译器所在文件夹，也能编译，因为这样vsc也能访问到g++来链接程序，但相对路径的起始位置将被捆绑为该文件夹，源码中将无法使用正确的相对路径，只能采用绝对路径。</p>
</li>
<li><p>“launch.json”文件提供了调试运行链接生成的可执行文件的设置，demo：</p>
<div class="highlight-container" data-rel="Json"><figure class="iseeu highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;configurations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;(gdb) 启动&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cppdbg&quot;</span><span class="punctuation">,</span>		</span><br><span class="line">        <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;program&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceFolder&#125;/$&#123;fileBasenameNoExtension&#125;.exe&quot;</span><span class="punctuation">,</span>	<span class="comment">// exe位置</span></span><br><span class="line">        <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;stopAtEntry&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;cwd&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;fileDirname&#125;&quot;</span><span class="punctuation">,</span>	<span class="comment">// 设置工作目录，即相对路径起始位置</span></span><br><span class="line">        <span class="attr">&quot;environment&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;externalConsole&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span>	<span class="comment">// 弹出外部shell——不便于看到历史调试记录</span></span><br><span class="line">        <span class="attr">&quot;MIMode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;gdb&quot;</span><span class="punctuation">,</span>			<span class="comment">// 虽然vsc的内部终端也会吞输出就是了</span></span><br><span class="line">        <span class="attr">&quot;miDebuggerPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;F:/CPP/MinGW/bin/gdb.exe&quot;</span><span class="punctuation">,</span>	<span class="comment">// 调试器gdb所在位置 	</span></span><br><span class="line">        <span class="attr">&quot;setupCommands&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;为 gdb 启用整齐打印&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;-enable-pretty-printing&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;ignoreFailures&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;将反汇编风格设置为 Intel&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;-gdb-set disassembly-flavor intel&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;ignoreFailures&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;preLaunchTask&quot;</span><span class="punctuation">:</span> <span class="string">&quot;C/C++: g++.exe build active file&quot;</span><span class="punctuation">,</span>	<span class="comment">// 要与tasks.json的</span></span><br><span class="line">    <span class="punctuation">&#125;</span>	<span class="comment">// label相对应，该配置才能正确被采用</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></div>

<p>该文件不是必要的，但它提供了更丰富的调试配置，通过”label”与”preLaunchTask”将链接与调试操作连接起来，依据配置文件依次执行。若某份源码在之前的编译中已经生成了exe文件，但在某次调试中编译出现问题，此时如果设置了弹出外部终端，则该源码的旧exe文件将会被执行，输出在shell中的部分由于闪退将不可得，但文件操作的留下痕迹的行为将正常保留。<br>当两个配置文件”cwd”冲突时，以”launch.json”的cwd为主。</p>
</li>
</ol>
<h3 id="C-数组操作"><a href="#C-数组操作" class="headerlink" title="C++数组操作"></a>C++数组操作</h3><h4 id="数组长度快速获取"><a href="#数组长度快速获取" class="headerlink" title="数组长度快速获取"></a>数组长度快速获取</h4><p>测试源码1：</p>
<div class="highlight-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getLen</span><span class="params">(<span class="type">int</span> *p)</span></span>&#123;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;sizeof(p) = &quot;</span>&lt;&lt;<span class="built_in">sizeof</span>(p)&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;sizeof(p[0]) = &quot;</span>&lt;&lt;<span class="built_in">sizeof</span>(p[<span class="number">0</span>])&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;p = &quot;</span>&lt;&lt;p&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;p[0] = &quot;</span>&lt;&lt;p[<span class="number">0</span>]&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sizeof</span>(p)/<span class="built_in">sizeof</span>(p[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> a[] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>&#125;;</span><br><span class="line">    <span class="type">int</span> lenth = <span class="built_in">getLen</span>(a);</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;len = &quot;</span>&lt;&lt;lenth;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>输出结果：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sizeof(p) = 8   </span><br><span class="line">sizeof(p[0]) = 4</span><br><span class="line">p = 0x61fe00</span><br><span class="line">p[0] = 1</span><br><span class="line">len = 2</span><br></pre></td></tr></table></figure></div>

<p>int类型的指针（或数组）长度结果默认为8，该结果固定。</p>
<p>测试源码2：</p>
<div class="highlight-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getLen</span><span class="params">(T &amp;p)</span></span>&#123;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;sizeof(p) = &quot;</span>&lt;&lt;<span class="built_in">sizeof</span>(p)&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;sizeof(p[0]) = &quot;</span>&lt;&lt;<span class="built_in">sizeof</span>(p[<span class="number">0</span>])&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;p = &quot;</span>&lt;&lt;p&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;p[0] = &quot;</span>&lt;&lt;p[<span class="number">0</span>]&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sizeof</span>(p)/<span class="built_in">sizeof</span>(p[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> a[] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>&#125;;</span><br><span class="line">    <span class="type">int</span> lenth = <span class="built_in">getLen</span>(a);</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;len = &quot;</span>&lt;&lt;lenth;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>运行结果：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sizeof(p) = 24  </span><br><span class="line">sizeof(p[0]) = 4</span><br><span class="line">p = 0x61fe00</span><br><span class="line">p[0] = 1</span><br><span class="line">len = 6</span><br></pre></td></tr></table></figure></div>

<p>可以成功获取到正确的长度，传入为引用时必须要设置为模板，否则不过编译。</p>
<p>当将a设置为指针时：</p>
<div class="highlight-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> *a = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">5</span>];</span><br></pre></td></tr></table></figure></div>

<p>运行结果：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sizeof(p) = 8   </span><br><span class="line">sizeof(p[0]) = 4</span><br><span class="line">p = 0x744150</span><br><span class="line">p[0] = 1</span><br><span class="line">len = 2</span><br></pre></td></tr></table></figure></div>

<p>也不能获取到正确的长度</p>
<h4 id="数组快速构造"><a href="#数组快速构造" class="headerlink" title="数组快速构造"></a>数组快速构造</h4><p>初始化数组时：</p>
<div class="highlight-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> a[] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>&#125;;</span><br></pre></td></tr></table></figure></div>

        </div>

        
            <div class="post-copyright-info w-full my-8 px-2 sm:px-6 md:px-8">
                <div class="article-copyright-info-container">
    <ul>
        <li><strong>Title:</strong> Compilation-Principle</li>
        <li><strong>Author:</strong> Forestsetyou</li>
        <li><strong>Created at
                :</strong> 2023-02-27 23:04:00</li>
        
            <li>
                <strong>Updated at
                    :</strong> 2023-08-03 18:08:00
            </li>
        
        <li>
            <strong>Link:</strong> https://forestsetyou.github.io/2023/02/27/Development/Algorithm/Compilation-Principle/
        </li>
        <li>
            <strong>
                License:
            </strong>
            

            
                This work is licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0">CC BY-NC-SA 4.0</a>.
            
        </li>
    </ul>
</div>

            </div>
        

        
            <ul class="post-tags-box text-lg mt-1.5 flex-wrap justify-center flex md:hidden">
                
                    <li class="tag-item mx-0.5">
                        <a href="/tags/Schoolwork/">#Schoolwork</a>&nbsp;
                    </li>
                
            </ul>
        

        

        
            <div class="article-nav my-8 flex justify-between items-center px-2 sm:px-6 md:px-8">
                
                    <div class="article-prev border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2">
                        <a class="prev"
                        rel="prev"
                        href="/2023/04/28/Security/CTF/BUUOJ%E2%80%94%E2%80%94WEB%EF%BC%88%E4%BA%8C%EF%BC%89/"
                        >
                            <span class="left arrow-icon flex justify-center items-center">
                                <i class="fa-solid fa-chevron-left"></i>
                            </span>
                            <span class="title flex justify-center items-center">
                                <span class="post-nav-title-item">BUUOJ——WEB（二）</span>
                                <span class="post-nav-item">Prev posts</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2">
                        <a class="next"
                        rel="next"
                        href="/2023/02/21/Development/Project/ComicCrawling/"
                        >
                            <span class="title flex justify-center items-center">
                                <span class="post-nav-title-item">ComicCrawling</span>
                                <span class="post-nav-item">Next posts</span>
                            </span>
                            <span class="right arrow-icon flex justify-center items-center">
                                <i class="fa-solid fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        


        
    </div>

    
        <div class="toc-content-container">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <div class="toc-title">On this page</div>
        <div class="page-title">Compilation-Principle</div>
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Lexical-Analysis"><span class="nav-text">Lexical Analysis</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Pascal%E7%89%88%E6%9C%AC"><span class="nav-text">Pascal版本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Z%E8%AF%AD%E8%A8%80%E7%89%88%E6%9C%AC"><span class="nav-text">Z语言版本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Tips"><span class="nav-text">Tips</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95%E6%BA%90%E7%A0%81"><span class="nav-text">测试源码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Grammar-Analysis"><span class="nav-text">Grammar Analysis</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#LL-1-%E6%96%87%E6%B3%95"><span class="nav-text">LL(1)文法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Semantic-Analysis"><span class="nav-text">Semantic Analysis</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#LL-1-%E6%96%87%E6%B3%95-1"><span class="nav-text">LL(1)文法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3"><span class="nav-text">问题解决</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#VSC-C-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"><span class="nav-text">VSC C++环境配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#C-%E6%95%B0%E7%BB%84%E6%93%8D%E4%BD%9C"><span class="nav-text">C++数组操作</span></a></li></ol></li></ol>

    </div>
</div>
        </div>
    
</div>



                

            </div>

            

        </div>

        <div class="main-content-footer">
            <footer class="footer mt-5 py-5 h-auto text-base text-third-text-color relative border-t-2 border-t-border-color">
    <div class="info-container py-3 text-center">
        
        <div class="text-center">
            &copy;
            
              <span>2024</span>
              -
            
            2024&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">Forestsetyou</a>
            
        </div>
        
        <div class="relative text-center lg:absolute lg:left-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-left">
            <span class="lg:block text-sm">POWERED BY <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg class="relative top-[2px] inline-block align-baseline" version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" class="text-base" href="https://hexo.io">Hexo</a></span>
            <span class="text-sm lg:block">THEME&nbsp;<a class="text-base" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.6.1</a></span>
        </div>
        
        
        
        
        
    </div>  
</footer>
        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="article-tools-list">
        <!-- TOC aside toggle -->
        
            <li class="right-bottom-tools page-aside-toggle">
                <i class="fa-regular fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-side-tools-container">
        <div class="side-tools-container">
    <ul class="hidden-tools-list">
        <li class="right-bottom-tools tool-font-adjust-plus flex justify-center items-center">
            <i class="fa-regular fa-magnifying-glass-plus"></i>
        </li>

        <li class="right-bottom-tools tool-font-adjust-minus flex justify-center items-center">
            <i class="fa-regular fa-magnifying-glass-minus"></i>
        </li>

        <li class="right-bottom-tools tool-dark-light-toggle flex justify-center items-center">
            <i class="fa-regular fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="right-bottom-tools tool-scroll-to-bottom flex justify-center items-center">
            <i class="fa-regular fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="visible-tools-list">
        <li class="right-bottom-tools toggle-tools-list flex justify-center items-center">
            <i class="fa-regular fa-cog fa-spin"></i>
        </li>
        
            <li class="right-bottom-tools tool-scroll-to-top flex justify-center items-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
        
    </ul>
</div>

    </div>

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fa-solid fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fa-solid fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>


    
<script src="/js/libs/Swup.min.js"></script>

<script src="/js/libs/SwupSlideTheme.min.js"></script>

<script src="/js/libs/SwupScriptsPlugin.min.js"></script>

<script src="/js/libs/SwupProgressPlugin.min.js"></script>

<script src="/js/libs/SwupScrollPlugin.min.js"></script>

<script src="/js/libs/SwupPreloadPlugin.min.js"></script>

<script>
    const swup = new Swup({
        plugins: [
            new SwupScriptsPlugin({
                optin: true,
            }),
            new SwupProgressPlugin(),
            new SwupScrollPlugin({
                offset: 80,
            }),
            new SwupSlideTheme({
                mainElement: ".main-content-body",
            }),
            new SwupPreloadPlugin(),
        ],
        containers: ["#swup"],
    });
</script>







<script src="/js/tools/imageViewer.js" type="module"></script>

<script src="/js/utils.js" type="module"></script>

<script src="/js/main.js" type="module"></script>

<script src="/js/layouts/navbarShrink.js" type="module"></script>

<script src="/js/tools/scrollTopBottom.js" type="module"></script>

<script src="/js/tools/lightDarkSwitch.js" type="module"></script>

<script src="/js/layouts/categoryList.js" type="module"></script>



    
<script src="/js/tools/localSearch.js" type="module"></script>




    
<script src="/js/tools/codeBlock.js" type="module"></script>




    
<script src="/js/layouts/lazyload.js" type="module"></script>






  
<script src="/js/libs/Typed.min.js"></script>

  
<script src="/js/plugins/typed.js" type="module"></script>









<div class="post-scripts" data-swup-reload-script>
    
        
<script src="/js/tools/tocToggle.js" type="module"></script>

<script src="/js/layouts/toc.js" type="module"></script>

<script src="/js/plugins/tabs.js" type="module"></script>

    
</div>


</body>
</html>
